AdatbÂ´nyÂ´szati algoritmusok a a
Dr. Bodon Ferenc 2008. februÂ´r 9. a

Copyright c 2002-2007 Dr. Bodon Ferenc Ezen dokumentum a Free Software Foundation altal kiadott GNU Free DoÂ´ cumentation license 1.2-es, vagy bÂ´rmely azt kÂ¨vetË verziÂ´jÂ´nak feltÂ´telei alapjÂ´n a o o oa e a mÂ´solhatÂ´, terjeszthetË Â´s/vagy mÂ´dosÂ´ a o o e o Ä±thatÂ´. Nincs Nem VÂ´ltoztathatÂ´ Szakasz, o a o nincs CÂ´mlap-szÂ¨veg, nincs HÂ´tlap-szÂ¨veg. A licenc magyar nyelË fordÂ´ asa a Ä± o a o u Ä±tÂ´ http ://hu.wikipedia.org/wiki/A GNU Szabad DokumentÂ´ciÂ´s Licenc szÂ¨vege a o o oldalon talÂ´lhatÂ´. a o

Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.2 (http://www.gnu.org/copyleft/fdl.html) or any later version published by the Free Software Foundation ; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts. A copy of the license is included in the section entitled â€GNU Free Documentation Licenseâ€.

KÂ¨szÂ¨netnyilvÂ´nÂ´ as o o a Ä±tÂ´
EzÂ´ ton szeretnÂ´k kÂ¨szÂ¨netet mondani RÂ´nyai Lajosnak, a Budapesti MË szaki Â´s Gazu e o o o u e dasÂ´gtudomÂ´nyi Egyetem tanÂ´rÂ´nak az egÂ´sz munka sorÂ´n nyÂ´ jtott segÂ´ egÂ´Â´rt, hasznos a a aa e a u Ä±tsÂ´ ee otleteiÂ´rt, utmutatÂ´saiÂ´rt, de legfËkÂ´ppen azÂ´rt, mert megismertetett az adatbÂ´nyÂ´szattal. Â¨ e Â´ a e o e e a a KÂ¨szÂ¨nÂ¨m MolnÂ´r-SÂ´ska GÂ´bornak,PintÂ´r MÂ´rtÂ´nak, SzabÂ´ JÂ´cintnak Â´s Fekete o o o a a a e a a o a e Zsoltnak az MTA-SZTAKI dolgozÂ´inak valÂ´szÂ´ usÂ´gszÂ´mÂ´ assal kapcsolatos tanÂ´csaikat. o o Ä±nË e a Ä±tÂ´ a KÂ¨szÂ¨nÂ¨m Buza KrisztiÂ´nnak hasznos megjegyzÂ´seit, otleteit, szemlÂ´letes pÂ´ldÂ´it Â´s a o o o a e Â¨ e e a e kidolgozott abrÂ´it amelyekkel hozzÂ´jÂ´rul a tanulmÂ´ny sikerÂ´hez. Â´ a aa a e KÂ¨ lÂ¨n kÂ¨szÂ¨net illeti Czibula VeronikÂ´t a tanulmÂ´ny tÂ¨bbszÂ¨ri, alapos atnÂ´zÂ´sÂ´Â´rt Â´s a uo o o a a o o Â´ e e ee e A felfedezett hibÂ´k kijavÂ´ asÂ´Â´rt. Marx DÂ´niel rengeteg informÂ´ciÂ´val lÂ´tott el a L TEX, emacs, a Ä±tÂ´ ae a a o a Xï¬g hatÂ´kony hasznÂ´latÂ´t illetËen. KÂ¨szÂ¨nÂ¨m neki a fÂ´radozÂ´sait. e a a o o o o a a Friedl KatÂ´nak, ifjabb BenczÂ´r AndrÂ´snak, LukÂ´cs AndrÂ´snak, Maricza a u a a a IstvÂ´nnak Â´s Bereczki TamÂ´snak kÂ¨szÂ¨nÂ¨m az Â´rtÂ´kes Â´szrevÂ´teleit, megjegyzÂ´seit. a e a o o o e e e e e Â´ ekes Â´szrevÂ´teleik Â´s konstruktÂ´ javaslataiÂ´rt kÂ¨szÂ¨net illeti a BME diÂ´kjait, tÂ¨bbek ErtÂ´ e e e Ä±v e o o a o kÂ¨zÂ¨tt (nÂ´vsorrendben) ErËs PÂ´tert, Fekete GÂ´bort, Hajnacs ZoltÂ´nt, LajkÂ´ PÂ´tert, Schlotter o o e o e a a o e IldikÂ´t, SzËke MÂ´nikÂ´t, Â´s Varga DÂ´nielt. o o o a e a

TartalomjegyzÂ´k e

ElËszÂ´ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . o o 1. BevezetÂ´s e 1.1. LegjelentËsebb adatbÂ´nyÂ´szati feladatok o a a 1.2. A tudÂ´sfeltÂ´rÂ´s folyamata . . . . . . . . a aa 1.3. AdatbÂ´nyÂ´szat kontra statisztika . . . . a a 1.4. Sikeres alkalmazÂ´sok . . . . . . . . . . . a 1.5. SzabvÂ´nyok . . . . . . . . . . . . . . . . a 1.6. AdatbÂ´nyÂ´szati rendszer architektÂ´ rÂ´ja . a a ua 1.7. AdatbÂ´nyÂ´szat Â´s az etika . . . . . . . . a a e 1.8. Az adatbÂ´nyÂ´szat feltÂ´telei . . . . . . . . a a e . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

2 4 6 8 11 13 16 17 18 20 22 22 24 24 25 25 25 26 26 27 27 28 28 28 29 30 30 30 33 33 34 34

2. Alapfogalmak, jelÂ¨lÂ´sek oe 2.1. Halmazok, relÂ´ciÂ´k, fÂ¨ ggvÂ´nyek, sorozatok a o u e 2.2. LineÂ´ris algebra . . . . . . . . . . . . . . . a 2.3. GrÂ´felmÂ´let . . . . . . . . . . . . . . . . . a e 2.4. Matematika logika . . . . . . . . . . . . . 2.5. ValÂ´szÂ´ usÂ´gszÂ´mÂ´ as . . . . . . . . . . . . o Ä±nË e a Ä±tÂ´ 2.5.1. Nevezetes eloszlÂ´sok . . . . . . . . a 2.5.2. FerdesÂ´g Â´s lapultsÂ´g . . . . . . . . e e a 2.5.3. EgyenlËtlensÂ´gek . . . . . . . . . . o e 2.5.4. EntrÂ´pia . . . . . . . . . . . . . . . o 2.6. Statisztika . . . . . . . . . . . . . . . . . . 2.6.1. HipotÂ´zisvizsgÂ´lat . . . . . . . . . . e a 2.6.2. Az F -prÂ´ba . . . . . . . . . . . . . o 2.6.3. A Ï‡2 -prÂ´ba . . . . . . . . . . . . . o 2.6.4. FÂ¨ ggetlensÂ´gvizsgÂ´lat . . . . . . . . u e a 2.7. Algoritmus-elmÂ´let . . . . . . . . . . . . . e 2.8. AdatstruktÂ´ rÂ´k . . . . . . . . . . . . . . . ua 2.8.1. SzÂ´fÂ´k . . . . . . . . . . . . . . . . oa 2.8.2. Piros-fekete fÂ´k . . . . . . . . . . . a 2.8.3. Hash-tÂ´bla . . . . . . . . . . . . . . a 2.9. SzÂ´mÂ´ ogÂ´p-architektÂ´ rÂ´k . . . . . . . . . a Ä±tÂ´ e ua 2.9.1. TÂ¨bbszintË memÂ´ria, adatlokalitÂ´s o u o a ii

2.9.2. CsËvezetÂ´kes feldolgozÂ´s, elÂ´gazÂ´s-elËrejelzÂ´s . . . . . . . . . . . . . . . . 35 o e a a a o e 3. ElËfeldolgozÂ´s, hasonlÂ´sÂ´gi fÂ¨ggvÂ´nyek o a o a u e 3.1. ElËfeldolgozÂ´s . . . . . . . . . . . . . . o a 3.1.1. HiÂ´nyzÂ´ Â´rtÂ´kek kezelÂ´se . . . . a oe e e 3.1.2. AttribÂ´ tum transzformÂ´ciÂ´k . . u a o 3.1.3. MintavÂ´telezÂ´s . . . . . . . . . . e e 3.2. HasonlÂ´sÂ´gi mÂ´rtÂ´kek . . . . . . . . . . oa e e 3.2.1. BinÂ´ris attribÂ´ tum . . . . . . . a u 3.2.2. KategÂ´ria tÂ´ u attribÂ´ tum . . o Ä±pusÂ´ u 3.2.3. Sorrend tÂ´ u attribÂ´ tum . . . Ä±pusÂ´ u 3.2.4. Intervallum tÂ´ u attribÂ´ tum . Ä±pusÂ´ u 3.2.5. Vegyes attribÂ´ tumok . . . . . . u 3.2.6. SpeciÂ´lis esetek . . . . . . . . . a 3.2.7. DimenziÂ´csÂ¨kkentÂ´s . . . . . . . o o e . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36 37 37 37 38 43 43 44 44 45 45 46 46 53 53 57 57 58 61 61 61 62 64 65 69 72 72 72 76 76 76 77 77 78 78 80 80 81 81

4. Gyakori elemhalmazok 4.1. A gyakori elemhalmaz fogalma . . . . . . . . . . . 4.2. Az APRIORI algoritmus . . . . . . . . . . . . . . 4.2.1. JelÂ¨ltek elËallÂ´ asa . . . . . . . . . . . . . o oÂ´ Ä±tÂ´ 4.2.2. JelÂ¨ltek tÂ´mogatottsÂ´gÂ´nak meghatÂ´rozÂ´sa o a a a a a 4.2.3. ZsÂ´kutca nyesÂ´s . . . . . . . . . . . . . . . a e 4.2.4. A bemenet tÂ´rolÂ´sa . . . . . . . . . . . . . a a 4.2.5. TranzakciÂ´k szË rÂ´se . . . . . . . . . . . . . o ue 4.2.6. Equisupport nyesÂ´s . . . . . . . . . . . . . e 4.2.7. Borgelt-fÂ´le tÂ´mogatottsÂ´g-meghatÂ´rozÂ´s . e a a a a 4.2.8. FutÂ´si idË Â´s memÂ´riaigÂ´ny . . . . . . . . . a oe o e 4.3. Az ECLAT algoritmus . . . . . . . . . . . . . . . 4.3.1. kdci . . . . . . . . . . . . . . . . . . . . . 4.3.2. lcm . . . . . . . . . . . . . . . . . . . . . . 4.4. Az FP-growth algoritmus . . . . . . . . . . . . 4.4.1. Az FP-growth* algoritmus . . . . . . . . . 4.4.2. Patricia . . . . . . . . . . . . . . . . . . . 4.5. Elavult technikÂ´k . . . . . . . . . . . . . . . . . . a 4.6. MintavÂ´telezË algoritmus elemzÂ´se . . . . . . . . . e o e 4.6.1. MintavÂ´tel nagysÂ´ga . . . . . . . . . . . . e a 4.7. Elemhalmazok Galois lezÂ´rja . . . . . . . . . . . . a 4.7.1. A zÂ´rt elemhalmazok fogalma . . . . . . . a 4.8. KÂ´nyszerek kezelÂ´se . . . . . . . . . . . . . . . . . e e 4.8.1. ExAnte . . . . . . . . . . . . . . . . . . . 4.9. TÂ¨bbszÂ¨rÂ¨s tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b . . . . . . . . o oo a a u o 4.9.1. MSApriori algoritmus . . . . . . . . . . . .

5. Gyakori mintÂ´k kinyerÂ´se a e 5.1. A gyakori minta deï¬nÂ´ oja . . . . . . . . . . . . . . Ä±ciÂ´ 5.1.1. HatÂ´konysÂ´gi kÂ´rdÂ´sek . . . . . . . . . . . . e a e e 5.2. TovÂ´bbi feladatok . . . . . . . . . . . . . . . . . . . a 5.2.1. Nem bËvÂ´ o Ä±thetË Â´s zÂ´rt mintÂ´k . . . . . . . . oe a a 5.2.2. KÂ´nyszerek kezelÂ´se . . . . . . . . . . . . . . e e 5.2.3. TÂ¨bbszÂ¨rÂ¨s tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b . . . . . o oo a a u o 5.2.4. Dinamikus gyakori mintakinyerÂ´s . . . . . . e 5.3. Az algoritmusok jellemzËi . . . . . . . . . . . . . . o 5.4. Az APRIORI mÂ´dszer . . . . . . . . . . . . . . . . o 5.4.1. JelÂ¨ltek elËallÂ´ asa . . . . . . . . . . . . . . o oÂ´ Ä±tÂ´ 5.4.2. ZÂ´rt mintÂ´k kinyerÂ´se, az APRIORI-CLOSE a a e 5.5. Sorozat tÂ´ u bemenet . . . . . . . . . . . . . . . . Ä±pusÂ´ 5.5.1. APRIORI . . . . . . . . . . . . . . . . . . . 5.5.2. Zaki mÂ´dszere . . . . . . . . . . . . . . . . . o 5.5.3. MintanÂ¨velË algoritmusok . . . . . . . . . . o o 5.5.4. KÂ´tlÂ´pcsËs technikÂ´k . . . . . . . . . . . . . e e o a 5.5.5. A zÂ´rt mintÂ´k tÂ¨rÂ´kenysÂ´geâ€ . . . . . . . . a a oe e â€ 5.5.6. Dinamikus gyakori mintabÂ´nyÂ´szat . . . . . a a

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . algoritmus . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . .

83 84 85 86 86 87 88 89 89 89 90 92 93 93 95 97 99 101 102

6. Gyakori sorozatok, bool formulÂ´k Â´s epizÂ´dok a e o 6.1. Gyakori sorozatok kinyerÂ´se . . . . . . . . . . . . . . e 6.1.1. A Gyakori Sorozat Fogalma . . . . . . . . . . 6.1.2. APRIORI . . . . . . . . . . . . . . . . . . . . 6.1.3. Elemhalmazokat tartalmazÂ´ gyakori sorozatok o 6.1.4. Sorozat tÂ´ u minta altalÂ´nosÂ´ asa . . . . . . Ä±pusÂ´ Â´ a Ä±tÂ´ 6.2. Gyakori bool formulÂ´k . . . . . . . . . . . . . . . . . a 6.3. Gyakori epizÂ´dok . . . . . . . . . . . . . . . . . . . . o 6.3.1. A tÂ´mogatottsÂ´g deï¬nÂ´ oja . . . . . . . . . . a a Ä±ciÂ´ 6.3.2. APRIORI . . . . . . . . . . . . . . . . . . . . 7. Gyakori fÂ´k Â´s feszÂ´ a e Ä±tett rÂ´szgrÂ´fok e a 7.1. Az izomorï¬a problÂ´mÂ´ja . . . . . e a 7.2. A gyakori grÂ´f fogalma . . . . . . a 7.3. gyakori gyÂ¨keres fÂ´k . . . . . . . o a 7.3.1. TreeMinerH . . . . . . . . 7.3.2. TreeMinerV . . . . . . . . 7.4. Gyakori rÂ´szfÂ´k . . . . . . . . . . e a 7.5. A gyakori feszÂ´ Ä±tett rÂ´szgrÂ´fok . . e a 7.5.1. Az AcGM algoritmus . . . 7.6. A gyakori rÂ´szgrÂ´fok keresÂ´se . . e a e 7.6.1. Az FSG algoritmus . . . . 7.6.2. gSpan . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

104 . 104 . 105 . 105 . 106 . 110 . 111 . 111 . 112 . 113 116 . 116 . 118 . 119 . 120 . 121 . 123 . 123 . 123 . 126 . 126 . 127

8. AsszociÂ´ciÂ´s szabÂ´lyok a o a 8.1. Az asszociÂ´ciÂ´s szabÂ´ly fogalma . . . . . . . . a o a 8.2. Hierarchikus asszociÂ´ciÂ´s szabÂ´lyok . . . . . . a o a 8.3. MaximÂ´lis kÂ¨vetkezmÂ´nyË asszociÂ´ciÂ´s szabÂ´ly a o e u a o a 8.3.1. Egzakt asszociÂ´ciÂ´s szabÂ´lyok bÂ´zisa . a o a a Â´ 8.4. ErdekessÂ´gi mutatÂ´k . . . . . . . . . . . . . . e o 8.5. A korrelÂ´ciÂ´ nem jelent implikÂ´ciÂ´t . . . . . . a o a o 9. FunkcionÂ´lis Â´s kÂ¨zelÂ´ o a e o Ä±tË 9.1. FunkcionÂ´lis fÂ¨ ggËsÂ´g a u oe 9.2. KÂ¨zelÂ´ o fÂ¨ ggËsÂ´g . . o Ä±tË u o e 9.3. TANE Algoritmus . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

130 . 131 . 132 . 133 . 134 . 135 . 144

fÂ¨ggËsÂ´gek u o e 147 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 148 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 148 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 149 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 155 . 155 . 156 . 157 . 158 . 159 . 159 . 160 . 162 . 164 . 165 . 165 . 167 . 168 . 169 . 171 . 172 . 173 . 173 . 175 . 176 . 177 . 177 . 177 . 179 . 180 . 181 . 183 . 183 . 184

10.OsztÂ´lyozÂ´s a a 10.1. BevezetÂ´s . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . e 10.2. Az osztÂ´lyozÂ´s feladata . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a a 10.3. LineÂ´risan szeparÂ´lhatÂ´ osztÂ´lyok . . . . . . . . . . . . . . . . . . . . . . . a a o a 10.3.1. Perceptron tanulÂ´si szabÂ´ly . . . . . . . . . . . . . . . . . . . . . . a a 10.3.2. Winnow mÂ´dszer . . . . . . . . . . . . . . . . . . . . . . . . . . . . o 10.3.3. Rocchio-eljÂ´rÂ´s . . . . . . . . . . . . . . . . . . . . . . . . . . . . . aa 10.4. k-legkÂ¨zelebbi szomszÂ´d mÂ´dszere . . . . . . . . . . . . . . . . . . . . . . . o e o 10.5. DÂ¨ntÂ´si szabÂ´lyok . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . o e a 10.5.1. SzabÂ´ly halmazok Â´s szabÂ´ly sorozatok . . . . . . . . . . . . . . . . a e a 10.5.2. DÂ¨ntÂ´si tÂ´blÂ´zatok . . . . . . . . . . . . . . . . . . . . . . . . . . . o e a a 10.5.3. Az 1R algoritmus . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10.5.4. A Prism mÂ´dszer . . . . . . . . . . . . . . . . . . . . . . . . . . . . o 10.6. DÂ¨ntÂ´si fÂ´k . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . o e a 10.6.1. DÂ¨ntÂ´si fÂ´k Â´s dÂ¨ntÂ´si szabÂ´lyok . . . . . . . . . . . . . . . . . . . . o e a e o e a 10.6.2. A dÂ¨ntÂ´si fa elËallÂ´ asa . . . . . . . . . . . . . . . . . . . . . . . . . o e oÂ´ Ä±tÂ´ 10.6.3. Az ID3 algoritmus . . . . . . . . . . . . . . . . . . . . . . . . . . . 10.6.4. FeltÂ´telek a csomÂ´pontokban . . . . . . . . . . . . . . . . . . . . . . e o 10.6.5. VÂ´gÂ´si fÂ¨ ggvÂ´nyek . . . . . . . . . . . . . . . . . . . . . . . . . . . a a u e 10.6.6. TovÂ´bbfejlesztÂ´sek . . . . . . . . . . . . . . . . . . . . . . . . . . . a e 10.6.7. SÂ´ lyozott divergenciafÂ¨ ggvÂ´nyek alapjÂ´n deï¬niÂ´lt vÂ´gÂ´si fÂ¨ ggvÂ´nyek u u e a a a a u e 10.6.8. DÂ¨ntÂ´si fÂ´k abrÂ´zolÂ´sa . . . . . . . . . . . . . . . . . . . . . . . . . o e a Â´ a a 10.6.9. Hanyag dÂ¨ntÂ´si fÂ´k . . . . . . . . . . . . . . . . . . . . . . . . . . . o e a 10.7. MestersÂ´ges neurÂ´lis hÂ´lÂ´zatok . . . . . . . . . . . . . . . . . . . . . . . . . e a ao 10.8. Bayesi hÂ´lÂ´zatok . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ao 10.9. EgyÂ´b mÂ´dszerek . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . e o 10.10. sztÂ´lyozÂ´k kiÂ´rtÂ´kelÂ´se . . . . . . . . . . . . . . . . . . . . . . . . . . . . O a o e e e Â´ 10.10.1.ErtekezÂ´s . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . e 10.10.2.Hiba mÂ´rÂ´se valÂ´szÂ´ usÂ´gi dÂ¨ntÂ´si rendszerek esetÂ´n . . . . . . . . . ee o Ä±nË e o e e 10.10.3.OsztÂ´lyozÂ´k hatÂ´konysÂ´gÂ´nak mutatÂ´szÂ´mai . . . . . . . . . . . . . a o e a a o a

11.KlaszterezÂ´s e 11.1. Egy lehetetlensÂ´g-elmÂ´let . . . . . . . . . . . . . . . . e e 11.2. HasonlÂ´sÂ´g mÂ´rtÂ´ke, adatÂ´brÂ´zolÂ´s . . . . . . . . . . oa e e a a a 11.3. A klaszterek jellemzËi . . . . . . . . . . . . . . . . . . o 11.4. A klaszterezÂ´s jÂ´sÂ´gaâ€ . . . . . . . . . . . . . . . . . e oa â€ 11.4.1. Klasszikus mÂ´rtÂ´kek . . . . . . . . . . . . . . e e 11.4.2. Konduktancia alapÂ´ mÂ´rtÂ´k . . . . . . . . . . u e e 11.5. KlaszterezË algoritmusok tÂ´ o Ä±pusai . . . . . . . . . . . . 11.6. ParticionÂ´lÂ´ eljÂ´rÂ´sok . . . . . . . . . . . . . . . . . . ao a a 11.6.1. Forgy k-kÂ¨zÂ´p algoritmusa . . . . . . . . . . . o e 11.6.2. A k-medoid algoritmusok . . . . . . . . . . . . 11.7. Hierarchikus eljÂ´rÂ´sok . . . . . . . . . . . . . . . . . aa 11.7.1. Single-, Complete-, Avegare Linkage EljÂ´rÂ´sok aa 11.7.2. Ward mÂ´dszere . . . . . . . . . . . . . . . . . o 11.7.3. A BIRCH algoritmus . . . . . . . . . . . . . . 11.7.4. A CURE algoritmus . . . . . . . . . . . . . . 11.7.5. A Chameleon algoritmus . . . . . . . . . . . . 11.8. SË rË sÂ´g-alapÂ´ mÂ´dszerek . . . . . . . . . . . . . . . . uue u o 11.8.1. A DBSCAN algoritmus . . . . . . . . . . . . . 12.IdËsorok elemzÂ´se o e

. . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . .

186 . 187 . 189 . 190 . 191 . 191 . 193 . 195 . 196 . 197 . 197 . 199 . 199 . 200 . 200 . 201 . 202 . 203 . 203 204

13.SzÂ¨vegbÂ´nyÂ´szat (Tikk Domonkos) o a a 13.1. Dokumentumok elËfeldolgozÂ´sa . . . . . . . . . . . . . . . . . . o a 13.1.1. A dimenziÂ´szÂ´m csÂ¨kkentÂ´se . . . . . . . . . . . . . . . . o a o e 13.1.2. HatÂ´konysÂ´g mÂ´rÂ´se . . . . . . . . . . . . . . . . . . . . e a ee 13.2. OsztÂ´lyozÂ´s . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a a 13.2.1. OsztÂ´lyozÂ´s strukturÂ´latlan kategÂ´riÂ´k rendszerÂ´be . . . a a a o a e 13.2.2. Hierarchikus osztÂ´lyozÂ´s . . . . . . . . . . . . . . . . . . a a 13.3. Dokumentumok csoportosÂ´ asa . . . . . . . . . . . . . . . . . . . Ä±tÂ´ 13.3.1. SzÂ¨vegklaszterezÂ´s jellemzË feladatai Â´s problÂ´mÂ´i . . . . o e o e e a 13.3.2. ReprezentÂ´ciÂ´ . . . . . . . . . . . . . . . . . . . . . . . . a o 13.3.3. HatÂ´konysÂ´g mÂ´rÂ´se . . . . . . . . . . . . . . . . . . . . e a ee 13.3.4. SzÂ¨vegklaszterezË eljÂ´rÂ´sok . . . . . . . . . . . . . . . . . o o aa 13.3.5. DokumentumgyË jtemÂ´nyek . . . . . . . . . . . . . . . . u e 13.4. KivonatolÂ´s . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 13.4.1. Az osszegzÂ´skÂ´szÂ´ o eljÂ´rÂ´sok felosztÂ´sa . . . . . . . . . . Â¨ e e Ä±tË a a a 13.4.2. A kivonatolÂ´s hatÂ´konysÂ´gÂ´nak mÂ´rÂ´se . . . . . . . . . . a e a a ee 13.4.3. MondatkivÂ´lasztÂ´snÂ´l hasznÂ´lt jellemzËk . . . . . . . . . a a a a o 13.5. A legfontosabb kivonatolÂ´ eljÂ´rÂ´sok . . . . . . . . . . . . . . . . o aa 13.5.1. A klasszikus mÂ´dszer . . . . . . . . . . . . . . . . . . . . o 13.5.2. TF-IDF alapÂ´ mÂ´dszer . . . . . . . . . . . . . . . . . . . u o 13.5.3. CsoportosÂ´ as alapÂ´ mÂ´dszerek . . . . . . . . . . . . . . Ä±tÂ´ u o 13.5.4. GrÂ´felmÂ´leti megkÂ¨zelÂ´ esek . . . . . . . . . . . . . . . . a e o Ä±tÂ´ 13.5.5. SVD hasznÂ´lata a kivonatolÂ´sban . . . . . . . . . . . . . a a 13.5.6. EsettanulmÂ´ny : bÂ¨ngÂ´szÂ´s tÂ´mogatÂ´sa kivonatolÂ´ssal kÂ´zi a o e e a a a e

205 . . . . . . . . . 206 . . . . . . . . . 208 . . . . . . . . . 210 . . . . . . . . . 210 . . . . . . . . . 211 . . . . . . . . . 217 . . . . . . . . . 220 . . . . . . . . . 221 . . . . . . . . . 221 . . . . . . . . . 222 . . . . . . . . . 222 . . . . . . . . . 224 . . . . . . . . . 225 . . . . . . . . . 225 . . . . . . . . . 227 . . . . . . . . . 227 . . . . . . . . . 228 . . . . . . . . . 228 . . . . . . . . . 229 . . . . . . . . . 230 . . . . . . . . . 231 . . . . . . . . . 232 szÂ´mÂ´ ogÂ´peken 232 a Ä±tÂ´ e

1 13.6. EgyÂ´b szÂ¨vegbÂ´nyÂ´szati feladatok . . . . . . . . . . . . . e o a a 13.6.1. InformÂ´ciÂ´kinyerÂ´s . . . . . . . . . . . . . . . . . a o e 13.6.2. TÂ´makÂ¨vetÂ´s . . . . . . . . . . . . . . . . . . . . e o e 13.6.3. FogalomtÂ´rsÂ´ as . . . . . . . . . . . . . . . . . . . a Ä±tÂ´ 13.6.4. SzÂ¨veges informÂ´ciÂ´k vizualizÂ´lÂ´sa . . . . . . . . . o a o aa 13.6.5. KÂ´rdÂ´s-megvÂ´laszolÂ´s . . . . . . . . . . . . . . . . e e a a 13.7. NyelvfeldolgozÂ´s Â´s szÂ¨vegbÂ´nyÂ´szat . . . . . . . . . . . . a e o a a 13.7.1. SzÂ¨vegbÂ´nyÂ´szat magyarul . . . . . . . . . . . . . o a a 13.8. LinkgyË jtemÂ´ny . . . . . . . . . . . . . . . . . . . . . . . u e 13.8.1. Tesztkorpuszok . . . . . . . . . . . . . . . . . . . 13.8.2. Cikk- Â´s linkgyË jtemÂ´nyek . . . . . . . . . . . . . e u e 13.8.3. SzÂ¨vegbÂ´nyÂ´szati szoftverek . . . . . . . . . . . . o a a 13.8.4. NÂ´hÂ´ny magyar vonatkozÂ´sÂ´ eredmÂ´ny Â´s projekt e a au e e . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 234 235 235 235 236 236 237 237 238 238 238 239 239 241 241 242 245 245 245 249 251 252 253 255 255 255 256 257 258 259 260 261 262

14.Webes adatbÂ´nyÂ´szat a a 14.1. Oldalak rangsorolÂ´sa . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 14.1.1. Az egyszerË Page Rank . . . . . . . . . . . . . . . . . . . . . . . . . . u 14.1.2. Az igazi Page Rank . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14.2. Webes keresÂ´s . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . e 14.2.1. GyË jtËlapok Â´s TekintÂ´lyek â€“ a HITS algoritmus . . . . . . . . . . . . u o e e 14.2.2. A SALSA mÂ´dszer (Jakabfy TamÂ´s) . . . . . . . . . . . . . . . . . . o a 14.2.3. GyË jtËlapok, TekintÂ´lyek Â´s vÂ´letlen sÂ´tÂ´k (Jakabfy TamÂ´s) . . . . . u o e e e ea a 14.2.4. Automatikus forrÂ´s elËallÂ´ o - GyË jtËlapok Â´s TekintÂ´lyek mÂ´dosÂ´ asai a oÂ´ Ä±tÂ´ u o e e o Ä±tÂ´ 14.2.5. GyË jtËlapok Â´s TekintÂ´lyek mÂ´dszerÂ´nek hÂ´trÂ´nyai . . . . . . . . . . u o e e o e a a 15.AdatbÂ´nyÂ´szat a gyakorlatban a a 15.1. FelhasznÂ´lÂ´si terÂ¨ letek . . . . . . . . . . . . . . . . . . . . . . . . . . . aa u 15.1.1. Az ugyfÂ´l Â´letciklusa . . . . . . . . . . . . . . . . . . . . . . . . Â¨ e e 15.1.2. Kereskedelem . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15.1.3. PÂ´nzÂ¨ gy . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . e u 15.1.4. BiolÂ´gia Â´s OrvostudomÂ´ny . . . . . . . . . . . . . . . . . . . . o e a 15.2. Az adatbÂ´nyÂ´szat bÂ¨lcsËje : az elektronikus kereskedelem (e-commerce) a a o o 15.3. AdatbÂ´nyÂ´sz szoftverek . . . . . . . . . . . . . . . . . . . . . . . . . . . a a 15.3.1. AdatbÂ´nyÂ´szati rendszerek tulajdonsÂ´gai . . . . . . . . . . . . . a a a 15.3.2. EsettanulmÂ´nyok rÂ¨viden . . . . . . . . . . . . . . . . . . . . . . a o . . . . . . . . . . . . . . . . . . . . . . . . . . .

FÂ¨ggelÂ´k u e 268 FÂ¨ ggelÂ´k A . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 268 u e

ElËszÂ´ o o

A 90-es Â´vekben a tÂ´rolÂ´kapacitÂ´sok mÂ´retÂ´nek igen erËteljes nÂ¨vekedÂ´se, valamint az arak e a o a e e o o e Â´ 1 nagymÂ´rtÂ´kË csÂ¨kkenÂ´se miatt az elektronikus eszkÂ¨zÂ¨k Â´s adatbÂ´zisok a hÂ´tkÂ¨znapi Â´letben is e e u o e o o e a e o e mind inkÂ´bb elterjedtek. Az egyszerË Â´s olcsÂ´ tÂ´rolÂ´si lehetËsÂ´gek a nyers, feldolgozatlan adatok a ue o a a oe tÂ¨meges mÂ´retË felhalmozÂ´sÂ´t eredmÂ´nyeztÂ´k, ezek azonban a kÂ¨zvetlen visszakeresÂ´sen Â´s elo e u aa e e o e e lenËrzÂ´sen kÂ´ ul nem sok egyÂ´b haszonnal jÂ´rtak. A ritkÂ´n lÂ´togatott adatokbÂ´l adat temetËkâ€ o e Ä±vÂ¨ e a a a o o â€ (data tombs) alakultak ki [73], amelyek tÂ´rolÂ´sa haszon helyett kÂ¨ltsÂ´get jelentett. Ekkor mÂ´g a a o e e nem alltak rendelkezÂ´sre olyan eszkÂ¨zÂ¨k, amivel az adatokba agyazott Â´rtÂ´kes informÂ´ciÂ´t ki Â´ e o o Â´ e e a o tudtak nyerni. KÂ¨vetkezÂ´skÂ´ppen a fontos dÂ¨ntÂ´sek a dÂ¨ntÂ´shozÂ´k megÂ´rzÂ´sein alapultak, nem o e e o e o e o e e pedig az informÂ´ciÂ´-gazdag adatokon. JÂ´l jellemzi ezt a helyzetet John Naisbitt hÂ´ mondÂ´sa, a o o Ä±res a miszerint We are drowning in information, but starving for knowledgeâ€ (Megfulladunk az â€ informÂ´ciÂ´tÂ´l, mikÂ¨zben tudÂ´sra Â´hezÂ¨ nk). a oo o a e u Egyre tÂ¨bb terÂ¨ leten merÂ¨ lt fel az igÂ´ny, hogy az adathalmazokbÂ´l a hagyomÂ´nyosnÂ´l o u u e o a a arnyaltabb szerkezetË informÂ´ciÂ´kat nyerjenek ki. A hagyomÂ´nyos adatbÂ´zis-kezelË rendszerek â€“ Â´ u a o a a o a kÂ¨zvetlen keresËkÂ´rdÂ´seken kÂ´ ul, illetve az alapvetË statisztikai funkciÂ´kon tÂ´ l (Â´tlag, szÂ´rÂ´s, o o e e Ä±vÂ¨ o o u a oa maximÂ´lis Â´s minimÂ´lis Â´rtÂ´kek meghatÂ´rozÂ´sa) â€“ komplexebb feladatokat egyÂ´ltalÂ´n nem tuda e a e e a a a a tak megoldani, vagy az eredmÂ´ny kiszÂ´mÂ´ asa elfogadhatatlanul hosszÂ´ idËbe telt. A szÂ¨ ksÂ´g e a Ä±tÂ´ u o u e egy uj tudomÂ´nyterÂ¨ letet keltett Â´letre, az adatbÂ´nyÂ´szatot, amelynek cÂ´lja : hasznos, lÂ´tens Â´ a u e a a e a â€ informÂ´ciÂ´ kinyerÂ´se az adatokbÂ´lâ€. Az adatbÂ´nyÂ´szati algoritmusokat immÂ´r arra terveztÂ´k, a o e o a a a e hogy kÂ´pesek legyenek az arnyaltabb informÂ´ciÂ´ kinyerÂ´sÂ´re akÂ´r oriÂ´si mÂ´retË adatbÂ´zisok e Â´ a o ee a Â´ a e u a esetÂ´n is. e Az adatbÂ´nyÂ´szat, mint onÂ´llÂ´ tudomÂ´nyterÂ¨ let lÂ´tezÂ´sÂ´rËl az 1980-as Â´vek vÂ´gÂ´tËl a a Â¨ a o a u e eeo e e eo beszÂ´lhetÂ¨ nk. Kezdetben a kÂ¨ lÂ¨nbÂ¨zË heurisztikÂ´k, a matematikailag nem elemzett algorite u uo o o a musok dominÂ´ltak. A 90-es Â´vekben megjelent cikkek tÂ¨bbsÂ´gÂ´t legfeljebb elhinni lehetett, de a e o e e semmikÂ´ppen sem kÂ´tely nÂ´lkÂ¨ l meggyËzËdni az egyes Â´ asok helytÂ´llÂ´sÂ´gÂ´rÂ´l. Az algoritmusok e e e u o o Ä±rÂ´ a oa ao futÂ´si idejÂ´rËl Â´s memÂ´riaigÂ´nyÂ´rËl altalÂ´ban felszÂ´ a eo e o e eo Â´ a Ä±nes elemzÂ´seket Â´s tesztelÂ´si eredmÂ´nyeket e e e e olvashattunk. Az igÂ´nyes olvasÂ´ban mindig maradt egy-kÂ´t kÂ´rdÂ´s, amire emlÂ´ es szintjÂ´n sem e o e e e Ä±tÂ´ e talÂ´lt vÂ´laszt. Bizonyos kÂ´osz uralkodott, amiben lÂ´tszÂ´lag mindenre volt megoldÂ´s, am ezek a a a a a o a Â´ megoldÂ´sok tÂ¨bbnyire rÂ´szlegesek voltak, tele a legkÂ¨ lÂ¨nbÂ¨zËbb hibÂ´kkal. a o e uo o o a A XXI. szÂ´zadba valÂ´ belÂ´pÂ´ssel a kutatÂ´k kÂ¨rÂ´ben egyre nagyobb nÂ´pszerË sÂ´gnek kezdett a o e e o oe e ue orvendeni az adatbÂ´nyÂ´szat. Ennek kÂ´t oka van. EgyrÂ´szt a nÂ¨vekvË versenyhelyzet miatt a Â¨ a a e e o o piaci Â´let szereplËinek oriÂ´si az igÂ´nye az adatbÂ´zisokban megbÂ´ jÂ´ hasznos informÂ´ciÂ´kra. A e o Â´ a e a uo a o
A tÂ´rolÂ´kapacitÂ´s nÂ¨vekedÂ´se mÂ´g Moore jÂ´slatÂ´t is jÂ´cskÂ´n felÂ¨lmÂ´lja. Az utÂ´bbi 15 Â´v alapjÂ´n ugyanis a a o a o e e o a o a u u o e a tÂ´rolÂ´kapacitÂ´s 9 hÂ´naponkÂ´nt duplÂ´zÂ´dik meg [137] a o a o e a o
1

2

3 nÂ¨vekvË igÂ´ny nÂ¨vekvË kutatÂ´i beruhÂ´zÂ´sokat indukÂ´lt. MÂ´srÂ´szt, az adatbÂ´nyÂ´szat a maga o o e o o o a a a a e a a nehÂ´zsÂ´gÂ´vel, multi-diszciplinÂ´ris voltÂ´val a kutatni, gondolkodni Â´s ujszerË problÂ´mÂ´kat mege e e a a e Â´ u e a oldani vÂ´gyÂ´ igÂ´nyÂ´t tÂ¨kÂ´letesen kielÂ´gÂ´ a o e e o e e Ä±ti. Sorra szÂ¨ lettek meg a szÂ´ u Ä±nvonalas munkÂ´k, elemzÂ´sek, osszehasonlÂ´ asok, mint tiszta a e Â¨ Ä±tÂ´ irÂ´nyvonalak rajzolÂ´dtak ki a kÂ´oszban. A megoldatlan, nyitott problÂ´mÂ´kra mÂ´g mindig kea o a e a e ressÂ¨ k a vÂ´laszt, Â´ valÂ´szÂ´ uleg az adatbÂ´nyÂ´szat diadalmenete mÂ´g sokÂ´ig tÂ¨retlen marad. u a Ä±gy o Ä±nË a a e a o Ez a jegyzet a jelenlegi adatbÂ´nyÂ´szati problÂ´mÂ´krÂ´l Â´s az azokat megoldÂ´ algoritmusokrÂ´l a a e a o e o o szÂ´l. A terÂ¨ letek attekintÂ´se mellett az algoritmusok mÂ´lyebb szintË megismerÂ´se is a cÂ´l. Az o u Â´ e e u e e Â´ as informatikus beÂ´llÂ´ Ä±rÂ´ a Ä±tottsÂ´gÂ´ olvasÂ´knak kÂ´szÂ¨ lt. FeltÂ´telezzÂ¨ k, hogy az olvasÂ´ tisztÂ´ban van a u o e u e u o a algoritmus- [101] Â´s adatbÂ´zis-elmÂ´leti alapokkal, tovÂ´bbÂ´ nem ismeretlen terÂ¨ let szÂ´mÂ´ra a e a e a a u a a valÂ´szÂ´ usÂ´gszÂ´mÂ´ as [9, 57] Â´s a lineÂ´ris algebra [143] sem. o Ä±nË e a Ä±tÂ´ e a A jegyzet cÂ´lja az, hogy az adatbÂ´nyÂ´szati apparÂ´tus olyan megismerÂ´sÂ´t nyÂ´ jtsa, melynek e a a a ee u segÂ´ egÂ´vel az olvasÂ´ sikerrel oldja meg az egyre tÂ¨bb terÂ¨ leten felbukkanÂ´ ujabb Â´s ujabb Ä±tsÂ´ e o o u o Â´ e Â´ adatbÂ´nyÂ´szati problÂ´mÂ´kat. Algoritmikus adatbÂ´nyÂ´szatrÂ´l Â´ a a e a a a o Ä±runk, ezÂ´rt azon mestersÂ´ges ine e telligencia terÂ¨ letÂ´hez tartozÂ´ eszkÂ¨zÂ¨k (mestersÂ´ges neurÂ´lis hÂ´lÂ´zatok, genetikus algoritmusok u e o o o e a ao Â´s fuzzy rendszerek), amelyekrËl azt tartjÂ´k, hogy az adatbÂ´nyÂ´szatban is hasznÂ´lhatÂ´k, kevÂ´s e o a a a a o e hangsÂ´ lyt kapnak. u A jegyzet legfrissebb vÂ´ltozata letÂ¨lthetË a a o o http://www.cs.bme.hu/~bodon/magyar/adatbanyaszat cÂ´ Ä±men talÂ´lhatÂ´ oldalrÂ´l. a o o A jegyzet nem vÂ´gleges ! Folyamatosan bËvÂ¨ l, vÂ´ltozik. Egyes rÂ´szek kisebb sÂ´ lyt kapnak, e o u a e u Â¨ o mÂ´sok viszont jobban rÂ´szletezettek. OrÂ¨mmel fogadok bÂ´rmilyen Â´szrevÂ´telt, javaslatot akÂ´r a e a e e a helyesÂ´ asi, stilisztikai vagy tipogrÂ´ï¬ai hibÂ´ra vonatkozÂ´an. Ezeket kÂ´rnÂ´m, hogy a Ä±rÂ´ a a o e e bodon@cs.bme.hu cÂ´ Ä±mre kÂ¨ ldjÂ´k. u e Az Â´ as L TEX-ben kÂ´szÂ¨ lt, eleinte a kile, kÂ´sËbbiekben az emacs szÂ¨vegszerkesztË Ä±rÂ´ A e u eo o o segÂ´ egÂ´vel. Egyes abrÂ´k Xï¬g-el, mÂ´sok a pst-node csomaggal lettek rajzolva. Az egÂ´sz Ä±tsÂ´ e Â´ a a e munkÂ´hoz az UHU-linux operÂ´ciÂ´s rendszer (http://www.uhulinux.hu) nyÂ´ jtotta a stabil Â´s a a o u e biztonsÂ´gos hÂ´tteret. a a

AjÂ´nlott irodalom a
AdatbÂ´nyÂ´sz tÂ´mÂ´ban az elsË magyar nyelvË kÂ¨nyv Pieter Adriaans and Dolf Zantinge a a e a o u o AdatbÂ´nyÂ´szatâ€ cÂ´ u kÂ¨nyve [2] volt. MÂ´ra a kÂ¨nyv elavult ezÂ´rt nem ajÂ´nljuk senkinek. 2004a a Ä±mË o a o e a â€ Â´ Â´ ben jelent meg a magyar nyelvË fordÂ´ asa [72], ADATBANYASZAT â€“ KoncepciÂ´k Â´s technikÂ´k u Ä±tÂ´ o e a cÂ´ Ä±mmel Jiawei Han Â´s Micheline Kamber nagy sikerË kÂ¨nyvÂ´nek [73]. AzÂ´ta megjelent az angol e u o e o nyelË kÂ¨nyv mÂ´sodik kiadÂ´sa, ezÂ´rt ha tehetjÂ¨ k inkÂ´bb ezt olvassuk. u o a a e u a A legjobb magyar nyelvË adatbÂ´nyÂ´szatrÂ´l szÂ´lÂ´ kÂ¨nyvnek a Dr. Abonyi JÂ´nos altal szeru a a o oo o a Â´ kesztett AdatbÂ´nyÂ´szat a hatÂ´konysÂ´g eszkÂ¨zeâ€ cÂ´ u kÂ¨nyvet [87] tekintjÂ¨ k. Remek kia a e a o Ä±mË o u â€ egÂ´szÂ´ ese a jelen tanulmÂ´nynak. A kÂ¨nyvben helyet kapnak olyan tÂ´mÂ´k, amelyekrËl ebben e Ä±tÂ´ a o e a o a tanulmÂ´nyban nem esik szÂ´ (pl. adattÂ´rhÂ´zak, idËsorok, regressziÂ´s technikÂ´k) habÂ´r fontos a o a a o o a a lenne. Nagyon hasznos, hogy a mÂ´dszerek bemutatÂ´sa utÂ´n a szerzËk kitÂ´rnek arra, hogy a o a a o e weka szoftvert hogyan kell beÂ´llÂ´ a Ä±tani a mÂ´dszer hasznÂ´latÂ´hoz. o a a

1. fejezet BevezetÂ´s e
A szÂ´mÂ´ ogÂ´p, korunk legdicsËbb talÂ´lmÂ´nya, rohamlÂ´ptekkel hÂ´dÂ´ teret magÂ´nak az Â´let a Ä±tÂ´ e o a a e o Ä±t a e minden terÂ¨ letÂ´n. Egy generÂ´ciÂ´ alatt nÂ´lkÂ¨ lÂ¨zhetetlennÂ´ vÂ´lt, amit szÂ¨ leink mÂ´g el sem tudtak u e a o e uo e a u e kÂ´pzelni, szÂ´munkra mÂ´r elvÂ´laszthatatlannÂ´ vÂ´lt munkÂ´nktÂ´l Â´s szÂ´rakozÂ´sunktÂ´l egyarÂ´nt. e a a a a a a o e o a o a Az Internet elterjedÂ´sÂ´vel mÂ´g intenzÂ´ ee e Ä±vebben Â´rzÂ´kelhetË a szÂ´mÂ´ ogÂ´p tÂ´rhÂ´dÂ´ asa. A e e o a Ä±tÂ´ e e o Ä±tÂ´ vilÂ´gon az egyik legnagyobb problÂ´mÂ´t, a tÂ´volsÂ´got hidalta at. Uzleti Â´s magÂ´ncÂ´lÂ´ Â´rintkezÂ´sek a e a a a Â´ Â¨ e a eue e vÂ´ltak lehetËvÂ´ rÂ¨videbb idË alatt Â´s hatÂ´konyabban, mint valaha. Adatok milliÂ´it kezelik Â´s a o e o o e e o e szÂ´llÂ´ ak a szÂ´mÂ´ ogÂ´pes rendszerek. Az informÂ´ciÂ´kon alapulÂ´ dÂ¨ntÂ´shozatal ideje lerÂ¨vidÂ¨ lt, a Ä±tjÂ´ a Ä±tÂ´ e a o o o e o u hiszen a hozzÂ´fÂ´rÂ´s kÂ¨nnyebbÂ´ Â´s gyorsabbÂ´ vÂ´lt. Az uzleti Â´let szereplËinek Â´lete is felgyorsult. aee o ee a a Â¨ e o e Ma a vÂ´llalatok lÂ´te mÂ´ lhat az informÂ´ciÂ´k gyors Â´s a e u a o e pontos begyË jtÂ´sÂ´n, elemzÂ´sÂ´n, a rugalmas fejlËdÂ´sen, vau ee ee o e Az angol tudÂ´sok azt o â€ lamint az innovÂ´ciÂ´n. Egyre tÂ¨bb felsË vezetË ismeri fel, allapÂ´tottÂ´k meg, hogy aki a o o o o Â´ Ä± a hogy az Internet, az adatok elektronikus tÂ´rolÂ´sa a vÂ´llalat sokat jÂ´r disco-ba, annak naa a a a szolgÂ´latÂ´ba allÂ´ a a Â´ Ä±thatÂ´. Az adatok azonban onmagukban nem gyobb valÂ´szÂ´nËsÂ´ggel alakul ki o Â¨ o Ä± u e hasznosak, hanem a belËlÂ¨ k kinyerhetË, a vÂ´llalat igÂ´nyeihez asztmÂ´ja.â€ ForrÂ´s : SlÂ´ger rÂ´diÂ´, ou o a e a a a a o igazodÂ´, azt kielÂ´gÂ´ o informÂ´ciÂ´kra lenne szÂ¨ ksÂ´g. Ez egy 2007. oktÂ´ber 2., 8 ora 26 perc o e Ä±tË a o u e o Â´ ujabb szÂ¨ ksÂ´gletet teremt : egy olyan eszkÂ¨z irÂ´nti igÂ´nyt, Â´ u e o a e ami kÂ´pes arra, hogy informÂ´ciÂ´szerzÂ´s cÂ´ljÂ´bÂ´l elemezze a e a o e e a o nyers adatokat. Ez az uj eszkÂ¨z az adatbÂ´nyÂ´szat. Â´ o a a AdatbÂ´nyÂ´szati (data mining) algoritmusokat az adatbÂ´zisbÂ´l tÂ¨rtÂ´nË tudÂ´sfeltÂ´rÂ´s (knowa a a o o e o a aa ledge discovery in databases) sorÂ´n alkalmaznak. A tudÂ´skinyerÂ´s adatbÂ´zisokbÂ´l egy olyan a a e a o folyamat, melynek sorÂ´n Â´rvÂ´nyes, ujszerË , lehetËleg hasznos Â´s vÂ´gsË soron Â´rthetË mintÂ´kat a e e Â´ u o e e o e o a fedezÂ¨ nk fel az adatokban. Ezt gyakran megtehetjÂ¨ k kÂ¨ lÂ¨nbÂ¨zË lekÂ´rdezÂ´sek eredmÂ´nyeinek u u uo o o e e e vizsgÂ´latÂ´val, azonban ez a megoldÂ´s lassÂ´ , drÂ´ga Â´s nem elÂ´g atfogÂ´. Nem is beszÂ´lve arrÂ´l, a a a u a e e Â´ o e o hogy az emberi szubjektivitÂ´s sokszor hibÂ´s, tovÂ´bbÂ´ az adatbÂ´zisok olyan nagyok lehetnek, a a a a a hogy egyes lekÂ´rdezÂ´sek elfogadhatatlanul lassan futnak le. Jogos tehÂ´t az igÂ´ny, hogy a lege e a e ismertebb, leggyakoribb elemzÂ´stÂ´ e Ä±pusokhoz speciÂ´lis mÂ´dszereket, algoritmusokat fejlesszenek a o ki, amelyek gyorsan Â´s pontosan szolgÂ´ltatnak egy objektÂ´ kÂ´pet az adatbÂ´zisokban talÂ´lhatÂ´ e a Ä±v e a a o kincsrËlâ€. o â€ SokfÂ´lekÂ´ppen deï¬niÂ´ltÂ´k az adatbÂ´nyÂ´szatot. Felsorolunk nÂ´hÂ´nyat a legismertebbek kÂ¨zÂ¨ l e e a a a a e a o u kiemelve a kulcsszavakat : â€“ The nontrivial extraction of implicit, previously unknown, and potentially useful inforâ€ mation from dataâ€ (Piatetsky Shapiro) 4

Â´ 1. FEJEZET. BEVEZETES Heurisztika Statisztika Algoritmus elm. AdatbÂ´zis elm. a GrÂ´felmÂ´let a e LineÂ´ris alg. a
? - GÂ´pi e

5

tanulÂ´s  a

MestersÂ´ges Intelligencia e
? 6

?

Matematika
-6 -

-

AlkalmazÂ´s  a

Â¨ Uzlet Marketing BiolÂ´gia o TelekommunikÂ´ciÂ´ a o CsillagÂ´szat a

VizualizÂ´ciÂ´ a o

?

AdatbÂ´nyÂ´szat a a 1.1. abra. Az adatbÂ´nyÂ´szat kialakulÂ´sa Â´ a a a â€“ . . . the automated or convenient extraction of patterns representing knowledge implicitly â€ stored or captured in large databases, data warehouses, the Web, . . . or data streams.â€ (Han [73], xxi oldal) â€“ . . . the process of discovering patterns in data. The process must be automatic or (more â€ usually) semiautomatic. The patterns discovered must be meaningful. . . â€ (Witten [183], 5. oldal) â€“ . . . ï¬nding hidden information in a database.â€ (Dunham [48], 3. oldal) â€ â€“ . . . the process of employing one or more computer learning techniques to automatically â€ analyze and extract knowledge from data contained within a database.â€ (Roiger, 4. oldal) Egyesek szerint az adatbÂ´nyÂ´szat, mint megnevezÂ´s nÂ´mikÂ´pp szerencsÂ´tlen [72] . Ha a a e e e e szÂ´nbÂ´nyÂ´szatrÂ´l beszÂ´lÂ¨ nk, a szÂ´n bÂ´nyÂ´szÂ´sÂ´ra gondolunk. Ezzel ellentÂ´tben adatbÂ´nyÂ´szat e a a o eu e a a aa e a a esetÂ´n nem adatot bÂ´nyÂ´szunk, hanem â€” amint a pÂ´ldÂ´kban is lÂ´ttuk â€” a rejtett Â´s szÂ´munkra e a a e a a e a hasznos tudÂ´st (informÂ´ciÂ´t), osszefÂ¨ ggÂ´seket keressÂ¨ k egy nagy adathalmazban ( adathegya a o Â¨ u e u â€ benâ€). Az adatbÂ´nyÂ´szatot az uzleti Â´let Â´s a marketing keltette Â´letre. MÂ´g ma is ezek az a a Â¨ e e e e adatbÂ´nyÂ´szat fË mozgatÂ´ rugÂ´i. SzerencsÂ´re az adatbÂ´nyÂ´szat lehetËsÂ´geit egyre tÂ¨bb terÂ¨ leten a a o o o e a a oe o u ismerik fel, melynek eredmÂ´nyekÂ´nt az alapkutatÂ´soknak is egy fontos eszkÂ¨ze lett. AlkalmazzÂ´k e e a o a az orvosbiolÂ´giÂ´ban, genetikÂ´ban, tÂ´vkÂ¨zlÂ´sben, csillagÂ´szatban, . . . o a a a o e a Az adatbÂ´nyÂ´szat egy multi-diszciplinÂ´ris terÂ¨ let. Az 1.1 abrÂ´n lÂ´thatÂ´, hogy mely tua a a u Â´ a a o domÂ´nyterÂ¨ letek eszkÂ¨zeit hasznÂ´lja az adatbÂ´nyÂ´szat. Az adatbÂ´nyÂ´szat tÂ¨bb hangsÂ´ lyt feka u o a a a a a o u tet az algoritmusokra, mint a statisztika, Â´s tÂ¨bbet a modellekre, mint a gÂ´pi tanulÂ´s eszkÂ¨zei e o e a o (pl. neurÂ´lis hÂ´lÂ´zatok). MÂ´ra az adatbÂ´nyÂ´szat akkora terÂ¨ lettÂ´ nËtte ki magÂ´t, hogy szinte a ao a a a u e o a lehetetlen atlÂ´tni magas szÂ´ Â´ a Ä±nvonalon az egÂ´szet. e

Â´ 1. FEJEZET. BEVEZETES

6

1.2. abra. KlaszterezÂ´s (bal oldali abra) Â´s kÂ¨ lÂ¨nc pontok keresÂ´se (jobb oldali abra) Â´ e Â´ e uo e Â´

1.1. LegjelentËsebb adatbÂ´nyÂ´szati feladatok o a a
FeltehetjÂ¨ k, hogy az adatbÂ´zis valamilyen objektumok (Â¨ gyfelek, betegsÂ´gek, vÂ´sÂ´rlÂ´k, teleu a u e aa o kommunikÂ´ciÂ´s esemÂ´nyek, . . . ) kÂ¨ lÂ¨nbÂ¨zË tulajdonsÂ´gait Â´ le. A tulajdonsÂ´g helyett gyakran a o e uo o o a Ä±rja a hasznÂ´ljuk majd az attribÂ´ tum szÂ´t1 . Az adatbÂ´nyÂ´szat feladata a rejtett osszefÂ¨ ggÂ´sek, kapcsoa u o a a Â¨ u e latok felderÂ´ ese. Az osszefÂ¨ ggÂ´sek tÂ´ Ä±tÂ´ Â¨ u e Ä±pusa szerint a kÂ¨vetkezË adatbÂ´nyÂ´szati alapproblÂ´mÂ´krÂ´l o o a a e a o beszÂ´lhetÂ¨ nk : e u Gyakori mintÂ´k kinyerÂ´se : Adott objektumok egy sorozata. CÂ´lunk megtalÂ´lni a gyakran a e e a elËfordulÂ´ (rÂ´sz-) objektumokat. Az objektumok lehetnek elemhalmazok vagy sorozatok, o o e esetleg epizÂ´dok (rÂ´szben rendezÂ´sek), grÂ´fok stb. o e e a AttribÂ´tumok kÂ¨zÂ¨tti kapcsolatok : Gyakran hasznos, ha az objektumokra ugy tekintÂ¨ nk, u o o Â´ u mint az attribÂ´ tumok megvalÂ´sulÂ´saira Â´s keressÂ¨ k az osszefÂ¨ ggÂ´seket az attribÂ´ tumok u o a e u Â¨ u e u kÂ¨zÂ¨tt. TÂ¨bbfÂ´le osszefÂ¨ ggÂ´s lÂ´tezik. Ilyenek pÂ´ldÂ´ul az asszociÂ´ciÂ´s-, korrelÂ´ciÂ´s o o o e Â¨ u e e e a a o a o szabÂ´lyok, a funkcionÂ´lis fÂ¨ ggËsÂ´gek Â´s hasonlÂ´sÂ´gok. Az osztÂ´lyozÂ´s is attribÂ´ tumok a a u oe e oa a a u kÂ¨zÂ¨tti osszefÂ¨ ggÂ´sek felfedezÂ´sÂ´re szolgÂ´l. Az osztÂ´lyozÂ´snÂ´l egy kitÂ¨ ntetett attribÂ´ tum o o Â¨ u e ee a a a a u u Â´rtÂ´kÂ´t kell megjÂ´solnunk a tÂ¨bbi attribÂ´ tum Â´rtÂ´ke alapjÂ´n. Ezt egy modell felÂ´pÂ´ esÂ´vel e e e o o u e e a e Ä±tÂ´ e teszi. Leggyakrabban a modell egy dÂ¨ntÂ´si fa, de lehet if-then szabÂ´lyok sorozata, valao e a milyen matematikai formula, vagy akÂ´r egy neurÂ´lis hÂ´lÂ´zat stb. is. a a ao KlaszterezÂ´s : Objektumokat elËre nem deï¬niÂ´lt csoportokba (klaszterekbe) kell sorolnunk e o a ugy, hogy az egy csoportba tartozÂ´ objektumok hasonlÂ´ak legyenek, mÂ´ a kÂ¨ lÂ¨nbÂ¨zË Â´ o o Ä±g uo o o csoportba kerÂ¨ ltek kÂ¨ lÂ¨nbÂ¨zzenek egymÂ´stÂ´l. KÂ´t pont hasonlÂ´sÂ´gÂ´t egy elËre megadott u uo o a o e oa a o (tÂ´volsÂ´gszerË ) fÂ¨ ggvÂ´ny segÂ´ egÂ´vel szokÂ´s Â´rtelmezni. a a u u e Ä±tsÂ´ e a e SorozatelemzÂ´s : A sorozatelemzÂ´sbe tÂ¨bbfÂ´le adatbÂ´nyÂ´szati feladat tartozik. KereshetÂ¨ nk e e o e a a u egymÂ´shoz hasonlÂ´ o (akÂ´r rÂ´sz-) sorozatokat. Ezen kÂ´ ul elemezhetjÂ¨ k a sorozat alaa Ä±tÂ´ a e Ä±vÂ¨ u kulÂ´sÂ´t, Â´s kÂ¨ lÂ¨nbÂ¨zË regressziÂ´s mÂ´dszerekkel prÂ´bÂ´lhatjuk megjÂ´solni a jÂ¨vËbeli aa e uo o o o o o a o o o valÂ´szÂ´ uleg elËfordulÂ´ esemÂ´nyeket. o Ä±nË o o e EltÂ´rÂ´selemzÂ´s : Azokat az elemeket, amelyek nem felelnek meg az adatbÂ´zis altalÂ´nos jele e e a Â´ a lemzËinek, tulajdonsÂ´gaik nagy mÂ´rtÂ´kben eltÂ´rnek az altalÂ´nostÂ´l kÂ¨lÂ¨nc pontoknak neo a e e e Â´ a o uo vezzÂ¨ k. A legtÂ¨bb adatbÂ´nyÂ´szati algoritmus az ilyen kÂ¨ lÂ¨nc pontoknak nem tulajdonÂ´ u o a a uo Ä±t
A kÂ¨zgazdÂ´szok a tulajdonsÂ´g helyett ismÂ´rvet, valamely tulajdonsÂ´g konkrÂ´t Â´rtÂ´ke helyett ismÂ´rv o a a e a e e e e vÂ´ltozatot mondanak. a
1

Â´ 1. FEJEZET. BEVEZETES

7

nagy jelentËsÂ´get, legtÂ¨bbszÂ¨r zajnak vagy kivÂ´telnek kezeli oket. Azonban az Â´let egyoe o o e Ë e re tÂ¨bb terÂ¨ letÂ´n merÂ¨ l fel az igÂ´ny, hogy Â´ppen az ilyen kÂ¨ lÂ¨nc pontokat talÂ´ljuk meg. o u e u e e uo a EltÂ´rÂ´selemzÂ´s fËbb alkalmazÂ´si terÂ¨ lete a mÂ´solÂ´s-, koppintÂ´skeresÂ´s, tovÂ´bbÂ´ a csalÂ´sok, ee e o a u a a a e a a a visszaÂ´lÂ´sek, vÂ´ ee Ä±rusok, hackertÂ´madÂ´sok kiszË rÂ´se. a a ue Webes adatbÂ´nyÂ´szat : Az Interneten oriÂ´si adattÂ¨meg talÂ´lhatÂ´, Â´ az Interneten alapulÂ´ a a Â´ a o a o Ä±gy o informÂ´ciÂ´-kinyerË algoritmusok is az adatbÂ´nyÂ´szat terÂ¨ letÂ´hez tartoznak. A jegyzetben a o o a a u e szÂ´ lesz intelligensebb keresÂ´srËl, oldalak rangsorolÂ´sÂ´rÂ´l, illetve hasonlÂ´ tartalmÂ´ oldalak o e o aao o u megtalÂ´lÂ´sÂ´rÂ´l. aa a o ElËfordulhat, hogy az adatbÂ´nyÂ´szati rendszer, mÂ´g megfelelËen megvÂ´lasztott paramÂ´terek o a a e o a e mellett is, tÂ´ l sok szabÂ´lyt, osszefÂ¨ ggÂ´st tÂ´r fel. Az egyik legnehezebb kÂ´rdÂ´s az, hogy ezek u a Â¨ u e a e e Â´ kÂ¨zÂ¨ l melyek az Â´rdekesek. ErdekessÂ´gi mutatÂ´krÂ´l altalÂ´nossÂ´gban nem sok mondhatÂ´ el, o u e e o o Â´ a a o mert a kÂ¨ lÂ¨nbÂ¨zË felhasznÂ´lÂ´si terÂ¨ leteken mÂ´s-mÂ´s minta lehet hasznos. MegkÂ¨ lÂ¨nbÂ¨ztetÂ¨ nk uo o o aa u a a uo o u szubjektÂ´ Â´s objektÂ´ Â´rdekessÂ´gi mutatÂ´kat. Egy minta mindenkÂ´ppen Â´rdekes, ha meglepË, Ä±v e Ä±v e e o e e o azaz eddigi tudÂ´sunknak ellentmond, vagy ujszerË , azaz tudÂ´sunkat kiegÂ´szÂ´ Ugyanakkor a Â´ u a e Ä±ti. egy informÂ´ciÂ´ csak akkor Â´rdekes, ha felhasznÂ´lhatÂ´, azaz tudunk valamit kezdeni vele [160]. a o e a o Azt, hogy egy szabÂ´ly mennyire meglepË â€“ tÂ¨bb-kevesebb sikerrel â€“ tudjuk formalizÂ´lni. Az a o o a ujszerË sÂ´grËl Â´s a felhasznÂ´lhatÂ´sÂ´grÂ´l azonban csak a terÂ¨ let szakÂ´rtËje tud nyilatkozni. Â´ ue o e a oa o u e o Annak ellenÂ´re, hogy az adatbÂ´nyÂ´szat egy uj terÂ¨ let, a fentiekbËl lÂ´thatÂ´, hogy rÂ´gi, mÂ´r e a a Â´ u o a o e a ismert problÂ´mÂ´kat is magÂ´ba foglal. Gondoljunk itt arra, hogy klaszterezË algoritmusokat e a a o mÂ´r a 60-as Â´vekben is javasoltak, vagy arra, hogy az osztÂ´lyozÂ´s feladatÂ´t fÂ¨ ggvÂ´ny appa e a a a u e roximÂ´ciÂ´kÂ´nt is felfoghatjuk, aminek irodalmÂ´val tÂ¨bb kÂ¨nyvespolcot is meg lehetne tÂ¨lteni a o e a o o o 2 . TehÂ´t az adatbÂ´nyÂ´szatban gyakran nem maga a problÂ´ma uj, hanem az adatok mÂ´rete, a a a e Â´ e tovÂ´bbÂ´ az a kÂ¨vetelmÂ´ny, hogy az egyes algoritmusok futÂ´si ideje olyan rÂ¨vid legyen, hogy az a a o e a o eredmÂ´nyek a gyakorlatban elfogadhatÂ´ idËn belÂ¨ l Â´rkezzenek. Az alkalmazÂ´sokban nem ritkÂ´k e o o u e a a a giga- sËt terrabÂ´jt nagysÂ´gÂ´ adathalmazok. A [49] Â´ asban pÂ´ldÂ´ul egy beszÂ´molÂ´t olvashao a a u Ä±rÂ´ e a a o tunk egy bank adatbÂ´zisÂ´nak elemzÂ´sÂ´rËl adatbÂ´nyÂ´szati eszkÂ¨zÂ¨kkel, ahol az ugyfelek szÂ´ma a a eeo a a o o Â¨ a elÂ´rte a 190 milliÂ´t az adatok mÂ´rete pedig a 4 TB-ot. Ilyen mÂ´retek mellett mÂ´r kvadratikus e o e e a lÂ´pÂ´sigÂ´nyË algoritmusokat sem engedhetÂ¨ nk meg. LÂ´tni fogjuk, hogy a legtÂ¨bb adatbÂ´nyÂ´szati e e e u u a o a a algoritmus a teljes adatbÂ´zist kevÂ´s alkalommal olvassa vÂ´gig. a e e SkÂ´lÂ´zhatÂ´ (scalable) Â´s hatÂ´kony (eï¬ƒcient) algoritaa o e e musokat keresÂ¨ nk, amelyek megbirkÂ´znak nagy mÂ´retË u o e u Magyar kutatÂ´k szerint a o adatbÂ´zisokkal. ElvÂ´rjuk, hogy az adatbÂ´zis fontosabb â€ a a a mobil pusztÂ´tja a spermiumoÄ± paramÂ´tereinek ismeretÂ´ben az algoritmusok futÂ´si ideje kat.â€ e e a ForrÂ´s : a http://www. megjÂ´solhatÂ´ legyen. Az oriÂ´si memÂ´riamÂ´retek miatt a origo.hu/tudomany/elet/ o o Â´ a o e legtÂ¨bb elemzendË adatbÂ´zis â€“ megfelelË atalakÂ´ asokkal 20040628amobiltelefon.html o o a o Â´ Ä±tÂ´ â€“ valÂ´szÂ´ uleg elfÂ´r a memÂ´riÂ´ban, de mÂ´gis sokszor azt o Ä±nË e o a e feltÂ´telezzÂ¨ k, hogy az adat a hÂ´ttÂ´rtÂ´ron talÂ´lhatÂ´. e u a e a a o Az adatbÂ´zisok mÂ´retÂ´nek nÂ¨vekedÂ´se miatt egyre fontosabbak a pÂ´rhuzamosÂ´ a e e o e a Ä±thatÂ´ algoo ritmusok (lÂ´sd pÂ´ldÂ´ul partÂ´ os algoritmus rÂ´sz). Ezek az adatbÂ´zist rÂ´szekre osztjÂ´k, majd az a e a Ä±ciÂ´ e a e a egyes rÂ´szeket kÂ¨ lÂ¨n memÂ´riÂ´val Â´s hÂ´ttÂ´rtÂ´rral rendelkezË egysÂ´gek dolgozzÂ´k fel, Â´s vÂ´gÂ¨ l egy e uo o a e a e a o e a e e u
Vannak olyan eredmÂ´nyek is, amelyeket egymÂ´stÂ´l fÂ¨ggetlenÂ¨l megkaptak az adatbÂ´nyÂ´szat Â´s a statisztika e a o u u a a e kutatÂ´i is. PÂ´ldÂ´ul dÂ¨ntÂ´si fÂ´k elËallÂ´ asÂ´rÂ´l Â´ nÂ´gy statisztikus egy kÂ¨zismert kÂ¨nyvet [25]. EkÂ¨zben egy jeles o e a o e a oÂ´ Ä±tÂ´ a o Ä±rt e o o o adatbÂ´nyÂ´sz kutatÂ´ J. Ross Quinlan dÂ¨ntÂ´si fa elËallÂ´ o szoftvert kÂ´szÂ´ a a o o e oÂ´ Ä±tÂ´ e Ä±tett. A kÂ´t kutatÂ´sban sok kÂ¨zÂ¨s mÂ´dszer e a o o o lelhetË fel. o
2

Â´ 1. FEJEZET. BEVEZETES

8

kitÂ¨ ntetett egysÂ´g egyesÂ´ a rÂ´szeredmÂ´nyeket. SzintÂ´n a mÂ´retnÂ¨vekedÂ´s az oka azon algoritu e Ä±ti e e e e o e musok nÂ´pszerË sÂ´gÂ´nek, amelyek futÂ´si ideje nagy mÂ´rtÂ´kben csÂ¨kkenthetË valamilyen elËzetes e ue e a e e o o o informÂ´ciÂ´k (pÂ´ldÂ´ul korÂ´bbi futÂ´si eredmÂ´nyek) ismeretÂ´ben (lÂ´sd asszociÂ´ciÂ´s szabÂ´lyok kara o e a a a e e a a o a bantartÂ´sa rÂ´sz). a e

1.2. A tudÂ´sfeltÂ´rÂ´s folyamata a a a
A tudÂ´skinyerÂ´s folyamata sorÂ´n 6-10 fÂ´zist szokÂ´s elkÂ¨ lÂ¨nÂ´ a e a a a u o Ä±teni [56, 73] attÂ´l fÂ¨ ggËen, hogy o u o mely lÂ´pÂ´seket vonjuk ossze (tekinthetjÂ¨ k pÂ´ldÂ´ul az 1.3 abrÂ´t) : e e Â¨ u e a Â´ a
Ã©rtelmezÃ©s Ã©s Ã©rtÃ©kelÃ©s adatbÃ¡nyÃ¡szat

tudÃ¡s

csÃ¶kkentÃ©s Ã©s transzformÃ¡ciÃ³ mintÃ¡k tisztÃ­tÃ¡s

kivÃ¡lasztÃ¡s tisztÃ­tott adat

transzformÃ¡lt adat

forrÃ¡s adat

adat

1.3. abra. A tudÂ´sfeltÂ´rÂ´s folyamata Â´ a aa I. Az alkalmazÂ´si terÂ¨ let feltÂ´rÂ´sa Â´s megÂ´rtÂ´se, fontosabb elËzetes ismeretek begyË jtÂ´se, Â´s a u aa e e e o u e e a felhasznÂ´lÂ´si cÂ´lok meghatÂ´rozÂ´sa. aa e a a II. CÂ´ladatbÂ´zis lÂ´trehozÂ´sa : kivÂ´lasztani a hasznÂ´lni kÂ´ ant adatbÂ´zist, (vagy annak csak e a e a a a Ä±vÂ´ a egy rÂ´szÂ´t), amibËl a tudÂ´st ki akarjuk nyerni. e e o a III. AdattisztÂ´ as : itt olyan alapvetË operÂ´ciÂ´kat Â´rtÂ¨ nk, mint a tÂ´ves bejegyzÂ´sek eltÂ´volÂ´ asa, Ä±tÂ´ o a o e u e e a Ä±tÂ´ hiÂ´nyos mezËk pÂ´tlÂ´sa, zajok szË rÂ´se stb. Zajon az adatba Â´pÂ¨ lt vÂ´letlen hibÂ´t Â´rtÂ¨ nk. a o o a ue e u e a e u Vannak zajok, amelyeket egyszerË felfedezni Â´s javÂ´ u e Ä±tani. PÂ´ldÂ´ul sztring Â´rtÂ´k ott, ahol e a e e szÂ´mot vÂ´runk, vagy felsorolÂ´s tÂ´ u attribÂ´ tumnÂ´l Â´rvÂ´nytelen Â´rtÂ´k talÂ´lhatÂ´. Sajnos a a a Ä±pusÂ´ u a e e e e a o sok esetben a hiba Â´szrevÂ´tlen marad (pÂ´ldÂ´ul 0.53 helyett 0.35 Â´rtÂ´k gÂ´pelÂ´se). e e e a e e e e

Â´ 1. FEJEZET. BEVEZETES

9

IV. AdatintegrÂ´ciÂ´ : a feldolgozÂ´s szÂ´mÂ´ra fontos, esetleg elosztott adatbÂ´zisok egyesÂ´ ese. a o a a a a Ä±tÂ´ Az harmadik Â´s negyedik egyÂ¨ tt gyakran nevezik az adatok elËfeldolgozÂ´sÂ´nak. A e u o aa kÂ¨ lÂ¨nbÂ¨zË forrÂ´sbÂ´l vett adatok integrÂ´ciÂ´ja sorÂ´n sok problÂ´mÂ´ba utkÂ¨zhetÂ¨ nk. A uo o o a o a o a e a Â¨ o u kÂ¨ lÂ¨nbÂ¨zË osztÂ´lyok kÂ¨ lÂ¨nbÂ¨zË mÂ´don tÂ´roljÂ´k adataikat, kÂ¨ lÂ¨nbÂ¨zË konvenciÂ´kat kÂ¨vetuo o o a uo o o o a a uo o o o o nek, kÂ¨ lÂ¨nbÂ¨zË mÂ´rtÂ´kegysÂ´geket, elsËdleges kulcsokat Â´s elnevezÂ´st hasznÂ´lhatnak Â´s uo o o e e e o e e a e kÂ¨ lÂ¨nfÂ´le hibÂ´k lehetnek jelen. Az egÂ´sz cÂ´get atfogÂ´ adatintegrÂ´ciÂ´t adattÂ´rhÂ´zban uo e a e e Â´ o a o a a 3 tÂ´roljÂ´k, mely egy speciÂ´lis, az elemzÂ´st tÂ´mogatÂ´ adatbÂ´zis. a a a e a o a V. AdattÂ´r csÂ¨kkentÂ´s : az adatbÂ´zisbÂ´l a cÂ´l szempontjÂ´bÂ´l fontos attribÂ´ tumok kiemelÂ´se. e o e a o e a o u e VI. AdatbÂ´nyÂ´szati algoritmus tÂ´ anak kivÂ´lasztÂ´sa : eldÂ¨nteni, hogy a megoldandÂ´ feladat a a Ä±pusÂ´ a a o o klaszterezÂ´s, vagy szabÂ´ly-, illetve mintakeresÂ´s, esetleg osztÂ´lyozÂ´s. e a e a a VII. A megfelelË adatbÂ´nyÂ´szati algoritmus meghatÂ´rozÂ´sa. ElËnyeinek, hÂ´trÂ´nyainak, pao a a a a o a a ramÂ´tereinek vizsgÂ´lata, futÂ´si idË- Â´s memÂ´riaigÂ´ny elemzÂ´se. e a a o e o e e VIII. Az algoritmus alkalmazÂ´sa. a IX. A kinyert informÂ´ciÂ´ Â´rtelmezÂ´se, esetleg visszatÂ´rÂ´s az elËzË lÂ´pÂ´sekhez tovÂ´bbi ï¬a o e e ee o o e e a nomÂ´ asok cÂ´ljÂ´bÂ´l. Ä±tÂ´ e a o X. A megszerzett tudÂ´s megerËsÂ´ ese : osszevetÂ´s elvÂ´rÂ´sokkal, elËzetes ismeretekkel. a o Ä±tÂ´ Â¨ e aa o EredmÂ´nyek dokumentÂ´lÂ´sa Â´s atadÂ´sa a felhasznÂ´lÂ´nak. Egy adatbÂ´nyÂ´szati elemzÂ´s e aa e Â´ a ao a a e eredmÂ´nye akkor nem felel meg az elvÂ´rÂ´sainknakâ€, ha nem sikerÂ¨ l semmilyen uj, hasze aa u Â´ â€ nos Â´s termÂ´szetesen valÂ´s osszefÂ¨ ggÂ´st feltÂ´rni. Ennek nyilvÂ´n tÂ¨bb oka is lehet, a kÂ¨vete e o Â¨ u e a a o o kezËkben kÂ´t pÂ´ldÂ´t mutatunk [30]. o e e a 1. ElËfordulhat, hogy rosszul vÂ´lasztottuk meg az elemzÂ´shez (adatbÂ´nyÂ´szathoz) o a e a a hasznÂ´lt algoritmust vagy ennek paramÂ´tereit, Â´s egy mÂ´sik eljÂ´rÂ´ssal (vagy mÂ´s paa e e a aa a ramÂ´terekkel) talÂ´lni fogunk valamilyen Â´rdekes osszefÂ¨ ggÂ´st. SzemlÂ´letesen szÂ´lva : e a e Â¨ u e e o mÂ´s oldalrÂ´l rÂ´nÂ´zve az adathegyre, lehet, hogy lÂ´tunk rajta valami Â´rdekeset. a o a e a e 2. TermÂ´szetesen az is lehetsÂ´ges, hogy az adatok egyÂ´ltalÂ´n nem rejtenek semmifÂ´le e e a a e uj, a gyakorlatban hasznosÂ´ Â´ Ä±thatÂ´ osszefÂ¨ ggÂ´st. Ekkor â€” sajnos â€” teljesen elÂ¨lrËl kell oÂ¨ u e o o kezdeni a folyamatot, uj adatok gyË jtÂ´sÂ´vel. Â´ u ee
A hÂ´tkÂ¨znapiâ€ mËkÂ¨dÂ´st tÂ´mogatÂ´ operatÂ´ adatbÂ´zis, Â´s az adattÂ´rhÂ´zak kÂ¨zÂ¨tti kÂ¨lÂ¨nbsÂ´gre egy e o u o e a o Ä±v a e a a o o uo e â€ szemlÂ´letes pÂ´lda az alÂ´bbi [30]: Ha tudni szeretnÂ´nk Kis JÂ´nos aktuÂ´lis szÂ´mlaegyenlegÂ´t, akkor ezt egy opee e a e a a a e ratÂ´ adatbÂ´zis alapjÂ´n pontosan Â´s gyorsan meg tudjuk hatÂ´rozni. Egy atfogÂ´bbâ€ kÂ´rdÂ´s â€” pÂ´ldÂ´ul: HoÄ±v a a e a Â´ o e e e a â€ â€ gyan alakultak az ugyfelek bankban elhelyezett megtakarÂ´ asai az elmÂ´lt 12 hÂ´napban?â€ â€” megvÂ´laszolÂ´sa Â¨ Ä±tÂ´ u o a a egy operatÂ´ adatbÂ´zis esetÂ´n bonyolult lehet, Â´s sok ideig tarthat. Egy adattÂ´rhÂ´z az utÂ´bbi kÂ´rdÂ´sre gyors Ä±v a e e a a o e e vÂ´laszt tud adni, tÂ´mogatva ezÂ´ltal a dÂ¨ntÂ´shozÂ´kat. A vÂ´lasz azonban nem teljesen pontos: ha dÂ´lutÂ´n 4-kor a a a o e o a e a kÂ´rdezzÂ¨k le az utÂ´bbi 12 hÂ´napbeli megtakarÂ´ asokat, abban mÂ´g nem biztos, hogy benne lesz Kis JÂ´nos aznap e u o o Ä±tÂ´ e a dÂ´lelËtt lekÂ¨tÂ¨tt betÂ´tje. Az adattÂ´rhÂ´z adatai tehÂ´t nem feltÂ´tlenÂ¨l abszolÂ´t frissek, nyilvÂ´n szÂ¨ksÂ´ges azonban e o oo e a a a e u u a u e a periodikus frissÂ´ esÂ¨k. AdattÂ´rhÂ´zak alkalmazÂ´sakor a trendek, folyamatok elemzÂ´se a cÂ´l. Az, hogy nem az Ä±tÂ´ u a a a e e aktuÂ´lisan legfrissebb adatokkal dolgozunk, altalÂ´ban nem okoz gondot, feltÂ´ve, hogy a legutÂ´bbi frissÂ´ es ota a Â´ a e o Ä±tÂ´ Â´ nem kÂ¨vetkezett be radikÂ´lis vÂ´ltozÂ´s. Ugyanakkor Kis JÂ´nos nyilvÂ´n nem orÂ¨lne, ha a betÂ´t elhelyezÂ´se utÂ´n o a a a a a Â¨u e e a este lekÂ´rdezve szÂ´mlÂ´jÂ´t nem lÂ´tnÂ´â€ a pÂ´nzÂ´t, mert a periodikus frissÂ´ es csak hetente egyszer esedÂ´kes: az o e a aa a a e e Ä±tÂ´ e Ë â€ igÂ´nyeinek nyilvÂ´n az operatÂ´ adatbÂ´zis felel meg. e a Ä±v a
3

Â´ 1. FEJEZET. BEVEZETES

10

A sikeres adatbÂ´nyÂ´szati projektekben az elsË 5 lÂ´pÂ´s teszi ki az idË- Â´s pÂ´nzrÂ´fordÂ´ asok a a o e e o e e a Ä±tÂ´ legalÂ´bb 80%-Â´t. Ha a cÂ´lok nem kellËkÂ´ppen atgondoltak Â´s a bÂ´nyÂ´szandÂ´ adatok nem elÂ´g a a e o e Â´ e a a o e minËsÂ´giek, akkor kÂ¨nnyen elËfordulhat, hogy az adatbÂ´nyÂ´sz csak vaktÂ´ban dolgozik Â´s a oe o o a a a e kinyert informÂ´ciÂ´nak tulajdonkÂ´ppen semmi haszna sincs. A tudÂ´sfeltÂ´rÂ´s sorÂ´n elengedhea o e a aa a tetlen, hogy az adatbÂ´nyÂ´sz Â´s az alkalmazÂ´si terÂ¨ let szakÂ´rtËje szorosan egyÂ¨ ttmË kÂ¨djÂ¨n, a a a e a u e o u u o o projekt minden fÂ´zisÂ´ban ellenËrizzÂ´k a betartandÂ´ irÂ´nyvonalakat. NÂ´zzÂ¨ nk erre egy pÂ´ldÂ´t : a a o e o a e u e a ha adatbÂ´nyÂ´szati eszkÂ¨zÂ¨kkel sikerÂ¨ l kimutatni, hogy X betegsÂ´ggel gyakran egyÂ¨ tt jÂ´r Y bea a o o u e u a tegsÂ´g is, a kutatÂ´orvos kÂ´pes eldÂ¨nteni azt, hogy ez valÂ´ban Â´ van-e : megvizsgÂ´lhatja, hogy e o e o o Ä±gy a ugyanezen osszefÂ¨ ggÂ´s mÂ´s adathalmaz esetÂ´n is fennÂ´ll-e (esetleg direkt ebbËl a cÂ´lbÂ´l gyË jt Â¨ u e a e a o e o u adatot). Ha igen, akkor kiderÂ´ Ä±theti azt, hogy az egyik betegsÂ´g sorÂ´n keletkezik-e olyan kÂ´miai e a e anyag, vagy elszaporodott-e olyan kÂ´rokozÂ´, mely hozzÂ´jÂ´rul a mÂ´sik betegsÂ´g kialakulÂ´sÂ´hoz. o o aa a e aa Ezek alapjÂ´n azt mondhatjuk, hogy az adatbÂ´nyÂ´sz tippeketâ€ ad a kutatÂ´orvosoknak. Ezen a a a o â€ tippekâ€ jelentËsÂ´gÂ´t nem szabad alÂ´becsÂ¨ lnÂ¨ nk : ezek ovhatjÂ´k meg a kutatÂ´orvost attÂ´l, hogy oe e a u u Â´ a o o â€ â€” szemlÂ´letesen fogalmazva â€” rossz helyen tapogatÂ´zzonâ€. Az adatbÂ´nyÂ´szat tehÂ´t elsË sore o a a a o â€ ban uj, Â´ eretes hipotÂ´zisekkel jÂ´rulhat hozzÂ´ a kÂ¨zegÂ´szsÂ´gÂ¨ gyi kutatÂ´sokhoz. Â´ Ä±gÂ´ e a a o e e u a A kÂ¨vetkezË valÂ´s pÂ´lda is az adatbÂ´nyÂ´sz Â´s a kutatÂ´orvos szerepÂ´t szemlÂ´lteti. Egy o o o e a a e o e e adatbÂ´nyÂ´sz az Â´letmÂ´dra Â´s a megbetegedÂ´sekre vonatkozÂ´ adatokat elemezve juthat arra a a e o e e o a kÂ¨vetkeztetÂ´sre, hogy a prosztatarÂ´k osszefÂ¨ gg a szenesedÂ´sig sÂ¨ tÂ¨tt hÂ´ s fogyasztÂ´sÂ´val. Ezo e a Â¨ u e uo u aa zel irÂ´nyt mutatâ€ a kutatÂ´orvosnak, aki a hÂ´ttÂ´rben rejlË kÂ´miai reakciÂ´kat Â´s azok biolÂ´giai a o a e o e o e o â€ kÂ¨vetkezmÂ´nyeit tÂ´rja fel. Ez a konkrÂ´t esetben lÂ´nyegÂ´ben Â´ is tÂ¨rtÂ´nt : elËbb tÂ´rtÂ´k fel a jÂ´l o e a e e e Ä±gy o e o a a o atsÂ¨ tÂ¨tt hÂ´ s fogyasztÂ´sa Â´s a prosztatarÂ´k gyakorisÂ´ga kÂ¨zÂ¨tti osszefÂ¨ ggÂ´st, majd megtalÂ´ltÂ´k Â´ uo u a e a a o o Â¨ u e a a a hÂ´ s sÂ¨ tÂ´skor keletkezË PhIP vegyÂ¨ letet Â´s kimutattÂ´k, hogy hatÂ´sÂ´ra prosztatarÂ´k alakulhat u ue o u e a aa a ki [81]. Ez a jegyzet a 6. Â´s 7. lÂ´pÂ´seket veszi szemÂ¨ gyre : rendelkezÂ´sÂ¨ nkre all egy adatbÂ´zis, tude e e u eu Â´ a juk, milyen jellegË informÂ´ciÂ´ra van szÂ¨ ksÂ´gÂ¨ nk, Â´s az adatbÂ´nyÂ´sz feladata, hogy ennek megu a o u e u e a a oldÂ´sÂ´ra minÂ´l gyorsabb Â´s pontosabb algoritmust adjon. aa e e Â´ AltalÂ´nosabban kÂ´tfÂ´le adatbÂ´nyÂ´szati tevÂ´kenysÂ´get kÂ¨ lÂ¨nÂ´ unk el : a e e a a e e u o Ä±tÂ¨ FeltÂ´rÂ´s : A feltÂ´rÂ´s sorÂ´n az adatbÂ´zisban talÂ´lhatÂ´ mintÂ´kat keressÂ¨ k meg. A mintÂ´k a a aa a a a o a u a legtÂ¨bbszÂ¨r az altalÂ´nos trendeket/szokÂ´sokat/jellemzËket Â´ ak le, de vannak olyan alkalo o Â´ a a o Ä±rjÂ´ mazÂ´sok is (pÂ´ldÂ´ul csalÂ´sfelderÂ´ es), ahol Â´ppen az altalÂ´nostÂ´l eltÂ´rË/nem vÂ´rt mintÂ´kat a e a a Ä±tÂ´ e Â´ a o eo a a keressÂ¨ k. u ElËrejelzÂ´s : Az elËrejelzÂ´snÂ´l a feltÂ´rt mintÂ´k alapjÂ´n prÂ´bÂ´lunk kÂ¨vetkeztetni a jÂ¨vËre. o e o e e a a a o a o o o PÂ´ldÂ´ul egy elem ismeretlen Â´rtÂ´keit prÂ´bÂ´ljuk elËrejelezni az ismert Â´rtÂ´kek Â´s a feltÂ´rt e a e e o a o e e e a tudÂ´s alapjÂ´n. a a NÂ´gy fontos elvÂ´rÂ´sunk van a megszerzett tudÂ´ssal kapcsolatban : (1) legyen kÂ¨nnyen e aa a o Â´rthetË, (2) Â´rvÂ´nyes, (3) hasznos Â´s (4) ujszerË . Az Â´rvÂ´nyessÂ´g eldÂ¨ntÂ´se a terÂ¨ let szakÂ´rtËje e o e e e Â´ u e e e o e u e o mellett az adatbÂ´nyÂ´sz (esetleg statisztikus) feladata is. ElËfordulhat, hogy helyes modellt a a o adtunk, az algoritmus is jÂ´l mË kÂ¨dÂ¨tt, mÂ´gis a kinyert szabÂ´ly nem fedi a valÂ´sÂ´got. Bonfero u o o e a oa roni tÂ´tele arra ï¬gyelmeztet bennÂ¨ nket, hogy amennyiben a lehetsÂ´ges kÂ¨vetkeztetÂ´sek szÂ´ma e u e o e a tÂ´ l nagy, akkor egyes kÂ¨vetkeztetÂ´sek tÂ´nyleges valÂ´sÂ´gtartalom nÂ´lkÂ¨ l igaznak mutatkoznak, u o e e oa e u tisztÂ´n statisztikai megfontolÂ´sok alapjÂ´n. Az egyik legjobb pÂ´lda a valÂ´sÂ´gtartalom nÂ´lkÂ¨ li a a a e oa e u szabÂ´ly kinyerÂ´sÂ´re az alÂ´bbi megtÂ¨rtÂ´nt eset. AmerikÂ´ban a Dow Jones atlag becslÂ´sÂ´hez kea ee a o e a Â´ ee resni kezdtÂ´k azt a termÂ´ket, amely arÂ´nak alakulÂ´sa leginkÂ´bb hasonlÂ´ e e Â´a a a Ä±tott a Dow Jones atlag Â´ alakulÂ´sÂ´hoz. A kapott termÂ´k a bangladesi gyapot volt. aa e

Â´ 1. FEJEZET. BEVEZETES

11

Az adatok illetve a kinyert informÂ´ciÂ´k megjelenÂ´ esÂ´nek mÂ´dja legalÂ´bb annyira fontos, a o Ä±tÂ´ e o a mint az osszefÂ¨ ggÂ´sek meghatÂ´rozÂ´sa. A vÂ´gfelhasznÂ´lÂ´kat (akik altalÂ´ban vezetËk) jobban Â¨ u e a a e ao Â´ a o megragadja egy jÂ´l elkÂ´szÂ´ o e Ä±tett abra, mint kÂ¨ lÂ¨nbÂ¨zË matematikai struktÂ´ rÂ´k nyers tÂ´lalÂ´sa. A Â´ uo o o ua a a megjelenÂ´ es tehÂ´t fontos rÂ´sze az adatbÂ´nyÂ´szatnak. Ezt jÂ´l igazolja, hogy nagy sikert kÂ¨nyÄ±tÂ´ a e a a o o velnek el az olyan adatbÂ´nyÂ´szati szoftverek, amelyek adatbÂ´nyÂ´szati algoritmusokat nem is a a a a futtatnak, pusztÂ´n az adatokat jelenÂ´ meg intelligens mÂ´don (hÂ´romdimenziÂ´s, szÂ´ a Ä±tik o a o Ä±nes, forgathatÂ´ abrÂ´k). EzeknÂ´l a rendszereknÂ´l az osszefÂ¨ ggÂ´seket, mintÂ´zatokat, kÂ¨zÂ¨s tulajdonsÂ´ggal oÂ´ a e e Â¨ u e a o o a rendelkezË csoportokat maguk a felhasznÂ´lÂ´k veszik Â´szre. Az adatbÂ´nyÂ´szati szoftverekrËl o ao e a a o rÂ´szletesebben a 15. fejezetben olvashatunk. e

1.3. AdatbÂ´nyÂ´szat kontra statisztika a a
NehÂ´z deï¬niÂ´lni, hogy egy feladat Â´s annak megoldÂ´sa mikor tartozik a statisztie a e a ka Â´s mikor az adatbÂ´nyÂ´szat felsÂ´gterÂ¨ lete alÂ´. A statisztika tÂ¨bb hangsÂ´ lyt fektet hie a a e u a o u potÂ´zisek vizsgÂ´latÂ´ra, mÂ´ az adatbÂ´nyÂ´szatban a hipotÂ´zisek megtalÂ´lÂ´sÂ´nak mÂ´dja all a e a a Ä±g a a e aa a o Â´ kÂ¨zÂ´ppontban. Az adatbÂ´nyÂ´szat egy gyakorlatorientÂ´lt terÂ¨ let, kevesebb sÂ´ lyt kapnak (sajnos) o e a a a u u az elmÂ´leti elemzÂ´sek. Viszont kÂ¨zponti kÂ´rdÂ´s egy algoritmus futÂ´si ideje Â´s memÂ´riaigÂ´nye. e e o e e a e o e Az adatbÂ´nyÂ´szati algoritmusok bemutatÂ´sa sorÂ´n kitÂ´rÂ¨ nk az adatstruktÂ´ rÂ´lis Â´s akÂ´r implea a a a eu ua e a mentÂ´ciÂ´s kÂ´rdÂ´sekre is. a o e e Sok kutatÂ´ az adatbÂ´nyÂ´szatot nem kÂ¨ lÂ¨nbÂ¨zteti meg a gÂ´pi tanulÂ´stÂ´l. ElvÂ´gre a gÂ´pi tao a a uo o e a o e e nulÂ´snÂ´l is adatok alapjÂ´n tanul meg egy koncepciÂ´t a gÂ´p. Cinikusok szerint az adatbÂ´nyÂ´szat a a a o e a a nem mÂ´s, mint statisztika plusz egy kis marketing. ValÂ´ban, nincs Â´les hatÂ´r kÂ¨ztÂ¨ k. Ugy a o e a o u Â´ altalÂ´ban beszÂ´lhetÂ¨ nk adat elemzË technikÂ´krÂ´l. Egyes adat elemzË technikÂ´kat inkÂ´bb Â´ a e u o a o o a a adatbÂ´nyÂ´szati mÂ´dszernek mondunk, mÂ´sokat pedig a statisztikÂ´hoz vagy a gÂ´pi tanulÂ´shoz a a o a a e a sorolunk. A 20. szÂ´zad mÂ´sodik felÂ´tËl egyre jellemzËbb a tudomÂ´nyra, hogy bizonyos klasszikus a a eo o a elmÂ´letet kiragad Â´s uj kutatÂ´si terÂ¨ letnek kiÂ´ltjÂ´k ki. UgyanÂ´ van ezzel a marketing ; ugyanazt e e Â´ a u a a Ä±gy a termÂ´ket egyszer csak uj, hangzatosabb nÂ´vvel kezdik el Â´rtÂ´kesÂ´ e Â´ e e e Ä±teni. A tudomÂ´nyban is a a kutatÂ´si feladatokat el kell adni a pÂ´lyÂ´zatokat bÂ´ alÂ´ zsË riknek Â´s az uj nÂ´vvel ellÂ´tott a a a Ä±rÂ´ o u e Â´ e a tudomÂ´nyterÂ¨ let uj irÂ´nyokat sugall ; az uj irÂ´nyzatok Â´s Â´lbeli kutatÂ´sok pedig nagy tÂ´mogatÂ´st a u Â´ a Â´ a e e a a a kapnak. Ez a tÂ´ny jelentËsen hozzÂ´jÂ´rult az adatbÂ´nyÂ´szat elterjedÂ´sÂ´hez Â´s az egyes adatelemzË e o aa a a ee e o feladatok â€adatbÂ´nyÂ´szatiâ€ cÂ´ evel valÂ´ ellÂ´tÂ´sÂ´hoz. a a Ä±mkÂ´ o aaa AdatbÂ´nyÂ´szathoz soroljuk a klaszterzÂ´s, osztÂ´lyozÂ´s, asszociÂ´ciÂ´s szabÂ´lykinyerÂ´s Â´s az a a e a a a o a e e idËsorelemzÂ´s nem klasszikus (pl. regressziÂ´szÂ´mÂ´ as, simÂ´ as) feladatait. A kÂ¨vetkezËkben o e o a Ä±tÂ´ Ä±tÂ´ o o nÂ´hÂ´ny pÂ´ldÂ´n keresztÂ¨ l szemlÂ´ltjÂ¨ k az adatbÂ´nyÂ´szat Â´s a statisztika kÂ¨zÂ¨tti kÂ¨ lÂ¨nbsÂ´get Â´s e a e a u e u a a e o o uo e e egyben a kÂ´t terÂ¨ let rokonsÂ´gÂ´t is [30]. e u a a I. TegyÂ¨ k fel, hogy egy adatbÂ´zisban sokmilliÂ´ ember DNS-szekvenciÂ´it Â´s tulajdonsÂ´gait u a o a e a tÂ´roljuk. Egy jellegzetes statisztikai kÂ´rdÂ´s lehet az, hogy pÂ´ldÂ´ul a kÂ´k szemË embea e e e a e u rek mekkora rÂ´szÂ´re jellemzË egy adott DNS-szekvencia. TermÂ´szetesen olyan kÂ´rdÂ´st e e o e e e is feltehetÂ¨ nk, melynek megvÂ´laszolÂ´sa ennÂ´l kiï¬nomultabb eszkÂ¨ztÂ´rat igÂ´nyel : ha azt u a a e o a e szeretnÂ´nk tudni, van-e szigniï¬kÂ´ns fÂ¨ ggÂ´s egy adott DNS-szekvencia meglÂ´te Â´s a e a u e e e kÂ´k szemâ€ tulajdonsÂ´g kÂ¨zÂ¨tt, statisztikai prÂ´bÂ´t alkalmazhatunk ennek eldÂ¨ntÂ´sÂ´re. e a o o o a o ee â€ Egy adatbÂ´nyÂ´sz nem kÂ´rdezne rÂ´ egy konkrÂ´t szekvencia Â´s egy konkrÂ´t tulajdonsÂ´g a a e a e e e a kÂ¨zÂ¨tti osszefÂ¨ ggÂ´sre, hanem egy altalÂ´nosabb kÂ´rdÂ´st tenne fel, pÂ´ldÂ´ul azt, hogy mio o Â¨ u e Â´ a e e e a

Â´ 1. FEJEZET. BEVEZETES

12

1.4. abra. Egy jellegzetes adatbÂ´nyÂ´szati feladat : DNS-szekvenciÂ´k elemzÂ´se Â´ a a a e

lyen osszefÂ¨ ggÂ´s van a tulajdonsÂ´gok Â´s szekvenciÂ´k kÂ¨zÂ¨tt, melyik tulajdonsÂ´gÂ´rt melyik Â¨ u e a e a o o a e szekvencia felelËs ? o II. Egy mÂ´sik pÂ´lda az adatbÂ´nyÂ´szat Â´s statisztika kÂ¨zÂ¨tti kÂ¨ lÂ¨nbsÂ´gre az alÂ´bbi : egy statisza e a a e o o uo e a tikai elemzÂ´s sorÂ´n megvizsgÂ´lhatjuk, hogy a nËk illetve fÂ´rï¬ak hÂ´ny szÂ´zalÂ´ka dohÂ´nyzik, e a a o e a a e a fogyaszt rendszeresen nagy mennyisÂ´gben alkoholt, van-e szigniï¬kÂ´ns eltÂ´rÂ´s a kÂ´t csoport e a ee e kÂ¨zÂ¨tt. Egy adatbÂ´nyÂ´szati elemzÂ´s sorÂ´n itt is altalÂ´nosabb kÂ´rdÂ´st tennÂ´nk fel, pÂ´ldÂ´ul o o a a e a Â´ a e e e e a azt, hogy milyen jellegzetes csoportok vannak az alkoholfogyasztÂ´sra Â´s dohÂ´nyzÂ´sra a e a a nÂ´zve ? TehÂ´t azt nem mondjuk meg elËre, hogy az egyik csoportba a nËk, a mÂ´sikba e a o o a pedig a fÂ´rï¬ak tartoznak. Az adatbÂ´nyÂ´sz feladata, hogy ugy csoportosÂ´ az embereket e a a Â´ Ä±tsa (rekordokat), hogy a hasonlÂ´k egy csoportba, a kÂ¨ lÂ¨nbÂ¨zËk pedig kÂ¨ lÂ¨nbÂ¨zË csoportba o uo o o uo o o kerÂ¨ ljenek. (Ez egy klaszterezÂ´si feladat.) Az adatbÂ´nyÂ´szatban az ilyen feladatokat nem u e a a hosszas emberi munka Â´s intuÂ´ o arÂ´n oldjuk meg, hanem tÂ¨rekszÂ¨ nk a minÂ´l nagyobb e Ä±ciÂ´ Â´ a o u e fokÂ´ automatizÂ´lÂ´sra kiï¬nomult szoftverek alkalmazÂ´sÂ´val. EredmÂ´nykÂ´nt kÂ¨nnyen lehet, u aa aa e e o hogy nem a nemek szerinti csoportosÂ´ ast kapjuk, hanem egy olyat, melyben ugyanazon Ä±tÂ´ csoportokba fÂ´rï¬ak Â´s nËk is kerÂ¨ ltek, akik â€” egyÂ´b tulajdonsÂ´gaik alapjÂ´n â€” hasonlÂ´ak. 4 e e o u e a a o III. Az elËbbi pÂ´ldÂ´ban termÂ´szetesen mÂ´s irÂ´nyba is altalÂ´nosÂ´ o e a e a a Â´ a Ä±thatjukâ€ a statisztikai elemzÂ´s e â€ sorÂ´n feltett kÂ´rdÂ´sÂ¨ nket : lehet, hogy arra vagyunk kÂ´ ancsiak, hogy mi a kÂ¨ lÂ¨nbsÂ´g a e eu Ä±vÂ´ uo e a fÂ´rï¬ak Â´s a nËk kÂ¨zÂ¨tt. IsmerjÂ¨ k tehÂ´t a kÂ´t csoportot, de nem tudjuk, hogy mely e e o o o u a e tulajdonsÂ´gok vagy tulajdonsÂ´gkombinÂ´ciÂ´k jellemzËek egy-egy csoportra. Ekkor egy a a a o o
Ahhoz, hogy egy ilyen elemzÂ´s sikeres legyen, nagyon fontos a hasonlÂ´sÂ´gi mÂ´rtÂ´k megfelelË megvÂ´lasztÂ´sa, e oa e e o a a valamint az elemzÂ´sbe bevont attribÂ´tumok (adattÂ´bla-oszlopok) ugyesâ€ kivÂ´lasztÂ´sa. Ha pÂ´ldÂ´ul az alkohole u a Â¨ a a e a â€ fogyasztÂ´sra Â´s dohÂ´nyzÂ´sra vonatkozÂ´ adatok mellett tÂ´l sokâ€ tovÂ´bbi attribÂ´tumot vonunk be a vizsgÂ´latba, a e a a o u a u a â€ akkor lehet, hogy a csoportosÂ´ as nem az alkoholfogyasztÂ´sra Â´s dohÂ´nyzÂ´sra vonatkozÂ´ jellegzetes csoportokat Ä±tÂ´ a e a a o Â´ a tartalmazza, hanem altalÂ´nosâ€ csoportokat kapunk. â€
4

Â´ 1. FEJEZET. BEVEZETES

13

1.5. abra. DÂ¨ntÂ´si fa : nËk Â´s fÂ´rï¬ak kÂ¨zÂ¨tti kÂ¨ lÂ¨nbsÂ´gek a Semmelweis Egyetem hallgatÂ´inak Â´ o e o e e o o uo e o kÂ¨rÂ´ben vÂ´gzett felmÂ´rÂ´s alapjÂ´n. oe e ee a osztÂ´lyozÂ´si feladattal allunk szemben, a csoportokat osztÂ´lyoknak nevezzÂ¨ k. Ezt a a a Â´ a u kÂ´rdÂ´st egyÂ´bkÂ´nt fel is tettÂ¨ k a Semmelweis Egyetem hallgatÂ´inak kÂ¨rÂ´ben vÂ´gzett egyik e e e e u o oe e felmÂ´rÂ´s adatbÂ´zisÂ´n. Az eredmÂ´ny az 1.5. abrÂ´n lÂ´thatÂ´. Ez egy dÂ¨ntÂ´si fa. A levelek az ee a a e Â´ a a o o e osztÂ´lyoknak (nËk illetve fÂ´rï¬ak) felelnek meg. A fa kÂ¨zbÂ¨ lsË csomÂ´pontjaiban egy-egy a o e o u o o attribÂ´ tum (adattÂ´blabeli oszlop) neve lÂ´thatÂ´. A fa egy csomÂ´pontjÂ´bÂ´l kiindulÂ´ agak az u a a o o a o oÂ´ adott csomÂ´ponthoz tartozÂ´ attribÂ´ tum egy-egy lehetsÂ´ges Â´rtÂ´kÂ´nek felelnek meg. Egy o o u e e e e dÂ¨ntÂ´si fa azt mutatja meg, hogy ha nem ismernÂ´nk, hogy egy rekord melyik osztÂ´lyba o e e a tartozik, akkor hogyan dÂ¨nthetnÂ´nk ezt el. PÂ´ldÂ´ul a fogamzÂ´sgÂ´tlÂ´t szedË hallgatÂ´k nËk o e e a a a o o o o (pontosabban : azon rekordok, amelyek FOGAMZASGA attribÂ´ tuma 1â€ Â´rtÂ´kË , a nËi u e e u o â€ 5 hallgatÂ´k osztÂ´lyÂ´ba tartoznak). o a a

1.4. Sikeres alkalmazÂ´sok a
Az adat bÂ´nyÂ´szataâ€ eredetileg statisztikusok altal hasznÂ´lt kifejezÂ´s, az adatok nem a a Â´ a e â€ kellËkÂ´ppen megalapozott felhasznÂ´lÂ´sÂ´ra, amely sorÂ´n valaki helytelen kÂ¨vetkeztetÂ´st von le. o e aa a a o e Igaz ugyanis, hogy tetszËleges adathalmazban felfedezhetÂ¨ nk valamilyen struktÂ´ rÂ´t, ha elÂ´g o u ua e sokÂ´ig nÂ´zzÂ¨ k az adatot. IsmÂ´t utalunk a lehetsÂ´ges kÂ¨vetkeztetÂ´sek nagy szÂ´mÂ´bÂ´l eredË a e u e e o e a a o o veszÂ´lyre. A helytelen kÂ¨vetkeztetÂ´sre az egyik leghÂ´ e o e Ä±resebb pÂ´lda az alÂ´bbi : Az 50-es Â´vekben e a e
A dÂ¨ntÂ´si fa Â´pÂ´ esekor altalÂ´ban nem kÂ¨vetelmÂ´ny, hogy egy levÂ´lbeli osszes rekord ugyanazon osztÂ´lyba o e e Ä±tÂ´ Â´ a o e e Â¨ a tartozzon, elÂ´g, ha nagy rÂ´szÂ¨kâ€ azonos osztÂ´lyba tartozik. Ebben a konkrÂ´t pÂ´ldÂ´ban az osszes fogamzÂ´sgÂ´tlÂ´t e e u a e e a Â¨ a a o â€ szedË hallgatÂ´ nË volt. o o o
5

Â´ 1. FEJEZET. BEVEZETES

14

David Rhine parapszicholÂ´gus diÂ´kokat vizsgÂ´lt meg azzal a cÂ´llal, hogy parapszicholÂ´giai o a a e o kÂ´pessÂ´ggel rendelkezËket talÂ´ljon. Minden egyes diÂ´knak 10 lefedett kÂ´rtya szÂ´ et kellett mege e o a a a Ä±nÂ´ tippelne (piros vagy fekete). A kÂ´ erlet eredmÂ´nyekÂ´nt bejelentette, hogy a diÂ´kok 0,1%-a paÄ±sÂ´ e e a rapszicholÂ´giai kÂ´pessÂ´ggel rendelkezik (a teljesen vÂ´letlenszerË en tippelËk kÂ¨zÂ¨tt a helyesen o e e e u o o o tippelËk vÂ´rhatÂ´ szÂ´ma statisztikailag nagyjÂ´bÂ´l ennyi, hiszen annak valÂ´szÂ´ usÂ´ge, hogy valao a o a a o o Ä±nË e 1 ki mind a tÂ´ kÂ´rtyÂ´t eltalÂ´lja 21 = 1024 ). Ezekkel a diÂ´kokkal ujra elvÂ´gezte a kÂ´ erletet, am Ä±z a a a a Â´ e Ä±sÂ´ Â´ 10 ezÂ´ ttal a diÂ´kok eredmÂ´nye teljesen atlagos volt. Rhine kÂ¨vetkeztetÂ´se szerint az, aki parapsziu a e Â´ o e cholÂ´giai kÂ´pessÂ´ggel rendelkezik Â´s errËl nem tud, elveszti eme kÂ´pessÂ´gÂ´t, miutÂ´n tudomÂ´st o e e e o e e e a a szerez rÂ´la. o A fenti pÂ´lda ellenÂ´re mÂ´ra az adatbÂ´nyÂ´szat szÂ´ elvesztette jelentÂ´sÂ´nek negatÂ´ tartalmÂ´t, e e a a a o ee Ä±v a a szÂ´mos sikeres alkalmazÂ´snak kÂ¨szÂ¨nhetËen. A teljessÂ´g igÂ´nye nÂ´lkÂ¨ l felsorolunk belËlÂ¨ k a a o o o e e e u ou nÂ´hÂ´nyat. e a â€“ A bankok egyre gyakrabban alkalmaznak olyan automatikusan elËallÂ´ oÂ´ Ä±tott dÂ¨ntÂ´si fÂ´kat, o e a amelyek alapjÂ´n egy program javaslatot tesz egy hitel megÂ´ elÂ´sÂ´rËl. Ezt a kÂ´relmezËk a Ä±tÂ´ e e o e o szemÂ´lyes, tovÂ´bbÂ´ elËzetes hitelfelvÂ´teli Â´s tÂ¨rlesztÂ´si adatai alapjÂ´n teszi (osztÂ´lyozÂ´s) e a a o e e o e a a a [167]. Tesztek pÂ´ldÂ´ul igazoltÂ´k, hogy a hitelbÂ´ alat minËsÂ´ge javult az USA-ban, amikor e a a Ä±rÂ´ oe a bankok attÂ´rtek a kÂ¨telezËen alkalmazott, Â´ asban rÂ¨gzÂ´ Â´ e o o Ä±rÂ´ o Ä±tett szabÂ´lyok alkalmazÂ´sÂ´ra a aa [167]. Ezeket a szabÂ´lyokat pedig az adatbÂ´nyÂ´szat segÂ´ egÂ´vel allÂ´ a a a Ä±tsÂ´ e Â´ Ä±tottÂ´k ossze. a Â¨ â€“ A vÂ´sÂ´rlÂ´i szokÂ´sok felderÂ´ ese szupermarketekben, illetve nagy vevËkÂ¨rrel rendelkezË aa o a Ä±tÂ´ o o o aruhÂ´zakban hasznos lehet az aruhÂ´z termÂ´ktÂ´rkÂ´pÂ´nek kialakÂ´ asÂ´nÂ´l, akciÂ´k, eladÂ´shelyi Â´ a Â´ a e e e e Ä±tÂ´ a a o a reklÂ´mok (Point of Sales, Point of Purchase), leÂ´razÂ´sok szervezÂ´sÂ´nÂ´l. . . (asszociÂ´ciÂ´s a a a ee e a o szabÂ´lyok). a â€“ Az ember genotÂ´ anak elemzÂ´sÂ´hez a gÂ´nek nagy szÂ´ma miatt szintÂ´n adatbÂ´nyÂ´szati Ä±pusÂ´ ee e a e a a algoritmusok szÂ¨ ksÂ´gesek. Az eddigi sikeres kÂ´ erletek cÂ´lja olyan gÂ´ncsoportok feltÂ´rÂ´sa u e Ä±sÂ´ e e aa volt, amelyek a cukorbetegsÂ´g bizonyos vÂ´ltozataiÂ´rt felelËsek. A teljes emberi gÂ´nrendszer e a e o e feltÂ´rÂ´sÂ´val ez a terÂ¨ let egyre fontosabb lesz. aaa u â€“ Az on-line aruhÂ´zak a jÂ¨vËben egyre elfogadottabbak Â´s elterjedtebbek lesznek. Mivel az Â´ a o o e on-line kereskedelemben nem hasznÂ´lhatÂ´ak a megszokott szemÂ´lyes marketing eszkÂ¨zÂ¨k a a o e o o forgalom (Â´s a proï¬t) szemÂ´lyre szabott vÂ´sÂ´rlÂ´si ajÂ´nlatokkal nÂ¨velhetË. Az ajÂ´nlatokat e e aa a a o o a az eddigi vÂ´sÂ´rlÂ´si adatok Â´s a rendelkezÂ´sre allÂ´ demogrÂ´ï¬ai adatok elemzÂ´se alapjÂ´n aa a e e Â´ o a e a tehetjÂ¨ k meg (epizÂ´dkutatÂ´s, asszociÂ´ciÂ´s szabÂ´lyok). u o a a o a â€“ A csillagÂ´szatban az Â´gitestek oriÂ´si szÂ´ma miatt a hagyomÂ´nyos klaszterezË algoritmusok a e Â´ a a a o mÂ´g a mai szÂ´mÂ´ asi kapacitÂ´sok mellett sem kÂ´pesek racionÂ´lis idËn belÂ¨ l kÂ¨ lÂ¨nbsÂ´get e a Ä±tÂ´ a e a o u uo e tenni galaxisok, kÂ¨zeli csillagok Â´s mÂ´s Â´gi objektumok kÂ¨zÂ¨tt. Az ujabb, kiï¬nomultabb o e a e o o Â´ algoritmusok futÂ´si ideje jÂ´val kevesebb, ami lehetËvÂ´ teszi a klaszterezÂ´st (klaszterezÂ´s). a o o e e e â€“ UtazÂ´s szervezÂ´ssel kapcsolatos mintÂ´k kinyerÂ´sÂ´vel hatÂ´konyabban (Â´s ennek kÂ¨veta e a ee e e o keztÂ´ben nagyobb nyeresÂ´ggel) megszervezhetËk a nagy kÂ¨ltsÂ´gfaktorÂ´ tÂ´nyezËk, pl. e e o o e u e o szÂ´llodai szobÂ´k, repÂ¨ lËjegyek leÂ´razÂ´sa, vagy aremelÂ´se (epizÂ´dkutatÂ´s, gyakori minta). a a uo a a Â´ e o a â€“ Kiï¬nomult gyÂ´rtÂ´si folyamatok sorÂ´n gyakran a beÂ´llÂ´ asi paramÂ´terek ï¬nomhangolÂ´sÂ´ra a a a a Ä±tÂ´ e aa van szÂ¨ ksÂ´g. A kËolaj Â´s a fÂ¨ldgÂ´z szÂ´tvÂ´lasztÂ´sa az olajï¬nomÂ´ as szÂ¨ ksÂ´ges elËfeltÂ´tele, u e o e o a e a a Ä±tÂ´ u e o e de az elvÂ´lasztÂ´si folyamat kontrollÂ´lÂ´sa nem kÂ¨nnyË feladat. A British Petroleum a a aa o u

Â´ 1. FEJEZET. BEVEZETES

15

olajvÂ´llalat a gÂ´pi tanulÂ´s technikÂ´jÂ´t hasznÂ´lta a paramÂ´ter-beÂ´llÂ´ as szabÂ´lyainak mega e a aa a e a Ä±tÂ´ a alkotÂ´sÂ´ra. Most ez tÂ´ percet vesz igÂ´nybe, mÂ´ korÂ´bban szakÂ´rtËk tÂ¨bb, mint egy napi aa Ä±z e Ä±g a e o o munkÂ´jÂ´t vette igÂ´nybe. aa e â€“ A Westinghouse cÂ´g nukleÂ´ris tÂ¨ zelËanyag-cellÂ´k gyÂ´rtÂ´sa sorÂ´n utkÂ¨zÂ¨tt problÂ´mÂ´kba, Â´s e a u o a a a a Â¨ o o e a e szintÂ´n a gÂ´pi tanulÂ´s segÂ´ egÂ´vel hoztak lÂ´tre folyamatkontrollÂ´lÂ´si szabÂ´lyokat. Ezzel 10 e e a Ä±tsÂ´ e e aa a milliÂ´ USD-t sikerÂ¨ lt megspÂ´rolniuk az 1984-es Â´vben. A Tenessee allambeli R.R. Donelly o u o e Â´ nyomdaipari cÂ´g ugyanezt az otletet alkalmazta a retogravÂ´ r nyomdagÂ´pek irÂ´nyÂ´ asÂ´ra, e Â¨ u e a Ä±tÂ´ a Â´ csÂ¨kkentve a hibÂ´s paramÂ´ter-beÂ´llÂ´ asok kÂ¨vetkeztÂ´ben keletkezË selejtes nyomatok Ä±gy o a e a Ä±tÂ´ o e o szÂ´mÂ´t Â´vi 500-rÂ´l 30-ra. a a e o â€“ A vÂ´ olË programok az ismert vÂ´ Ä±rusÂ¨ o Ä±rusokat lenyomataik alapjÂ´n detektÂ´ljÂ´k, az ismeretlea a a neket pedig tÂ¨bbnyire valamilyen heurisztikus mÂ´don prÂ´bÂ´ljÂ´k kiszË rni. OsztÂ´lyozÂ´ alo o o a a u a o goritmusok felhasznÂ´lÂ´sÂ´val az ismert vÂ´ aa a Ä±rusok tulajdonsÂ´gai alapjÂ´n olyan modellt lehet a a felÂ´llÂ´ a Ä±tani, ami jÂ´l leÂ´ a vÂ´ o Ä±rja Ä±rusok tulajdonsÂ´gait [151, 152]. A modellt sikeresen alkala maztÂ´k uj ismeretlen vÂ´ a Â´ Ä±rusok kiszË rÂ´sÂ´re (osztÂ´lyozÂ´s). uee a a TovÂ´bbi esettanulmÂ´nyokrÂ´l a 15.3.2 rÂ´szben olvashatunk. a a o e A fentiekben a sikeres alkalmazÂ´sokat ismertettÂ¨ k. A kÂ¨vetkezËben tovÂ´bbi alkalmazÂ´sokat a u o o a a mutatunk be. CÂ´lunk, hogy szemlÂ´ltessÂ¨ k a diszciplÂ´ kiterjedtsÂ´gÂ´t Â´s aktuÂ´lis allÂ´sÂ´t. e e u Ä±na e e e a Â´ aa â€“ Az emberi mestersÂ´ges megtermÂ´kenyÂ´ es sorÂ´n petesejtek sokasÂ´gÂ´t gyË jtik ossze a nËi e e Ä±tÂ´ a a a u Â¨ o petefÂ´szekbËl. Ezeket a partner, vagy donor spermÂ´ival megtermÂ´kenyÂ´ e o a e Ä±tve szÂ´mos embriÂ´ a o fejlËdik ki. KÂ¨zÂ¨ lÂ¨ k nÂ´hÂ´nyat kivÂ´lasztanak, Â´s az anyamÂ´hbe ultetnek. A problÂ´mÂ´t a o o uu e a a e e Â¨ e a leginkÂ´bb Â´letkÂ´pes, legjobb tÂ´ lÂ´lÂ´si esÂ´lyekkel rendelkezË embriÂ´k kivÂ´lasztÂ´sa jelenti. a e e uee e o o a a A kivÂ´lasztÂ´s az embriÂ´k kÂ¨rÂ¨ lbelÂ¨ l hatvan rÂ¨gzÂ´ a a o ou u o Ä±tett jellegzetessÂ´gÂ´n â€“ a magzat more e folÂ´giÂ´jÂ´n, oocita-, tÂ¨ szËsejt- Â´s spermamintÂ´kon â€“ alapszik. A jellemzËk szÂ´mossÂ´ga o aa u o e a o a a elegendËen nagy ahhoz, hogy tÂ´ l bonyolult legyen az embriolÂ´gusoknak valamennyit o u o pÂ´rhuzamosan megbecsÂ¨ lni Â´s osszefÂ¨ ggÂ´st talÂ´lni a mÂ´ ltbÂ´li esetek kezdeti jellemzËi Â´s a u e Â¨ u e a u e o e azok kimenetele kÂ¨zÂ¨tt, azaz, hogy az embriÂ´bÂ´l vÂ´gÂ¨ l Â´letkÂ´pes csecsemË szÂ¨ letett-e o o o o e u e e o u vagy sem. Egy angol kutatÂ´si projekt arra irÂ´nyulÂ´ kutatÂ´st folytat, hogy hogyan lehet a a a o a kivÂ´lasztÂ´st gÂ´pi tanulÂ´ssal â€“ az embriÂ´k rÂ¨gzÂ´ a a e a o o Ä±tett adatait tanÂ´ ohalmazkÂ´nt hasznÂ´lva â€“ Ä±tÂ´ e a megvalÂ´sÂ´ o Ä±tani. Â´ e â€“ Az Uj-ZÂ´landi tejgazdasÂ´goknak minden Â´vben kemÂ´ny uzleti dÂ¨ntÂ´st kell meghozniuk : a e e Â¨ o e ki kell vÂ´lasztani, hogy a szarvasmarha allomÂ´ny mely egyedeit tartjÂ´k meg, Â´s melyeket a Â´ a a e Â´rtÂ´kesÂ´ vÂ´gÂ´hidaknak. Tipikusan minden gazdasÂ´g otÂ¨dik egyede kerÂ¨ l mÂ´szÂ´rszÂ´kre a e e Ä±tik a o a Â¨o u e a e fejÂ´si idÂ´ny vÂ´gÂ´n, ahogy az Â´lelmezÂ´si tartalÂ´kok kiapadnak. A dÂ¨ntÂ´st az egyes pÂ´ldÂ´nyok e e e e e e e o e e a tenyÂ´szadatai Â´s mÂ´ ltbÂ´li tejtermelÂ´kenysÂ´gi mutatÂ´ja befolyÂ´solja. TovÂ´bbi kritikus fake e u e e e o a a torok az egyed kora (egy pÂ´ldÂ´ny kb. 8 Â´vesen Â´ri el produktÂ´ korszakÂ´nak vÂ´gÂ´t), e a e e Ä±v a e e kÂ´rtÂ¨rtÂ´nete, szÂ¨ lÂ´si komplikÂ´ciÂ´k, nemkÂ´ anatos jellemvonÂ´sok (agresszivitÂ´s, kerÂ´ es o o e ue a o Ä±vÂ´ a a Ä±tÂ´ atugrÂ´sa), illetve az, hogy a kÂ¨vetkezË szezonban vemhes-e. TÂ¨bb milliÂ´ szarvasmarÂ´ a o o o o ha egyedenkÂ´nt tÂ¨bb mint 700 tulajdonsÂ´gÂ´t rÂ¨gzÂ´ ek az Â´vek sorÂ´n. A kutatÂ´k azt e o a a o Ä±tettÂ´ e a o vizsgÂ´ljÂ´k, hogyan hasznÂ´lhatÂ´ fel a gÂ´pi tanulÂ´s annak megÂ´llapÂ´ asÂ´ra, hogy a sikeres a a a o e a a Ä±tÂ´ a farmerek mely faktorokat veszik szÂ´mÂ´ asba a szelektÂ´lÂ´snÂ´l. Ezzel nem a dÂ¨ntÂ´si folyamat a Ä±tÂ´ aa a o e gÂ´pesÂ´ ese a cÂ´ljuk, hanem a sikerstratÂ´gia kitanulÂ´sa, Â´s annak kÂ¨zkinccsÂ´ tÂ´tele. e Ä±tÂ´ e e a e o e e

Â´ 1. FEJEZET. BEVEZETES

16

1.5. SzabvÂ´nyok a
Kezdetben sok adatbÂ´nyÂ´szati projektre jellemzË volt, hogy az adatbÂ´nyÂ´szok megkaptÂ´k a a o a a a az adatokat Â´s nÂ´mi informÂ´ciÂ´t az alkalmazÂ´si terÂ¨ letrËl Â´s cserÂ´be vÂ´rtÂ´k tËlÂ¨ k a kincset e e a o a u o e e a a ou Â´rË informÂ´ciÂ´kat. A szoros egyÂ¨ ttmË kÂ¨dÂ´s hiÂ´nya azonban csak olyan informÂ´ciÂ´khoz vezetett eo a o u u o e a a o amelyekkel az alkalmazÂ´si terÂ¨ let embererei nem sok mindent tudtak kezdeni. Az adatbÂ´nyÂ´szat a u a a elterjedÂ´sÂ´vel (Â´s a minËsÂ´gbiztosÂ´ asi elvÂ´rÂ´sokkal) fellÂ´pett az igÂ´ny, hogy legyen egy szabvÂ´ny, ee e oe Ä±tÂ´ aa e e a egy utmutatÂ´ az adatbÂ´nyÂ´szati projektek lebonyolÂ´ asÂ´rÂ´l. Â´ szÂ¨ letett meg a CRISP-DM Â´ o a a Ä±tÂ´ a o Igy u (CRoss Industry Standard Process for Data Mining) [34], amely adatbÂ´nyÂ´szati eszkÂ¨ztËl Â´s a a o o e felhasznÂ´lÂ´si terÂ¨ lettËl fÂ¨ ggetlenÂ¨ l leÂ´ aa u o u u Ä±rja, hogy mikÂ´nt kellene kinÂ´znie egy adatbÂ´nyÂ´szati proe e a a jektnek, illetve ismerteti a kulcsfontossÂ´gÂ´ lÂ´pÂ´seket, Â´s a potenciÂ´lis veszÂ´lyeket. A CRISP-DM a u e e e a e szerint a tudÂ´skinyerÂ´s az 1.6 abra szerinti mÂ´don jÂ¨n lÂ´tre. a e Â´ o o e

1.6. abra. A tudÂ´sfeltÂ´rÂ´s folyamata a CRISP-DM szerint Â´ a aa Az adatbÂ´nyÂ´szati folyamat szabvÂ´nyosÂ´ asa mellett egyre nagyobb az igÂ´ny a folyamat a a a Ä±tÂ´ e egyes lÂ´pÂ´seiben felmerÂ¨ lË megoldÂ´sok, problÂ´mÂ´k, eszkÂ¨zÂ¨k szabvÂ´nyosÂ´ asÂ´ra. Ezek kÂ¨zÂ¨ l a e e uo a e a o o a Ä±tÂ´ a o u legismertebbek : â€“ az XML alapÂ´ PMML (Predictive Modeling Markup Language), amely az adatbÂ´nyÂ´szati u a a eredmÂ´nyek szabvÂ´nyos leÂ´ asÂ´t szolgÂ´lja, e a Ä±rÂ´ a a â€“ a Microsoft analysis szerver adatbÂ´nyÂ´szati funkciÂ´kkal kibËvÂ´ a a o o Ä±tett szabvÂ´nya (OLE DB a for data mining),

Â´ 1. FEJEZET. BEVEZETES

17

â€“ az ISO tÂ¨rekvÂ´sei multimÂ´dia Â´s alkalmazÂ´s speciï¬kus SQL tÂ´ o e e e a Ä±pusok Â´s a hozzÂ´ tartozÂ´ e a o eljÂ´rÂ´sok deï¬niÂ´lÂ´sÂ´ra (SQL/MM) aa aa a â€“ java adatbÂ´nyÂ´szati API (JDMAPI) a a

1.6. AdatbÂ´nyÂ´szati rendszer architektÂ´ rÂ´ja a a u a
Egy adatbÂ´nyÂ´szati rendszernek kapcsolatban kell lennie az adatbÂ´zissal, a felhasznÂ´lÂ´val a a a ao Â´s esetleg valami tudÂ´salapÂ´ rendszerrel. Ezek alapjÂ´n egy tipikus adatbÂ´nyÂ´szati architektÂ´ ra e a u a a a u az 1.7. abrÂ´n lÂ´thatÂ´. Â´ a a o

grafikus felhasznÃ¡lÃ³i felÃ¼let

minta kiÃ©rtÃ©kelÃ©s

adatbÃ¡nyÃ¡sz motor

tudÃ¡s bÃ¡zis

AdatbÃ¡zis vagy adattÃ¡rhÃ¡z szerver adattisztÃ­tÃ¡s adatintegrÃ¡ciÃ³ " szurÃ©s

adatbÃ¡zis

adatâˆ’ tÃ¡rhÃ¡z

1.7. abra. Tipikus adatbÂ´nyÂ´szati rendszer architektÂ´ rÂ´ja Â´ a a ua AdatbÂ´zis, adattÂ´rhÂ´z vagy mÂ´s informÂ´ciÂ´ raktÂ´r : Itt talÂ´lhatÂ´k a tÂ´nyleges adatok, a a a a a o a a o e ami lehet egy adatbÂ´zis, vagy adattÂ´rhÂ´z, akÂ´r egy munkalap vagy bÂ´rmilyen tÂ´rolt ina a a a a a formÂ´ciÂ´. Az adattisztÂ´ as Â´s integrÂ´ciÂ´ kÂ¨zvetlenÂ¨ l az adatokon is elvÂ´gezhetË. a o Ä±tÂ´ e a o o u e o AdatbÂ´zis vagy adattÂ´rhÂ´z szerver : A szerver felelËs a felhasznÂ´lÂ´ altal kÂ´rt adat a a a o ao Â´ e kÂ´zbesÂ´ esÂ´Â´rt. e Ä±tÂ´ ee TudÂ´s bÂ´zis : A terÂ¨ letre jellemzË, valamilyen szinten formalizÂ´lhatÂ´ tudÂ´s talÂ´lhatÂ´ itt. Fona a u o a o a a o tos szerepe lehet ennek a keresÂ´si tÂ´r szË kÂ´ esÂ´nÂ´l, a kinyert mintÂ´k Â´rdekessÂ´gÂ´nek mege e u Ä±tÂ´ e e a e e e hatÂ´rozÂ´sÂ´nÂ´l, kÂ¨ lÂ¨nbÂ¨zË paramÂ´terek Â´s kÂ¨ szÂ¨bszÂ´mok meghatÂ´rozÂ´sÂ´nÂ´l. a a a a uo o o e e u o a a aa a AdatbÂ´nyÂ´sz motor : Az adatbÂ´nyÂ´sz motorban futnak a kÂ¨ lÂ¨nbÂ¨zË adatbÂ´nyÂ´szati algorita a a a uo o o a a musok.

Â´ 1. FEJEZET. BEVEZETES

18

Minta kiÂ´rtÂ´kelË modul : Ez a modul felelËs a kinyert minta vagy osszefÂ¨ ggÂ´sek e e o o Â¨ u e kiÂ´rtÂ´kelÂ´sÂ´Â´rt a terÂ¨ letre jellemzË Â´rdekessÂ´gi mutatÂ´k alapjÂ´n. Sokszor lÂ´tni fogjuk, e e e ee u o e e o a a hogy minÂ´l jobban egybe tudjuk Â´pÂ´ e e Ä±teni az adatbÂ´nyÂ´szatot a minta kiÂ´rtÂ´kelÂ´sÂ´vel, annÂ´l a a e e ee a hatÂ´konyabb Â´s gyorsabb lehet a tudÂ´sfeltÂ´rÂ´s. e e a aa Graï¬kus felhasznÂ´lÂ´i felÂ¨let : Itt zajlik a kommunikÂ´ciÂ´ a felhasznÂ´lÂ´ Â´s az adatbÂ´nyÂ´szati ao u a o aoe a a rendszer kÂ¨zÂ¨tt. A felhasznÂ´lÂ´ itt adhatja meg, hogy melyik adatbÂ´zisban milyen jelo o ao a legË osszefÂ¨ ggÂ´seket keres Â´s ezen a rÂ´tegen keresztÂ¨ l lÂ´thatja a vÂ´geredmÂ´nyt. Az u Â¨ u e e e u a e e osszefÂ¨ ggÂ´sek atlÂ´thatÂ´, Â´rtelmes tÂ´lalÂ´sa rendkÂ´ ul fontos, hiszen ennek hiÂ´nya elriasztÂ¨ u e Â´ a o e a a Ä±vÂ¨ a hatja a felhasznÂ´lÂ´t az adatbÂ´nyÂ´szattÂ´l. ao a a o

1.7. AdatbÂ´nyÂ´szat Â´s az etika a a e
Az internet szÂ´leskÂ¨rË terjedÂ´sÂ´vel, Â´s a modern technikÂ´k megjelenÂ´sÂ´vel a jogi szabÂ´lyozÂ´s e ou ee e a ee a a sokszor kÂ´ptelen lÂ´pÂ´st tartani. Ilyen terÂ¨ let az adatbÂ´nyÂ´szat is, mint felfutÂ´ tudomÂ´nyÂ´g. e e e u a a o a a BÂ´r a szemÂ´lyes adatok vÂ´delmÂ´rËl mÂ´r szÂ¨ lettek jogszabÂ´lyok, ezek nem minden esetben a e e eo a u a teljeskÂ¨rË ek, illetve mÂ´g Â´ is sok etikai problÂ´mÂ´t hagynak nyitva. ElmondhatÂ´, hogy a ou e Ä±gy e a o tÂ¨rvÂ´ny nagyrÂ´szt azt szabÂ´lyozza, ami egyben etikÂ´tlan is, Â´ ebben a rÂ´szben 6 Â´ljÂ¨ nk azo e e a a Ä±gy e e u zal a feltÂ´telezÂ´ssel, hogy minden tÂ¨rvÂ´nyesen tÂ¨rtÂ´nik az adatbÂ´nyÂ´szati projekt sorÂ´n. e e o e o e a a a ElËszÂ¨r is sokak altal kifogÂ´solt terÂ¨ let az adatok begyË jtÂ´se. A mai ember lÂ´pten-nyomon o o Â´ a u u e e informÂ´ciÂ´kat szÂ´r szÂ´t magÂ´rÂ´l : minden uzletben kamerÂ´k vannak elhelyezve, szÂ¨rfÂ¨l az intera o o e ao Â¨ a o o neten, bÂ´rhol hasznÂ´lhat hitelkÂ´rtyÂ´t, tÂ¨rzsvÂ´sÂ´rlÂ´i kÂ´rtyÂ´t. Ezen tevÂ´kenysÂ´gek sorÂ´n rengeteg a a a a o aa o a a e e a adatbÂ´zisban hagy magÂ´rÂ´l informÂ´ciÂ´t. A szemÂ´lyes informÂ´ciÂ´k begyË jtÂ´sÂ´nÂ´l - a tÂ¨rvÂ´ny szea ao a o e a o u ee e o e rint - az Â´rintetteket tÂ´jÂ´koztatni kell arrÂ´l, hogy ki, milyen cÂ´lbÂ´l fogja azt feldolgozni. Ezt a e ae o e o cÂ´lt az adatbÂ´nyÂ´szatnÂ´l nem lehet elËre azonosÂ´ e a a a o Ä±tani, mert az elemzÂ´s elËtt nem tudjuk mege o mondani, hogy milyen informÂ´ciÂ´kat fogunk kinyerni az adatbÂ´zisbÂ´l, Â´s nÂ´hÂ´ny esetben mÂ´g a o a o e e a e azt sem tudjuk garantÂ´lni, hogy az eredmÂ´ny egyÂ´ltalÂ´n felhasznÂ´lÂ´sra kerÂ¨ l. Ez is mutatja, a e a a aa u hogy az adatok begyË jtÂ´sÂ´re uj szabÂ´lyozÂ´sokat kellene alkotni. Erre egy lehetsÂ´ges megoldÂ´s, u ee Â´ a a e a ha az Â´rintett azt dÂ¨ntheti el, hogy â€“ altalÂ´nosan â€“ adatbÂ´nyÂ´szati cÂ´lra felhasznÂ´lhatÂ´ak-e e o Â´ a a a e a o Â´ az adatai. ErezhetË azonban, hogy amÂ´ az ugyfÂ´l nincs tisztÂ´ban azzal, hogy az adatokbÂ´l o Ä±g Â¨ e a o mire tudnak egyÂ´ltalÂ´n kÂ¨vetkeztetni, Â´s mire tudjÂ´k ezt a kÂ¨vetkeztetÂ´st felhasznÂ´lni, addig a a o e a o e a kevÂ´sbÂ´ fog Â´lni azzal a lehetËsÂ´gÂ´vel, hogy letiltsa adatainak felhasznÂ´lÂ´sÂ´t vagy tÂ´rolÂ´sÂ´t. Az e e e oe e aa a a aa pedig mÂ´g nyilvÂ´nvalÂ´bb, hogy a cÂ´geknek nem all Â´rdekÂ¨ kben onkÂ´nt megosztani ezeket az e a o e Â´ e u Â¨ e informÂ´ciÂ´kat az ugyfÂ´llel, vagy akÂ´r a versenytÂ´rsakkal [126]. a o Â¨ e a a Az osztÂ´lyozÂ´si feladatok kapcsÂ´n mÂ´sfajta morÂ´lis problÂ´mÂ´k is fellÂ´phetnek : egyrÂ´szt a a a a a e a e e magÂ´t a mÂ´dszertant tÂ´madjÂ´k az ellenzËi, mÂ´srÂ´szt kÂ¨nnyen felhasznÂ´lhatÂ´ diszkriminÂ´ciÂ´ra. a o a a o a e o a o a o Sokan azt a hozzÂ´allÂ´st tartjÂ´k aggasztÂ´nak, hogy elËzetes szemÂ´lyes ismeretsÂ´g nÂ´lkÂ¨ l sorolaÂ´ a a o o e e e u janak be egyÂ´neket bizonyos csoportokba. PÂ´ldÂ´ul az amerikai allampolgÂ´rok egy felmÂ´rÂ´s sorÂ´n e e a Â´ a ee a kifogÂ´soltÂ´k a hitelbÂ´ alatban bevezetett automatikus dÂ¨ntÂ´shozÂ´st, mert ugy Â´rzik, Â´ kevÂ´sbÂ´ a a Ä±rÂ´ o e a Â´ e Ä±gy e e foglalkoznak velÂ¨ k, szemÂ´lytelenebbÂ´ vÂ´lt a rendszer, csak egy adathalmazkÂ´nt tekintenek rÂ´juk. u e e a e a A szemÂ´lyes ismeretsÂ´g nÂ´lkÂ¨ li besorolÂ´s sorÂ´n fennÂ´ll a veszÂ´lye, hogy rossz eredmÂ´nyt ad e e e u a a a e e a rendszer, fËkÂ´nt, ha kevÂ´s attribÂ´ tummal dolgozunk. PrÂ´bÂ´ljuk meg pÂ´ldÂ´ul az embereket o e e u o a e a gyerek-felnËtt csoportokba besorolni, a kor attribÂ´ tum ismerete nÂ´lkÂ¨ l. A legkÂ´zenfekvËbb mego u e u e o oldÂ´s a testsÂ´ lyuk Â´s testmagassÂ´guk szerint osztÂ´lyozni oket. Ez a mÂ´dszer viszont sok esetben a u e a a Ë o
6

Ezt a rÂ´szt Huczman Zsuzsanna Â´ e Ä±rta.

Â´ 1. FEJEZET. BEVEZETES

19

tÂ´ves eredmÂ´nyhez vezet. A diszkriminÂ´ciÂ´nak az asszociÂ´ciÂ´s szabÂ´lyok kinyerÂ´se adhat teret. e e a o a o a e Â´ e ErzÂ´keny adatokat â€“ mint pÂ´ldÂ´ul a vallÂ´s, faji hovatartozÂ´s, szexuÂ´lis irÂ´nyultsÂ´g â€“ tilos fele a a a a a a dolgozni, egy egyszerË adatbÂ´nyÂ´szati algoritmussal viszont nagyon kÂ¨nnyen megoldhatÂ´nak u a a o o tË nik a vÂ´sÂ´rlÂ´i szokÂ´sokbÂ´l a nemi hovatartozÂ´s, vagy akÂ´r egy megfelelË kÂ´rdËÂ´ esetÂ´ben a u aa o a o a a o e oÄ±v e faji hovatartozÂ´s megÂ´llapÂ´ asa. Az, hogy ezek az adatok ne kerÂ¨ ljenek felhasznÂ´lÂ´sra, a projekt a a Ä±tÂ´ u aa vezetËjÂ´nek felelËssÂ´ge. Az elËbb emlÂ´ oe o e o Ä±tettek kÂ´nyesebbâ€ terÂ¨ letek, de belÂ´thatjuk, hogy mÂ´r e u a a â€ az is diszkriminÂ´ciÂ´nak szÂ´mÂ´ ha egy bizonyos vÂ´sÂ´rlÂ´i csoportot elËnyÂ¨khÂ¨z juttatunk egy a o a Ä±t, aa o o o o olyannal szemben, amely sokkal kevesebb proï¬tot Â´ er elemzÂ´seink alapjÂ´n. A pozitÂ´ diszkriÄ±gÂ´ e a Ä±v minÂ´ciÂ´ra jÂ´ pÂ´lda, amikor a telefonszolgÂ´ltatÂ´k ajÂ´ndÂ´kot ajÂ´nlanak fel uj elËï¬zetËik szÂ´mÂ´ra a o o e a o a e a Â´ o o a a [183]. Ugyanakkor EurÂ´pÂ´ban az automatikus dÂ¨ntÂ´si fÂ´k alkalmazÂ´sa a hitelbÂ´ alatban pont a o a o e a a Ä±rÂ´ diszkriminÂ´ciÂ´ kikÂ¨ szÂ¨bÂ¨lÂ´se a rendszerbËl, hiszen a jogszabÂ´ly szerint a matematikai hÂ´tterÂ´t a o u o oe o a a e az ugyfÂ´l kÂ´rÂ´sÂ´re fel kell fedni. (Ez az USA-banâ€ pÂ´ldÂ´ul nem kÂ¨telessÂ´ge a banknak, Â´ Â¨ e eee e a o e Ä±gy â€ lehetËsÂ´ge van diszkriminÂ´lni.) oe a TovÂ´bbi etikailag megkÂ´rdËjelezhetË, Â´rdekes felvetÂ´sek : a e o o e e â€“ A kÂ¨ lÂ¨nc pontok kezelÂ´se egy mÂ´sik adatbÂ´nyÂ´szati terÂ¨ let, ahol felmerÂ¨ l, hogy jogÂ´ban uo e a a a u u a all-e bÂ´rkinek meghatÂ´rozni, hogy mi tekinthetË normÂ´lis viselkedÂ´snek, illetve elËkerÂ¨ lhet Â´ a a o a e o u a relativitÂ´selmÂ´letbËl ismert tÂ´tel : miszerint a megï¬gyelt rendszer viselkedÂ´se a megï¬a e o e e gyelÂ´s tÂ´nyÂ´tËl is megvÂ´ltozik. e e eo a â€“ HazÂ´nkban az adatbÂ´nyÂ´szatot â€“ annak ara miatt â€“ fËkÂ´nt a marketing terÂ¨ letÂ´n a a a Â´ o e u e hasznÂ´ljÂ´k fel : cÂ´lzott reklÂ´mok kÂ¨ ldÂ´sÂ´re (direkt marketing) ; az akciÂ´s termÂ´kek mega a e a u ee o e hatÂ´rozÂ´sÂ´ra gyakran vett termÂ´kcsoportok alapjÂ´n ; uj tarifacsomagok bevezetÂ´sÂ´re. Fela aa e a Â´ ee merÂ¨ l a kÂ´rdÂ´s, hogy a szemÂ´lyes adatokat, amiket elvileg azÂ´rt tÂ´rolnak pl. telefonu e e e e a szolgÂ´ltatÂ´ esetÂ´n, hogy szÂ´mlÂ´zni tudjanak [165], etikus-e proï¬tszerzÂ´sre hasznÂ´lni ? a o e a a e a â€“ ha egy adatot kivesznek egy adott adathalmazbÂ´l - az egyÂ´n kÂ´rÂ´sÂ´re, - aminek mÂ´rete o e eee e pl. a vÂ´sÂ´rlÂ´i kosarakbÂ´l valÂ´ adatbÂ´nyÂ´szat esetÂ´n akÂ´r 109 rekord is lehet, ettËl mÂ´g aa o o o a a e a o e az elemzÂ´s elvÂ´gezhetË, Â´s az egyÂ´n Â´rdekeit nem sÂ´rti, de o is rÂ´szese lesz a kÂ¨vete e o e e e e Ë e o kezmÂ´nyeknek, pl. direkt-marketing ajÂ´nlatokat kaphat. e a VÂ´gÂ¨ l kÂ´t pÂ´lda az adatbÂ´nyÂ´szat etikai vonatkozÂ´saira : e u e e a a a Az emberi DNS altal hordozott informÂ´ciÂ´ kinyerÂ´se tiÂ´ a o e pikusan adatbÂ´nyÂ´szati feladat. RendkÂ´ ul Â´rzÂ´keny adatrÂ´l a a Ä±vÂ¨ e e o A krÂ´nikus fertËzÂ´sek deo o e â€ lÂ´vÂ´n szÂ´, az adatbÂ´zis, amivel eddig az adatbÂ´nyÂ´szok pressziÂ´t e e o a a a o Â´s e skizofrÂ´niÂ´t e a dolgoztak, nem egy konkrÂ´t szemÂ´ly DNS szekvenciÂ´jÂ´t okozhatnak â€“ allÂ´tjÂ´k nÂ´met e e aa Â´ Ä± a e tartalmaztÂ´k, hanem tÂ¨bb rÂ¨videbb szakaszbÂ´l allÂ´ DNS- kutatÂ´k.â€ a o o o Â´ o o ForrÂ´s : a http: lÂ´ncokat. NemrÂ´giben viszont egy kutatÂ´ elËallt a sajÂ´t //hvg.hu/egeszseg/20070512_ a e o oÂ´ a DNS-szekvenciÂ´jÂ´nak kulcsÂ´val, vagyis felfedte, hogy mi van depresszio_skizofrenia.aspx aa a belekÂ´dolva. Eddig ez technikailag Â´s tÂ¨rvÂ´nyesen nehezen o e o e volt megvalÂ´sÂ´ o Ä±thatÂ´. BelÂ´thatjuk, hogy nem sok Â´rtelme van o a e vizsgÂ´lni, hogy tÂ¨bb tÂ¨redÂ´k DNS milyen informÂ´ciÂ´t hordoz, hiszen pont azon lenne a hangsÂ´ ly, a o o e a o u hogy lÂ´tezË elËfordulÂ´sokat Â´s osszefÂ¨ ggÂ´seket lehessen vizsgÂ´lni [110]. A kutatÂ´ ezzel a lÂ´pÂ´sÂ´vel e o o a e Â¨ u e a o e ee nagyban hozzÂ´jÂ´rult a DNS-szerkezet megismerÂ´sÂ´hez, pÂ´ldÂ´jÂ´bÂ´l lÂ´thatjuk, hogy nÂ´ha a priaa ee e aa o a e vacy feladÂ´sa kell egy-egy eredmÂ´ny elÂ´rÂ´sÂ´hez. a e eee AdatbÂ´nyÂ´szati projektekben egyÂ´bkÂ´nt is gyakori, hogy az adathalmaz, amin az elemzÂ´st a a e e e el kellene vÂ´gezni, annyira titkos, vagy Â´rzÂ´keny adatokat tartalmaz, hogy a cÂ´gek nem is adjÂ´k e e e e a

Â´ 1. FEJEZET. BEVEZETES

20

ki a kezÂ¨ kbËl. Ilyenek pl. a tÂ´vkÂ¨zlÂ´si vÂ´llalatok vagy bankok adatai, amik a konkurencia u o a o e a szÂ´mÂ´ra nagy Â´rtÂ´kkel bÂ´ a a e e Ä±rnak. Ezekben az esetekben megoldÂ´s lehet, hogy a cÂ´g maga generÂ´l a a e a rendelkezÂ´sÂ´re allÂ´ adatokbÂ´l egy uj adatbÂ´zist, - amiknek nyilvÂ´n bizonyos kÂ¨vetelmÂ´nyeknek ee Â´ o o Â´ a a o e eleget kell tenniÂ¨ k - Â´s ezt kapja meg a kutatÂ´csoport elemzÂ´sre. Itt a cÂ´g felelËssÂ´ge, hogy u e o e e o e ellenËrizze, hogy az eredeti adathalmazban ugyanazok az osszefÂ¨ ggÂ´sek fennÂ´llnak-e, mint a o Â¨ u e a vizsgÂ´lt adathalmazban. a A mÂ´sik pÂ´lda az adatbÂ´nyÂ´szat Â´s az etika utkÂ¨zÂ´sÂ´re az a szinte mÂ´r utÂ´pisztikus projekt, a e a a e Â¨ o ee a o amit a NASA Â´s a Northwest Airlines indÂ´ e Ä±tott el : a Washington Times 2002 nyarÂ´n szÂ´molt a a be egy uj informÂ´ciÂ´s technolÂ´giai megvalÂ´sÂ´ asrÂ´l : A kÂ´t szervezetâ€ olyan alkalmazÂ´st fejÂ´ a o o o Ä±tÂ´ o e a â€ lesztett, Â´s uzemeltet, amely kÂ´pes elËrejelezni, megjÂ´solni az utasok vÂ´rhatÂ´ viselkedÂ´sÂ´t a e Â¨ e o o a o ee repÂ¨ lËtÂ´ren, illetve a repÂ¨ lËn. A technolÂ´gia alapja egy kÂ¨ lÂ¨nleges mË szer Â´s egy pszicholÂ´gusok uo e uo o uo u e o segÂ´ egÂ´vel kÂ´szÂ´ Ä±tsÂ´ e e Ä±tett program otvÂ¨zÂ¨tt alkalmazÂ´sa nagy adatbÂ´zisokon. A kapu kÂ´pes Â´rzÂ´kelni Â¨ o o a a e e e a rajta athaladÂ´ szemÂ´ly elektromÂ´gneses agyhullÂ´mait, a szÂ´ Â´ o e a a Ä±vritmusÂ´t, a pislogÂ´sÂ´t Â´s a a aa e testhËmÂ´rsÂ´kletÂ´t : gyakorlatilag egy szuper hazugsÂ´gvizsgÂ´lÂ´â€ berendezÂ´s. Ezeket az adatoo e e e a ao e â€ kat analizÂ´lva Â´s osszevetve kÂ¨ lÂ¨nbÂ¨zË adatbÂ´zisokkal, mint pÂ´ldÂ´ul bË nÂ¨ gyi nyilvÂ´ntartÂ´ssal, a e Â¨ uo o o a e a u u a a a gÂ´p jelez, ha kockÂ´zatot Â´rzÂ´kel. Ilyenkor a biztonsÂ´gi orÂ¨k mÂ´g mÂ´rlegelhetnek, mint ahogy e a e e a Ëo e e egyÂ´bkÂ´nt is tennÂ´k, Â´ a rendszert vÂ´dËk arra hivatkozhatnak, hogy csak dÂ¨ntÂ´stÂ´mogatÂ´st e e e Ä±gy e o o e a a vÂ´geznek. Az is mellettÂ¨ k szÂ´l, hogy az EgyesÂ¨ lt Allamokban a repÂ¨ lËtereken a titkos megï¬e u o u Â´ uo gyelÂ´s vÂ´gzÂ´se nem tÂ¨rvÂ´nybe utkÂ¨zË cselekedet. Az USA-ban a szemÂ´lyes adatok vÂ´delmÂ´re e e e o e Â¨ o o e e e kisebb hangsÂ´ lyt fektetnek a terrortÂ´madÂ´sok ota. A lakossÂ´g elfogadta azt a nÂ´zetet, hogy a u a a Â´ a e biztonsÂ´guk Â´rdekÂ´ben aldozzÂ´k fel a szemÂ´lyes adataikat. a e e Â´ a e

1.8. Az adatbÂ´nyÂ´szat feltÂ´telei a a e
Tagadhatatlan, hogy a sikertelen adatbÂ´nyÂ´szati projektek szÂ´ma nagy, Â´s az adatbÂ´nyÂ´szat a a a e a a nagyon sok esetben nem vÂ´ltotta be a hozzÂ´ fË zÂ¨tt remÂ´nyeket. Ennek oka egyrÂ´szrËl a a u o e e o az adatbÂ´nyÂ´szati szakemberhiÂ´ny (a jÂ´ adatbÂ´nyÂ´szati szakember ritka, mint a fehÂ´r a a a o a a e hollÂ´), mÂ´srÂ´szrËl az, hogy alapvetË feltÂ´telek nem teljesÂ¨ ltek a projektek sorÂ´n. A sikeres o a e o o e u a adatbÂ´nyÂ´szati projekt egyik legfontosabb feltÂ´tele az adatbÂ´nyÂ´sz Â´s a terÂ¨ let szakÂ´rtËjÂ´nek a a e a a e u e oe szoros egyÂ¨ ttmË kÂ¨dÂ´se. A tovÂ´bbi feltÂ´telek az alÂ´bbiak : u u o e a e a Nagy mennyisÂ´gË adat : A nagy mennyisÂ´gË adat a kinyert szabÂ´lyok statisztikai jee u e u a lentËsÂ´gÂ´t nÂ¨veli. MinÂ´l nagyobb az adatmennyisÂ´g, annÂ´l biztosabban tudjuk kizÂ´rni oe e o e e a a bizonyos osszefÂ¨ ggÂ´sek esetisÂ´gÂ´t, azaz annÂ´l kisebb az esÂ´lye, hogy a talÂ´lt osszefÂ¨ ggÂ´s Â¨ u e e e a e a Â¨ u e csak a vÂ´letlen eredmÂ´nye. Sajnos sok adatot sokÂ´ig tart feldolgozni, sËt az algoritmusok e e a o egy jelentËs rÂ´sze Â´rzÂ´keny arra, hogy az adatbÂ´zis elfÂ´r-e a memÂ´riÂ´ban. o e e e a e o a Sok attribÂ´tum : Ha az objektumokat leÂ´ o attribÂ´ tumok szÂ´ma kicsi, akkor hagyomÂ´nyos u Ä±rÂ´ u a a eszkÂ¨zÂ¨kkel (graï¬konok, egyszerË tÂ´blÂ´zatok, kis dimenziÂ´s, forgathatÂ´, szÂ´ o o u a a o o Ä±nes abrÂ´k, . . . ) Â´ a is fel tudjuk tÂ´rni a tudÂ´st. KevÂ´s attribÂ´ tum esetÂ´n a kinyerhetË tudÂ´s sem lehet tÂ´ l a a e u e o a u sokfÂ´le. Az adatbÂ´nyÂ´szat ereje akkor mutatkozik meg, amikor az attribÂ´ tumszÂ´m olyan e a a u a nagy, hogy a hagyomÂ´nyos mÂ´dszereknek nincs esÂ´lyÂ¨ k. a o e u Tiszta adat : Az adatok jÂ´ minËsÂ´ge az adatbÂ´nyÂ´szat egyik alapfeltÂ´tele. A zajok, a hibÂ´s o oe a a e a bejegyzÂ´sek jÂ´ esetben csak nehezÂ´ e o Ä±tik az adatbÂ´nyÂ´szatot (pÂ´ldÂ´ul amikor ismerjÂ¨ k az a a e a u adatokban talÂ´lhatÂ´ zaj, ill. bizonytalansÂ´g fokÂ´t), rosszabb esetben azonban hamis a o a a

Â´ 1. FEJEZET. BEVEZETES

21

eredmÂ´nyekhez vezetnek. Az ilyen rossz minËsÂ´gË adatokra remek pÂ´lda hazÂ´nk orvoe oe u e a si adatbÂ´zisa (rengeteg hibÂ´s bejegyzÂ´s, kitÂ¨ltetlen mezË, eltÂ´rË mÂ´rtÂ´kegysÂ´g alapÂ´ bea a e o o eo e e e u jegyzÂ´sek, szÂ¨veges bejegyzÂ´sek), pedig az ezekbËl kinyert informÂ´ciÂ´k Â´rtÂ´kesek lennÂ´nek. e o e o a o e e e 7 A â€szemÂ´thalmazbanâ€ valÂ´ kutakodÂ´st trÂ´fÂ´san GIGO-nak (garbage in, garbage out ) nee o a ea vezik. TorzÂ´ Ä±tatlan adat : Az adatbÂ´nyÂ´szat sikeressÂ´ge mÂ´ lhat az adatok nem megfelelË a a e u o 8 kivÂ´lasztÂ´sÂ´n. Ide tartozÂ´ fogalom az un. BIBO (bias in, bias out ), amely arra hÂ´ a aa o Â´ Ä±vja fel a ï¬gyelmÂ¨ nket, hogy ha egy rÂ´szsokasÂ´g alapjÂ´n akarunk kÂ¨vetkeztetni az alapsokasÂ´gra, u e a a o a akkor ï¬gyelembe kell vennÂ¨ nk a rÂ´szsokasÂ´g kivÂ´lasztÂ´sÂ´nak szempontjait, illetve az abbÂ´l u e a a aa o adÂ´dÂ´ (esetleges) torzÂ´ asokat. PÂ´ldÂ´ul, ha a lakossÂ´got az anyagi helyzet szerint akarjuk o o Ä±tÂ´ e a a csoportokba sorolni, de csak nyugat-magyarorszÂ´gi adatok allnak rendelkezÂ´sÂ¨ nkre, akkor a Â´ eu tudnunk kell, hogy a kapott eredmÂ´ny (a csoportok leÂ´ asa) torz lesz, hiszen a rÂ´szsokasÂ´g e Ä±rÂ´ e a atlag Â´letszÂ´ Â´ e Ä±nvonala jobb az alapsokasÂ´gÂ´nÂ´l. a e a AlkalmazÂ´si terÂ¨let akciÂ´kÂ´pessÂ´ge : Gyakran elËfordul, hogy a tudÂ´st csak kinyerik, de a a u o e e o a felhasznÂ´lÂ´sa elmarad. Gyakran a felhasznÂ´lÂ´si terÂ¨ letek tÂ´ l merevek, vagy a vÂ´ltoztatÂ´s aa aa u u a a tÂ´ lsÂ´gosan magas kÂ¨ltsÂ´gekkel jÂ´rna. A legtÂ¨bb adatbÂ´nyÂ´szati esettanulmÂ´nyban a tudÂ´s u a o e a o a a a a kinyerÂ´sÂ´nek mÂ´djÂ´rÂ´l esik szÂ´, a tudÂ´s felhasznÂ´lÂ´sÂ´rÂ´l pedig ritkÂ´n hallunk. ee o ao o a aa a o a A befektetÂ´s megtÂ´rÂ¨lÂ´sÂ´nek (Return On Investment) mÂ´rhetËsÂ´ge : Egy e e ue e e o e adatbÂ´nyÂ´szati projektrËl akkor allÂ´ a a o Â´ Ä±thatjuk biztosan, hogy sikeres, ha a befektetÂ´s e hatÂ´sÂ´t mÂ´rni, vagy viszonylag pontosan becsÂ¨ lni tudjuk. aa e u A jegyzet fejezeteiben a legkevÂ´sbÂ´ ismert, de napjainkban egyre nagyobb teret nyerË terÂ¨ lee e o u teket jÂ´rjuk kÂ¨rÂ¨ l : a gyakori mintÂ´k kinyerÂ´sÂ´t, az attribÂ´ tumok kÂ¨zÂ¨tti osszefÂ¨ ggÂ´sek mega ou a ee u o o Â¨ u e hatÂ´rozÂ´sÂ´t, a sorozatelemzÂ´st, a klaszterezÂ´st Â´s a webes adatbÂ´nyÂ´szatot. Minden esetben a aa e e e a a az algoritmusok gyakorlati felhasznÂ´lÂ´sÂ´t pÂ´ldÂ´kon keresztÂ¨ l szemlÂ´ltetjÂ¨ k ; emellett megadjuk aa a e a u e u a problÂ´mÂ´k formÂ´lis deï¬nÂ´ oit, Â´s bemutatjuk a legismertebb, leghatÂ´konyabb algoritmusoe a a Ä±ciÂ´ e e kat is. A jegyzet tovÂ´bbi cÂ´lja, hogy osszefoglalja az eddig nem, vagy csak kis hatÂ´konysÂ´ggal a e Â¨ e a megoldott problÂ´mÂ´kat, tovÂ´bbÂ´ a jelenlegi kutatÂ´si terÂ¨ leteket. e a a a a u

7 8

szemÂ´t be, szemÂ´t ki e e torzÂ´ as be, torzÂ´ as ki Ä±tÂ´ Ä±tÂ´

2. fejezet Alapfogalmak, jelÂ¨lÂ´sek oe
Ebben a rÂ´szben tisztÂ´zzuk a jegyzet sorÂ´n hasznÂ´lt fogalmak jelentÂ´sÂ´t. CÂ´lszerË akkor e a a a ee e u atnÂ´znÂ¨ nk e fejezet egyes rÂ´szeit, amikor az olvasÂ´s sorÂ´n olyan rÂ´szbe utkÂ¨zÂ¨ nk, ami nem Â´ e u e a a e Â¨ o u teljesen tiszta.

2.1. Halmazok, relÂ´ciÂ´k, fÂ¨ ggvÂ´nyek, sorozatok a o u e
A halmaz kÂ¨ lÂ¨nbÂ¨zË objektumok egyÂ¨ ttese, amelyeket a halmaz elemeinek hÂ´ uo o o u Ä±vunk. Ha x eleme a H halmaznak, akkor azt Â´ jelÂ¨ljÂ¨ k : x âˆˆ H, a halmaz elemeinek szÂ´mÂ´t (rÂ¨videbÄ±gy o u a a o ben elemszÂ´mÂ´t) pedig |H|-val. A jegyzetben a termÂ´szetes szÂ´mok halmazÂ´t ({0,1,. . . }) Na a e a a el jelÂ¨ljÂ¨ k, a valÂ´s szÂ´mok halmazÂ´t R-el, az egÂ´sz szÂ´mok halmazÂ´t Z-vel, az ures halmazt o u o a a e a a Â¨ (egyetlen elemet sem tartalmazÂ´ halmaz) âˆ…-val. KÂ´t halmaz akkor egyezik meg, ha ugyanazok o e az elemeik. X rÂ´szhalmaza Y -nak (X âŠ† Y ), ha X minden eleme Y -nak is eleme. Ha X âŠ† Y , e de X = Y , akkor X valÂ´di rÂ´szhalmaza Y -nak. A valÂ´di jelzËt gyakran fogjuk hasznÂ´lni, Â´s a o e o o a e valÂ´di rÂ´szhalmaz analÂ´giÂ´jÂ´ra azt Â´rtjÂ¨ k rajta, hogy az egyenlËsÂ´get kizÂ´rjuk. Sajnos a supero e o aa e u oe a set angol szÂ´nak nincsen altalÂ´nosan elfogadott fordÂ´ asa, pedig sokszor szeretnÂ´nk hasznÂ´lni. o Â´ a Ä±tÂ´ e a Azt fogjuk mondani, hogy Y bËvebb X-nÂ´l, ha (X âŠ† Y ). A halmazmË veletek jelÂ¨lÂ´se Â´s pontos o e u oe e jelentÂ´sÂ¨ k : metszet : X âˆ©Y ={z :z âˆˆX Â´s z âˆˆY }, uniÂ´ : X âˆªY ={z :z âˆˆX vagy z âˆˆY }, kÂ¨ lÂ¨nbsÂ´g : eu e o uo e X \ Y = {z : z âˆˆ X Â´s z âˆˆ Y }. e KÂ´t halmaz (X, Y ) Descartes-szorzata (X Ã—Y ) az osszes olyan rendezett pÂ´rbÂ´l allÂ´ halmaz, e Â¨ a o Â´ o amelynek az elsË komponense (tagja) X-ben, a mÂ´sodik Y -ban van. Az X, Y halmazokon o a Â´rtelmezett binÂ´ris relÂ´ciÂ´ az X Ã— Y rÂ´szhalmaza. Ha (x, y) eleme a Ï† relÂ´ciÂ´nak, akkor azt e a a o e a o Â´ is jelÂ¨lhetjÂ¨ k : xÏ†y. A relÂ´ciÂ´ rÂ´szben rendezÂ´s (vagy parciÂ´lis rendezÂ´s), ha reï¬‚exÂ´v (x Ä±gy o u a o e e a e Ä± x), antiszimmetrikus (x y Â´s y x feltÂ´telekbËl kÂ¨vetkezik, hogy x = y), tranzitÂ´ (x y e e o o Ä±v Â´s y z feltÂ´telekbËl kÂ¨vetkezik, hogy x z). Ha az elËzË 3 feltÂ´telben az antiszimmetrikus e e o o o o e helyett szimmetrikusat (x y-bËl kÂ¨vetkezik, hogy y x) mondunk, akkor ekvivalencia-relÂ´ciÂ´rÂ´l o o a o o beszÂ´lÂ¨ nk. A tovÂ´bbiakban, tetszËleges rendezÂ´s esetÂ´n, ha x=y Â´s x y, akkor azt Â´ jelÂ¨ljÂ¨ k eu a o e e e Ä±gy o u x y. Legyen X rÂ´szhalmaza X . A X halmaznak y âˆˆ X egy alsÂ´ korlÂ´tja, ha y x minden e o a x âˆˆ X -re. Az y legnagyobb alsÂ´ korlÂ´t, ha minden y alsÂ´ korlÂ´tra y o a o a y. Az y maximÂ´lis alsÂ´ a o korlÂ´tja X -nak, ha nem lÂ´tezik olyan y-tÂ´l kÂ¨ lÂ¨nbÂ¨zË y alsÂ´ korlÂ´t, amire y y . HasonlÂ´an a e o uo o o o a o Â´rtelmezhetË a felsË, legkisebb felsË, minimÂ´lis felsË korlÂ´t fogalmak is. A e o o o a o a rendezÂ´s teljes e rendezÂ´s, ha minden x = y elemre x y, y x kÂ¨zÂ¨ l az egyik fennÂ´ll. Az (X, ) pÂ´rost hÂ´lÂ´nak e o u a a ao nevezzÂ¨ k, ha az X-en Â´rtelmezett parciÂ´lis rendezÂ´s, Â´s tetszËleges x, y âˆˆ X elemeknek lÂ´tezik u e a e e o e 22

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

23

legnagyobb alsÂ´ (jelÂ¨lÂ´sben : x âˆ§ y) Â´s legkisebb felsË korlÂ´tjuk (x âˆ¨ y). o oe e o a KÂ¨zponti fogalom lesz a lexikograï¬kus rendezÂ´s. NÂ´zzÂ¨ k elËszÂ¨r ennek a matematikai deo e e u o o ï¬nÂ´ ojÂ´t. Legyen X Â´s Y kÂ´t halmaz, amelyeken Â´rtelmezve van egy-egy parciÂ´lis rendezÂ´s Ä±ciÂ´ a e e e a e ( X , Y ). Azt mondjuk, hogy a (x1 , y1 ) âˆˆ X Ã— Y lexikograï¬kusan megelËzi (x2 , y2 ) âˆˆ X Ã— o Ã— Y pÂ´rt, ha x1 X x2 , vagy x1 = x2 Â´s y1 Y y2 . A lexikograï¬kus rendezÂ´st tetszËleges szÂ´mÂ´ a e e o a u halmaz Descartes-szorzatÂ´ra is kiterjeszthetjÂ¨ k rekurzÂ´ mÂ´don az alÂ´bbiak alapjÂ´n : X Ã— Y Ã— a u Ä±v o a a Ã—Z = X Ã—(Y Ã—Z). LÂ´thatÂ´, hogy a lexikograï¬kus rendezÂ´st Descartes szorzatokon Â´rtelmezzÂ¨ k, a o e e u vagy mÂ´s szÂ´val olyan osszetett struktÂ´ rÂ´kon, amelyeknek ugyanannyi tagjuk van (n-eseknek a o Â¨ ua is hÂ´ ak ezeket). Mi ezt szeretnÂ´nk altalÂ´nosÂ´ Ä±vjÂ´ e Â´ a Ä±tani, hiszen pÂ´ldÂ´ul szavak sorba rendezÂ´sÂ´nÂ´l is e a ee e elËfordulnak eltÂ´rË hosszÂ´ sÂ´gÂ´ szavak. Ha a rÂ¨videbb szÂ´ megegyezik a hosszabb szÂ´ elsË felÂ´vel o eo ua u o o o o e (pÂ´ldÂ´ul komp Â´s kompenzÂ´l szavak), akkor megegyezÂ´s alapjÂ´n a rÂ¨videbb szÂ´ elËzi meg lexie a e a e a o o o kograï¬kusan a hosszabbikat. Ezek alapjÂ´n mindenki tudja deï¬niÂ´lni a lexikograï¬kus rendezÂ´st a a e eltÂ´rË szÂ´mÂ´ halmazok Descartes szorzatÂ´ra. A legtÂ¨bb esetben a Descartes szorzat tagjainak eo a u a o halmaza Â´s a rajtuk deï¬niÂ´lt rendezÂ´sek megegyeznek (pl. : X = Y Â´s X = Y ). Ilyenre, adott e a e e rendezÂ´s szerinti lexikograï¬kus rendezÂ´skÂ´nt hivatkozunk. e e e Az X, Y halmazokon Â´rtelmezett f binÂ´ris relÂ´ciÂ´ fÂ¨ggvÂ´ny, ha bÂ´rmely x âˆˆ X esetÂ´n e a a o u e a e pontosan egy olyan y âˆˆ Y lÂ´tezik, hogy (x, y) âˆˆ f . Ez jelÂ¨lÂ´sben f : X â†’ Y , Â´s, ha (x, y) âˆˆ f , e oe e akkor y = f (x). Az X halmazt a f Â´rtelmezÂ´si tartomÂ´nyÂ´nak hÂ´ e e a a Ä±vjuk (vagy mÂ´shogy : f az a X-en Â´rtelmezett), Y -t az f kÂ´phalmazÂ´nak, az f (X) halmazt pedig az f Â´rtÂ´kkÂ´szletÂ´nek. Azt e e a e e e e a fÂ¨ ggvÂ´nyt, amely ugy kapunk, hogy elËszÂ¨r a f , majd az g fÂ¨ ggvÂ´nyt alkalmazzuk g â—¦ f -el u e Â´ o o u e jelÂ¨ljÂ¨ k. PredikÂ´tum egy fÂ¨ ggvÂ´ny, ha az Â´rtÂ´kkÂ´szlete az {igaz, hamis} halmaz. SzÂ¨rjektÂ´v egy o u a u e e e e u Ä± fÂ¨ ggvÂ´ny, ha a kÂ´phalmaza megegyezik az Â´rtÂ´kkÂ´szletÂ´vel, injektÂ´v (vagy mÂ´s nÂ´ven egy-egy u e e e e e e Ä± a e Â´rtelmË lekÂ´pzÂ´s), ha az Â´rtelmezÂ´si tartomÂ´ny bÂ´rmely kÂ´t kÂ¨ lÂ¨nbÂ¨zË elemÂ´hez kÂ¨ lÂ¨nbÂ¨zË e u e e e e a a e uo o o e uo o o Â´rtÂ´ket rendel Â´s bijektÂ´v (mÂ´skÂ´ppen a fÂ¨ ggvÂ´ny egy bijekciÂ´ ), ha szÂ¨ rjektÂ´ Â´s injektÂ´ is e e e Ä± a e u e o u Ä±v e Ä±v egyben.
n

Legyen H tetszËleges halmaz. Az f : H Ã— Â· Â· Â· Ã— H â†’ H fÂ¨ ggvÂ´nyt n vÂ´ltozÂ´s mËveletnek o u e a o u nevezzÂ¨ k. A H halmazon Â´rtelmezett kÂ´tvÂ´ltozÂ´s u e e a o mË veletet asszociatÂ´vnak nevezzÂ¨ k, ha u Ä± u tetszËleges a, b, c âˆˆ H esetÂ´n (a b) c = a (b c). A (H, ) pÂ´rt fÂ´lcsoportnak nevezzÂ¨ k, ha o e a e u a H-n Â´rtelmezett asszociatÂ´ mË velet. A (H, ) fÂ´lcsoport elemein a H elemeit Â´rtjÂ¨ k. Ha e Ä±v u e e u a (H, ) fÂ´lcsoport elemei kÂ¨zÂ¨tt lÂ´tezik olyan e elem, amelyre e a = a e = a minden a âˆˆ e o o e âˆˆ H elemre, akkor e-t egysÂ´gelemnek hÂ´ e Ä±vjuk Â´s egysÂ´gelemes fÂ´lcsoportÂ´l beszÂ´lÂ¨ nk. Ha egy e e e o eu egysÂ´gelemes fÂ´lcsoportban minden elemnek lÂ´tezik inverze, akkor csoportrÂ´l beszÂ´lÂ¨ nk. Az a e e e o eu Â´ inverzÂ´re (aâˆ’1 ) teljesÂ¨ ljÂ¨n, hogy a aâˆ’1 = aâˆ’1 a = e. A csoport Abel-csoport, ha a mË velet e u o u Â´ kommutatÂ´v (a b = b a) is. A (H, , +) hÂ´rmas egy gyËrË, amennyiben (H, ) Abel csoport, Ä± a u u (H, +) fÂ´lcsoport Â´s a , + mË veletek disztributÂ´vek egymÂ´sra nÂ´zve, azaz (a+b) c = a c+b c. e e u Ä± a e A Â´s a + mË veletek egysÂ´gelemeit az 1 Â´s a 0 szimbÂ´lumok jelÂ¨lik. Testnek hÂ´ e u e e o o Ä±vjuk az olyan kommutatÂ´ gyË rË t, ahol az 1 = 0 Â´s a 0-Â´n kÂ´ ul a H minden elemÂ´nek van inverze. Ä±v u u e a Ä±vÂ¨ e A H halmaz felett Â´rtelmezett multihalmaznak vagy zsÂ´knak nevezzÂ¨ k azt a halmazt, amelye a u nek elemei olyan pÂ´rok, amelyek elsË tagja H egy eleme, mÂ´sodik tagja pedig egy pozitÂ´ egÂ´sz a o a Ä±v e szÂ´m. Egy multihalmazt szokÂ´s ugy abrÂ´zolni mintha olyan halmaz lenne, amely egy elemet a a Â´ Â´ a tÂ¨bbszÂ¨r is tartalmazhat. Ilyenkor a pÂ´r elsË tagjÂ´t annyiszor Â´ o o a o a Ä±rjuk le, amennyi a pÂ´r mÂ´sodik a a tagja. PÂ´ldÂ´ul a {(A,1), (C,3)}-at {A, C, C, C}-vel abrÂ´zoljuk. A multihalmaz mÂ´retÂ´n a pÂ´rok e a Â´ a e e a mÂ´sodik tagjainak osszegÂ´t, elemszÂ´mÂ´n pedig a pÂ´rok szÂ´mÂ´t Â´rtjÂ¨ k. a Â¨ e a a a a a e u Sokat fogjuk hasznÂ´lni a sorozat fogalmÂ´t. Legyen S egy halmaz. Az f : N â†’ S fÂ¨ ggvÂ´nyt a a u e az S felett Â´rtelmezett sorozatnak hÂ´ e Ä±vjuk. LeÂ´ asÂ´ra az f (0), f (1), . . . helyett a s 0 , s1 , . . . Ä±rÂ´ a

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

24

jelÂ¨lÂ´st fogjuk hasznÂ´lni. VÂ´ges sorozatok esetÂ´ben az f Â´rtelmezÂ´si tartomÂ´nya (Â´ltalÂ´ban oe a e e e e a a a az {1,2,. . . ,n}) vÂ´ges halmaz. VÂ´ges sorozat hossza az Â´rtelmezÂ´si tartomÂ´nyÂ´nak elemszÂ´ma. e e e e a a a Az S = s1 , s2 , . . . sn , S = s1 , s2 , . . . sn sorozat konkatenÂ´ciÂ´jÂ´n az s1 , s2 , . . . sn , s1 , s2 , . . . sn a oa sorozatot Â´rtjÂ¨ k, Â´s S, S -el jelÂ¨ljÂ¨ k. e u e o u

2.2. LineÂ´ris algebra a
Legyen H egy test, amelynek elemeit skalÂ´roknak hÂ´ a Ä±vjuk. A H felett Â´rtelmezett vektortÂ´r e e egy V halmaz (amelynek elemei a vektorok ) Â´s kÂ´t binÂ´ris operÂ´tor (vektor osszeadÂ´s : + Â´s e e a a Â¨ a e skalÂ´rral valÂ´ szorzÂ´s : Â·), amelyekre teljesÂ¨ l nÂ´hÂ´ny axiÂ´ma (1. u, v, w âˆˆ V -re u+(v +w) = (u+ a o a u e a o +v)+w, 2. u+v =v+u, stb.). A W âŠ†V halmazt altÂ´rnek nevezzÂ¨ k, ha zÂ´rt a vektorÂ¨sszeadÂ´s Â´s e u a o a e skalÂ´rszorzÂ´s mË veletekre. Adott vektorhalmazt tartalmazÂ´ alterek metszetÂ´t a vektorhalmaz a a u o e altal feszÂ´tett altÂ´rnek nevezzÂ¨ k. Ha a halmazbÂ´l nem tÂ´volÂ´ Â´ Ä± e u o a Ä±thatunk el elemet a feszÂ´ Ä±tett altÂ´r e megvÂ´ltoztatÂ´sa nÂ´lkÂ¨ l, akkor a vektorhalmazt lineÂ´risan fÂ¨ggetlennek hÂ´ a a e u a u Ä±vjuk. A V altÂ´r egy e bÂ´zisa egy olyan lineÂ´risan fÂ¨ ggetlen vektorhalmaz, amelynek feszÂ´ a a u Ä±tett altere V . A hagyomÂ´nyoknak megfelelËen az A mÂ´trix i-edik sorÂ´bÂ´l kÂ´pzett vektort A i -vel jelÂ¨ljÂ¨ k, a o a a o e o u T T 2 ||v||-vel a v vektor euklideszi normÂ´jÂ´t ( aa e a a i vi ) Â´s v w-vel a v , w vektorok skalÂ´ris szorzatÂ´t T ( i vi wi ).

2.3. GrÂ´felmÂ´let a e
IrÂ´nyÂ´tott grÂ´f egy G = (V, E) pÂ´r, ahol V csÂ´csok (vagy pontok ) vÂ´ges halmaza, E pedig a Ä± a a u e egy binÂ´ris relÂ´ciÂ´ V -n. E elemeit Â´leknek nevezzÂ¨ k. Ha (u, v) âˆˆ E, akkor az u, v csÂ´ csok a a o e u u egymÂ´s szomszÂ´dai. IrÂ´nyÂ´tatlan grÂ´frÂ´l beszÂ´lÂ¨ nk, ha az E relÂ´ciÂ´ szimmetrikus. A cÂ´mkÂ´zett a e a Ä± a o eu a o Ä± e (vagy sÂ´lyozott) grÂ´fnÂ´l a csÂ´ csokhoz, cÂ´mkÂ´zett Â´lË (vagy Â´lsÂ´lyozott) grÂ´fnÂ´l pedig az Â´lekhez u a a u Ä± e eu e u a a e rendelÂ¨ nk cÂ´ eket. A cÂ´ ezett Â´lË grÂ´fot sÂ´lyozott grÂ´fnak hÂ´ u Ä±mkÂ´ Ä±mkÂ´ eu a u a Ä±vjuk, ha a cÂ´ ek szÂ´mokkal Ä±mkÂ´ a kifejezhetË sÂ´ lyokat jelentenek. A grÂ´f mÂ´retÂ´n (|G|) a csÂ´ csok szÂ´mÂ´t Â´rtjÂ¨ k. Egy csÂ´ cs fokÂ´n o u a e e u a a e u u a a csÂ´ csot tartalmazÂ´ Â´leket Â´rtjÂ¨ k. IrÂ´nyÂ´ u oe e u a Ä±tott grÂ´foknÂ´l megkÂ¨ lÂ¨nbÂ¨ztetÂ¨ nk kifokot Â´s befokot. a a uo o u e A G irÂ´nyÂ´ a Ä±tatlan grÂ´f k-regulÂ´ris, ha minden csÂ´ cs foka pontosan k. a a u A G = (V , E ) grÂ´f a G = (V, E) rÂ´szgrÂ´fja, ha V âŠ† V Â´s E âŠ† E. A G = (V, E) grÂ´f a e a e a V âŠ† V altal feszÂ´tett rÂ´szgrÂ´fja (induced subgraph) az a G = (V , E ) grÂ´f, ahol E = {(u, v) âˆˆ Â´ Ä± e a a âˆˆ E : u, v âˆˆ V }. A G1 (V1 , E1 ) izomorf a G2 (V2 , E2 ) grÂ´ï¬€al, jelÂ¨lÂ´sben G1 âˆ¼ G2 , ha lÂ´tezik a oe e = Ï† : V1 â†’ V2 bijekciÂ´, amelyre (u, v) âˆˆ E1 esetÂ´n (Ï†(u), Ï†(v)) âˆˆ E2 is fennÂ´ll. CÂ´ ezett grÂ´foknÂ´l o e a Ä±mkÂ´ a a emellett megkÂ¨veteljÂ¨ k, hogy az u csÂ´ cs cÂ´ eje megegyezzÂ´k a Ï†(u) cÂ´ ejÂ´vel minden u âˆˆ V 1 o u u Ä±mkÂ´ e Ä±mkÂ´ e re, cÂ´ ezett Â´lË grÂ´fnÂ´l pedig az (u, v) cÂ´ eje egyezzen meg a (Ï†(u), Ï†(v)) Â´l cÂ´ ejÂ´vel. Ha Ä±mkÂ´ eu a a Ä±mkÂ´ e Ä±mkÂ´ e G âˆ¼ G, akkor automorï¬zmusrÂ´l beszÂ´lÂ¨ nk. o eu = A grÂ´fok abrÂ´zolÂ´sÂ´nak elterjedt mÂ´dja a szomszÂ´dossÂ´gi mÂ´trix (adjacency matrix) Â´s a a Â´ a aa o e a a e szomszÂ´dossÂ´g lista. Az |G| Ã— |G| mÂ´retË A szomszÂ´dossÂ´gi mÂ´trix a ij eleme 1 (Â´lcÂ´ ezett e a e u e a a e Ä±mkÂ´ esetben az Â´l cÂ´ eje), ha a G grÂ´f i-edik csÂ´ csÂ´bÂ´l indul Â´l a j-edik csÂ´ csba, kÂ¨ lÂ¨nben e Ä±mkÂ´ a u a o e u uo 0. TermÂ´szetesen a szomszÂ´dossÂ´gi mÂ´trixot a grÂ´fon kÂ´ ul az hatÂ´rozza meg, hogy melyik e e a a a Ä±vÂ¨ a csÂ´ csot hÂ´ u Ä±vjuk az elsËnek, mÂ´sodiknak, ... A szomszÂ´dossÂ´gi mÂ´trixot tehÂ´t a grÂ´f Â´s az f : o a e a a a a e : V â†’ {1, . . . , |V |} bijekciÂ´ adja meg. HurokÂ´l nÂ´lkÂ¨ li, cÂ´ ezett grÂ´fban a szomszÂ´dossÂ´gi o e e u Ä±mkÂ´ a e a mÂ´trix aii eleme az i csÂ´ cs cÂ´ ejÂ´t tÂ´rolja. A szomszÂ´dossÂ´gi lista |G| darab lista, ahol az a u Ä±mkÂ´ e a e a i-edik lista tÂ´rolja az i-edik csÂ´ cs szomszÂ´dait. a u e

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

25

Az u csÂ´ csot az u csÂ´ ccsal osszekÂ¨tË k-hosszÂ´ uton csÂ´ csoknak egy olyan (vÂ´ges) u u Â¨ oo u Â´ u e v0 , v1 , . . . , vk sorozatÂ´t Â´rtjÂ¨ k, amelyre u = v0 , u = vk , Â´s (viâˆ’1 , vi ) âˆˆ E (i = 1,2, . . . , k). Egy a e u e ut egyszerË, ha a benne szereplË csÂ´ csok pÂ´ronkÂ´nt kÂ¨ lÂ¨nbÂ¨zËk. A v 0 , v1 , . . . , vk ut kÂ¨r, ha Â´ u o u a e uo o o Â´ o v0 = vk , Â´s az ut legalÂ´bb egy Â´lt tartalmaz. Egy grÂ´fot osszefÂ¨ggËnek hÂ´ e Â´ a e a Â¨ u o Ä±vunk, ha bÂ´rmely kÂ´t a e csÂ´ csa osszekÂ¨thetË uttal. A kÂ¨rmenetes, irÂ´nyÂ´ as nÂ´lkÂ¨ li grÂ´fot erdËnek hÂ´ u Â¨ o o Â´ o a Ä±tÂ´ e u a o Ä±vjuk. Ha az erdË o osszefÂ¨ ggË, akkor pedig fÂ´nak. Az olyan fÂ´t, amely tartalmazza egy G grÂ´f minden csÂ´ csÂ´t, a Â¨ u o a a a u a G feszÂ´tËfÂ´jÂ´nak hÂ´ Ä±oaa Ä±vjuk. A gyÂ¨keres fÂ´ban az egyik csÂ´ csnak kitÂ¨ ntetett szerepe van. Ezt a csÂ´ csot gyÂ¨kÂ´rnek neo a u u u o e vezzÂ¨ k. A gyÂ¨kÂ´rbËl egy tetszËleges x csÂ´ csba vezetË (egyÂ´rtelmË en meghatÂ´rozott) ut altal u o e o o u o e u a Â´ Â´ tartalmazott bÂ´rmely y csÂ´ csot az x osÂ´nek nevezÂ¨ nk. Azt is mondjuk ekkor, hogy x az y a u Ë e u leszÂ´rmazottja. Ha x = y, akkor valÂ´di osrËl Â´s valÂ´di leszÂ´rmazottrÂ´l beszÂ´lÂ¨ nk. Ha az uton x a o Ë o e o a o eu Â´ 1 Â´len keresztÂ¨ l Â´rhetË el y-bÂ´l, akkor x az y gyereke Â´s y az x szÂ¨lËje. Ha kÂ´t csÂ´ csnak ugyanaz e u e o o e uo e u a szÂ¨ lËje, akkor testvÂ´reknek mondjuk oket. uo e Ë A G = (V, E) grÂ´f S, V \S vÂ´gÂ´sÂ´n a V halmaz kÂ´trÂ´szes partÂ´ ojÂ´t Â´rtjÂ¨ k. Az (u, v) âˆˆ E Â´l a a a a e e Ä±ciÂ´ a e u e keresztezi az S, V \S vÂ´gÂ´st, ha annak egyik vÂ´gpontja S-ben a mÂ´sik V \S-ben van. Egy vÂ´gÂ´s a a e a a a sÂ´lya â€“ sÂ´ lyozott grÂ´fok esetÂ´ben â€“ megegyezik a vÂ´gÂ´st keresztezË Â´lek osszsÂ´ lyÂ´val. u u a e a a oe Â¨ u a

2.4. Matematika logika 2.5. ValÂ´szÂ´ usÂ´gszÂ´mÂ´ as o Ä±nË e a Ä±tÂ´
FeltÂ´telezzÂ¨ k, hogy az olvasÂ´ tisztÂ´ban van a valÂ´szÂ´nËsÂ´gi vÂ´ltozÂ´, valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´ ele u o a o Ä± u e a o o Ä±nË e a o oszlÂ´sÂ´nak, sËrËsÂ´gfÂ¨ggvÂ´nyÂ´nek, eloszlÂ´sfÂ¨ggvÂ´nyÂ´nek a valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´ vÂ´rhatÂ´ Â´rtÂ´kÂ´nek a a u u e u e e a u e e o Ä±nË e a o a oe e e 2 (E[X] = Âµ = x Â· p(x)) Â´s szÂ´rÂ´sÂ´nak (D 2 [X] = ÏƒX = E[(X âˆ’ Âµ)2 ]) vagy altalÂ´nosan az n-edik e o a a Â´ a centrÂ´lis momentumok fogalmÂ´val (D n [X] = E[(X âˆ’ Âµ)n ]), tovÂ´bbÂ´ ismeri kÂ´t valÂ´szÂ´ usÂ´gi a a a a e o Ä±nË e vÂ´ltozÂ´ kÂ¨zÂ¨tti kovarianciÂ´t (Cov(X, Y ) = E[(X âˆ’ Âµ)(Y âˆ’ Î½)) Â´s korrelÂ´ciÂ´t (Corr(X, Y ) = a o o o a e a o = Cov(X,Y ) ). ÏƒX ÏƒY

2.5.1. Nevezetes eloszlÂ´sok a
A kÂ¨vetkezË nevezetes eloszlÂ´sokkal fogunk talÂ´lkozni tanulmÂ´nyaink sorÂ´n. o o a a a a BinomiÂ´lis eloszlÂ´s a a Legyen (â„¦, F, P) Kolmogorov-fÂ´le valÂ´szÂ´ usÂ´gi mezË, A âˆˆ F pozitÂ´ valÂ´szÂ´ usÂ´gË esemÂ´ny, e o Ä±nË e o Ä±v o Ä±nË e u e p = P(A) > 0. Hajtsunk vÂ´gre n-szeres fÂ¨ ggetlen kÂ´ erletsorozatot Â´s legyen X Â´rtÂ´ke annyi, e u Ä±sÂ´ e e e ahÂ´nyszor A bekÂ¨vetkezett a kÂ´ erletsorozatban. X-et ekkor n, p paramÂ´terË binomiÂ´lis ela o Ä±sÂ´ e u a oszlÂ´sÂ´ valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´nak nevezzÂ¨ k, jele X âˆˆ B(n, p). X eloszlÂ´sa p k = P (X = k) = au o Ä±nË e a o u a = n pk (1 âˆ’ p)nâˆ’k , vÂ´rhatÂ´ Â´rtÂ´ke E(X) = np, szÂ´rÂ´sa Ïƒ 2 (X) = np(1 âˆ’ p). a oe e oa k k A Poisson-eloszlÂ´s a binomiÂ´lis eloszlÂ´s hatÂ´resete. lim nâ†’âˆ,pâ†’0,np=Î» n pk q nâˆ’k = Î» eâˆ’Î» . A a a a a k k! Moivre-Laplace tÂ´tel szerint, az n-ed rendË p paramÂ´terË binomiÂ´lis eloszlÂ´s standardizÂ´ltja n e u e u a a a n k nâˆ’k minden hatÂ´ron tÂ´ l valÂ´ nÂ¨velÂ´se esetÂ´n normÂ´lis eloszlÂ´sÂ´ : âˆ€xâˆˆR:limnâ†’âˆ kâˆ’np <x k p q = a u o o e e a au âˆš
npq

= Î¦(x)

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK Hipergeometrikus eloszlÂ´s a

26

TegyÂ¨ k fel, hogy van N kÂ¨ lÂ¨nbÂ¨zË elemÂ¨ nk, amelybËl R darab rossz. A hipergeometrikus u uo o o u o eloszlÂ´s adja meg annak az esÂ´lyÂ´t, hogy X darab rossz elem lesz, ha az N elembËl n darabot a e e o kiveszÂ¨ nk vÂ´letlenszerË en. Elemi kombinatorikus uton a valÂ´szÂ´ usÂ´g kiszÂ´mÂ´ u e u Â´ o Ä±nË e a Ä±thatÂ´ (0 â‰¤ X â‰¤ n) : o P (X, N, R, n) =
R X N âˆ’R nâˆ’X N n

A fenti sË rË sÂ´gfÂ¨ ggvÂ´nnyel rendelkezË diszkrÂ´t valÂ´szÂ´ usÂ´gi eloszlÂ´st hÂ´ uue u e o e o Ä±nË e a Ä±vjuk hipergeometrikus eloszlÂ´snak. a Amennyiben n N , akkor a hipergeometrikus eloszlÂ´st kÂ¨zelÂ´ a o Ä±thetjÂ¨ k az n, R/N paramÂ´terË u e u binomiÂ´lis eloszlÂ´ssal. a a NormÂ´lis eloszlÂ´s a a Ï‡2 eloszlÂ´s a Legyenek Î¾1 , Î¾2 , . . . , Î¾n egymÂ´stÂ´l fÂ¨ ggetlen, standard normÂ´lis eloszlÂ´sÂ´ valÂ´szÂ´ usÂ´gi a o u a au o Ä±nË e n 2 2 vÂ´ltozÂ´k. Ekkor az i=1 Î¾i valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´ eloszlÂ´sÂ´t n paramÂ´terË Ï‡ eloszlÂ´snak (Ï‡2 ) a o o Ä±nË e a o aa e u a n nevezzÂ¨ k. u

2.5.2. FerdesÂ´g Â´s lapultsÂ´g e e a
A ferdesÂ´g egy eloszlÂ´s szimmetriÂ´jÂ´t prÂ´bÂ´lja megadni. Ha a ferdesÂ´g nulla, akkor az ele a aa o a e oszlÂ´s szimmetrikus (pÂ´ldÂ´ul normÂ´lis eloszlÂ´soknÂ´l), ellenkezË esetben a vÂ´rhatÂ´ Â´rtÂ´ktËl balra a e a a a a o a oe e o (negatÂ´ ferdesÂ´g esetÂ´ben) vagy jobbra nyÂ´ lik elâ€. A ferdesÂ´gnek tÂ¨bb mutatÂ´jÂ´t deï¬niÂ´ltÂ´k ; Ä±v e e u e o oa a a â€ âˆš D 3 [X] ezek kÂ¨zÂ¨ l a legelterjedtebb a Î³1 = (D2 [X])3/2 ), de szokÂ´s mÂ´g a Î²1 = Î³1 -et is haszÂ´lni. o u a e a SzintÂ´n nem az alapfogalmak kÂ¨zÂ´ tartozik a lapultsÂ´g fogalma, ami egy eloszlÂ´s csÂ´ csossÂ´gÂ´t e o e a a u a a D 4 [X] adja meg. A lapultsÂ´gnak is tÂ¨bb elfogadott deï¬nÂ´ oja lÂ´tezik. Legelterjedtebb a Î² 2 = (D2 [X])2 a o Ä±ciÂ´ e (kurtosis proper), Â´s a Î³2 = Î²2 âˆ’ 3 (kurtosis excess) Â´rtÂ´kek. A normÂ´lis eloszlÂ´s Î²2 lapultsÂ´gi e e e a a a Â´rtÂ´ke hÂ´rom, a normÂ´lisnÂ´l laposabbakÂ´ hÂ´romnÂ´l kisebb. A ferdesÂ´get Â´s a lapultsÂ´got annak e e a a a e a a e e a eldÂ¨ntÂ´sÂ´nÂ´l szoktÂ´k hasznÂ´lni, hogy egy adott minta szÂ´rmazhat-e normÂ´lis eloszlÂ´sbÂ´l. o ee e a a a a a o

2.5.3. EgyenlËtlensÂ´gek o e
Legyen X egy E[X] vÂ´rhatÂ´ Â´rtÂ´kË valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´. A Markov egyenlËtlensÂ´g szerint a oe e u o Ä±nË e a o o e E[|X|] P(|X| â‰¥ a) â‰¤ a , ahol a > 0. A Hoeï¬€ding-korlÂ´t a mintavÂ´telzÂ´ssel kapcsolatos allÂ´ asok a e e Â´ Ä±tÂ´ alapja. 2.1. lemma. Legyen Xi , 1 â‰¤ i â‰¤ n Âµ vÂ´rhatÂ´ Â´rtÂ´kË, fÂ¨ggetlen, azonos eloszlÂ´sÂ´ valÂ´szÂ´nËsÂ´gi a oe e u u a u o Ä± u e vÂ´ltozÂ´k Â´s a â‰¤ Xi â‰¤ b minden i-re. Ekkor tetszËleges Î» > 0-ra fennÂ´ll a kÂ¨vetkezË egyenlËtlensÂ´g : a o e o a o o o e P 1 n
i=1

Xi âˆ’ Âµ â‰¥ Î»

â‰¤ 2eâˆ’2Î»

2 n/(bâˆ’a)2

.

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

27

2.5.4. EntrÂ´pia o
Legyen X egy diszkrÂ´t valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´, amely Â´rtÂ´keit egy X halmazbÂ´l veheti fel. Az e o Ä±nË e a o e e o lX = âˆ’ log2 p(X) valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´t az X entrÂ´piasËrËsÂ´gÂ´nek nevezzÂ¨ k. X entrÂ´piÂ´jÂ´t â€“ o Ä±nË e a o o u u e e u o aa H(X)-et â€“ ezen vÂ´ltozÂ´ vÂ´rhatÂ´ Â´rtÂ´kÂ´vel deï¬niÂ´ljuk : a o a oe e e a H(X) = âˆ’ p(x) log2 p(x).
xâˆˆX

Az entrÂ´pia valamikÂ´ppen a vÂ´ltozÂ´ bizonytalansÂ´gÂ´t fejezi ki. Ha X elemszÂ´ma rÂ¨gzÂ´ o e a o a a a o Ä±tett Â´s e az X vÂ´ltozÂ´ csak egy Â´rtÂ´ket vehet fel (mert az egyik Â´rtÂ´k valÂ´szÂ´ usÂ´ge 1), akkor H(X) Â´rtÂ´ke a o e e e e o Ä±nË e e e 0 (nincs bizonytalansÂ´g), ha pedig X eloszlÂ´sa egyenletes eloszlÂ´st kÂ¨vet, akkor az entrÂ´pia a a a a o o maximumÂ´t veszi fel, log2 (|X|)-t. a Legyen X Â´s Y kÂ´t diszkrÂ´t Â´rtÂ´kË valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´. Az X-nek az Y feltÂ´tellel vett e e e e e u o Ä±nË e a o e feltÂ´teles entrÂ´piÂ´ja : e o a H(X|Y ) = âˆ’ p(x, y) log2 p(x|y),
yâˆˆY xâˆˆX

vagy egy kicsit atalakÂ´ Â´ Ä±tva kapjuk, hogy H(X|Y ) = âˆ’ p(y)
yâˆˆY xâˆˆX

p(x|y) log2 p(x|y).

Be lehet bizonyÂ´ Ä±tani, hogy H(X|Y ) = H(XY )âˆ’H(Y ), ami informÂ´lisan ugy lehet megfogalmaza Â´ ni, hogy a feltÂ´teles entrÂ´pia megadja, hogy mennyi bizonytalansÂ´g marad X-ben, ha elvesszÂ¨ k e o a u az Y bizonytalansÂ´gÂ´t. a a A feltÂ´teles entrÂ´pia szÂ´mos tulajdonsÂ´ga kÂ¨zÂ¨ l mi csak az alÂ´bbit fogjuk felhasznÂ´lni : e o a a o u a a 0 â‰¤ H(X|Y ) â‰¤ H(X).

2.6. Statisztika
A statisztikÂ´ban altalÂ´ban X1 , X2 , . . . , Xn fÂ¨ ggetlen, azonos eloszlÂ´sÂ´ valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´k a Â´ a u a u o Ä±nË e a o vannak megadva, amiket mintÂ´knak nevezÂ¨ nk. Az eloszlÂ´st nem ismerjÂ¨ k pontosan, de rendela u a u kezÂ´sÂ¨ nkre allnak megï¬gyelÂ´sek. eu Â´ e Legyenek X1 , X2 , . . . , Xn fÂ¨ ggetlen, azonos eloszlÂ´sÂ´ valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´k. Ekkor a u au o Ä±nË e a o +Â·Â·Â·+Xn Â¯ X = X1 +X2n valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´t empirikus kÂ¨zÂ´pnek, vagy mintaÂ´tlagnak, a s âˆ—2 = o Ä±nË e a o o e a n 1 Â¯ = nâˆ’1 n (Xi âˆ’ X)2 valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´t pedig korrigÂ´lt empirikus szorÂ´snÂ´gyzetnek neo Ä±nË e a o a a e i=1 vezzÂ¨ k. u âˆ—2 o Ä±nË e a o a A Ï‡2 eloszlÂ´s deï¬nÂ´ ojÂ´bÂ´l kÂ¨vetkezik, hogy az (nâˆ’1)s valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´ eloszlÂ´sa Ï‡2 , a Ä±ciÂ´ a o o n Ïƒ2 âˆ—2 amennyiben a s Ïƒ szÂ´rÂ´sÂ´ , normÂ´lis eloszlÂ´sÂ´ valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´k korrigÂ´lt empirikus oau a au o Ä±nË e a o a szorÂ´snÂ´gyzetÂ´t jelÂ¨li a e e o 2.2. deï¬nÂ´ o. Legyenek X Â´s Y kÂ´t olyan valÂ´szÂ´nËsÂ´gi vÂ´ltozÂ´, amelyek eloszlÂ´sa rendre Ï‡ 2 Ä±ciÂ´ e e o Ä± u e a o a n X/n 2 Â´s Ï‡m . Ekkor a Z = Y /m valÂ´szÂ´nËsÂ´gi vÂ´ltozÂ´ eloszlÂ´sÂ´t Fn,m eloszlÂ´snak hÂ´vjuk. e o Ä± u e a o a a a Ä±

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

28

2.6.1. HipotÂ´zisvizsgÂ´lat e a
A hipotÂ´zisvizsgÂ´lat feladata mindig valamilyen allÂ´ as helyessÂ´gÂ´nek vizsgÂ´lata. Ezt az e a Â´ Ä±tÂ´ e e a allÂ´ ast nullhipotÂ´zisnek nevezzÂ¨ k, jele H0 . A nullhipotÂ´zis altalÂ´ban egy valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´ Â´ Ä±tÂ´ e u e Â´ a o Ä±nË e a o valamely paramÂ´terÂ´re vagy a vÂ´ltozÂ´ viselkedÂ´sÂ´re vonatkozÂ´ allÂ´ as. Az allÂ´ as igazolÂ´sÂ´hoz e e a o ee o Â´ Ä±tÂ´ Â´ Ä±tÂ´ aa vagy elvetÂ´sÂ´hez kÂ´ erletezgetÂ´sek, mintÂ´k allnak rendelkezÂ´sÂ¨ nkre. Ha a mintÂ´k alapjÂ´n a nullee Ä±sÂ´ e a Â´ eu a a hipotÂ´zist elvetjÂ¨ k, holott az igaz, akkor elsËfajÂ´ hibÂ´t kÂ¨vetÂ¨ nk el. EllenkezË esetben â€“ amie u o u a o u o kor a nullhipotÂ´zis hamis, de mi elfogadjuk â€“ mÂ´sodfajÂ´ hibÂ´rÂ´l beszÂ´lÂ¨ nk. PusztÂ´n mintÂ´k e a u a o eu a a segÂ´ egÂ´vel nem tudunk teljesen biztos vÂ´laszt adni. A gyakorlatban egy paramÂ´terrel (Î±) Ä±tsÂ´ e a e rÂ¨gzÂ´ az elsËfajÂ´ hiba elkÂ¨vetÂ´sÂ´nek megengedett valÂ´szÂ´ usÂ´gÂ´t. Az 1 âˆ’ Î± Â´rtÂ´ket a prÂ´ba o Ä±tik o u o ee o Ä±nË e e e e o szintjÂ´nek hÂ´ e Ä±vjuk. Â¨ Osszefoglalva tehÂ´t, adott egy allÂ´ as, egy paramÂ´ter (Î±) Â´s mintÂ´k sorozata. Feladatunk, a Â´ Ä±tÂ´ e e a hogy a mintÂ´k alapjÂ´n cÂ´foljuk vagy igazoljuk az allÂ´ ast ugy, hogy bizonyÂ´ a a a Â´ Ä±tÂ´ Â´ Ä±thatÂ´an Î±-nÂ´l kisebb o a legyen annak valÂ´szÂ´ usÂ´ge, hogy az allÂ´ as igaz, holott mi cÂ´foljuk. A hipotÂ´zisvizsgÂ´latnÂ´l a o Ä±nË e Â´ Ä±tÂ´ a e a a mintÂ´k eredmÂ´nyeit felhasznÂ´lva kiszÂ´mÂ´ a e a a Ä±tunk egy un. prÂ´bastatisztika Â´rtÂ´ket, Â´s ezt vetjÂ¨ k Â´ o e e e u ossze egy ismert eloszlÂ´ssal. Az Î±-nak cÂ´lszerË kis (0.1 Â´s 0.01 kÂ¨zÂ¨tti) Â´rtÂ´ket vÂ´lasztani 1 . Â¨ a e u e o o e e a

2.6.2. Az F -prÂ´ba o
Az F -prÂ´ba arra szolgÂ´l, hogy kÂ´t fÂ¨ ggetlen, normÂ´lis eloszlÂ´sÂ´ valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´ (X, Y ) o a e u a a u o Ä±nË e a o szÂ´rÂ´sÂ´nak egyenlËsÂ´gÂ´t eldÂ¨ntsÂ¨ k. oaa oe e o u H0 : Ïƒ X = Ïƒ Y . Tudjuk, hogy X Ïƒ2 X Â´s Y Ïƒ2 e X Y a nullhipotÂ´zis fennÂ´ll, akkor az e a
(n âˆ’1)sâˆ—2 (n âˆ’1)sâˆ—2 Y

Ï‡2 eloszlÂ´sÂ´ ak (nX âˆ’ 1) illetve (nY âˆ’ 1) paramÂ´terrel. Ha au e F= sâˆ—2 X sâˆ—2 Y

1 au prÂ´bastatisztika F -eloszlÂ´sÂ´ (nX âˆ’ 1, nY âˆ’ 1) paramÂ´terrel. Azonban F is F -eloszlÂ´sÂ´ (nY âˆ’ o au e âˆ— âˆ’ 1, nX âˆ’ 1) paramÂ´terrel, ezÂ´rt a gyakorlatban F = max{F,1/F } â‰¥ 1 statisztikÂ´t szokÂ´s e e a a hasznÂ´lni. a

2.6.3. A Ï‡2 -prÂ´ba o
A Ï‡2 prÂ´bÂ´k az alÂ´bbi tÂ´telt hasznÂ´ljÂ´k fel. o a a e a a 2.3. tÂ´tel. Legyen A1 , A2 , . . . , Ar egy teljes esemÂ´nyrendszer (r â‰¥ 3), legyen pi = P(Ai ) > 0, i = e e =1, . . . , r. IsmÂ´teljÂ¨k a kÂ´sÂ´rletet n-szer egymÂ´stÂ´l fÂ¨ggetlenÂ¨l. JelÂ¨lje X i az Ai esemÂ´ny bekÂ¨vete u Ä± e a o u u o e o kezÂ´sÂ´nek szÂ´mÂ´t. BelÂ´thatÂ´, hogy ekkor a e e a a a o
r

j=1

(Xj âˆ’ npj )2 npj

valÂ´szÂ´nËsÂ´gi vÂ´ltozÂ´ eloszlÂ´sa n â†’ âˆ esetÂ´n Ï‡ 2 eloszlÂ´shoz konvergÂ´l. o Ä± u e a o a e a a râˆ’1
1

Gondolkozzunk el azon, hogy mi tÂ¨rtÂ´nne, ha Î±-nak nagyon kis Â´rtÂ´ket vÂ´lasztanÂ´nk! o e e e a a

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

29

A Ï‡2 eloszlÂ´s kvantiliseit fÂ¨ ggvÂ´ny-tÂ´blÂ´zatokban megtalÂ´lhatjuk. a u e a a a A Ï‡2 -prÂ´ba legfontosabb alkalmazÂ´si terÂ¨ letei az (1.) illeszkedÂ´s-, (2.) fÂ¨ ggetlensÂ´g- Â´s (3.)hoo a u e u e e mogenitÂ´svizsgÂ´lat. TÂ´mÂ´nkhoz a fÂ¨ ggetlensÂ´g-vizsgÂ´lat tartozik hozzÂ´, Â´ a tovÂ´bbiakban ezt a a e a u e a a Ä±gy a 2 rÂ´szletezzÂ¨ k. A Ï‡ prÂ´ba irÂ´nt Â´rdeklËdËknek a [85] magyar nyelvË irodalmat ajÂ´nljuk. e u o a e o o u a

2.6.4. FÂ¨ ggetlensÂ´gvizsgÂ´lat u e a
Legyen A1 , A2 , . . . , Ar Â´s B1 , B2 , . . . , Bs kÂ´t teljes esemÂ´nyrendszer. VÂ´gezzÂ¨ nk n kÂ´ erletet. e e e e u Ä±sÂ´ NullhipotÂ´zisÂ¨ nk az, hogy az esemÂ´nyrendszerek fÂ¨ ggetlenek. e u e u H0 : P(Ai , Bj ) = P(Ai )P(Bj ), i = 1, . . . , r j = 1, . . . , s

Ha az esemÂ´nyek valÂ´szÂ´ usÂ´gei adottak, akkor tiszta illeszkedÂ´s vizsgÂ´lati feladatrÂ´l beszÂ´lÂ¨ nk, e o Ä±nË e e a o eu ahol H0 : P(Ai âˆ© Bj ) = pi qj hiszen pi , qj Â´rtÂ´kek adottak. JelÂ¨lje kij az Ai âˆ© Bj esemÂ´ny bekÂ¨vetkezÂ´sÂ´nek szÂ´mÂ´t. Ekkor ki e e o e o ee a a kell szÂ´mÂ´ a Ä±tanunk a r s (kij âˆ’ npi qj )2 2 Ï‡ = npi qj i=1 j=1 un. prÂ´bastatisztika Â´rtÂ´ket. Jobban megvizsgÂ´lva Ï‡2 -et lÂ´thatjuk, hogy az egy Â´ o e e a a 2 (megï¬gyelt Â´rtÂ´k - vÂ´rt Â´rtÂ´k) e e a e e jellegË kifejezÂ´s. Amennyiben Ï‡2 kicsi, akkor a megï¬u e vÂ´rt Â´rtÂ´k a e e gyelt Â´rtÂ´kek kÂ¨zel vannak azokhoz, amit H0 fennÂ´llÂ´sa esetÂ´n vÂ´rtunk, tehÂ´t a nullhipotÂ´zist e e o a a e a a e elfogadjuk. e Hogy pontosan mit jelent az, hogy kicsiâ€, azt a 2.3-as tÂ´tel alapjÂ´n Ï‡2 e a rsâˆ’1 Â´s az Î± paâ€ 2 ramÂ´ter hatÂ´rozza meg. TÂ´blÂ´zatbÂ´l keressÂ¨ k ki, hogy a Ï‡rsâˆ’1 eloszlÂ´s hol veszi fel az 1 âˆ’ Î± e a a a o u a Â´rtÂ´ket. Amennyiben ez nagyobb a fent kiszÂ´mÂ´ e e a Ä±tott Ï‡2 Â´rtÂ´knÂ´l, akkor a nullhipotÂ´zist elfogade e e e juk, ellenkezË esetben elvetjÂ¨ k. o u A gyakorlatban sokkal tÂ¨bbszÂ¨r fordul elË az az eset, amikor az esemÂ´nyek valÂ´szÂ´ usÂ´geit o o o e o Ä±nË e nem ismerjÂ¨ k. Ekkor a valÂ´szÂ´ usÂ´geket az esemÂ´nyek relatÂ´ gyakorisÂ´gÂ´val becsÂ¨ ljÂ¨ k meg. u o Ä±nË e e Ä±v a a u u s JelÂ¨ljÂ¨ k az Ai esemÂ´ny gyakorisÂ´gÂ´t ki. -vel, tehÂ´t ki. = j=1 kij Â´s hasonlÂ´an Bj esemÂ´ny gyao u e a a a e o e 2 korisÂ´gÂ´t k.j -vel. Ï‡ prÂ´bÂ´k sorÂ´n az adatok szemlÂ´ltetÂ´sÂ´nek gyakran hasznÂ´lt eszkÂ¨ze az un. a a o a a e ee a o Â´ kontingencia-tÂ´blÂ´zat. Ez egy tÂ¨bbdimenziÂ´s tÂ´blÂ´zat, amely cellÂ´iban a megfelelË esemÂ´ny a a o o a a a o e bekÂ¨vetkezÂ´sÂ´nek szÂ´ma talÂ´lhatÂ´. Egy ilyen 2-dimenziÂ´s kontingencia-tÂ´blÂ´zatot lÂ´thatunk a o ee a a o o a a a kÂ¨vetkezË abrÂ´n. o oÂ´ a B1 A1 A2 . . . Ar k11 k21 . . . kr1 k.1 B2 k12 k22 . . . kr2 k.2 ... ... ... .. . ... ... Bs k1s k2s . . . krs k.s k1. k2. . . . kr. n

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK Az Ai âˆ© Bj megï¬gyelt Â´rtÂ´ke kij , vÂ´rt Â´rtÂ´ke H0 esetÂ´n n Â· e e a e e e
r s

30 ki. k.j Â· . Ezek alapjÂ´n Ï‡2 Â´rtÂ´ke : a e e n n

Ï‡2 =
i=1 j=1

(kij âˆ’

ki. k.j 2 ) n ki. k.j n

Mivel a fÂ¨ ggetlensÂ´g fennÂ´llÂ´sa esetÂ´n r âˆ’ 1 darab pi -t Â´s s âˆ’ 1 darab qj valÂ´szÂ´ usÂ´get kell u e a a e e o Ä±nË e megbecsÂ¨ lni, Â´ a fenti H0 fennÂ´llÂ´sa esetÂ´n Ï‡2 u Ä±gy a a e = Ï‡2 eloszlÂ´sÂ´ . au rsâˆ’1âˆ’(r+sâˆ’2) (râˆ’1)(sâˆ’1) A Ï‡2 eloszlÂ´s kÂ¨zelÂ´ ese csak abban az esetben pontos, ha a kij Â´rtÂ´kek nagyok. Persze nincs a o Ä±tÂ´ e e pontos szabÂ´ly arra nÂ´zve, hogy mennyire kell nagynak lennie. Azt szoktÂ´k mondani, hogy a a e a kontingencia tÂ´blÂ´zat elemeinek 90%-a nagyobb legyen otnÂ´l. a a Â¨ e

2.7. Algoritmus-elmÂ´let e
Terjedelmi okok miatt csak felsorolni tudjuk azokat az algoritmusokat, amelyeket az olvasÂ´nak ismernie kell. Ezek pedig : lineÂ´ris-, binÂ´ris keresÂ´s, mÂ´lysÂ´gi-, szÂ´lessÂ´gi bejÂ´rÂ´s, Kruso a a e e e e e aa kal algoritmusa minimÂ´lis sÂ´ lyÂ´ feszÂ´ ofa meghatÂ´rozÂ´sÂ´hoz stb. Emellett feltÂ´telezzÂ¨ k, hogy a u u Ä±tË a aa e u az olvasÂ´ tisztÂ´ban van az NP-teljessÂ´g (vagy altalÂ´nosabban a bonyolultsÂ´g) elmÂ´letÂ´nek alapo a e Â´ a a e e jaival.

2.8. AdatstruktÂ´ rÂ´k u a
FeltÂ´telezzÂ¨ k, hogy az olvasÂ´ tisztÂ´ban van a lista (vektor) Â´s a tÂ¨mb fogalmÂ´val. Az e u o a e o a adatbÂ´nyÂ´szatban tovÂ´bbi kÂ¨zkedvelt adatstruktÂ´ rÂ´i az un. szÂ´fa (trie), vagy mÂ´s nÂ´ven preï¬xa a a o ua Â´ o a e fa (preï¬x-tree), a piros-fekete fa, illetve a hash-tÂ´bla. a

2.8.1. SzÂ´fÂ´k oa
A szÂ´fÂ´t eredetileg szÂ´tÂ´r szavainak tÂ´rolÂ´sÂ´nÂ´l alkalmaztÂ´k, annak Â´rdekÂ´ben, hogy gyorsan oa oa a aa a a e e el lehessen dÂ¨nteni, hogy egy adott szÂ´ szerepel-e a szÂ´tÂ´rban [41], [61]. A szavak az abc felett o o oa Â´rtelmezett sorozatok, Â´ altalÂ´nosan azt mondhatjuk, hogy egy szÂ´fa egy adott vÂ´ges eleme Ä±gy Â´ a o e halmaz feletti sorozatok tÂ´rolÂ´sÂ´ra Â´s gyors visszakeresÂ´sÂ´re alkalmas adatstruktÂ´ ra. A szÂ´fa a aa e ee u o angol neve (trie, amit ugy ejtÂ¨ nk, mint a try szÂ´t) a visszakeresÂ´s angol fordÂ´ asÂ´bÂ´l szÂ´rmazik Â´ u o e Ä±tÂ´ a o a (retrieval). A tovÂ´bbiakban az alaphalmazt I-vel, az alaphalmaz felett Â´rtelmezett, adott soa e rozatok halmazÂ´t szÂ´tÂ´rnak hÂ´ a oa Ä±vjuk. A 2.1 abrÂ´n egy szÂ´fÂ´t lÂ´thatunk, mely az C, F C, F B, Â´ a oa a CBP , F CAM P , F CABM sorozatokat tÂ´rolja. a A szÂ´fa egy (lefelÂ´) irÂ´nyÂ´ o e a Ä±tott gyÂ¨keres cÂ´ ezett fa. Egy d-edik szintË pontbÂ´l csak d+1-edik o Ä±mkÂ´ u o szintË pontba mutathat Â´l. NÂ´ha a hatÂ´konysÂ´g kedvÂ´Â´rt minden pontbÂ´l a pont szÂ¨ lËjÂ´re is u e e e a ee o uoe mutat Â´l. A gyÂ¨keret 0. szintË nek tekintjÂ¨ k. A cÂ´ ek az I-nek egy-egy elemei. Minden pont egy e o u u Ä±mkÂ´ elemsorozatot reprezentÂ´l, amely a gyÂ¨kÂ´rbËl ebbe a pontba vezetË Â´leken talÂ´lhatÂ´ elemekbËl a o e o oe a o o all. Akkor tartalmazza a szÂ´fa az S sorozatot, ha van olyan pont, amely az S-t reprezentÂ´lja. Â´ o a Ha egy sorozatot tartalmaz egy szÂ´fa, akkor annak tetszËleges preï¬xÂ´t is tartalmazza. o o e A preï¬x azonban nem biztos, hogy eleme a szÂ´tÂ´rnak. Ezt a problÂ´mÂ´t kÂ´tfÂ´lekÂ´ppen lehet oa e a e e e

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK
0

31

F C 3 A M 8 P 10 6 B 9 M 11 1 B 4

C 2 B 5 P 7

2.1. abra. PÂ´lda szÂ´fÂ´ra Â´ e oa kikÂ¨ szÂ¨bÂ¨lni. EgyrÂ´szrËl megkÂ¨ lÂ¨nbÂ¨ztetÂ¨ nk elfogadÂ´ Â´s nem elfogadÂ´ pontokat. Egy sorozau o o e o uo o u o e o tot akkor tartalmazza a szÂ´fa, ha van olyan elfogadÂ´ allapot, amely a sorozatot reprezentÂ´lja. o oÂ´ a MÂ´srÂ´szrËl bevezethetÂ¨ nk egy speciÂ´lis elemet, amit minden sorozat vÂ´gÂ´re illesztÂ¨ nk, tovÂ´bbÂ´ a e o u a e e u a a sorozatot csak levÂ´l reprezentÂ´lhat. e a A szÂ´fÂ´nak kÂ´t implementÂ´ciÂ´jÂ´t kÂ¨ lÂ¨nbÂ¨ztetjÂ¨ k meg attÂ´l fÂ¨ ggËen, hogy milyen technikÂ´t oa e a oa uo o u o u o a alkalmazunk az Â´lek tÂ´rolÂ´sÂ´ra. Az un. tÂ´blÂ´zatos implementÂ´ciÂ´ban (tabular implementation) e a aa Â´ a a a o [61] minden ponthoz egy rÂ¨gzÂ´ o Ä±tett hosszÂ´ sÂ´gÂ´ , mutatÂ´kat tartalmazÂ´ vektort veszÂ¨ nk fel. Az ua u o o u i-edik mutatÂ´ mutat az i-edik elemhez tartozÂ´ Â´l vÂ´gpontjÂ´ra. Ha a pontnak nincs ilyen cÂ´ ejË o oe e a Ä±mkÂ´ u Â´le, akkor a mutatÂ´ Â´rtÂ´ke NULL. A vektor hossza az I elemszÂ´mÂ´val egyezik meg. e oe e a a A lÂ´ncolt listÂ´s implementÂ´ciÂ´ban [41] az Â´leket egy lÂ´ncolt listÂ´ban tÂ´roljuk. A lista elea a a o e a a a mei Â´lcÂ´ e Ä±mke, gyermekmutatÂ´ pÂ´rok. A lÂ´ncolt lista kÂ¨vetkezË elemÂ´re mutatÂ´ mutatÂ´kat mego a a o o e o o spÂ´rolhatjuk, ha egy vektort alkalmazunk, aminek hossza megegyezik a pont Â´leinek szÂ´mÂ´val, o e a a Â´s elemei szintÂ´n cÂ´ e e Ä±mke, mutatÂ´ pÂ´rok. Ez azÂ´rt is jÂ´ megoldÂ´s, mert egy lÂ´pÂ´ssel tudunk o a e o a e e tetszËleges indexË elemre lÂ´pni (a cÂ´ o u e Ä±mke, mutatÂ´ pÂ´r memÂ´riaszÂ¨ ksÂ´gletÂ´nek ismeretÂ´ben), Â´s o a o u e e e e nem kell a mutatÂ´kon keresztÂ¨ l egyesÂ´vel lÂ´pegetnÂ¨ nk. o u e e u SzÂ´fÂ´k esetÂ´ben a legfontosabb elemi mË velet annak eldÂ¨ntÂ´se, hogy egy adott pontnak oa e u o e van-e adott cÂ´ ejË Â´le, Â´s ha van, akkor ez hova mutat. TÂ´blÂ´zatos implementÂ´ciÂ´nÂ´l ezt a Ä±mkÂ´ u e e a a a o a feladatot egy lÂ´pÂ´sben megoldhatjuk a megfelelË indexË elem megvizsgÂ´lÂ´sÂ´val. LÂ´ncolt listÂ´s, e e o u aa a a a illetve vÂ´ltozÂ´ hosszÂ´ sÂ´gÂ´ vektor esetÂ´n a megoldÂ´s lassabb mË velet. A vektor minden pÂ´rjÂ´t a o ua u e a u a a ellenËriznÂ¨ nk kell, hogy a pÂ´r cÂ´ eje megegyezik-e az adott cÂ´ evel. A hatÂ´konysÂ´got nÂ¨velo u a Ä±mkÂ´ Ä±mkÂ´ e a o hetjÂ¨ k, ha a pÂ´rokat cÂ´ ek szerint rendezve tÂ´roljuk, Â´s binÂ´ris keresÂ´st vÂ´gzÂ¨ nk. u a Ä±mkÂ´ a e a e e u Â´ Erdemes osszehasonlÂ´ Â¨ Ä±tanunk a kÂ´t vektoros implementÂ´ciÂ´ban a pontok memÂ´riaigÂ´nyÂ´t. e a o o e e Amennyiben a mutatÂ´k, Â´s a cÂ´ ek is 4 bÂ´jtot foglalnak, akkor a tÂ´blÂ´zatos implementÂ´ciÂ´ban o e Ä±mkÂ´ a a a a o egy pont memÂ´riaigÂ´nye (a vektor fejlÂ´c memÂ´riaigÂ´nyÂ´tËl eltekintve) |I|Â·4 bÂ´jt, a listÂ´s impleo e e o e eo a a mentÂ´ciÂ´Â´ nÂ·2Â·4 bÂ´nt, ahol n az adott pontbÂ´l indulÂ´ Â´lek szÂ´ma, amire igaz, hogy 0 â‰¤ n â‰¤ |I|. a oe a o oe a Ha a szÂ´fa pontjai olyanok, hogy kevÂ´s Â´lÂ¨ k van, akkor a listÂ´s implementÂ´ciÂ´nak lesz kevesebb o e eu a a o memÂ´riÂ´ra szÂ¨ ksÂ´ge, sok Â´lnÂ´l azonban tÂ´blÂ´zatos implementÂ´ciÂ´ a jobb megoldÂ´s. A kÂ´t techo a u e e e a a a o a e nikÂ´t otvÂ¨zhetjÂ¨ k akÂ´r egy adott szÂ´fÂ´n belÂ¨ l is [156], [187] : ha a pont Â´leinek szÂ´ma meghalad a Â¨ o u a oa u e a egy korlÂ´tot (Â´ltalÂ´ban I/2-t), akkor tÂ´blÂ´zatos implementÂ´ciÂ´t hasznÂ´lunk, ellenkezË esetben a a a a a a o a o maradunk a listÂ´s megoldÂ´snÂ´l. a a a MegemlÂ´ unk kÂ´t szÂ´fa leszÂ´rmazottat. Ezek a nyesett szÂ´fÂ´k (pruned trie) Â´s a PATRIÄ±tÂ¨ e o a oa e

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

32

CIA fÂ´k. MindkÂ´t fa abban kÂ¨ lÂ¨nbÂ¨zik az eredeti szÂ´fÂ´tÂ´l, hogy kiiktatjÂ´k az olyan utakat a a e uo o oao a fÂ´bÂ´l, amelyekben nincsen elÂ´gazÂ´s. A nyesett fÂ´nÂ´l ezt kizÂ´rÂ´lag levÂ´lhez vezetË utakkal teszik, a o a a a a ao e o PATRICIA fÂ´knÂ´l ez a korlÂ´tozÂ´s nem all fenn. a a a a Â´ Halmazokat tartalmazÂ´ szÂ´fÂ´k o oa Amennyiben a szÂ´fa hatÂ´kony adatstruktÂ´ ra sorozatok tÂ´rolÂ´sÂ´ra, Â´s gyors visszakeresÂ´sÂ´re, o e u a aa e ee akkor ugyanez mondhatÂ´ el elemhalmazok esetÂ´re is. Ha tehÂ´t elemhalmazok adottak Â´s az o e a e a feladat, hogy gyorsan megÂ´llapÂ´ a Ä±tsuk, hogy egy elemhalmaz szerepel-e a megadottak kÂ¨zÂ¨tt, o o akkor elÂ´g deï¬niÂ´lnunk az elemeken egy teljes rendezÂ´st, ami alapjÂ´n a halmazokat sorozatokkÂ´ e a e a a alakÂ´ Ä±thatjuk. KÂ¨ lÂ¨nbÂ¨zË rendezÂ´sek kÂ¨ lÂ¨nbÂ¨zË sorozatokat allÂ´ uo o o e uo o o Â´ Ä±tanak elË, amelyek kÂ¨ lÂ¨nbÂ¨zË szÂ´fÂ´kat o uo o o oa eredmÂ´nyeznek. Erre mutat pÂ´ldÂ´t a kÂ¨vetkezË abra, ahol kÂ´t olyan szÂ´fÂ´t lÂ´thatunk, amee e a o o Â´ e oa a lyek a AB, ABC elemhalmazokat tÂ´roljÂ´k. Az elsË szÂ´fa az ABC szerint csÂ¨kkenË sorrendet a a o o o o hasznÂ´l (C B A), mÂ´ a mÂ´sodik ennek ellenkezËjÂ´t. a Ä±g a oe
0 A 1 C B 2 3 3 1 A 4 0 B C 2 A

2.2. abra. PÂ´lda : kÂ¨ lÂ¨nbÂ¨zË rendezÂ´st hasznÂ´lÂ´ szÂ´fÂ´k Â´ e uo o o e ao oa Egy szÂ´fa memÂ´riaigÂ´nye arÂ´nyos a szÂ´fa pontjainak szÂ´mÂ´val, Â´ jogos az az igÂ´ny, hogy o o e a o a a Ä±gy e azt a teljes rendezÂ´st vÂ´lasszuk, amely a legkevesebb pontÂ´ , azaz minimÂ´lis mÂ´retË szÂ´fÂ´t adja. e a u a e u oa Ez az un. minimÂ´lis szÂ´fa elËallÂ´ asÂ´nak feladata. Sajnos ez egy nehÂ´z feladat. Â´ a o oÂ´ Ä±tÂ´ a e 2.4. tÂ´tel. A minimÂ´lis szÂ´fa problÂ´ma NP-nehÂ´z . e a o e e Eredetileg a feladatot n-esekre bizonyÂ´ Ä±tottÂ´k, de ebbËl kÂ¨vetkezik, hogy halmazokra is a o o Â´rvÂ´nyes. Legyen ugyanis az alaphalmaz I. Ekkor minden halmazt felfoghatunk, mint egy |I| e e hosszÂ´ binÂ´ris Â´rtÂ´keket tartalmazÂ´ vektort. u a e e o A fenti pÂ´ldÂ´t szemlÂ´lve az embernek az az Â´rzÂ´se tÂ´mad, hogy az a rendezÂ´s adja a legkevee a e e e a e sebb csÂ´ csÂ´ szÂ´fÂ´t, amelyeben az elemek a halmazokban valÂ´ elËfordulÂ´sok szÂ´mÂ´nak arÂ´nyÂ´ban u u oa o o a a a a a csÂ¨kkenË sorba vannak Rendezve. Ugyanis a gyakori elemek fognak a halmazok kapott sorozao o tok elejÂ´re kerÂ¨ lni, Â´s ezek az elemek, mivel gyakoriak sok sorozat elejÂ´n lesznek megtalÂ´lhatÂ´k. e u e e a o A szÂ´fa a kÂ¨zÂ¨s preï¬xeket csak egyszer tÂ´rolja, Â´ akkor lesz a szÂ´fa mÂ´rete vÂ´rhatÂ´an a o o o a Ä±gy o e a o legkisebb, ha minÂ´l tÂ¨bb sorozatnak van kÂ¨zÂ¨s preï¬xe. Az elËzË abra is ezt sugallta. e o o o o oÂ´ Sajnos a fenti mÂ´don kapott szÂ´fa nem feltÂ´tlenÂ¨ l adja a legkevesebb pontot tartalmazÂ´ o o e u o szÂ´fÂ´t. Ezt a legegyszerË bben egy ellenpÂ´ldÂ´val tudjuk bizonyÂ´ oa u e a Ä±tani. Legyenek a halmazaink a kÂ¨vetkezËek : AB, AC, CZ, BCZ, BZ, Z. A Z elem gyakorisÂ´ga 4, a B, C-Â´ 3 Â´s az A elemÂ´ 2. o o a e e e Ha felrajzoljuk ezen gyakorisÂ´gok alapjÂ´n kapott rendezÂ´s (Z > B > C > A, de a C, B elemek a a e sorrende tetszËleges lehet) szerinti szÂ´fÂ´t, akkor a bal oldali szÂ´fÂ´t kapjuk. Ha az A Â´s B, C o oa oa e elemek sorrendjÂ´t felcserÂ´ljÂ¨ k, akkor eggyel kevesebb pontot tartalmazÂ´ szÂ´fÂ´t kapunk (jobb e e u o oa oldal).

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK
T
Z C 5 C 8 7 6
DESC

33
TOP T

0 B 1 B 4 2 A

C 3 A 7 3 C 1 B C 4 Z

0

A 2 C B 5 6

2.3. abra. EllenpÂ´lda arra, hogy az elËfordulÂ´s szerinti csÂ¨kkenË sorrend adja a minimÂ´lis Â´ e o a o o a mÂ´retË szÂ´fÂ´t e u oa PatrÂ´ Ä±cia-fÂ´k a Egy irÂ´nyÂ´ a Ä±tott utat lÂ´ncnak hÂ´ a Ä±vunk, ha minden pontjÂ´nak csak egy gyereke van. A PatrÂ´ a Ä±ciafa a szÂ´fÂ´bÂ´l szÂ´rmaztathatÂ´ ugy, hogy a szÂ´fa nem bËvÂ´ oa o a oÂ´ o o Ä±thetË lÂ´ncait egy-egy Â´llÂ´ vonjuk ossze. o a e e Â¨ Az uj Â´l a lÂ´nc utolsÂ´ pontjÂ´ba mutat, cÂ´ eje a lÂ´nc Â´leinek cÂ´ eibËl allÂ´ sorozat. Ha a Â´ e a o a Ä±mkÂ´ a e Ä±mkÂ´ o Â´ o lÂ´ncÂ¨sszevonÂ´st csak a levÂ´lben vÂ´gzËdË lÂ´ncokra hajtjuk vÂ´gre, akkor un PatrÂ´ a o a e e o o a e Â´ Ä±cia* fÂ´t kapunk. a Ha a szÂ´fa sok lÂ´ncot tartalmaz, akkor a PatrÂ´ o a Ä±cia-fa sokkal hatÂ´konyabb. EllenkezË esetben e o viszont tÂ¨bb memÂ´riÂ´t hasznÂ´l, mivel a cÂ´ eket vektorokban tÂ´roljuk, ami egyetlen elem o o a a Ä±mkÂ´ a tÂ´rolÂ´sa esetÂ´n nem cÂ´lravezetË a nagy tÂ¨bbletkÂ¨ltsÂ´g miatt. a a e e o o o e

2.8.2. Piros-fekete fÂ´k a
A piros-fekete (RB-tree vagy symmetric binary B-trees) fÂ´k a kiegyensÂ´ lyozott binÂ´ris fÂ´k a u a a (balanced binary tree) egy tÂ´ Ä±pusa. Minden csÂ´ csnak szÂ´ van, hagyomÂ´nyosan piros vagy fekete. u Ä±ne a SpeciÂ´lis forgatÂ´sokat hasznÂ´lÂ´ beszÂ´ rÂ´s mË velet biztosÂ´ a a ao ua u Ä±tja, hogy bÂ´rmely a gyÂ¨kÂ´rbËl levÂ´lbe a o e o e vezetË ut hossza ne legyen nagyobb, mint a legrÂ¨videbb ilyen ut hosszÂ´nak kÂ´tszerese. Egy o Â´ o Â´ a e piros-fekete fa a kÂ¨vetkezË tulajdonsÂ´gokkal rendelkezik : o o a I. Minden csÂ´ csnak a szÂ´ piros vagy fekete. u Ä±ne II. Minden levÂ´l szÂ´ fekete. e Ä±ne III. Minden piros csÂ´ csnak mindkÂ´t ï¬a fekete. u e IV. BÂ´rmely kÂ´t, azonos csÂ´ csbÂ´l indulÂ´, levÂ´lig vezetË uton ugyanannyi fekete csÂ´ cs van. a e u o o e oÂ´ u A fentiekbËl kÂ¨vetkezik, hogy bÂ´rmely n belsË csÂ´ ccsal rendelkezË piros-fekete fa magassÂ´ga o o a o u o a legfeljebb 2 lg(n + 1). A bizonyÂ´ as Â´s a fa Â´pÂ´ esÂ´nek menete megtalÂ´lhatÂ´ az irodalomban (pl. Ä±tÂ´ e e Ä±tÂ´ e a o [101]).

2.8.3. Hash-tÂ´bla a
A hash-tÂ´bla magyar elnevezÂ´se hasÂ´ o-tÂ´bla ( ), de mi ezt a szÂ´t nem fogjuk hasznÂ´lni. A a e Ä±tÂ´ a o a hash-tÂ´bla elemek gyors elhelyezÂ´sÂ´re Â´s visszakeresÂ´sÂ´re hasznÂ´lt adatstruktÂ´ ra. A tÂ´blÂ´zatnak a ee e ee a u a a cellÂ´i vannak, amibe elemeket helyezhetÂ¨ nk. Minden cellÂ´nak van egy cÂ´ a u a Ä±me (vagy indexe). A hash-tÂ´blÂ´s tÂ´rolÂ´sban kÂ¨zponti szerepet tÂ¨lt be az elemeken Â´rtelmezett un. hash-fÂ¨ggvÂ´ny, ami a a a a o o e Â´ u e

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

34

megadja az elem hash-Â´rtÂ´kÂ´t. Egy elemet arra a cÂ´ e e e Ä±mre helyezÂ¨ nk be a hash-tÂ´blÂ´ban, amelyet u a a a hash-Â´rtÂ´ke megad. ElËfordulhat, hogy kÂ¨ lÂ¨nbÂ¨zË elemekhez a hash-fÂ¨ ggvÂ´ny ugyanazokat a e e o uo o o u e hash-Â´rtÂ´ket rendeli. Ezt utkÂ¨zÂ´snek hÂ´ e e Â¨ o e Ä±vjuk. A hash-tÂ´blÂ´krÂ´l onmagÂ´ban fejezeteket lehet Â´ a a o Â¨ a Ä±rni, ennyi bevezetË azonban elÂ´g ahhoz, hogy megÂ´rtsÂ¨ k a jegyzet tovÂ´bbi rÂ´szeit. o e e u a e

2.9. SzÂ´mÂ´ ogÂ´p-architektÂ´ rÂ´k a Ä±tÂ´ e u a
Sok kutatÂ´ alkalmazza a kÂ¨ lsË tÂ´ras modellt az algoritmusÂ´nak hatÂ´konysÂ´gÂ´nak o u o a a e a a vizsgÂ´latakor. MÂ´ra az oriÂ´si memÂ´riamÂ´reteknek kÂ¨szÂ¨nhetËen a legtÂ¨bb adatbÂ´zis elfÂ´r a a a Â´ a o e o o o o a e memÂ´riÂ´ban, valamilyen szË rt formÂ´ban. Ilyen esetekben az elemzÂ´shez hasznÂ´lt modell leo a u a e a egyszerË sÂ¨dik az egyszerË bb kÂ¨zvetlen hozzÂ´fÂ´rÂ´sË (RAM-) modellre (amely Neumann-modell uo u o aeeu [178] nÂ´ven is ismert, mivel a magyar szÂ¨ letÂ´sË Neumann JÂ´nos javasolta elËszÂ¨r ezt az archie u eu a o o tektÂ´ rÂ´t.). A programokat olyan modern processzorokon futtatjÂ´k, amely sokkal kiï¬nomultabb ua a a RAM-modellnÂ´l. A modell tÂ´ lzott egyszerË sÂ´ ese ahhoz vezet, hogy az elemzÂ´seknek seme u u Ä±tÂ´ e mi kÂ¨ze nincs a valÂ´sÂ´ghoz. Az uj modell uj elvÂ´rÂ´sokat tÂ´maszt az algoritmusokkal szemben. o oa Â´ Â´ aa a EzekrËl egy kivÂ´lÂ´ attekintÂ´s olvashatÂ´ a [120] tanulmÂ´nyban. A modern processzorok legfono ao Â´ e o a tosabb sajÂ´tossÂ´ga a tÂ¨bbszintË memÂ´ria Â´s a csËvezetÂ´kes (pipeline-) feldolgozÂ´s. a a o u o e o e a

2.9.1. TÂ¨bbszintË memÂ´ria, adatlokalitÂ´s o u o a
A memÂ´ria nem egyelten nagy blokk, sokkal inkÂ´bb kÂ¨ lÂ¨nbÂ¨zË mÂ´retË , kÂ´sleltetÂ´sË o a uo o o e u e eu memÂ´riÂ´kbÂ´l allÂ´ hierarchikus rendszer. MinÂ´l nagyobb a memÂ´ria mÂ´rete, annÂ´l tÂ¨bb idË o a o Â´ o e o e a o o kell a hozzÂ´fÂ´rÂ´shez. A hierarchia elemei, mÂ´ret szerint csÂ¨kkenË sorrendben a kÂ¨vetkezËk : aee e o o o o regiszterek, pÂ´r kilobÂ´jtos elsËszintË gyorsÂ´ otÂ´r, pÂ´r megabÂ´jtos mÂ´sodszintË gyorsÂ´ otÂ´r, a a o u Ä±tÂ´ a a a a u Ä±tÂ´ a esetleges harmadszintË gyorsÂ´ otÂ´r, rendszermemÂ´ria Â´s merevlemez. Az adatot a rendszeru Ä±tÂ´ a o e memÂ´riÂ´bÂ´l a mÂ´sodszintË gyorsÂ´ otÂ´rba, a mÂ´sodszintË bËl az elsËszintË gyorsÂ´ otÂ´rba bloko a o a u Ä±tÂ´ a a u o o u Ä±tÂ´ a konkÂ´nt mÂ´solhatjuk. A blokkmÂ´ret egy Pentium 4-es processzor esetÂ´n 128 bÂ´jt. e a e e a A blokkonkÂ´nti feldolgozÂ´s mÂ´s megvilÂ´gÂ´ asba helyezi az algoritmusok vizsgÂ´latÂ´t : egyete a a a Ä±tÂ´ a a len bit elÂ´rÂ´sÂ´hez Â´s beolvasÂ´sÂ´hoz egy lassÂ´ memÂ´riÂ´bÂ´l ugyanannyi idË kell, mint a bitet eee e aa u o a o o tartalmazÂ´ teljes blokk elÂ´rÂ´sÂ´hez Â´s beolvasÂ´sÂ´hoz. MÂ´sik adat elÂ´rÂ´se ugyanebben a blokkban o eee e aa a ee viszont nem igÂ´nyli mÂ´r a hozzÂ´fÂ´rÂ´st a lassÂ´ memÂ´riÂ´hoz. Â´ rendkÂ´ ul fontos kÂ¨vetelmÂ´nnyÂ´ e a aee u o a Igy Ä±vÂ¨ o e e vÂ´lik adatlokalitÂ´s, azaz hogy az adatok, amelyeket idËben egymÂ´shoz kÂ¨zel dolgozunk fel, a a a o a o memÂ´riÂ´ban is kÂ¨zel legyenek egymÂ´shoz. o a o a Az adatot feldolgozÂ´sakor be kell hozni a regiszterekbe. ElËfordulhat, hogy mÂ´r eleve ott a o a van, mert az elËzË mË veletekhez szÂ¨ ksÂ´g volt rÂ´. A korlÂ´tozott szÂ´mÂ´ regiszterek miatt azonban o o u u e a a a u sokkal valÂ´szÂ´ ubb, hogy az egyik gyorsÂ´ otÂ´rban vagy a rendszermemÂ´riÂ´ban helyezkedik el. o Ä±nË Ä±tÂ´ a o a SËt, az is lehet, hogy a merevlemezen talÂ´lhatÂ´, ha az algoritmus memÂ´riaigÂ´nye annyira nagy, o a o o e hogy lapozÂ´sra van szÂ¨ ksÂ´g. Ha a mÂ´sodszintË gyorsÂ´ otÂ´rban vagy a rendszermemÂ´riÂ´ban a u e a u Ä±tÂ´ a o a helyezkedik el a kÂ´ ant adat, akkor az adathozzÂ´fÂ´rÂ´s un. cache miss-t okoz. AmÂ´ ez az adat Ä±vÂ´ aee Â´ Ä±g bekerÂ¨ l a regiszterekbe, a processzor vÂ´grehajthat mÂ´s mË veleteket (ezer alapmË velet, pÂ´ldÂ´ul u e a u u e a osszeadÂ´s elvÂ´gzÂ´sÂ´re kÂ´pes ez idË alatt), ennek ellenÂ´re a teljesÂ´ enye messze elmaradhat Â¨ a e ee e o e Ä±tmÂ´ ilyenkor a maximÂ´listÂ´l. TehÂ´t az adatstruktÂ´ ra, algoritmus pÂ´r tervezÂ´sekor tÂ¨rekednÂ¨ nk kell a o a u a e o u a minÂ´l jobb adatlokalitÂ´sra a cache miss-ek elkerÂ¨ lÂ´se Â´rdekÂ´ben. e a ue e e

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

35

2.9.2. CsËvezetÂ´kes feldolgozÂ´s, elÂ´gazÂ´s-elËrejelzÂ´s o e a a a o e
A programozÂ´k altal hasznÂ´lt mË veleteket a fordÂ´ o mikroutasÂ´ asok sorozatÂ´ra bontja. A o Â´ a u Ä±tÂ´ Ä±tÂ´ a mË veleteket nem kÂ¨ lÂ¨n-kÂ¨ lÂ¨n, egymÂ´s utÂ´n hajtjuk vÂ´gre, hanem pÂ´rhuzamosan dolgozzuk u uo uo a a e a fel oket, csËvezetÂ´k hasznÂ´latÂ´val. Sajnos azonban az adatfÂ¨ ggËsÂ´g Â´s a feltÂ´teles ugrÂ´sok soË o e a a u oe e e a kat rontanak a pÂ´rhuzamos feldolgozÂ´s hatÂ´konysÂ´gÂ´n. AdatfÂ¨ ggËsÂ´grËl akkor beszÂ´lÂ¨ nk, ha a a e a a u oe o eu egy utasÂ´ as egy elËzË utasÂ´ as eredmÂ´nyÂ´tËl fÂ¨ gg. ElÂ´gazÂ´s-elËrejelzÂ´snÂ´l megjÂ´soljuk a feltÂ´tel Ä±tÂ´ o o Ä±tÂ´ e eo u a a o e e o e kimenetÂ´t, Â´s betÂ¨ltjÂ¨ k a csËvezetÂ´kbe az ennek megfelelË utasÂ´ asokat. Ha a jÂ´slÂ´s hamise e o u o e o Ä±tÂ´ o a nak bizonyul, akkor a csËvezetÂ´ket ki kell urÂ´ o e Â¨ Ä±teni, Â´s be kell tÂ¨lteni a helyes utasÂ´ asokat. e o Ä±tÂ´ Ezt a problÂ´mÂ´t gyakran kikÂ¨ szÂ¨bÂ¨lhetjÂ¨ k kÂ¨ lÂ¨nbÂ¨zË technikÂ´k alkalmazÂ´sÂ´val, (mint pÂ´ldÂ´ul e a u o o u uo o o a aa e a kÂ´dÂ´trendezÂ´ssel) amelyet automatikusan elvÂ´gez a fordÂ´ o. SzÂ´mÂ´ asigÂ´nyes algoritmus tero a e e Ä±tÂ´ a Ä±tÂ´ e vezÂ´sekor azonban nekÂ¨ nk kell ugyelnÂ¨ nk az adatfÂ¨ ggetlensÂ´gre Â´s az elÂ´gazÂ´s-elËrejelzÂ´sre. e u Â¨ u u e e a a o e A csËvezetÂ´kes feldolgozÂ´s lehetËvÂ´ teszi, hogy egy orajel alatt tÂ¨bb mË veletet is o e a o e Â´ o u elvÂ´gezzÂ¨ nk. A fent emlÂ´ e u Ä±tett problÂ´mÂ´k miatt azonban a processzor atlagos teljesÂ´ enye messze e a Â´ Ä±tmÂ´ nem Â´ri el az optimumot. A felesleges feltÂ´telek ronthatjÂ´k a hatÂ´konysÂ´got. Az elÂ´gazÂ´se e a e a a a elËrejelzÂ´s intelligens olyan szempontbÂ´l, hogy ha egy feltÂ´tel kimenete sohasem vÂ´ltozik, akkor o e o e a a processzor ezt ï¬gyelembe veszi Â´s a kÂ´sËbbiekben ennek megfelelËen jÂ´sol. Â´ a mindig igaz e eo o o Igy (vagy hamis) feltÂ´telek nem befolyÂ´soljÂ´k a hatÂ´konysÂ´got. e a a e a

3. fejezet ElËfeldolgozÂ´s, hasonlÂ´sÂ´gi fÂ¨ggvÂ´nyek o a o a u e
Ebben a fejezetben a legfontosabb elËfeldolgozÂ´si mË veleteket ismertetjÂ¨ k, majd rÂ´tÂ´rÂ¨ nk o a u u aeu arra, hogy milyen elterjedt mÂ´rtÂ´kek vannak elemek kÂ¨zÂ¨tti hasonlÂ´sÂ´gra. Mindenek elËtt azt e e o o oa o kell tisztÂ´znunk, hogy milyen tÂ´ u attribÂ´ tumok lÂ´teznek matematikus szemmel. a Ä±pusÂ´ u e JelÂ¨ljÂ¨ k az A attribÂ´ tum kÂ´t Â´rtÂ´kÂ´t a-val Â´s a -vel. o u u e e e e e I. A kategÂ´ria tÂ´pusÂ´ (nominal ) attribÂ´ tumnÂ´l az attribÂ´ tum Â´rtÂ´kei kÂ¨zÂ¨tt csak azonossÂ´got o Ä± u u a u e e o o a tudunk vizsgÂ´lni. TehÂ´t csak azt tudom mondani, hogy a = a vagy azt, hogy a = a . A kaa a tegÂ´ria tÂ´ u attribÂ´ tum egy speciÂ´lis esete a binÂ´ris attribÂ´tum, ahol az attribÂ´ tum csak o Ä±pusÂ´ u a a u u kÂ´t Â´rtÂ´ket vehet fel. A kategÂ´ria tÂ´ u attribÂ´ tumokat az irodalom nÂ´ha felsorolÂ´s (enue e e o Ä±pusÂ´ u e a merated) vagy diszkrÂ´t tÂ´ e Ä±pusnak is hÂ´ Ä±vja. MÂ´sodlagos jelentÂ´sÂ¨ k miatt a tanulmÂ´nyban a eu a ezeket az elnevezÂ´seket nem hasznÂ´ljuk. PÂ´ldÂ´ul a felsorolÂ´s tÂ´ e a e a a Ä±pus emlÂ´ esÂ´nÂ´l a legtÂ¨bb inÄ±tÂ´ e e o formatikusnak a C++, java, C#-beli felsorolÂ´s tÂ´ u vÂ´ltozÂ´ jut eszÂ´be, amelyek mindig a Ä±pusÂ´ a o e egyÂ´rtelmË megfeleltetÂ´sben allnak egy egÂ´sz szÂ´mmal. e u e Â´ e a II. A sorrend tÂ´pusÂ´ (ordinal ) attribÂ´ tumoknÂ´l az Â´rtÂ´keket sorba tudjuk rendezni, azaz az Ä± u u a e e attribÂ´ tum Â´rtÂ´ken teljes rendezÂ´st tudunk megadni. Ha tehÂ´t a = a , akkor mÂ´g azt is u e e e a e tudjuk, hogy a > a Â´s a < a kÂ¨zÂ¨ l melyik igaz. e o u III. Ha az eddigiek mellett meg tudunk adni egy + fÂ¨ ggvÂ´nyt, amivel az elemek csoportot u e alkotnak, akkor intervallum tÂ´pusÂ´ (interval scale) attribÂ´ tumrÂ´l beszÂ´lÂ¨ nk. Ä± u u o eu IV. Ha egy intervallum tÂ´ u attribÂ´ tumnÂ´l meg lehet adni zÂ´rus Â´rtÂ´ket, vagy pontosabban Ä±pusÂ´ u a e e e az attribÂ´ tum elemei gyË rË t alkotnak, akkor az attribÂ´ tum arÂ´ny skÂ´lÂ´jÂ´ (ratio scale). u uu u a aau Az arÂ´ny skÂ´lÂ´jÂ´ attribÂ´ tumot gyakran fogjuk valÂ´s attribÂ´ tumnak hÂ´ a aau u o u Ä±vni, hiszen a gyakorlati esetek tÂ¨bbsÂ´gÂ´ben az arÂ´ny skÂ´lÂ´jÂ´ attribÂ´ tumok megadÂ´sÂ´hoz valÂ´s szÂ´mokat o e e a aau u aa o a hasznÂ´lunk. Azonban ne felejtsÂ¨ k el az arÂ´ny skÂ´lÂ´jÂ´ attribÂ´ tum eredeti deï¬nÂ´ ojÂ´t, illeta u a aau u Ä±ciÂ´ a ve azt, hogy az arÂ´ny skÂ´lÂ´jÂ´ attribÂ´ tumok nem feltÂ´tlenÂ¨ l valÂ´s szÂ´mokat tartalmaznak. a aau u e u o a PÂ´ldÂ´ul egy ugyfeleket leÂ´ o adatbÂ´zisban vannak binÂ´ris (pl. : bÂ¨ ntetett elËÂ´letË -e), kategorikus e a Â¨ Ä±rÂ´ a a u oe u (pl. : vallÂ´s, csalÂ´di allapot) Â´s intervallum (pl. : Â´vszÂ´m) tÂ´ u attribÂ´ tumok is. a a Â´ e e a Ä±pusÂ´ u Furcsa mÂ´d nem mindig triviÂ´lis, hogy egy attribÂ´ tum milyen tÂ´ u. PÂ´ldÂ´ul az idËjÂ´rÂ´s o a u Ä±pusÂ´ e a oaa jellemzÂ´sÂ´re hasznÂ´lt napsÂ¨tÂ´ses, borÂ´s, es}s Â´rtÂ´kekre mondhatjuk, hogy ez egy kategÂ´ria ee a u e u o e e o attribÂ´ tum elemei. Ugyanakkor Â´rezzÂ¨ k, hogy a borÂ´s valahol a napsÂ¨tÂ´ses Â´s az es}s kÂ¨zÂ¨tt u e u u u e e o o o helyezkedik el, Â´ inkÂ´bb sorrend tÂ´ unak mondanÂ´nk az attribÂ´ tumot. Ä±gy a Ä±pusÂ´ a u 36

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

37

Az intervallum tÂ´ u attribÂ´ tumok megadÂ´sÂ´ra is szÂ´mokat hasznÂ´lunk, amelyeknÂ´l Ä±pusÂ´ u aa a a e Â´rtelme van a kÂ¨ lÂ¨nbsÂ´g szÂ´mÂ´ asÂ´nak, de a hÂ´nyados kÂ´pzÂ´snek nincs tÂ´ l sok. TulajdonkÂ´ppen e uo e a Ä±tÂ´ a a e e u e azt, hogy egy attribÂ´ tum esetÂ´ben mikor beszÂ´lÂ¨ nk intervallum Â´s mikor arÂ´ny skÂ´lÂ´jÂ´ tÂ´ u e eu e a a a u Ä±pusrÂ´l o az dÂ¨nti el, hogy egyÂ´rtelmË -e a zÂ´rus pont deï¬niÂ´lÂ´sa. Gondoljuk meg, hogy pÂ´ldÂ´ul az o e u e aa e a Â´vszÂ´moknÂ´l hÂ´ny fajta nullÂ´t ismerÂ¨ nk. HasonlÂ´ a helyzet a hËmÂ´rsÂ´klet esetÂ´ben (Fahrenheit e a a a a u o o e e e kontra Celsius).

3.1. ElËfeldolgozÂ´s o a
3.1.1. HiÂ´nyzÂ´ Â´rtÂ´kek kezelÂ´se a oe e e
Az adatbÂ´nyÂ´szati algoritmusok csak olyan elemeket tudnak kezelni, amelyeknek minden a a attribÂ´ tuma adott. A valÂ´ Â´let adatbÂ´zisainÂ´l ez nem mindig all fenn, kÂ¨nnyen lehet, hogy u o e a a Â´ o bizonyos cellÂ´kat nem tÂ¨ltÂ¨tt ki az adatot begÂ´pelË szemÂ´ly. Sok oka lehet a hiÂ´nyos mezËknek. a o o e o e a o PÂ´ldÂ´ul az orvos bizonyos teszteken nem vÂ´gzett el a pÂ´ciensen, mert nem talÂ´lta szÂ¨ ksÂ´gesnek. e a e a a u e Persze tÂ¨rÂ¨lhetjÂ¨ k azokat az elemeket, amelyek tartalmaznak hiÂ´nyzÂ´ attribÂ´ tumokat, de oo u a o u lehet, hogy ekkor annyira lecsÂ¨kken az adatbÂ´zis mÂ´rete, hogy az alkalmatlan lesz az elemzÂ´sre, o a e e vagy legalÂ´bbis adott konï¬dencia mellett keveset tudunk mondani az osszefÂ¨ ggÂ´sekrËl. A a Â¨ u e o hiÂ´nyzÂ´ Â´rtÂ´keket tartalmazÂ´ elemek hasznos informÂ´ciÂ´t tartalmazhatnak, ne dobjuk el oket, a oe e o a o Ë ha nem muszÂ´j. a A hiÂ´nyzÂ´ cellÂ´kat fel kell tÂ¨ltenÂ¨ nk valamilyen Â´rtÂ´kkel, vagy a hiÂ´nyzÂ´st mint kÂ¨ lÂ¨n atta o a o u e e a a uo ribÂ´ tumÂ´rtÂ´k kell kezelnÂ¨ nk. Ez utÂ´bbit teszi pÂ´ldÂ´ul a C4.5 nevË dÂ¨ntÂ´si fÂ´kat elËallÂ´ o mÂ´dszer u e e u o e a u o e a oÂ´ Ä±tÂ´ o [141] is. SokfÂ´lekÂ´ppen helyettesÂ´ e e Ä±thetjÂ¨ k a hiÂ´nyzÂ´ Â´rtÂ´keket. Ha a hiÂ´nyzÂ´ attribÂ´ tum kategÂ´ria u a o e e a o u o tÂ´ u, akkor vehetÂ¨ nk egy alapÂ´rtelmezett Â´rtÂ´ket, vagy az attribÂ´ tum leggyakrabban Ä±pusÂ´ u e e e u elËfordulÂ´ Â´rtÂ´kÂ´t. LÂ´trehozhatunk egy elem helyett sok uj teljes elemet ugy, hogy a hiÂ´nyzÂ´ o oe e e e Â´ Â´ a o attribÂ´ tum helyÂ´re az osszes lehetsÂ´ges Â´rtÂ´ket beÂ´ u e Â¨ e e e Ä±rjuk. Intervallum attribÂ´ tumok esetÂ´n szokÂ´s u e a az atlagot vagy a mediÂ´nt vÂ´lasztani. Â´ a a Ha osztÂ´lyozÂ´si feladattal van dolgunk, akkor a fenti Â´rtÂ´kek szÂ´mÂ´ asÂ´nÂ´l szorÂ´ a a e e a Ä±tÂ´ a a Ä±tkozhatunk csak az adott osztÂ´lyba tartozÂ´ elemekre. SËt ezt a gondolatot vihetjÂ¨ k tovÂ´bb Â´s az a o o u a e Â´rtÂ´kek szÂ´mÂ´ asÂ´nÂ´l tekinthetjÂ¨ k csak azokat az elemeket (ha vannak ilyenek), amelyek e e a Ä±tÂ´ a a u attribÂ´ tumainak Â´rtÂ´kei megegyeznek a hiÂ´nyzÂ´ Â´rtÂ´ket tartalmazÂ´ elem attribÂ´ tumainak u e e a o e e o u Â´rtÂ´keivel. Itt Â´rdemes gondosan eljÂ´rni Â´s csak a fontos attribÂ´ tumokat vizsgÂ´lni (gondoljuk e e e a e u a meg, ha a vizsgÂ´latnÂ´l nem zÂ´rjuk ki az azonosÂ´ o attribÂ´ tumot, akkor egyetlen elemet sem a a a Ä±tÂ´ u fogunk ï¬gyelembe venni).

3.1.2. AttribÂ´ tum transzformÂ´ciÂ´k u a o
NormalizÂ´lÂ´s aa NormalizÂ´lÂ´son azt Â´rtjÂ¨ k, hogy az attribÂ´ tum elemeit egy mÂ´sik intervallum elemeivel aa e u u a helyettesÂ´ uk ugy, hogy a helyettesÂ´ Ä±tjÂ¨ Â´ Ä±tett Â´rtÂ´kek eloszlÂ´sa megegyezzen az eredeti Â´rtÂ´kek ele e a e e oszlÂ´sÂ´val. TegyÂ¨ k fel, hogy az A attribÂ´ tum a1 , a2 , . . . , al Â´rtÂ´keket vesz fel. Az aj , j = 1, . . . , l aa u u e e o u aa e o Â´rtÂ´k normÂ´jÂ´t aj -vel jelÂ¨ljÂ¨ k. NormalizÂ´lÂ´sra kÂ´t mÂ´dszer terjedt el. e e aa
j A Min-max normalizÂ´lÂ´s : Itt egy sima lineÂ´ris transzformÂ´ciÂ´t vÂ´gzÂ¨ nk : aj = maxA âˆ’minA , ahol aa a a o e u

a âˆ’min

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

38

minA (maxA ) jelÂ¨li az A attribÂ´ tum legkisebb (legnagyobb) Â´rtÂ´kÂ´t. Minden elem a [0,1] o u e e e intervallumba fog esni. Standard normalizÂ´lÂ´s (z-score normalization) : ai = aa atlaga, ÏƒA pedig a szÂ´rÂ´sa. A hagyomÂ´nyos szÂ´rÂ´s ( Â´ oa a oa
Pl |a âˆ’Â¯| a Â¯ ai âˆ’A , ÏƒA Pl

Â¯ ahol A az A attribÂ´ tum u
Â¯
2

i=1 (ai âˆ’A)

l

) helyett az abszolÂ´ t u

szÂ´rÂ´st is hasznÂ´lni szoktÂ´k ( i=1 l i ). Ennek elËnye, hogy csÂ¨kkenti az atlagtÂ´l tÂ´vol oa a a o o Â´ o a esË pontok (kÂ¨ lÂ¨ncÂ¨k, outlier-ek) hatÂ´sÂ´t. o uo o aa

3.1.3. MintavÂ´telezÂ´s e e
Az adatbÂ´nyÂ´szati algoritmusok altalÂ´ban erËforrÂ´s-igÂ´nyesek. Ha a bemeneti adathalmaza a Â´ a o a e nak csak egy kis szeletÂ´t, kis mintÂ´jÂ´t dolgozzuk fel, akkor hamarabb kapunk eredmÂ´nyt. A e aa e mintavÂ´telezÂ´s kÂ¨vetkezmÂ´nye, hogy az Â´ kapott eredmÂ´ny nem biztos, hogy pontos, azaz e e o e Ä±gy e lehet, hogy nem azt az eredmÂ´nyt kapjuk, mint amikor a teljes adathalmazt dolgozzuk fel. e Vannak esetek, amikor a pontos eredmÂ´nynÂ´l fontosabb a gyors adatfeldolgozÂ´s. Ilyen eseteke e a ben nagyon hasznos egy olyan mintamÂ´ret meghatÂ´rozÂ´sa, aminÂ´l az algoritmus gyors, de a e a a e hibÂ´zÂ´s valÂ´szÂ´ usÂ´ge kicsi. a a o Ä±nË e A hiba mÂ´rtÂ´kÂ´rËl csak abban az esetben tue e eo dunk bËvebben nyilatkozni, ha tudjuk, milyen jellegË o u Az Elevit hatÂ´konysÂ´gÂ´t igazolÂ´ e a a o â€ osszefÂ¨ ggÂ´sÂ´ket nyerÂ¨ nk ki. Most azt a speciÂ´lis esetet klinikai vizsgÂ´latok kÂ¨zel tÂ´zezer Â¨ u ee u a a o Ä± nÂ´zzÂ¨ k meg, amikor elemek elËfordulÂ´sÂ´nak valÂ´szÂ´ usÂ´gÂ´t magyar kismama bevonÂ´sÂ´val e u o aa o Ä±nË e e a a akarjuk kÂ¨zelÂ´ o Ä±teni a relatÂ´ gyakorisÂ´gukkal. Gyako- vÂ´geztÂ´k. A vizsgÂ´latok sorÂ´n Ä±v a e e a a ri mintÂ´k, asszociÂ´ciÂ´s szabÂ´lyok, Ï‡2 alapÂ´ fÂ¨ gget- az Elevit szedÂ´sÂ´vel kilencvenkÂ´t a a o a u u e e e lensÂ´gvizsgÂ´latnÂ´l ez az eset all fenn. e a a Â´ szÂ´zalÂ´kkal csÂ¨kkent az idegrenda e o TegyÂ¨ k fel, hogy elemek halmazÂ´bÂ´l egy tetszËleges szeri fejlËdÂ´si rendellenessÂ´gek u a o o o e e x elem elËfordulÂ´sÂ´nak valÂ´szÂ´ usÂ´ge p Â´s m meg- elËfordulÂ´sa.â€ ForrÂ´s : Baba Pao aa o Ä±nË e e o a a ï¬gyelÂ´s/minta all rendelkezÂ´sÂ¨ nkre. A mintavÂ´telezÂ´s tika X. Â´vfolyam 10. szÂ´m, 44. e Â´ eu e e e a hibÂ´zik, amennyiben x relatÂ´ gyakorisÂ´ga eltÂ´r p-tËl, pon- oldal, 2007. oktÂ´ber : a Ä±v a e o o tosabban a mintavÂ´telezÂ´s hibÂ´ja : e e a hiba(m) = P rel. gyakorisÂ´g(x) âˆ’ p â‰¥ a .

JelÂ¨lje Xi azt a valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´t, ami 1, ha x-et vÂ´lasztottuk egy i-edik hÂ´ zÂ´snÂ´l, kÂ¨ lÂ¨nben o o Ä±nË e a o a u a a uo 0, Â´s legyen Y = m Xi . Mivel a hÂ´ zÂ´sok egymÂ´stÂ´l fÂ¨ ggetlenek, az Y eloszlÂ´sa m, p paramÂ´terË e u a a o u a e u i=1 binÂ´ris eloszlÂ´st kÂ¨vet. Ezt felhasznÂ´lva : a a o a Y hiba(m) = P âˆ’p â‰¥ = P Y âˆ’mÂ·p â‰¥ mÂ· m = P Y âˆ’E Y â‰¥ mÂ· = P Y â‰¥ m Â· (E[X] + ) + P Y â‰¤ m Â· (E[X] âˆ’ ) A mÂ´sodik egyenlËsÂ´gnÂ´l kihasznÂ´ltuk, hogy a binomiÂ´lis eloszlÂ´s vÂ´rhatÂ´ Â´rtÂ´ke m Â· p. a oe e a a a a o e e TetszËleges eloszlÂ´s esetÂ´n a vÂ´rhatÂ´ Â´rtÂ´kÂ´tËl valÂ´ eltÂ´rÂ´s valÂ´szÂ´ usÂ´gÂ´re tÂ¨bb ismert korlÂ´t o a e a oe e eo o ee o Ä±nË e e o a is lÂ´tezik [161]. A Csernov-korlÂ´t (amely a Hoeï¬€ding korlÂ´t egy speciÂ´lis esete) a kÂ¨vetkezËket e a a a o o adja : 2 P Y â‰¥ m Â· (E[X] + ) â‰¤ eâˆ’2 m

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK Â´s e P Y â‰¤ m Â· (E[X] âˆ’ ) â‰¤ eâˆ’2 amibËl megkapjuk, hogy : o P(hiba(m)) â‰¤ 2 Â· eâˆ’2 1 2 ln . 2 2 Î´
2m

39

2m

.

Amennyiben a hibakorlÂ´tot Î´-val jelÂ¨lÂ¨m, akkor az alÂ´bbinak kell igaznak lennie, hogy a oo a mâ‰¥

Ha pÂ´ldÂ´ul azt szeretnÂ´nk, hogy a mintavÂ´telezÂ´s sorÂ´n tetszËleges elem minta, â€“ illetve e a e e e a o elËfordulÂ´sÂ´nak valÂ´szÂ´ usÂ´ge â€“ 0.01-nÂ´l nagyobb eltÂ´rÂ´s valÂ´szÂ´ usÂ´ge kisebb legyen 1%o aa o Ä±nË e a ee o Ä±nË e nÂ´l, akkor a minta mÂ´rete legalÂ´bb 27000 kell legyen. A 3.1 tÂ´blÂ´zatban adott eltÂ´rÂ´s- Â´s a e a a a ee e valÂ´szÂ´ usÂ´gkorlÂ´tokhoz tartozÂ´ minimÂ´lis mintamÂ´ret talÂ´lhatÂ´. o Ä±nË e a o a e a o Î´ 0.05 0.01 0.01 0.01 0.001 0.001 0.001 |M|

0.01 1060 0.01 27000 0.001 38000 0.0001 50000 0.01 2700000 0.001 3800000 0.0001 5000000

3.1. tÂ´blÂ´zat. A minimÂ´lis minta mÂ´rete rÂ¨gzÂ´ a a a e o Ä±tett , Î´ mellett Â´ GyanÂ´ s, hogy a vÂ´gsË kÂ´pletben nem szerepel p. ErezzÂ¨ k, hogy a p ï¬gyelmen kÂ´ ul hagyÂ´sa u e o e u Ä±vÂ¨ a nem baj, ha nagy vÂ´rhatÂ´ Â´rtÂ´kekkel dolgozunk, de mi van kis valÂ´szÂ´ usÂ´gek esetÂ´n ? PÂ´ldÂ´ul = a oe e o Ä±nË e e e a =0.05 Â´s Î´=0.01 esetÂ´n 1060 mÂ´retË mintÂ´t kell vennÂ¨ nk. Ha p egy ezred, akkor azt vÂ´rjuk, hogy e e e u a u a csak egyszer fordul elË a mintÂ´ban x. MÂ´r ebben az esetben is a relatÂ´ gyakorisÂ´g (1/1060 = o a a Ä±v a = 0.000943) tÂ¨bb, mint ot szÂ´zalÂ´kkal tÂ´r el a tÂ´nyleges valÂ´szÂ´ usÂ´gtËl, azaz minden esetben o Â¨ a e e e o Ä±nË e o hibÂ´zni fogunk. Vagy mÂ´skÂ´pp mondva, a hiba valÂ´szÂ´ usÂ´ge 1, (nem pedig 0.01). a a e o Ä±nË e Minek vacakolunk mi mindenfÂ´le Csernov-korlÂ´ttal amikor ismerjÂ¨ k Y sË rË sÂ´gfÂ¨ ggvÂ´nyÂ´t, e a u uue u e e Â´ tetszËleges intervallumra meg tudjuk mondani az elËfordulÂ´s valÂ´szÂ´ usÂ´gÂ´t : Ä±gy o o a o Ä±nË e e
min{ mp+m ,m}

P Y âˆ’mÂ·p â‰¥ mÂ·

= 1âˆ’

i=max{ mpâˆ’m ,0}

m i p (1 âˆ’ p)mâˆ’i i

= 1 + F (max{ mp âˆ’ m , 0}, m, p) âˆ’ F (min{ mp + m , m} âˆ’ 1, m, p), ahol F (x, m, p)-vel az (m, p) paramÂ´terË binomiÂ´lis eloszlÂ´s eloszlÂ´sfÂ¨ ggvÂ´nyÂ´t jelÂ¨ljÂ¨ k. Sajnos e u a a a u e e o u a fenti kÂ´plet alapjÂ´n nem tudunk szÂ´p zÂ´rt kÂ´pletet adni a minta mÂ´retÂ´nek alsÂ´ korlÂ´tja Â´s e a e a e e e o a e az , Î´ pÂ´ros kÂ¨zÂ¨tti kapcsolatra. a o o

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK
0.25 Binom(100, 0.3) Binom(100, 0.03)

40

0.2

0.15

0.1

0.05

0

0

20

40

60

80

100

3.1. abra. KÂ¨ lÂ¨nbÂ¨zË p paramÂ´terË binomiÂ´lis eloszlÂ´sok Â´ uo o o e u a a

Mit gondolunk ? RÂ¨gzÂ´ o Ä±tett m Â´s esetÂ´n kis vagy nagy p esetÂ´n lesz kicsi a hiba (mivel a e e e binomiÂ´lis eloszlÂ´s szimmetrikus, ezÂ´rt szorÂ´ a a e Ä±tkozzunk p â‰¤ 0.5 esetekre) ? A bevezetË pÂ´lda azt o e sugallja, hogy minÂ´l kisebb a p, annÂ´l nagyobb mintÂ´t kell venni. Ez sajnos nem Â´ van. e a a Ä±gy Amennyiben pâ‰¤ , akkor a mpâˆ’m â‰¤0 Â´s Â´ a hiba 1âˆ’F ( mp+m , m, p)-re egyszerÂ¨ sÂ¨dik. e Ä±gy uo Ez viszont nullÂ´hoz tart, amennyiben p â†’ 0, hiszen a mp . 1 âˆ’ F ( mp + m , m, p) â‰¤ 1 âˆ’ F ( m , m, p) = P(X â‰¥ m ) â‰¤ m Az utolsÂ´ elgyenlËtlensÂ´gnÂ´l a Markov egyenlËtlensÂ´get hasznÂ´ltuk fel. Az eredmÂ´ny ellentmond o o e e o e a e elvÂ´rÂ´sainknak, hiszen eszerint kis valÂ´szÂ´ usÂ´geket kisebb mintÂ´val tudunk jÂ´l kÂ¨zelÂ´ aa o Ä±nË e a o o Ä±teni. Na, Â´s mi van pâ‰¥ esetÂ´n ? TovÂ´bbra is igaz, hogy a p nÂ¨velÂ´sÂ´vel nÂ¨vekszik a hiba ? A vÂ´lasz e e a o ee o a igenlË. Ezt az allÂ´ ast csak szemlÂ´ltetni fogjuk. VessÂ¨ nk egy pillantÂ´st a 3.1 abrÂ´ra, amelyen o Â´ Ä±tÂ´ e u a Â´ a kÂ´t, kÂ¨ lÂ¨nbÂ¨zË p paramÂ´terË binomiÂ´lis eloszlÂ´st lÂ´thatunk. e uo o o e u a a a KÂ´t dolgot vehetÂ¨ nk Â´szre. A kisebb p-hez tartozÂ´ maximÂ´lis valÂ´szÂ´ usÂ´g nagyobb. A nagy e u e o a o Ä±nË e valÂ´szÂ´ usÂ´gek a vÂ´rhatÂ´ Â´rtÂ´k kisebb kÂ¨rnyezetÂ´ben talÂ´lhatÂ´k. Az Â´szrevÂ´teleink altalÂ´nosan o Ä±nË e a oe e o e a o e e Â´ a is igazak. A mÂ´sodik Â´szrevÂ´tel pÂ´ldÂ´ul a szÂ´rÂ´ssal van kapcsolatban. A kisebb p paramÂ´terË a e e e a oa e u eloszlÂ´s szÂ´rÂ´sa kisebb. Legyen a kÂ´t paramÂ´ter p Â´s q Â´s legyen p < q < 0.5. Ekkor a oa e e e e mp(1 âˆ’ p) = Ïƒp <Ïƒq = mq(1 âˆ’ q) p âˆ’ p2 <q âˆ’ q 2 0 <(q âˆ’ p)(1 âˆ’ p âˆ’ q) A kisebb valÂ´szÂ´ usÂ´geknÂ´l a vÂ´rhatÂ´ Â´rtÂ´k szË kebb kÂ¨rnyezetÂ´ben vannak a nagy o Ä±nË e e a o e e u o e valÂ´szÂ´ usÂ´gek, ezÂ´rt a vÂ´rhatÂ´ Â´rtÂ´k Â± m kÂ¨rnyezetÂ´n kÂ´ uli pontok valÂ´szÂ´ usÂ´ginek osszege o Ä±nË e e a oe e o e Ä±vÂ¨ o Ä±nË e Â¨ kisebb, azaz a hiba kisebb ! A kÂ¨vetkezË abrÂ´kon az Â´rvelÂ´st tÂ´masztjuk alÂ´. A 3.2 abrÂ´n a hibÂ´t abrÂ´zoljuk a minta o o Â´ a e e a a Â´ a a Â´ a mÂ´rete Â´s a valÂ´szÂ´ usÂ´g fÂ¨ ggvÂ´nyÂ´ben rÂ¨gzÂ´ e e o Ä±nË e u e e o Ä±tett mellett. LÂ´tjuk, hogy ha nÂ¨vekszik p (vagy a o csÂ¨kken m), akkor csÂ¨kken a hiba valÂ´szÂ´ usÂ´ge. o o o Ä±nË e A 3.3 abrÂ´n megint a mintavÂ´telezÂ´s hibÂ´jÂ´t abrÂ´zoltuk, de most az mellett a minta mÂ´rete Â´ a e e aa Â´ a e is rÂ¨gzÂ´ o Ä±tve van. Itt mÂ´g jobban lÂ´tszik, hogy ahogy csÂ¨kken p ugy nË a hiba is. e a o Â´ o Ha ezeknÂ´l a paramÂ´tereknÂ´l a Csernov-korlÂ´tot alkalmazzuk, akkor azt kapjuk, hogy a hiba e e e a valÂ´szÂ´ usÂ´ge kisebb 1.2-nÂ´l. Ez elÂ´g semmitmondÂ´. o Ä±nË e e e o IdÂ´zzÂ¨ k fel a kiindulÂ´ kÂ´rdÂ´st : Mit gondolunk ? RÂ¨gzÂ´ e u o e e o Ä±tett m Â´s esetÂ´n kis vagy nagy p e e esetÂ´n lesz kicsi a hiba ? HÂ´t, nem mondhatjuk, hogy a vÂ´rt vÂ´lasz kaptuk. Az ember valamiÂ´rt e a a a e

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

41

P(|Y/m - p| > 0.035 ) error 1 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0

1 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0

0.5 0.45

0.4 0.35

0.3 0.25 p

0.2 0.15

0.1 0.05

0 500 450

300 400 350

250 200

150 100 m

50

0

3.2. abra. A mintavÂ´telezÂ´s hibÂ´ja a minta mÂ´retÂ´nek Â´s az elËfordulÂ´s valÂ´szÂ´ usÂ´gÂ´nek Â´ e e a e e e o a o Ä±nË e e fÂ¨ ggvÂ´nyÂ´ben u e e

1.4

P(|Y/200 - p| > 0.035 ) 2 * exp(-2 * 0.0352 * 200)

1.2

1

0.8

error
0.6 0.4 0.2 0

0

0.05

0.1

0.15

0.2

0.25 p

0.3

0.35

0.4

0.45

0.5

3.3. abra. A mintavÂ´telezÂ´s hibÂ´ja az elËfordulÂ´s valÂ´szÂ´ usÂ´gË nek fÂ¨ ggvÂ´nyÂ´ben Â´ e e a o a o Ä±nË e u u e e

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK
1 error = 1 - P(1/(1+0.035) < (Y/1500)/p < 1+0.035 )

42

0.9

0.8

error

0.7

0.6

0.5

0.4

0

0.05

0.1 p

0.15

0.2

0.25

3.4. abra. A mintavÂ´telezÂ´s hibÂ´ja az elËfordulÂ´s valÂ´szÂ´ usÂ´gÂ´nek fÂ¨ ggvÂ´nyÂ´ben relatÂ´ Â´ e e a o a o Ä±nË e e u e e Ä±v hibamÂ´rÂ´s esetÂ´ben ee e

osztÂ¨nÂ¨sen ragaszkodik ahhoz a vÂ´laszhoz, hogy kisebb valÂ´szÂ´ usÂ´g mellett nagyobb lesz a Â¨ o o a o Ä±nË e hiba. ElemezÂ´seink azonban pont az ellenkezËjÂ´t adta. Meg kell bÂ´kÂ´lnÂ¨ nk ezzel, vagy tehetÂ¨ nk e oe e e u u valamit a zavarÂ´ vÂ´lasz ellen ? o a TÂ´rjÂ¨ nk vissza a hiba deï¬nÂ´ ojÂ´hoz : hiba(m) = P rel. gyakorisÂ´g(x) âˆ’ p â‰¥ , azaz hibÂ´t e u Ä±ciÂ´ a a a kÂ¨vetÂ¨ nk el, ha a relatÂ´ gyakorisÂ´g Â´s a tÂ´nyleges valÂ´szÂ´ usÂ´g kÂ¨zÂ¨tti kÂ¨ lÂ¨nbsÂ´g nagyobb egy o u Ä±v a e e o Ä±nË e o o uo e adott konstansnÂ´l, amelyet -nal jelÂ¨ltÂ¨ nk. A relatÂ´ gyakorisÂ´gnak a valÂ´szÂ´ usÂ´g egy rÂ¨gzÂ´ a o u Ä±v a o Ä±nË e o Ä±tett kÂ¨rnyezetÂ´ben kell lennie. o e SzerencsÂ´s az, hogy a hibÂ´t a relatÂ´ gyakorisÂ´g Â´s a valÂ´szÂ´ usÂ´g kÂ¨ lÂ¨nbsÂ´gÂ´vel mÂ´rjÂ¨ k ? Ez e a Ä±v a e o Ä±nË e u o e e e u alapjÂ´n pÂ´ldÂ´ul ugyanakkora hibÂ´t kÂ¨vetÂ¨ nk el, ha p = 0.8 esetÂ´n a relatÂ´ gyakorisÂ´g 0.81 Â´s a e a a o u e Ä±v a e ha p = 0.01 esetÂ´n a relatÂ´ gyakorisÂ´g nulla, azaz az esemÂ´ny nem kÂ¨vetkezett be egyszer sem. e Ä±v a e o Az embernek az az Â´rzÂ´se van, hogy az elsË esetben kisebbet hibÂ´ztunk. e e o a A fenti Â´rvelÂ´s alapjÂ´n cÂ´lszerË bb a hibÂ´t a valÂ´szÂ´ usÂ´g Â´s a relatÂ´ gyakorisÂ´g hÂ´nyadosÂ´val e e a e u a o Ä±nË e e Ä±v a a a mÂ´rni. Jobban Â´rdekel minket az, hogy hÂ´ny szÂ´zalÂ´kkal nagyobb vagy kisebb a relatÂ´ gyakoe e a a e Ä±v risÂ´g a valÂ´szÂ´ usÂ´gnÂ´l, mint az abszolÂ´ t kÂ¨ lÂ¨nbsÂ´g. Ha elfogadjuk ezt az Â´rvelÂ´st, akkor a hibÂ´t a o Ä±nË e e u uo e e e a a kÂ¨vetkezËkÂ´ppen deï¬niÂ´ljuk : o o e a hiba(m) = P rel. gyakorisÂ´g(x)/p â‰¥ 1 + a = 1âˆ’P + P rel. gyakorisÂ´g(x)/p â‰¤ a 1 1+

1 < rel. gyakorisÂ´g(x)/p < 1 + a 1+

EnnÂ´l a deï¬nÂ´ onÂ´l mÂ´r igaz lesz â€“ nagyvonalakban â€“ hogy minÂ´l kisebb az elËfordulÂ´s e Ä±ciÂ´ a a e o a valÂ´szÂ´ usÂ´ge, annÂ´l nagyobb lesz a hiba, tehÂ´t annÂ´l nagyobb mintÂ´t kell vennÂ¨ nk. Ezt o Ä±nË e a a a a u tÂ´masztja alÂ´ a 3.4 abra is. a a Â´ Az abra mutatja, hogy tÂ´nyleg csak nagyvonalakban igaz, hogy kisebb p-knÂ´l nagyobb a Â´ e e hiba. SzigorÂ´ an vÂ´ve ugyanis ez nem igaz. Ennek oka, hogy a binomiÂ´lis eloszlÂ´s diszkrÂ´t eloszlÂ´s u e a a e a Â´s ezÂ´rt ahogy csÂ¨kkentjÂ¨ k a p-t Â´s ugy tolÂ´dik nem hibÂ´t jelentË intervallum a nulla pont felÂ´ e e o u e Â´ o a o e Â´s fordulhat elË az, hogy egy ujabb pont bekerÂ¨ l az intervallumba. PÂ´ldÂ´ul = 0.035 Â´s m = e o Â´ u e a e = 1500 esetÂ´ben a [pm/(1+ ), pm(1+ )] intervallumba nem esik egÂ´sz Â´rtÂ´k p = 0.007 esetÂ´ben e e e e e (hiszen a nem hibÂ´t jelentË intervallum [10.1,10.9]), mÂ´ p = 0.006 esetÂ´n igen (ekkor a vizsgÂ´lt a o Ä±g e a intervallum [8.7,9.3]).

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

43

Az adatbÂ´nyÂ´sz cikkekben mintavÂ´telezÂ´s esetÂ´n a Csernov-korlÂ´tos megkÂ¨zelÂ´ essel a a e e e a o Ä±tÂ´ tÂ´masztjÂ´k alÂ´, hogy az altaluk hasznÂ´lt minta miÂ´rt elÂ´g nagy. Most mÂ´r tudjuk, hogy ez a a a Â´ a e e a az elemzÂ´s meglehetËsen elnagyolt. EgyrÂ´szt a hiba deï¬nÂ´ oja sem tÂ´ l jÂ´, mÂ´srÂ´st a Csernove o e Ä±ciÂ´ u o a e korlÂ´t alkalmazÂ´sa sem ad pontos eredmÂ´nyt. a a e Jobb megoldÂ´s a hibÂ´t a valÂ´szÂ´ usÂ´g Â´s a relatÂ´ gyakorisÂ´g hÂ´nyadosÂ´bÂ´l szÂ´rmaztatni a a o Ä±nË e e Ä±v a a a o a Â´s Csernov-korlÂ´t helyett a binomiÂ´lis eloszlÂ´st hasznÂ´lni. Mivel a vÂ´geredmÂ´ny nem egy zÂ´rt e a a a a e e a kÂ´plet lesz, ezÂ´rt a hiba vagy a szÂ¨ ksÂ´ges mintamÂ´ret kiszÂ´mÂ´ asa bonyolultabb. e e u e e a Ä±tÂ´ A binomiÂ´lis eloszlÂ´s sem a legpontosabb eredmÂ´nyt adja. Az elemzÂ´s sorÂ´n ugyanis a a e e a feltÂ´teleztÂ¨ k, hogy az esemÂ´ny bekÂ¨vetkezÂ´sÂ´nek valÂ´szÂ´ usÂ´ge ismert. A valÂ´sÂ´gban a mintÂ´t e u e o ee o Ä±nË e oa a egy nagy alaphalmazbÂ´l vesszÂ¨ k. PÂ´ldÂ´ul a nÂ´pszavazÂ´st megelËzË kÂ¨zvÂ´lemÂ´ny-kutatÂ´sokban o u e a e a o o o e e a a mintÂ´t a felnËtt lakossÂ´gbÂ´l vesszÂ¨ k, amely egy vÂ´ges halmaz. Ha ugy tesszÂ¨ k fel a kÂ´rdÂ´st, a o a o u e Â´ u e e hogy egy M alaphalmazbÂ´l mekkora m mintÂ´t kell vennÂ¨ nk, hogy a mintÂ´ban az x relatÂ´ gyao a u a Ä±v korisÂ´ga kis mÂ´rtÂ´kben tÂ´rjen el az x M -beli relatÂ´ gyakorisÂ´gÂ´tÂ´l, akkor a binomiÂ´lis eloszlÂ´s a e e e Ä±v a ao a a helyett hipergeometrikus eloszlÂ´st kell hasznÂ´lnunk. a a

3.2. HasonlÂ´sÂ´gi mÂ´rtÂ´kek o a e e
Az adatbÂ´nyÂ´szatban gyakran szÂ¨ ksÂ´gÂ¨ nk lesz arra, hogy attribÂ´ tumokkal leÂ´ elemek a a u e u u Ä±rt kÂ¨zÂ¨tt hasonlÂ´sÂ´got deï¬niÂ´ljunk. TermÂ´szetesen elvÂ´rjuk, hogy ha minÂ´l inkÂ´bb tÂ¨bb azonos o o oa a e a e a o Â´rtÂ´k szerepel az attribÂ´ tumaik kÂ¨zÂ¨tt annÂ´l hasonlÂ´bbak legyenek az elemek. A gyakorlate e u o o a o ban hasonlÂ´sÂ´gi mÂ´rtÂ´k helyett kÂ¨lÂ¨nbÂ¨zËsÂ´gi mÂ´rtÂ´kkel dolgozunk, amely a hasonlÂ´sÂ´g inveroa e e uo o o e e e oa ze (minÂ´l hasonlÂ´bbak, annÂ´l kevÂ´sbÂ´ kÂ¨ lÂ¨nbÂ¨zËk). ElvÂ´rjuk, hogy kÂ´t elem kÂ¨ lÂ¨nbÂ¨zËsÂ´gÂ´t e o a e e uo o o a e uo o o e e (d(x, y)) ki lehessen fejezni egy pozitÂ´ valÂ´s szÂ´mmal, tovÂ´bbÂ´ egy elem onmagÂ´tÂ´l ne Ä±v o a a a Â¨ ao kÂ¨ lÂ¨nbÂ¨zzÂ¨n, szimmetrikus legyen (d(x, y) = d(y, x)), Â´s teljesÂ¨ ljÂ¨n a hÂ´romszÂ¨g egyenlËtlensÂ´g uo o o e u o a o o e (d(x, y)â‰¤d(x, z)+d(y, z)). TehÂ´t a kÂ¨ lÂ¨nbÂ¨zËsÂ´g metrika legyen. KÂ´t elem kÂ¨ lÂ¨nbÂ¨zËsÂ´ge helyett a uo o o e e uo o o e gyakran mondunk majd kÂ´t elem tÂ´volsÂ´gÂ´t. e a a a A kÂ¨vetkezËkben sorra vesszÂ¨ k, hogyan deï¬niÂ´ljuk a tÂ´volsÂ´got kÂ¨ lÂ¨nbÂ¨zË tÂ´ u atto o u a a a u o o o Ä±pusÂ´ ribÂ´ tumok esetÂ´ben, Â´s azt, hogy mikÂ´nt lehet egyes attribÂ´ tumok fontossÂ´gÂ´t (sÂ´ lyÂ´t) u e e e u a a u a Â´ megnÂ¨velni. AltalÂ´nosan igaz az, hogy ha az attribÂ´ tum elemein teljes rendezÂ´st tudunk deo a u e ï¬niÂ´lni (sorrend, intervallum, arÂ´ny-skÂ´lÂ´zott), akkor tetszËleges a 1 â‰¤ a2 â‰¤ a3 Â´rtÂ´kek esetÂ´n a a aa o e e e d(a1 , a3 ) â‰¥ max{d(a1 , a2 ), d(a2 , a3 )}.

3.2.1. BinÂ´ris attribÂ´ tum a u
Egy binÂ´ris attribÂ´ tum olyan kategÂ´ria tÂ´ u attribÂ´ tum, amely kÂ´t Â´rtÂ´ket vehet fel (pl. : a u o Ä±pusÂ´ u e e e 0 Â´s 1). Hogyan hatÂ´rozzuk meg x Â´s y elemek hasonlÂ´sÂ´gÂ´t, ha azok m darab binÂ´ris atte a e oa a a ribÂ´ tummal vannak leÂ´ ? KÂ´szÂ´ uk el a kÂ¨vetkezË osszefoglalÂ´ tÂ´blÂ´zatot. u Ä±rva e Ä±tsÂ¨ o oÂ¨ o a a 1 0 1 q s q+s 0 r t r+t q+r s+t m

PÂ´ldÂ´ul az 1-es sor 0-s oszlopÂ´hoz tartozÂ´ Â´rtÂ´k azt jelenti, hogy r darab olyan attribÂ´ tum van, e a a oe e u amelyek az x elemnÂ´l 1-et, y-nÂ´l 0-Â´t vesznek fel. e a a

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

44

Ez alapjÂ´n deï¬niÂ´lhatjuk az un. invariÂ´ns Â´s variÂ´ns hasonlÂ´sÂ´got. Az invariÂ´ns hasonlÂ´sÂ´got a a Â´ a e a oa a oa olyan esemÂ´nyeknÂ´l hasznÂ´ljuk, amikor a binÂ´ris attribÂ´ tum kÂ´t Â´rtÂ´ke ugyanolyan fontos (szime e a a u e e e metrikus attribÂ´ tum), tehÂ´t mindegy, hogy melyiket kÂ´doljuk 0-val, illetve 1-essel. Ilyen attu a o ribÂ´ tum pÂ´ldÂ´ul egy ember neme. AzÂ´rt kapta ez a hasonlÂ´sÂ´g az invariÂ´ns jelzËt, mert nem u e a e oa a o vÂ´ltozik az Â´rtÂ´ke, ha valaki mÂ´shogy kÂ´dolja az attribÂ´ tumokat (tehÂ´t kÂ´dolÂ´s invariÂ´ns). A a e e a o u a o a a legegyszerË bb invariÂ´ns hasonlÂ´sÂ´g az eltÂ´rË attribÂ´ tumok relatÂ´ szÂ´ma : u a oa eo u Ä±v a d(x, y) = r+s . m

Aszimmetrikus attribÂ´ tum esetÂ´ben a kÂ´t lehetsÂ´ges Â´rtÂ´k nem egyenrangÂ´ . Ilyen attribÂ´ tum u e e e e e u u lehet pÂ´ldÂ´ul egy orvosi vizsgÂ´lat eredmÂ´nye. Nagyobb sÂ´ lya van annak a tÂ´nynek, hogy valaki e a a e u e fertËzÂ¨tt beteg, mint annak, hogy nem az. A konvenciÂ´knak megfelelËen 1-essel kÂ´doljuk a o o o o o lÂ´nyeges (Â´ltalÂ´ban ritka) kimenetet. A legegyszerË bb variÂ´ns hasonlÂ´sÂ´gi mÂ´rtÂ´k a Jaccarde a a u a oa e e koeï¬ƒciens komplementere : q r+s d(x, y) = 1 âˆ’ = , mâˆ’t mâˆ’t ahol nem tulajdonÂ´ Ä±tunk jelentËsÂ´get a nem jelentËs kimenetek egyezÂ´sÂ´nek. oe o ee Amennyiben szimmetrikus Â´s aszimmetrikus Â´rtÂ´kek is szerepelnek a binÂ´ris attribÂ´ tumok e e e a u kÂ¨zÂ¨tt, akkor azokat vegyes attribÂ´ tumkÂ´nt kell kezelni (lÂ´sd a 3.2.5-os rÂ´szt). o o u e a e

3.2.2. KategÂ´ria tÂ´ o Ä±pusÂ´ attribÂ´ tum u u
Â´ AltalÂ´nos esetben a kategÂ´ria tÂ´ u attribÂ´ tum nem csak kettË, hanem vÂ´ges sok kÂ¨ lÂ¨nbÂ¨zË a o Ä±pusÂ´ u o e uo o o Â´rtÂ´ket vehet fel. Ilyen attribÂ´ tum pÂ´ldÂ´ul az ember szeme szÂ´ csalÂ´di allapota, vallÂ´sa stb. e e u e a Ä±ne, a Â´ a A legegyszerË bb hasonlÂ´sÂ´g a nemegyezÂ´sek relatÂ´ szÂ´ma : u oa e Ä±v a d(x, y) = u , m

ahol m a kategÂ´ria tÂ´ u attribÂ´ tumok szÂ´ma, u pedig azt adja meg, hogy ezek kÂ¨zÂ¨ l mennyi o Ä±pusÂ´ u a o u nem egyezett. TermÂ´szetesen a kategÂ´ria tÂ´ u attribÂ´ tumok sem feltÂ´tlenÂ¨ l szimmetrikusak, e o Ä±pusÂ´ u e u mert lehet, hogy az alapÂ´rtelmezett Â´rtÂ´kek egyezÂ´se nem igazÂ´n fontos. A Jaccard-koeï¬ƒciens e e e e a komplementerÂ´t kategÂ´ria tÂ´ u attribÂ´ tumokra is felÂ´ e o Ä±pusÂ´ u Ä±rhatjuk.

3.2.3. Sorrend tÂ´ Ä±pusÂ´ attribÂ´ tum u u
Sorrend tÂ´ u attribÂ´ tum pÂ´ldÂ´ul az iskolai vÂ´gzettsÂ´g : 8 altalÂ´nos, befejezett kÂ¨zÂ´piskola, Ä±pusÂ´ u e a e e Â´ a o e Â´rettsÂ´gi, fËiskolai diploma, egyetemi diploma, doktori cÂ´ Vannak arÂ´ny skÂ´lÂ´jÂ´ attribÂ´ tumok, e e o Ä±m. a aau u amelyeket inkÂ´bb sorrend tÂ´ u attribÂ´ tumnak kezelÂ¨ nk. PÂ´ldÂ´ul a Forma 1-es versenyeken a Ä±pusÂ´ u u e a sem az egyes kÂ¨rÂ¨k futÂ´si ideje szÂ´mÂ´ hanem az, hogy ki lett az elsË, mÂ´sodik ... oo a a Ä±t, o a A sorrend tÂ´ u attribÂ´ tumokat altalÂ´ban egÂ´sz szÂ´mokkal helyettesÂ´ â€“ tipikusan 1 Â´s M Ä±pusÂ´ u Â´ a e a Ä±tik e kÂ¨zÂ¨tti egÂ´sz szÂ´mokkal. Ha tÂ¨bb sorrend tÂ´ u attribÂ´ tumunk van, amelyek a fontos allapotok o o e a o Ä±pusÂ´ u Â´ xâˆ’1 szÂ´mÂ´ban eltÂ´rnek, akkor cÂ´lszerË mindegyiket a [0,1] intervallumba kÂ´pezni a M âˆ’1 mË velettel. a a e e u e u Â´ mindegyik egyenlË sÂ´ llyal szerepel majd a vÂ´gsË hasonlÂ´sÂ´gi mÂ´rtÂ´kben. EzutÂ´n alkalmazIgy o u e o oa e e a hatjuk valamelyik intervallum tÂ´ u hasonlÂ´sÂ´got. Ä±pusÂ´ oa

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

45

3.2.4. Intervallum tÂ´ Ä±pusÂ´ attribÂ´ tum u u
Az intervallum tÂ´ u attribÂ´ tumokat altalÂ´ban valÂ´s szÂ´mok Â´ ak le. Ilyen attribÂ´ tumra Ä±pusÂ´ u Â´ a o a Ä±rjÂ´ u pÂ´lda egy ember sÂ´ lya, magassÂ´ga, egy orszÂ´g Â´ves atlaghËmÂ´rsÂ´klete stb. TekinthetÂ¨ nk ugy egy e u a a e Â´ o e e u Â´ elemre, mint egy pontra az m-dimenziÂ´s vektortÂ´rben. Az elemek kÂ¨zÂ¨tti kÂ¨ lÂ¨nbÂ¨zËsÂ´get a veko e o o uo o o e toraik kÂ¨ lÂ¨nbsÂ´gÂ´nek normÂ´jÂ´val (hosszÂ´val) deï¬niÂ´ljuk (d(x, y) = ||xâˆ’y||). LegtermÂ´szetesebb uo e e aa a a e talÂ´n az Euklideszi-norma, de alkalmazhatjuk a Manhattan-normÂ´t is. MindkÂ´t mÂ´rtÂ´k a a a e e e Minkowski-norma speciÂ´lis esete. a Euklideszi-norma : L2 (z) = |z1 |2 + |z2 |2 + Â· Â· Â·+ |zm |2

Manhattan-norma : L1 (z) = |z1 | + |z2 | + Â· Â· Â·+ |zm | Minkowski-norma : Lp (z) = (|z1 |p + |z2 |p + Â· Â· Â· + |zm |p )1/p A p = âˆ esetÂ´n kÂ´t vektor tÂ´volsÂ´ga megegyezik a koordinÂ´tÂ´inak a legnagyobb eltÂ´rÂ´sÂ´vel e e a a aa eee (Lâˆ (z) = max{|zi |}). i HabÂ´r az elemek leÂ´ asÂ´ban mÂ´r csak szÂ´mok szerea Ä±rÂ´ a a a pelnek, a hÂ´ttÂ´rben megbÂ´ jÂ´ mÂ´rtÂ´kegysÂ´geknek nagy szea e uo e e e Az ideÂ´lis korkÂ¨lÂ¨nbsÂ´g fÂ´rj Â´s a uo e e e â€ repÂ¨ k van. Gondoljuk meg, ha mÂ´ter helyett millimÂ´terben felesÂ´g kÂ¨zÂ¨tt hat Â´v. Egy svÂ´d u e e e o o e e szÂ´molunk, akkor sokkal nagyobb Â´rtÂ´kek fognak szerepelni kutatÂ´s szerint ilyen esetben van a e e a az elemek leÂ´ asÂ´ban, Â´s Â´ a kÂ¨ lÂ¨nbsÂ´gek is megnËnek. A maximÂ´lis lehetËsÂ´g az utÂ´dok Ä±rÂ´ a e Ä±gy uo e o a o e o nagy Â´rtÂ´kkÂ´szletË attribÂ´ tumoknak nagyobb hatÂ´suk van szÂ¨letÂ´sÂ´re.â€ e e e u u a u e e ForrÂ´s : a http: a hasonlÂ´sÂ´g Â´rtÂ´kÂ´re, mint a kis Â´rtÂ´kkÂ´szletË eknek. Jo- //hvg.hu/egeszseg/20070913_ oa e e e e e e u gos tehÂ´t az egyes attribÂ´ tumok normalizÂ´lÂ´sa, azaz transz- idealis_korkulonbseg.aspx a u aa formÂ´ljuk oket pl. a [0,1] intervallumba, majd ezen transza Ë formÂ´lt attribÂ´ tumok alapjÂ´n szÂ´mÂ´ a u a a Ä±tsuk a tÂ´volsÂ´gokat a a (3.1.2 rÂ´sz). e Gyakran elËfordul, hogy a kÂ¨ lÂ¨nbÂ¨zËsÂ´g megÂ´llapÂ´ asÂ´nÂ´l bizonyos attribÂ´ tumokra nagyobb o uo o o e a Ä±tÂ´ a a u sÂ´ lyt szeretnÂ´nk helyezni. PÂ´ldÂ´ul kÂ´t ember osszehasonlÂ´ asÂ´nÂ´l a hajszÂ´ u e e a e Â¨ Ä±tÂ´ a a Ä±nnek nagyobb szerepe van, mint annak, hogy melyik lÂ´bujja a legnagyobb. Ha ï¬gyelembe vesszÂ¨ k az attribÂ´ tumok a u u sÂ´ lyait, akkor pÂ´ldÂ´ul az Euklideszi-tÂ´volsÂ´g Â´ mÂ´dosul : u e a a a Ä±gy o d(x, y) = w1 |x1 âˆ’ y1 |2 + w2 |x2 âˆ’ y2 |2 + Â· Â· Â·+ wm |xm âˆ’ ym |2 ,

ahol wi -vel jelÂ¨ltÂ¨ k i-edik attribÂ´ tum sÂ´ lyÂ´t Â´s legyen m wi = 1. o u u u a e i=1 ElËfordulhat, hogy olyan attribÂ´ tummal van dolgunk, amely Â´rtÂ´keit nemlineÂ´ris lÂ´ptÂ´kben o u e e a e e abrÂ´zoljuk (nemlineÂ´ris nÂ¨vekedÂ´sË attribÂ´ tumnak szokÂ´s hÂ´ Â´ a a o eu u a Ä±vni ezeket). PÂ´ldÂ´ul a baktÂ´rium e a e populÂ´ciÂ´k nÂ¨vekedÂ´sÂ´t vagy algoritmusok futÂ´si idejÂ´t exponenciÂ´lis skÂ´lÂ´n Â´rdemes abrÂ´zolni. a o o ee a e a aa e Â´ a Az ilyen attribÂ´ tumoknÂ´l nem cÂ´lszerË kÂ¨zvetlenÂ¨ l intervallum alapÂ´ hasonlÂ´sÂ´got alkalmazni, u a e u o u u oa mert ez oriÂ´si kÂ¨ lÂ¨nbÂ¨zËsÂ´geket eredmÂ´nyez azokon a helyeken, ahol kis kÂ¨ lÂ¨nbÂ¨zËsÂ´get vÂ´runk. Â´ a uo o o e e uo o o e a KÂ´t megkÂ¨zelÂ´ es kÂ¨zÂ¨tt szokÂ´s vÂ´lasztani. EgyrÂ´szt hasznÂ´lhatjuk az intervallum alapÂ´ e o Ä±tÂ´ o o a a e a u hasonlÂ´sÂ´got, de nem az attribÂ´ tum eredeti Â´rtÂ´kÂ´n, hanem annak logaritmusÂ´n. MÂ´srÂ´szt oa u e e e a a e diszkretizÂ´lhatjuk az Â´rtÂ´keket, Â´s vehetjÂ¨ k csak a sorrendet a hasonlÂ´sÂ´g alapjÂ´ul. a e e e u oa a

3.2.5. Vegyes attribÂ´ tumok u
Az elËzË rÂ´szekben azt tekintettÂ¨ k at, hogyan deï¬niÂ´ljuk a hasonlÂ´sÂ´got kÂ´t elem kÂ¨zÂ¨tt o o e u Â´ a oa e o o adott tÂ´ u attribÂ´ tumok esetÂ´n. Mit tegyÂ¨ nk akkor, ha egy objektum leÂ´ asÂ´nÂ´l vegyeÄ±pusÂ´ u e u Ä±rÂ´ a a

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

46

sen adottak a kÂ¨ lÂ¨nbÂ¨zË tÂ´ u â€“ intervallum, binÂ´ris, kategÂ´ria stb. â€“ attribÂ´ tumok ? Csou o o o Ä±pusÂ´ a o u portosÂ´ Ä±tsuk az egyes attribÂ´ tumokat tÂ´ u Ä±pusuk szerint, Â´s hatÂ´rozzuk meg a kÂ´t elem hae a e sonlÂ´sÂ´gÂ´t minden csoportra nÂ´zve. A kapott hasonlÂ´sÂ´gokat kÂ´pezzÂ¨ k a [0,1] intervallumba. oa a e oa e u Minden attribÂ´ tumnak feleltessÂ¨ nk meg egy dimenziÂ´t a tÂ´rben, Â´ kÂ´t elem hasonlÂ´sÂ´gÂ´hoz u u o e Ä±gy e oa a hozzÂ´rendelhetÂ¨ nk egy vektort a vektortÂ´rben. A hasonlÂ´sÂ´g Â´rtÂ´kÂ´t feleltessÂ¨ k meg a vektor a u e oa e e e u hosszÂ´nak. a Ennek a megkÂ¨zelÂ´ esnek a hÂ´trÂ´nya, hogy ha pÂ´ldÂ´ul egyetlen kategÂ´ria tÂ´ u attribÂ´ tum o Ä±tÂ´ a a e a o Ä±pusÂ´ u van, akkor az ugyanolyan sÂ´ llyal fog szerepelni, mint akÂ´r tÂ´ binÂ´ris attribÂ´ tum osszesen. u a Ä±z a u Â¨ CÂ´lszerË ezÂ´rt az egyes attribÂ´ tumtÂ´ e u e u Ä±pusok altal szolgÂ´ltatott Â´rtÂ´keket sÂ´ lyozni a hozzÂ´juk Â´ a e e u a tartozÂ´ attribÂ´ tumok szÂ´mÂ´val. o u a a

3.2.6. SpeciÂ´lis esetek a
Egyre tÂ¨bb olyan alkalmazÂ´s kerÂ¨ l elË, ahol a fent deï¬niÂ´lt altalÂ´nos hasonlÂ´sÂ´gok nem o a u o a Â´ a oa ragadjÂ´k meg jÂ´l kÂ´t elem kÂ¨ lÂ¨nbÂ¨zËsÂ´gÂ´t. A teljessÂ´g igÂ´nye nÂ´lkÂ¨ l bemutatunk kÂ´t olyan a o e uo o o e e e e e u e esetet, amikor speciÂ´lis tÂ´volsÂ´gfÂ¨ ggvÂ´nyre van szÂ¨ ksÂ´g. a a a u e u e Elemsorozatok hasonlÂ´sÂ´ga o a Elemsorozaton egy vÂ´ges halmazbÂ´l vett elemek sorozatÂ´t Â´rtjÂ¨ k. PÂ´ldÂ´ul a magyar nyelven e o a e u e a Â´rtelmezett szavak elemsorozatok. NÂ´zzÂ¨ k az S = abcde sorozatot. LegtÂ¨bben azt mondanÂ´nk, e e u o a hogy a bcdxye sorozat jobban hasonlÂ´ S-re, mint az xxxddd sorozat. Nem ezt kapnÂ´nk, ha Ä±t a a pozÂ´ okban megegyezË elemek relatÂ´ szÂ´mÂ´val deï¬niÂ´lnÂ´nk a hasonlÂ´sÂ´got. Ä±ciÂ´ o Ä±v a a a a oa Egy elterjedt mÂ´rtÂ´k az elemsorozatok hasonlÂ´sÂ´gÂ´ra az un. szerkesztÂ´si tÂ´volsÂ´g. KÂ´t e e oa a Â´ e a a e sorozatnak kicsi a szerkesztÂ´si tÂ´volsÂ´ga, ha az egyik sorozatbÂ´l kevÂ´s elem tÂ¨rlÂ´sÂ´vel ill. e a a o e o ee beszÂ´ rÂ´sÂ´val megkaphatjuk a mÂ´sikat. Pontosabban, kÂ´t sorozat szerkesztÂ´si tÂ´volsÂ´ga adja uaa a e e a a meg, hogy legkevesebb hÂ´ny beszÂ´ rÂ´s Â´s tÂ¨rlÂ´s mË velettel kaphatjuk meg az egyik sorozatbÂ´l a ua e o e u o a mÂ´sikat. A szerkesztÂ´si tÂ´volsÂ´g alapjÂ´n csoportosÂ´ a e a a a Ä±thatunk dokumentumokat, weboldalakat, DNS sorozatokat, vagy kereshetÂ¨ nk illegÂ´lis mÂ´solatokat. u a a BezÂ´rt szÂ¨g alapÂ´ hasonlÂ´sÂ´g a o u o a Vannak alkalmazÂ´sok, ahol nem a vektorok kÂ¨ lÂ¨nbsÂ´gÂ´nek a hossza a lÂ´nyeges, hanem a a uo e e e vektorok altal bezÂ´rt szÂ¨g. PÂ´ldÂ´ul dokumentumok hasonlÂ´sÂ´gÂ´val kapcsolatban szÂ´mos okÂ´ a o e a oa a a fejtÂ´st olvashatunk, hogy miÂ´rt jobb szÂ¨gekkel dolgozni, mint a tÂ´volsÂ´gokkal. EmlÂ´keztetËul a e e o a a e oÂ¨ koszinusz-mÂ´rtÂ´k pontos kÂ´plete : e e e d(x, y) = arccos xT y . ||x|| Â· ||y||

3.2.7. DimenziÂ´csÂ¨kkentÂ´s o o e
Az adatbÂ´nyÂ´szati alkalmazÂ´sokban az adathalmaz mÂ´rete altalÂ´ban nagy. FelmerÂ¨ l a a a a e Â´ a u kÂ´rdÂ´s, hogy lehet-e ezt a nagy adathalmazt egy kisebb mÂ´retË vel helyettesÂ´ e e e u Ä±teni ugy, hogy Â´ a kisebb adathalmaz valamilyen szempont szerint hË en reprezentÂ´lja a nagy adathalmazt. u a TermÂ´szetesen az adatbÂ´nyÂ´szati feladattÂ´l fÂ¨ gg az, hogy mit jelent pontosan a hË repree a a o u u zentÂ´ciÂ´. a o

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

47

Ebben a rÂ´szben dimenziÂ´-csÂ¨kkentÂ´srËl lesz szÂ´, melynek sorÂ´n az objektumok sok atte o o e o o a ribÂ´ tummal valÂ´ leÂ´ asÂ´t szeretnÂ´nk helyettesÂ´ u o Ä±rÂ´ a e Ä±teni kevesebb attribÂ´ tumot hasznÂ´lÂ´ leÂ´ assal. u a o Ä±rÂ´ HasonlÂ´sÂ´gtartÂ´ dimenziÂ´-csÂ¨kkentÂ´srËl fogunk beszÂ´lni, ami azt jelenti, hogy tudunk adni egy o a o o o e o e olyan hasonlÂ´sÂ´gi deï¬nÂ´ ot az uj leÂ´ asban, ami jÂ´ becslÂ´se az eredeti hasonlÂ´sÂ´gnak. oa Ä±ciÂ´ Â´ Ä±rÂ´ o e oa n m M k M

Az eredeti adathalmazt reprezentÂ´lÂ´ adathalmazt az mÃ—n-es M mÂ´trixszal jellemezzÂ¨ k, az ao a u uj leÂ´ ast pedig az mÃ—k-s M mÂ´trixszal. Az n nagyon nagy lehet (az interneten egyÂ¨ tt elËfordulÂ´ Â´ Ä±rÂ´ a u o o 9 szÂ´pÂ´rok keresÂ´sÂ´nÂ´l pÂ´ldÂ´ul 10 kÂ¨rÂ¨ li volt az Â´rtÂ´ke), ami azt jelenti, hogy az adatbÂ´zis nem o a ee e e a ou e e a biztos, hogy elfÂ´r a memÂ´riÂ´ban. Ezt a problÂ´mÂ´t szeretnÂ´nk megkerÂ¨ lni azzal, hogy az M -et az e o a e a e u M mÂ´trixszal helyettesÂ´ uk ugy, hogy k n annyira, hogy M elfÂ´rjen a memÂ´riÂ´ban. EzÂ´ltal a Ä±tjÂ¨ Â´ e o a a lehetËvÂ´ vÂ´lik olyan algoritmusok futtatÂ´sa, amelyek feltÂ´telezik, hogy az adatokat leÂ´ o mÂ´trix o e a a e Ä±rÂ´ a a gyors elÂ´rÂ´sË memÂ´riÂ´ban talÂ´lhatÂ´. eeu o a a o KÂ´t speciÂ´lis feladatot tÂ´rgyalunk. Az elsËben az attribÂ´ tumok valÂ´s szÂ´mok Â´s kÂ´t objektum e a a o u o a e e kÂ¨ lÂ¨nbÂ¨zËsÂ´gÂ´n (hasonlÂ´sÂ´g inverze) az Euklideszi tÂ´volsÂ´gukat Â´rtjÂ¨ k. A mÂ´sodik esetben az uo o o e e oa a a e u a attribÂ´ tumok csak binÂ´risak lehetnek, Â´s kÂ´t objektum hasonlÂ´sÂ´gÂ´t a Jaccard-koeï¬ƒciens (lÂ´sd u a e e oa a a 3.2.1 rÂ´sz) adja meg. e SzingulÂ´ris felbontÂ´s a a A szingulÂ´ris felbontÂ´s az elmÂ´leti szempontbÂ´l egyik legtÂ¨bbet vizsgÂ´lt, klasszikus lia a e o o a neÂ´ris algebrai eszkÂ¨zÂ¨ket hasznÂ´lÂ´ dimenziÂ´-csÂ¨kkentÂ´si eljÂ´rÂ´s. Ennek alkalmazÂ´sa utÂ´n nyert a o o ao o o e aa a a M mÂ´trix soraibÂ´l jÂ´l kÂ¨zelÂ´ a o o o Ä±thetË az euklideszi tÂ´volsÂ´g, illetve az attribÂ´ tumok vektoraibÂ´l o a a u o szÂ´mÂ´ a Ä±tott skalÂ´ris szorzattal mÂ´rt hasonlÂ´sÂ´g. UtÂ´bbi megegyezik a koszinusz mÂ´rtÂ´kkel, ha a e oa o e e a mÂ´trix sorai normÂ´ltak. Ebben a szakaszban nÂ´hÂ´ny jelÂ¨lÂ´s Â´s alapvetË fogalom utÂ´n deï¬a a e a oe e o a niÂ´ljuk a szingulÂ´ris felbontÂ´st, igazoljuk a felbontÂ´s lÂ´tezÂ´sÂ´t, majd megmutatjuk, hogy mikÂ´nt a a a a e ee e hasznÂ´lhatÂ´ a felbontÂ´s dimenziÂ´-csÂ¨kkentÂ´sre. MegjegyezzÂ¨ k, hogy a szakasz nem mutat a a o a o o e u gyakorlatban numerikus szempontbÂ´l jÂ´l alkalmazhatÂ´ mÂ´dszert a felbontÂ´s kiszÂ´mÂ´ asÂ´ra. Kio o o o a a Ä±tÂ´ a sebb adathalmaz esetÂ´n altalÂ´nos lineÂ´ris algebrai programcsomag (Matlab, Octave, Maple) e Â´ a a hasznÂ´lata javasolt, mÂ´ nagyobb adatbÂ´zisoknÂ´l az adatok sajÂ´tossÂ´gÂ´t kihasznÂ´lÂ´ szingulÂ´ris a Ä±g a a a a a ao a felbontÂ´ program (SVDPack) hasznÂ´lata ajÂ´nlott. o a a Egy U âˆˆ RnÃ—n mÂ´trixot ortogonÂ´lisnak nevezÂ¨ nk, ha oszlopai ortogonÂ´lis rendszert alkota a u a T T nak, azaz U U = In , ahol In az n Ã— n mÂ´retË egysÂ´gmÂ´trixot, Â´s U az U transzponÂ´ltjÂ´t e u e a e a a âˆ’1 âˆ’1 T jelÂ¨li. MÂ´skÂ´ppen mondva U invertÂ´lhatÂ´ Â´s U inverzÂ´re U = U teljesÂ¨ l. MÂ´trix ortogoo a e a oe e u a nalitÂ´sÂ´nak szemlÂ´letes tÂ´rgyalÂ´sÂ´hoz szÂ¨ ksÂ´gÂ¨ nk lesz a vektorok hosszÂ´nak altalÂ´nosÂ´ asÂ´ra, a aa e a aa u e u a Â´ a Ä±tÂ´ a 2 norma fogalmÂ´ra. Egy vâˆˆRn vektor v 2 -vel jelÂ¨lt 2-normÂ´jÂ´t a v 2 = a o aa oe i vi egyenlËsÂ´ggel de2 T ï¬niÂ´ljuk. EgyszerË en lÂ´thatÂ´, hogy v 2 = v v teljesÂ¨ l. A 2-norma altalÂ´nosÂ´ asa a tetszËleges a u a o u Â´ a Ä±tÂ´ o M âˆˆ RmÃ—n mÂ´trix esetÂ´n Â´rtelmezett M F Frobenius-norma, amelynek deï¬nÂ´ oja M F = a e e Ä±ciÂ´ =
m i=1 n j=1 2 Mi,j .

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

48

Î£mÃ—n UmÃ—m

| MmÃ—n = ï£­ u1 |

ï£«

ï£¶ ï£¬ ï£¬ | ï£¬ ï£¬ . . . um ï£¸ Â· ï£¬ ï£¬ | ï£¬ ï£­

ï£«

Ïƒ1

..

. Ïƒr 0 .. . 0

ï£¶

ï£· ï£« ï£¶ T ï£· â€” v1 â€” ï£· ï£· ï£· ï£¬ . . ï£· Â· ï£­ ï£¸ . ï£· T ï£· â€” vn â€” ï£¸

T VnÃ—n

3.5. abra. A szingulÂ´ris felbontÂ´s sematikus vÂ´zlata. Â´ a a a VisszatÂ´rve az ortogonalitÂ´s szemlÂ´letes jelentÂ´sÂ´re, egy ortogonÂ´lis mÂ´trix altal reprezentÂ´lt e a e ee a a Â´ a lineÂ´ris transzformÂ´ciÂ´ra ugy gondolhatunk, mint egy forgatÂ´sra, amely a vektorok hosszÂ´t nem a a o Â´ a a vÂ´ltoztatja. A szemlÂ´let alapja, hogy tetszËleges U âˆˆ RnÃ—n ortogonÂ´lis mÂ´trix Â´s x âˆˆ Rn vektor a e o a a e esetÂ´n e Ux 2 = x 2 teljesÂ¨ l. Az azonossÂ´g az alÂ´bbi elemi lÂ´pÂ´sekbËl kÂ¨vetkezik : U x 2 =(U x)T (U x)=xT (U T U )x= u a a e e o o 2 = xT x = x 2 . HasonlÂ´an belÂ´thatÂ´, hogy tetszËleges X âˆˆ RmÃ—n mÂ´trix esetÂ´n Â´s U âˆˆ RmÃ—m o a o o a e e 2 nÃ—n illetve V âˆˆ R ortogonÂ´lis mÂ´trixok esetÂ´n igaz, hogy a a e U XV T
F

= X

F

.

A rÂ¨vid bevezetË utÂ´n rÂ´tÂ´rÂ¨ nk a szingulÂ´ris felbontÂ´s deï¬nÂ´ ojÂ´ra. Egy nem szÂ¨ ksÂ´gszerË en o o a aeu a a Ä±ciÂ´ a u e u mÃ—n nÂ´gyzetes M âˆˆ R e mÂ´trix szingulÂ´ris Â´rtÂ´k felbontÂ´sÂ´n (singular value decomposition, SVD) a a e e a a az olyan M = U Î£V T szorzattÂ´ bontÂ´st Â´rtjÂ¨ k, ahol U âˆˆ RmÃ—m , V âˆˆ RnÃ—n ortogonÂ´lis mÂ´trixok, tovÂ´bbÂ´ a Î£ mÂ´trix a a e u a a a a a â—¦ M -mel megegyezË mÂ´retË Â´s a bal felsË sarokbÂ´l 45 -ban lefele elhelyezkedË Ïƒ1 â‰¥Ïƒ2 â‰¥. . .â‰¥Ïƒr >0 o e ue o o o pozitÂ´ szÂ´mokat csupa 0 kÂ¨vet Â´s a tÂ¨bbi elem szintÂ´n 0. A Ïƒi szÂ´mokat szingulÂ´ris Â´rtÂ´keknek Ä±v a o e o e a a e e nevezzÂ¨ k, Â´s a Ïƒi = 0 vÂ´lasztÂ´ssal terjesztjÂ¨ k ki az i > r esetre. A felbontÂ´sbÂ´l lÂ´thatÂ´, hogy u e a a u a o a o rang(M ) = rang(Î£) = r. Az U Â´s a V oszlopait bal-, illetve jobboldali szingulÂ´ris vektoroknak e a mondjuk. A jelÂ¨lÂ´sek attekintÂ´se a 3.5. abrÂ´n lÂ´thatÂ´. oe Â´ e Â´ a a o 3.1. tÂ´tel. TetszËleges M âˆˆ RmÃ—n mÂ´trixnak lÂ´tezik szingulÂ´ris Â´rtÂ´k felbontÂ´sa, azaz lÂ´teznek e o a e a e e a e mÃ—m nÃ—n U âˆˆR , V âˆˆR ortogonÂ´lis mÂ´trixok, melyekkel a a M = U Î£V T , ahol Î£ âˆˆ RmÃ—n , Î£= Î£+ 0 0 0 ,

tovÂ´bbÂ´ Î£+ egy r Ã— r mÂ´retË diagonÂ´lis mÂ´trix, amelynek fËatlÂ´jÂ´ban a Ïƒ 1 â‰¥ Ïƒ2 â‰¥ . . . â‰¥ Ïƒr > 0 a a e u a a oÂ´ o a szÂ´mok helyezkednek el sorrendben. a

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

49

BizonyÂ´tÂ´s: Az M T M mÂ´trix szimmetrikus, ezÂ´rt ortogonÂ´lis transzformÂ´ciÂ´val diagonaÄ±a a e a a o lizÂ´lhatÂ´ Â´s sajÂ´tÂ´rtÂ´kei valÂ´sak. TovÂ´bbÂ´ pozitÂ´ szemideï¬nit, mert tetszËleges x âˆˆ R nÃ—n vektor a oe ae e o a a Ä±v o esetÂ´n xT M T M x=(M x)T (M x)= M x 2 â‰¥0, ezÂ´rt a sajÂ´tÂ´rtÂ´kek nem negatÂ´ e e ae e Ä±vak. A sajÂ´tÂ´rtÂ´kek ae e 2 2 2 2 legyenek Ïƒ1 â‰¥Ïƒ2 â‰¥. . .â‰¥Ïƒr >0. Az ezekhez tartozÂ´ sajÂ´tvektorokbÂ´l alkotott ortogonÂ´lis mÂ´trixot o a o a a jelÂ¨lje V , ekkor o Î£+ 2 0 V T MT MV = . 0 0 A mÂ´trixot kÂ´t rÂ´szre osztva V = (Vr V2 ), ahol Vr âˆˆ RnÃ—r a pozitÂ´ sajÂ´tÂ´rtÂ´khez tartozÂ´ a e e Ä±v ae e o sajÂ´tvektorokat tartalmazza. Vagyis a VrT M T M Vr = Î£+ 2 . VezessÂ¨ k be az u Ur = M Vr Î£+ âˆ’1 jelÂ¨lÂ´st, ekkor oe M = Ur Î£+ VrT . Az Ur vektorai ortogonÂ´lis vektorrendszert alkotnak, ezt tetszËlegesen kiegÂ´szÂ´ a o e Ä±tve U = (U r U2 ) ortogonÂ´lis mÂ´trixszÂ´ a a a Î£+ 0 M =U V T. 0 0

Most megmutatjuk, hogy szingulÂ´ris felbontÂ´s segÂ´ egÂ´vel hogyan lehet dimenziÂ´a a Ä±tsÂ´ e o csÂ¨kkentÂ´st vÂ´grehajtani. EmlÂ´keztetÂ¨ nk rÂ´, hogy az M mÂ´trix n-dimenziÂ´s sorvektorai objeko e e e u a a o tumokat jellemeznek. DimenziÂ´-csÂ¨kkentÂ´skor az n attribÂ´ tumot szeretnÂ´nk k < n dimenziÂ´jÂ´ o o e u e ou vektorokkal jellemezni ugy, hogy kÂ¨zben az objektumok euklideszi tÂ´volsÂ´ga vagy skalÂ´ris szorÂ´ o a a a zattal mÂ´rt hasonlÂ´sÂ´ga csak kis mÂ´rtÂ´kben vÂ´ltozzon. A mÂ´trixszorzÂ´s elemi tulajdonsÂ´ga, e oa e e a a a a hogy a szingulÂ´ris felbontÂ´s az alÂ´bbi formÂ´ban is Â´ a a a a Ä±rhatÂ´. o
r

M = U Î£V

T

=
i=1

T Ïƒi u i v i ,

T ahol ui vi a bal- illetve a jobboldali szingulÂ´ris vektorokbÂ´l kÂ´pzett diÂ´dszorzat, azaz egy oszlopa o e a T Â´s egy sorvektor szorzatakÂ´nt felÂ´ mÃ—n mÂ´retË 1-rangÂ´ mÂ´trix. LÂ´thatÂ´, hogy az u i vi diÂ´dok e e Ä±rt e u u a a o a monoton csÂ¨kkenË Ïƒi sÂ´ llyal szerepelnek az osszegben. Innen adÂ´dik az otlet, hogy k < r esetÂ´n o o u Â¨ o Â¨ e csak az elsË k legnagyobb sÂ´ lyÂ´ diÂ´d osszegÂ´vel kÂ¨zelÂ´ uk az M mÂ´trixot. Azaz o u u a Â¨ e o Ä±tsÂ¨ a k

Mk =
i=1

T Ïƒi ui vi = Uk Î£k VkT ,

ahol Uk = (u1 u2 . . . uk ) Â´s Vk = (v1 v2 . . . vk ), valamit Î£k egy k Ã— k mÂ´retË diagonÂ´lis mÂ´trix, e e u a a melynek fËatlÂ´jÂ´ban a Ïƒ1 , Ïƒ2 , . . . , Ïƒk Â´rtÂ´kek vannak. KÂ¨nnyen lÂ´thatÂ´, hogy Mk sorai egy koÂ´ o a e e o a o dimenziÂ´s altÂ´rben helyezkednek el, hiszen rang(Mk ) = rang(Î£k ) = k. Sokkal mÂ´lyebb eredmÂ´ny o e e e a kÂ¨vetkezË, melynek bizonyÂ´ asÂ´t mellËzzÂ¨ k. o o Ä±tÂ´ a o u

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

50

3.2. tÂ´tel. Legyen M egy legalÂ´bb k rangÂ´ mÂ´trix Â´s legyen M k a fenti mÂ´don szÂ´mÂ´tott e a u a e o a Ä± kÂ¨zelÂ´tÂ´se. Ha a kÂ¨zelÂ´tÂ´s hibÂ´jÂ´t Frobenius-normÂ´val mÂ´rjÂ¨k, akkor a k-rangÂ´ mÂ´trixok kÂ¨zÂ¨l o Ä±e o Ä±e aa a e u u a o u az Mk mÂ´trix a lehetË legjobban kÂ¨zelÂ´ti M -et, azaz a o o Ä± M âˆ’ Mk
F

=

N : rang(N )=k

min

M âˆ’N

F

.

TovÂ´bbÂ´ a kÂ¨zelÂ´tÂ´s hibÂ´ja a Ïƒi szingulÂ´ris Â´rtÂ´kekkel kifejezhetË: a a o Ä±e a a e e o
r 2 Ïƒi . i=k+1

M âˆ’ Mk

F

=

Az Mk mÂ´trix sorai az M -Â´hez hasonlÂ´an n mÂ´retË ek, de most mÂ´r egy k-dimenziÂ´s altÂ´rnek a e o e u a o e T az elemei. Ennek az altÂ´rnek egy bÂ´zisÂ´t alkotjÂ´k a Vk sorai, Â´s az e a a a e M = U k Î£k mÂ´trix k-dimenziÂ´s sorvektorai e bÂ´zisban fejezik ki az Mk sorait. TehÂ´t a dimenziÂ´-csÂ¨kkentÂ´s a o a a o o e eredmÂ´nye, hogy az M mÂ´trix n-dimenziÂ´s sorait a vetÂ´ es utÂ´n az M mÂ´trix k-dimenziÂ´s e a o Ä±tÂ´ a a o soraival kÂ¨zelÂ´ uk. A VkT sorainak ortogonalitÂ´sÂ´bÂ´l kÂ¨nnyen belÂ´thatÂ´, hogy az Mk , illetve o Ä±tjÂ¨ aa o o a o az M soraibÂ´l szÂ´mÂ´ o a Ä±tott euklideszi tÂ´volsÂ´gok Â´s skalÂ´ris szorzatok is megegyeznek. TehÂ´t a a e a a a kÂ¨zelÂ´ es alatt torzÂ´ as kizÂ´rÂ´lag az M -bËl Mk -ba tÂ¨rtÂ´nË vetÂ´ es sorÂ´n tÂ¨rtÂ´nik, melynek o Ä±tÂ´ Ä±tÂ´ ao o o e o Ä±tÂ´ a o e mÂ´rtÂ´ke a 3.2. tÂ´tel alapjÂ´n felÂ¨ lrËl becsÂ¨ lhetË. e e e a u o u o Minhash alapÂ´ lenyomat u A kÂ¨vetkezËkben az adathalmaz sok oszlopot Â´s mÂ´g tÂ¨bb sort tartalmaz. CÂ´lunk a sorok o o e e o e szÂ´mÂ´nak csÂ¨kkentÂ´se. A feladatot a kÂ¨vetkezË abra szemlÂ´lteti. a a o e o oÂ´ e n

m

M

M k Az M mÂ´trix binÂ´ris Â´s kÂ´t oszlop (vektor) hasonlÂ´sÂ´gÂ´t a Jaccard-koeï¬ƒciens adja meg. a a e e oa a Kicsit Â´rthetetlenebb mÂ´don felÂ´ e o Ä±rva a Jaccard Â´rtÂ´ket : e e di,j = mi (mj )T , ||mi ||2 + ||mj ||2 âˆ’ mi (mj )T

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

51

hiszen az mi (mj )T binÂ´ris vektorok esetÂ´ben az azonos pozÂ´ okban lÂ´vË 1-esek szÂ´mÂ´t adja a e Ä±ciÂ´ e o a a meg, ||mi ||2 pedig a vektor egyeseinek szÂ´mÂ´t. FeltÂ´telezzÂ¨ k, hogy a binÂ´ris vektorok ritkÂ´k a a e u a a azaz, ha r-el jelÂ¨ljÂ¨ k a sorokban az 1-esek atlagos szÂ´mÂ´t, akkor r n. o u Â´ a a Az M mÂ´trixot az M lenyomatmÂ´trixÂ´nak fogjuk hÂ´ a a a Ä±vni. A lenyomatmÂ´trixnak nem kell a binÂ´risnak lennie, de azt termÂ´szetesen most is elvÂ´rjuk, hogy a memÂ´riaigÂ´nye jÂ´val kevesebb a e a o e o legyen, mint az M memÂ´riaigÂ´nye. TovÂ´bbi kikÂ¨tÂ´s, hogy az adatok sorfolytonosan vannak o e a oe tÂ´rolva, azaz elËszÂ¨r kiolvashatjuk az elsË sort, majd a mÂ´sodikat, Â´s Â´ tovÂ´bb. a o o o a e Ä±gy a Ez a helyzet all fel hasonlÂ´ weboldalak kiszË rÂ´sÂ´nÂ´l, koppintÂ´sok, kalÂ´zmÂ´solatok felÂ´ o uee e a o a derÂ´ esÂ´nÂ´l, hasonlÂ´ tulajdonsÂ´gÂ´ felhasznÂ´lÂ´k keresÂ´sÂ´nÂ´l stb. TovÂ´bbÂ´ ezt a mÂ´dszert alkalÄ±tÂ´ e e o a u ao ee e a a o mazhatjuk, amikor hasonlÂ´ eladÂ´sÂ´ termÂ´kpÂ´rokat keresÂ¨ nk. Amennyiben a termÂ´keket kis o au e a u e tÂ´telben Â´rtÂ´kesÂ´ e e e Ä±tik, akkor az asszociÂ´ciÂ´s szabÂ´lyokat kinyerË technikÂ´k (lÂ´sd 8 fejezet) nem a o a o a a alkalmazhatÂ´ak. o Gondolkozzunk el azon, hogy mË kÂ¨dik-e az alÂ´bbi algoritmus. VÂ´lasszunk ki nÂ´hÂ´ny sort u o a a e a vÂ´letlenszerË en Â´s tekintsÂ¨ k ezeket lenyomatoknak. KÂ´t lenyomat hasonlÂ´sÂ´gÂ´nak vÂ´rhatÂ´ e u e u e oa a a o Â´rtÂ´ke meg fog egyezni az oszlopaik hasonlÂ´sÂ´gÂ´val. Ez alapjÂ´n azt mondhatnÂ´nk, hogy a sorok e e oa a a a egy vÂ´letlenszerË en vÂ´lasztott halmaza jÂ´ lenyomat. e u a o A fentiek ellenÂ´re ez az egyszerË mÂ´dszer nagyon rossz eredmÂ´nyt adna. Ennek oka az, hogy e u o e a mÂ´trixunk nagyon ritka (r n), tehÂ´t egy oszlopban a legtÂ¨bb elem 0, Â´ nagy valÂ´szÂ´ usÂ´ggel a a o Ä±gy o Ä±nË e a legtÂ¨bb lenyomat is csupa 0 elembËl allna. o o Â´ A minhash alapÂ´ lenyomat egy elemÂ´t a kÂ¨vetkezËkÂ´ppen allÂ´ u e o o e Â´ Ä±tjuk elË. VÂ´letlenszerË en pero e u mutÂ´ljuk meg a sorokat, majd vÂ´lasszuk az j-edik oszlopok hash Â´rtÂ´kÂ´nek (h) azt a legkia a e e e sebb sorindexet, ahol 1-es szerepel a j-edik oszlopban. A vÂ´letlen permutÂ´ciÂ´ termÂ´szetesen e a o e csak elmÂ´leti megkÂ¨zelÂ´ es, diszken talÂ´lhatÂ´ nagy adatbÂ´zis esetÂ´n tÂ´ l lassÂ´ mË velet. Ehee o Ä±tÂ´ a o a e u u u lyett sorsoljunk ki minden sorhoz egy vÂ´letlen hash Â´rtÂ´ket. Amennyiben feltehetjÂ¨ k, hogy a e e e u 16 1 mÂ´trix sorainak szÂ´ma 2 -nÂ´l kisebb, akkor a szÂ¨ letÂ´snapi paradoxon alapjÂ´n vÂ´lasszunk 32 a a a u e a a bit szÂ´lessÂ´gË egyenletes eloszlÂ´sÂ´ vÂ´letlen szÂ´mot. Az algoritmus tÂ´nyleges implementÂ´lÂ´sa e e u au e a e aa sorÂ´n tehÂ´t egyesÂ´vel olvassuk a sorokat, vÂ´letlen szÂ´mot generÂ´lunk, Â´s minden oszlopnak a a e e a a e folyamatosan frissÂ´ uk azt a vÂ´ltozÂ´jÂ´t, ami megadja a legkisebb, 1-est tartalmazÂ´ sorindexet. Ä±tjÂ¨ a oa o Mivel egy lenyomatnak k darab eleme van, ezÂ´rt minden oszlophoz k darab vÂ´letlen szÂ´mot e e a allÂ´ Â´ Ä±tunk elË, Â´s k darab hash Â´rtÂ´ket tÂ´rolÂ´ vÂ´ltozÂ´t tartunk karban. VegyÂ¨ k Â´szre, hogy a o e e e a o a o u e lenyomat elËallÂ´ ashoz egyszer megyÂ¨ nk vÂ´gig a mÂ´trixon. oÂ´ Ä±tÂ´ u e a KÂ´t lenyomat hasonlÂ´sÂ´gÂ´t a pÂ´ronkÂ´nt egyezË lenyomatok szÂ´mÂ´nak k-hoz vett arÂ´nya e oa a a e o a a a adja meg, azaz |{ : Mi, = Mj, }| dij = , k ahol Mi, az M mÂ´trix i-edik oszlopÂ´nak -edik elemÂ´t jelÂ¨li. a a e o Be fogjuk bizonyÂ´ Ä±tani, hogy dij jÂ´ becslÂ´se dij -nek abban az Â´rtelemben, hogy ha i Â´s j o e e e oszlopok nagyon hasonlÂ´k, akkor azok lenyomatai is nagy valÂ´szÂ´ usÂ´ggel hasonlÂ´k. Ehhez a o o Ä±nË e o kÂ¨vetkezË Â´szrevÂ´telt hasznÂ´ljuk fel. o oe e a
A szÂ¨letÂ´snap paradoxonnal kapcsolatos kÂ´rdÂ´s a kÂ¨vetkezË : Mekkora a valÂ´szÂ´ usÂ´ge annak az u e e e o o o Ä±nË e â€ esemÂ´nynek, hogy emberek egy vÂ´letlenszerËen vÂ´lasztott r fËs csoportjÂ´ban van legalÂ´bb kÂ´t szemÂ´ly, akik egy e e u a o a a e e (365)Â·r! r napon unneplik a szÂ¨letÂ´snapjukat?â€. Elemi kombinatorikus uton a vÂ´lasz meghatÂ´rozhatÂ´ : p r = 1 âˆ’ 365r â‰ˆ Â¨ u e Â´ a a o âˆ’r 2 o e Â´ Ä±tÂ´ u o â‰ˆ 1âˆ’exp 3Â·365 . A feladat kÂ¨vetkezmÂ´nye az az allÂ´ as, miszerint 2n elemnek 22n elemË halmazbÂ´l kell egyenletes eloszlÂ´s szerint vÂ´letlenszerËen egyesÂ´vel kulcsot sorsolni, hogy kicsi (exp(âˆ’3)<0.05) legyen annak valÂ´szÂ´ usÂ´ge, a e u e o Ä±nË e hogy kÂ´t elem ugyanazt a kulcsot kapja. e
1

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK 3.3. Â´szrevÂ´tel. TetszËleges (i, j) oszloppÂ´rra igaz, hogy e e o a P[Mi, = Mj, ] = dij .

52

BizonyÂ´tÂ´s: Csak akkor lehet a kÂ´t lenyomat azonos, ha a legalÂ´bb az egyik oszlopban az 1Ä±a e a est tartalmazÂ´ indexek kÂ¨zÂ¨ l olyan sor kapta a legkisebb vÂ´letlen szÂ´mot, amelynÂ´l mindkÂ´t o o u e a e e oszlopban 1-es szerepel. Ennek valÂ´szÂ´ usÂ´ge Â´ppen dij , amennyiben a permutÂ´ciÂ´ egyenletesen o Ä±nË e e a o szÂ´rja szÂ´t az egyeseket. o e

Â´ Es most a hasonlÂ´sÂ´g megËrzÂ´sÂ´vel kapcsolatos allÂ´ as : oa o ee Â´ Ä±tÂ´ a 3.4. tÂ´tel. Legyenek 0<Î´ <1, Â´s >0 valÂ´s szÂ´mok. Amennyiben k >âˆ’ ln Î´/2 , akkor Î´-nÂ´l kisebb e e o a 2 2 a valÂ´szÂ´nËsÂ´ge annak, hogy a lenyomat Â´s az eredeti hasonlÂ´sÂ´g kÂ¨lÂ¨nbsÂ´ge -nÂ´l nagyobb. o Ä± u e e o a uo e a BizonyÂ´tÂ´s: TekintsÂ¨ k az i, j oszlopokat. Deï¬niÂ´ljuk Xl valÂ´szÂ´ usÂ´gi vÂ´ltozÂ´t, ami 1 Mi, = Mj, Ä±a u a o Ä±nË e a o esetÂ´n, kÂ¨ lÂ¨nben 0. Legyen Y = X1 + . . . + Xk . e uo Xl binomiÂ´lis eloszlÂ´sÂ´ Â´s az elËzËekben kimondott Â´szrevÂ´tel miatt E[X l ] = p = P(Mi, = a aue o o e e Irjuk fel Y -re = Mj, ) = dij . A lenyomatok hasonlÂ´sÂ´gÂ´nak deï¬nÂ´ ojÂ´bÂ´l adÂ´dik, hogy dij = Y . Â´ oa a Ä±ciÂ´ a o o k 2.5.3 -es tÂ´telÂ´t : e e 2 P |Y âˆ’ E[Y ]| > k â‰¤ 2eâˆ’2 k amibËl adÂ´dik, hogy o o P |dij âˆ’ dij | > â‰¤ 2eâˆ’2
2k

4. fejezet Gyakori elemhalmazok
A gyakori elemhalmazok kinyerÂ´se az adatbÂ´nyÂ´szat eltulajdonÂ´ e a a Ä±thatatlan terÂ¨ lete. A feladat u vÂ´sÂ´rlÂ´i szokÂ´sok kinyerÂ´sÂ´nÂ´l merÂ¨ lt fel rÂ´szfeladatkÂ´nt. A nagy proï¬tot elsËsorban a gyakran aa o a ee e u e e o egyÂ¨ tt vÂ´sÂ´rolt termÂ´kek, termÂ´khalmazok jelentik, Â´ ezek kinyerÂ´se jelentette az elsË lÂ´pÂ´st u aa e e Ä±gy e o e e a feladat megoldÂ´sÂ´nÂ´l. aa a Egyes alkalmazÂ´sokban a gyakori rÂ´szstruktÂ´ rÂ´k, gyakori mintÂ´k meghatÂ´rzÂ´sÂ´nÂ´l elema e ua a a aa a halmazok helyett sorozatok, gyÂ¨keres fÂ´k, cÂ´ ezett grÂ´fok vagy bool-formulÂ´kat kerestek. A o a Ä±mkÂ´ a a kÂ¨vetkezË fejezetben bemutatjuk a gyakori mintÂ´k bÂ´nyÂ´szatÂ´nak absztrakt modelljÂ´t, majd o o a a a a e egyesÂ´vel vesszÂ¨ k a kÂ¨ lÂ¨nbÂ¨zË tÂ´ u mintÂ´kat Â´s megvizsgÂ´ljuk, hogy milyen technikÂ´k alkale u u o o o Ä±pusÂ´ a e a a mazhatÂ´k. o A gyakori elemhalmazok bÂ´nyÂ´szata nagyon nÂ´pszerË kutatÂ´si terÂ¨ let. A publikÂ´lt algorita a e u a u a musokkal kÂ¨nyveket lehetne megtÂ¨lteni. Ebben a jegyzetben csak a leghÂ´ o o Ä±resebb algoritmusokat Â´s otleteket ismertetjÂ¨ k. e Â¨ u

4.1. A gyakori elemhalmaz fogalma
Legyen I = {i1 , i2 , . . . , im } elemek halmaza Â´s T = t1 , . . . , tn az I hatvÂ´nyhalmaza fee a lett Â´rtelmezett sorozat, azaz tj âŠ† I. A T sorozatot bemeneti sorozatnak hÂ´ e Ä±vjuk, amelynek tj elemei a tranzakciÂ´k . Az I âŠ† I elemhalmaz fedÂ´se megegyezik azon tranzakciÂ´k o e o sorozatÂ´val, amelyeknek rÂ´szhalmaza az I. Az I elemhalmaz tÂ´mogatottsÂ´ga a fedÂ´sÂ´nek a e a a ee elemszÂ´mÂ´val egyezik meg (jelÂ¨lÂ´sben supp(I)). Az I gyakori, amennyiben tÂ´mogatottsÂ´ga a a oe a a ou nem kisebb egy elËre megadott konstansnÂ´l, amelyet hagyomÂ´nyosan min supp-pal jelÂ¨lÂ¨ nk, o a a Â´s tÂ´mogatottsÂ´gi kÂ¨szÂ¨bnek hÂ´ e a a u o Ä±vunk. A gyakori elemhalmazok keresÂ´se sorÂ´n adott egy e a I elemhalmaz, T bemeneti sorozat, min supp tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b, feladatunk mega a u o hatÂ´rozni a gyakori elemhalmazokat Â´s azok tÂ´mogatottsÂ´gÂ´t. Az egyszerË sÂ´g kedvÂ´Â´rt a e a a a ue ee a halmazt jelÂ¨lË kapcsos zÂ´rÂ´jeleket (sËt az elemek hatÂ´rolÂ´ vesszËt) gyakran elhagyoo ao o a o o juk, tehÂ´t pÂ´ldÂ´ul az {A, C, D}, {B, C, E}, {A, B, C, E}, {B, E}, {A, B, C, E} sorozatot a e a ACD, BCE, ABCE, BE, ABCE formÂ´ban Â´ a Ä±rjuk. Az altalÂ´nossÂ´g megsÂ´rtÂ´se nÂ´lkÂ¨ l feltehetjÂ¨ k, hogy az I elemein tudunk egy rendezÂ´st deï¬Â´ a a e e e u u e niÂ´lni, Â´s a mintÂ´k illetve a tranzakciÂ´k elemeit minden esetben nagysÂ´g szerint nÂ¨vË sorrendben a e a o a o o tÂ´roljuk. Ezen rendezÂ´s szerinti lexikograï¬kusan tudjuk rendezni az azonos mÂ´retË halmazokat. a e e u A keresÂ´si teret ugy kÂ´pzelhetjÂ¨ k el, mint egy irÂ´nyÂ´ e Â´ e u a Ä±tott grÂ´fot, amelynek csÂ´ csai az elemhala u mazok, Â´s az I1 -bËl Â´l indul I2 -be, amennyiben I1 âŠ‚ I2 , Â´s |I1 |+1 = |I2 |. A keresÂ´si tÂ´r bejÂ´rÂ´sÂ´n e o e e e e aaa 53

4. FEJEZET. GYAKORI ELEMHALMAZOK

54

mindig ezen grÂ´f egy rÂ´szÂ´nek bejÂ´rÂ´sÂ´t fogjuk Â´rteni. TehÂ´t pÂ´ldÂ´ul a keresÂ´si tÂ´r szÂ´lessÂ´gi a e e aaa e a e a e e e e bejÂ´rÂ´sa ezen grÂ´f szÂ´lessÂ´gi bejÂ´rÂ´sÂ´t jelenti. aa a e e aaa Elterjedt, hogy a tÂ´mogatottsÂ´g helyett gyakorisÂ´got, a tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b helyett gyaa a a a a u o korisÂ´gi kÂ¨szÂ¨bÂ¨t hasznÂ´lnak, melyeket f req(I)-vel, illetve min freq-kel jelÂ¨lnek. Az I elemhala u o o a o maz gyakorisÂ´gÂ´n a supp(I)/|T | hÂ´nyadost Â´rtjÂ¨ k. a a a e u A gyakorlatban elËfordulÂ´ adatbÂ´zisokban nem ritka, hogy az elemek szÂ´ma 10 5 âˆ’ 106 , a o o a a 9 10 tranzakciÂ´kÂ´ pedig 10 âˆ’ 10 . ElmÂ´letileg mÂ´r az eredmÂ´ny kiÂ´ asa is az I elemszÂ´mÂ´ban exo e e a e Ä±rÂ´ a a ponenciÂ´lis lehet, hiszen elËfordulhat, hogy I minden rÂ´szhalmaza gyakori. A gyakorlatban a a o e maximÂ´lis mÂ´retË gyakori elemhalmaz mÂ´rete |I|-nÂ´l jÂ´val kisebb (legfeljebb 20-30). Ezen kÂ´ ul a e u e e o Ä±vÂ¨ minden tranzakciÂ´ viszonylag kicsi, azaz |tj | |I|. A keresÂ´si tÂ´r tehÂ´t nagy, ami azt jelenti, o e e a hogy az egyszerË nyers erË mÂ´dszerek (hatÂ´rozzuk meg minden elemhalmaz tÂ´mogatottsÂ´gÂ´t, u o o a a a a majd vÂ´logassuk ki a gyakoriakat) elfogadhatatlanul lassan futnÂ´nak. a a A kÂ´sËbbiekben gyakran hasznÂ´ljuk majd tranzakciÂ´k esetÂ´n a szË rtâ€ jelzËt. Egy tranzakciÂ´ eo a o e u o o â€ szË rt tranzakciÂ´jÂ´t ugy kaphatjuk meg, ha tÂ¨rÂ¨ljÂ¨ k belËle a ritka elemeket. A szË rt tranzaku oa Â´ oo u o u ciÂ´k minden informÂ´ciÂ´t tartalmaznak a gyakori elemhalmazok kinyerÂ´sÂ´hez, ezÂ´rt a legtÂ¨bb o a o ee e o algoritmus elsË lÂ´pÂ´se a gyakori elemek meghatÂ´rozÂ´sa, majd a szË rt tranzakciÂ´k elËallÂ´ asa. o e e a a u o oÂ´ Ä±tÂ´ EzutÂ´n az eredeti adatbÂ´zist nem hasznÂ´ljÂ´k tÂ¨bbÂ´. a a a a o e A bemenetet illetËen hÂ´rom adattÂ´rolÂ´si mÂ´dot szoktak elkÂ¨ lÂ¨nÂ´ o a a a o u o Ä±teni. HorizontÂ´lis a adatbÂ´zisrÂ´l beszÂ´lÂ¨ nk, ha a tranzakciÂ´kat azonosÂ´ oval lÂ´tjuk el, Â´s minden azonosÂ´ ohoz a o eu o Ä±tÂ´ a e Ä±tÂ´ tÂ´roljuk a tranzakciÂ´ban talÂ´lhatÂ´ elemeket. VertikÂ´lis adatbÂ´zisnÂ´l minden elemhez tÂ´roljuk a o a o a a a a az elemet tartalmazÂ´ tranzakciÂ´k azonosÂ´ oit (sorszÂ´mÂ´t). A vertikÂ´lis tÂ´rolÂ´s nagy elËnye, o o Ä±tÂ´ a a a a a o hogy gyorsan megkaphatjuk egy elemhalmaz fedÂ´sÂ´t (az elemekhez tartozÂ´ kosarak metszetÂ´t ee o e kell kÂ´pezni), amibËl kÂ¨zvetlen adÂ´dik a tÂ´mogatottsÂ´g. Mind a horizontÂ´lis, mind a vere o o o a a a tikÂ´lis abrÂ´zolÂ´si mÂ´dnÂ´l hasznÂ´lhatunk az elemek vagy tranzakciÂ´k felsorolÂ´sa helyett rÂ¨gzÂ´ a Â´ a a o a a o a o Ä±tett szÂ´lessÂ´gË bitvektorokat. Az i-edik elem (tranzakciÂ´) meglÂ´tÂ´t az i-edik pozÂ´ oban szereplË 1-es e e u o ee Ä±ciÂ´ o jelzi. tranzakciÂ´ o 1 2 elemhalmaz C A,B,C elem A B C tranzakciÂ´halmaz o 2 2 1,2 tranzakciÂ´ o 1 2 2 2 elem C A B C

4.1. tÂ´blÂ´zat. HorizontÂ´lis-, vertikÂ´lis- Â´s relÂ´ciÂ´s tÂ´rolÂ´si mÂ´d a a a a e a o a a o Tudjuk, hogy egy tranzakciÂ´ban vÂ´ltozÂ´ szÂ´mÂ´ elem lehet (Â´s fordÂ´ : egy elem vÂ´ltozÂ´ o a o a u e Ä±tva a o szÂ´mÂ´ tranzakciÂ´ban szerepelhet). A legtÂ¨bb mai adatbÂ´zis relÂ´ciÂ´s tÂ´blÂ´k formÂ´jÂ´ban van ela u o o a a o a a aa mentve, amelyekben csak rÂ¨gzÂ´ o Ä±tett szÂ´mÂ´ attribÂ´ tum szerepelhet. A valÂ´sÂ´gban ezÂ´rt a tranzaka u u oa e ciÂ´k kÂ´t attribÂ´ tummal rendelkezË relÂ´ciÂ´s tÂ´bla formÂ´jÂ´ban talÂ´lhatÂ´k, ahol az elsË attribÂ´ tum o e u o a o a aa a o o u a tranzakciÂ´t, a mÂ´sodik pedig az elemet adja meg (pontosabban a tranzakciÂ´k Â´s az elemek o a o e azonosÂ´ oit). A hÂ´rom tÂ´rolÂ´si mÂ´dszerre mutatnak pÂ´ldÂ´t a 4.1 tÂ´blÂ´zatok. Ä±tÂ´ a a a o e a a a Â´ a A bemenetet elemhalmazok sorozatakÂ´nt deï¬niÂ´ltuk. AbrÂ´zoljuk ezt, mint G = (I, T, R) e a irÂ´nyÂ´ a Ä±tatlan, pÂ´ros grÂ´f, vagy mint B binÂ´ris mÂ´trix. Ha a t tranzakciÂ´ tartalmazza az i elemet, a a a a o akkor Â´s csak akkor az (i, t) eleme R-nek. Vagy mÂ´trix esetÂ´n a t sorÂ´nak i eleme 1 (kÂ¨ lÂ¨nben e a e a uo 0). A ACD, BCE, ABCE, BE, ABCE bemenethez tartozÂ´ grÂ´f Â´s binÂ´ris mÂ´trix a 4.1 Â´s o a e a a e a 4.2 abrÂ´n lÂ´thatÂ´. Â´ a a o

4. FEJEZET. GYAKORI ELEMHALMAZOK A B 1 1 1 1 1 1 1 C 1 1 1 1 D E 1 1 1 1 1

55

1

2

3

4

5

A

B

C

D

E

1 2 3 4 5

4.1. abra. GrÂ´fos abrÂ´zolÂ´si mÂ´d Â´ a Â´ a a o

4.2. abra. BinÂ´ris mÂ´trixos abrÂ´zolÂ´si mÂ´d Â´ a a Â´ a a o

A bemeneti adatot szoktÂ´k a sËrË (dense) illetve a ritka (sparse) jelzËvel illetni, amellyel a a u u o binÂ´ris mÂ´trixban talÂ´lhatÂ´ 1-esek szÂ´mÂ´ra utalnak. VÂ´sÂ´rlÂ´i kosarakat abrÂ´zolÂ´ mÂ´trix tipia a a o a a aa o Â´ a o a kusan ritka, ugyanis a kosarakban altalÂ´ban jÂ´val kevesebb termÂ´k van (50-100), mint az osszes Â´ a o e Â¨ termÂ´k szÂ´ma (10 000-100 000). e a A tranzakciÂ´k szÂ´ma altalÂ´ban nagy, de a mai tÂ´rolÂ´kapacitÂ´sok mellett, mÂ´g egÂ´szen nagy o a Â´ a a o a e e adatbÂ´zisok is elfÂ´rnek a memÂ´riÂ´ban. Gondoljuk meg pÂ´ldÂ´ul, hogy egy 10 7 tranzakciÂ´t tara e o a e a o talmazÂ´ adatbÂ´zis csak 120 MB helyet kÂ´ an, amennyiben a tranzakciÂ´k atlagos mÂ´rete 6 elem. o a Ä±vÂ´ o Â´ e Csak extrÂ´m nagy adathalmazok esetÂ´n nem alkalmazhatÂ´k azok az algoritmusok, amelyek e e o feltÂ´telezik, hogy a bemenet (vagy a szË rt tranzakciÂ´k) elfÂ´rnek a memÂ´riÂ´ban. e u o e o a MielËtt bemutatjuk az APRIORI mÂ´dszert elemhalmazok esetÂ´n, gondolkozzunk el azon, o o e vajon mË kÂ¨dne-e az alÂ´bbi egyszerË algoritmus a gyakorlatban. Olvassuk be a hÂ´ttÂ´rtÂ´rolÂ´bÂ´l u o a u a e a o o az adatbÂ´zis elsË blokkjÂ´t, Â´s vizsgÂ´ljuk meg az elsË tranzakciÂ´t. Ennek a t 1 tranzakciÂ´nak a o a e a o o o az osszes rÂ´szhalmazÂ´t tÂ´roljuk el a memÂ´riÂ´ban Â´s mindegyikhez rendeljÂ¨ nk egy szÂ´mlÂ´lÂ´t Â¨ e a a o a e u a ao 1 kezdeti Â´rtÂ´kkel. Az I elemhalmazhoz rendelt szÂ´mlÂ´lÂ´ fogja tÂ´rolni I tÂ´mogatottsÂ´gÂ´t. e e a ao a a a a Az elsË tranzakciÂ´ feldolgozÂ´sa utÂ´n vizsgÂ´ljuk meg sorban a tÂ¨bbit : a t i tranzakciÂ´ mino o a a a o o den rÂ´szelemhalmazÂ´nak szÂ´mlÂ´lÂ´jÂ´t nÂ¨veljÂ¨ k eggyel, vagy vegyÂ¨ k fel a memÂ´riÂ´ba egy uj e a a aoa o u u o a Â´ szÂ´mlÂ´lÂ´val, amennyiben az eddig feldolgozott tranzakciÂ´ban mÂ´g nem fordult elË. Az adatbÂ´zis a ao o e o a teljes vÂ´gigolvasÂ´sa utÂ´n az osszes â€“ valahol elËfordulÂ´ â€“ elemhalmaz tÂ´mogatottsÂ´ga rendele a a Â¨ o o a a kezÂ´sÂ¨ nkre all, amibËl kÂ¨nnyen megkaphatjuk a gyakoriakat. eu Â´ o o LÂ´thatÂ´, hogy ennÂ´l az egyszerË algoritmusnÂ´l IO szempontjÂ´bÂ´l gyorsabbat nem lehet a o e u a a o talÂ´lni, mert az adatbÂ´zis egyszeri vÂ´gigolvasÂ´sa mindenkÂ´ppen szÂ¨ ksÂ´ges a tÂ´mogatottsÂ´g a a e a e u e a a meghatÂ´rozÂ´sÂ´hoz Â´s ennÂ´l az algoritmusnÂ´l elÂ´g is. A gyakorlatban mÂ´gsem hasznÂ´ljÂ´k ezt a aa e e a e e a a a gyors Â´s egyszerË algoritmust ? Ennek oka, hogy az Â´letben elËfordulÂ´ adatbÂ´zisokban nem e u e o o a ritka, hogy valamelyik tranzakciÂ´ sok elemet tartalmaz. Egy atlagos szupermarketben mino Â´ dennapos, hogy valaki 60 kÂ¨ lÂ¨nbÂ¨zË elemet vÂ´sÂ´rol. Ekkor csak a szÂ´mlÂ´lÂ´k mintegy 16 ezer uo o o aa a ao TB-ot foglalnÂ´nak a memÂ´riÂ´bÂ´l, amennyiben a szÂ´mlÂ´lÂ´k 4 byte-osak. A szÂ´mlÂ´lÂ´kat mina o a o a ao a ao denkÂ´ppen a memÂ´riÂ´ban szeretnÂ´nk tartani, hogy elkerÂ¨ ljÂ¨ k a folyamatos swappelÂ´st, hiszen e o a e u u e egy uj tranzakciÂ´ vizsgÂ´latÂ´nÂ´l nem tudjuk elËre, hogy melyik szÂ´mlÂ´lÂ´t kell nÂ¨velni. Â´ o a a a o a ao o Abban az esetben, ha biztosan tudjuk, hogy a tranzakciÂ´k egyike sem tartalmaz sok eleo met, vagy az adatbÂ´zis binÂ´ris Â´rtÂ´keket tartalmazÂ´ mÂ´trix formÂ´jÂ´ban adott, ahol az oszlopok a a e e o a aa (attribÂ´ tumok) szÂ´ma kicsi, akkor a fenti algoritmus hatÂ´konyan hasznÂ´lhatÂ´. u a e a o A fenti algoritmus kis mÂ´dosÂ´ asÂ´t javasoltÂ´k [11]-ban. EgyrÂ´szt csak olyan elemhalmao Ä±tÂ´ a a e zokat vizsgÂ´ltak, amelyek mÂ´rete nem halad meg egy elËre megadott korlÂ´tot, mÂ´srÂ´szrËl a a e o a a e o vizsgÂ´lt elemhalmazokat Â´s szÂ´mlÂ´lÂ´ikat â€“ a gyors visszakeresÂ´s Â´rdekÂ´ben â€“ szÂ´fÂ´ban tÂ´roltÂ´k. a e a ao e e e oa a a A mÂ´dszernek kÂ´t sÂ´ lyos hÂ´trÂ´nya van : nem teljes (az algoritmus nem talÂ´lja meg azokat az o e u a a a elemhalmazokat, amelyek mÂ´rete nagyobb az elËre megadott kÂ¨ szÂ¨bnÂ´l), tovÂ´bbÂ´ tÂ´ lsÂ´gosan e o u o e a a u a nagy a memÂ´riaigÂ´nye (sok lehet a hamis jelÂ¨lt). o e o

4. FEJEZET. GYAKORI ELEMHALMAZOK

56

Amennyiben az adatbÂ´zisunk kicsi, akkor mÂ´g a fenti egyszerË algoritmusokat sem kell a e u megprogramoznunk, mert egy teljesen szabvÂ´nyos adatbÂ´zis-lekÂ´rdezË nyelv segÂ´ egÂ´vel mega a e o Ä±tsÂ´ e kaphatjuk a gyakori elemhalmazokat. Az alÂ´bbi SQL parancs a gyakori elempÂ´rokat adja a a eredmÂ´nyÂ¨ l. e u SELECT I.elem,J.elem, COUNT(I.tranzakciÂ´) o FROM tranzakciÂ´k I, tranzakciÂ´k J o o WHERE I.tranzakciÂ´=J.tranzakciÂ´ AND I.elem<J.elem o o GROUP BY I.elem, J.elem HAVING COUNT(I.tranzakciÂ´) >= min_supp o

4.3. abra. SQL utasÂ´ as gyakori elempÂ´rok kinyerÂ´sÂ´hez Â´ Ä±tÂ´ a ee LÂ´tnunk kell, hogy a fenti parancs az osszekapcsolÂ´s (FROM mezËben kÂ´t tÂ´bla) mË velet a Â¨ a o e a u miatt nem fog mË kÂ¨dni, ha az adatbÂ´zis mÂ´rete tÂ´ l nagy. u o a e u A kÂ¨vetkezËkben bemutatjuk a hÂ´rom leghÂ´ o o a Ä±resebb gyakori elemhalmazokat kinyerË (GYEK) o algoritmust. MindhÂ´rman az ures mintÂ´bÂ´l indulnak ki. Az algoritmusok egy adott fÂ´zisÂ´ban a Â¨ a o a a jelÂ¨ltnek hÂ´ o Ä±vjuk azokat az elemhalmazokat, amelyek tÂ´mogatottsÂ´gÂ´t meg akarjuk hatÂ´rozni. a a a a Az algoritmus akkor teljes, ha minden gyakori elemhalmazt megtalÂ´l Â´s helyes, ha csak a gyaa e koriakat talÂ´lja meg. a MindhÂ´rom algoritmus hÂ´rom lÂ´pÂ´st ismÂ´tel. ElËszÂ¨r jelÂ¨lteket allÂ´ a a e e e o o o Â´ Ä±tanak elË, majd mego hatÂ´rozzÂ´k a jelÂ¨ltek tÂ´mogatottsÂ´gÂ´t, vÂ´gÂ¨ l kivÂ´logatjÂ´k a jelÂ¨ltek kÂ¨zÂ¨ l a gyakoriakat. a a o a a a e u a a o o u TermÂ´szetesen az egyes algoritmusok kÂ¨ lÂ¨nbÂ¨zË mÂ´don jÂ´rjÂ´k be a keresÂ´si teret (az osszes e uo o o o a a e Â¨ lehetsÂ´ges elemhalmazt), allÂ´ ak elË a jelÂ¨lteket, Â´s kÂ¨ lÂ¨nbÂ¨zË mÂ´don hatÂ´rozzÂ´k meg a e Â´ Ä±tjÂ´ o o e uo o o o a a tÂ´mogatottsÂ´gokat. a a Az altalÂ´nossÂ´g megsÂ´rtÂ´se nÂ´lkÂ¨ l feltehetjÂ¨ k, hogy az I elemein tudunk deï¬niÂ´lni egy teljes Â´ a a e e e u u a rendezÂ´st, Â´s a jelÂ¨ltek, illetve a tranzakciÂ´k elemeit ezen rendezÂ´s szerint tÂ´roljuk. MÂ´s szÂ´val e e o o e a a o az elemhalmazokat sorozatokkÂ´ alakÂ´ a Ä±tjuk. Egy sorozat -elemË preï¬xÂ´n a sorozat elsË elemÂ´bËl u e o e o kÂ´pzett rÂ´szsorozatÂ´t Â´rtjÂ¨ k. A pÂ´ldÂ´kban majd, amennyiben a rendezÂ´sre nem tÂ´rÂ¨ nk ki kÂ¨ lÂ¨n, e e a e u e a e eu uo az abÂ´cÂ´ szerinti sorrendet hasznÂ´ljuk. A GYEK algoritmusok altalÂ´ban Â´rzÂ´kenyek a hasznÂ´lt Â´ e e a Â´ a e e a rendezÂ´sre. EzÂ´rt minden algoritmusnÂ´l megvizsgÂ´ljuk, hogy milyen rendezÂ´st cÂ´lszerË hasznÂ´lni e e a a e e u a annak Â´rdekÂ´ben, hogy a futÂ´si idË, vagy a memÂ´riaszÂ¨ ksÂ´glet a lehetË legkisebb legyen. e e a o o u e o A jelÂ¨lt-elËallÂ´ as ismÂ´tlÂ´s nÂ´lkÂ¨li, amennyiben nem allÂ´ elË ugyanazt a jelÂ¨ltet tÂ¨bbfÂ´le o oÂ´ Ä±tÂ´ e e e u Â´ Ä±tja o o o e mÂ´don. Ez a hatÂ´konysÂ´g miatt fontos, ugyanis ismÂ´tlÂ´ses jelÂ¨lt-elËallÂ´ as esetÂ´ben minden o e a e e o oÂ´ Ä±tÂ´ e jelÂ¨lt elËallÂ´ asa utÂ´n ellenËrizni kellene, hogy nem allÂ´ o oÂ´ Ä±tÂ´ a o Â´ Ä±tottuk-e elË mÂ´r korÂ´bban. Ha ezt nem o a a tesszÂ¨ k, akkor feleslegesen kÂ¨tÂ¨ nk le erËforrÂ´sokat a tÂ´mogatottsÂ´g ismÂ´telt meghatÂ´rozÂ´sÂ´nÂ´l. u ou o a a a e a aa a MindhÂ´rom ismertetett algoritmusban a jelÂ¨ltek elËallÂ´ asa ismÂ´tlÂ´s nÂ´lkÂ¨ li lesz, amit a rena o oÂ´ Ä±tÂ´ e e e u dezÂ´ssel tudunk garantÂ´lni. e a Az algoritmusok pszeudokÂ´djaiban GY -vel jelÂ¨ljÂ¨ k a gyakori elemhalmazok halmazÂ´t, J-vel o o u a jelÂ¨ltekÂ´t Â´s j.szÂ´mlÂ´lÂ´-val a j jelÂ¨lt szÂ´mlÂ´lÂ´jÂ´t. Az olvashatÂ´bb kÂ´dok Â´rdekÂ´ben feltesszÂ¨ k, o e e a ao o a aoa o o e e u hogy minden szÂ´mlÂ´lÂ´ kezdeti Â´rtÂ´ke nulla, Â´s az olyan halmazok, amelyeknek nem adunk a ao e e e kezdeti Â´rtÂ´ket (pÂ´ldÂ´ul GY ), nem tartalmaznak kezdetben egyetlen elemet sem. e e e a

4. FEJEZET. GYAKORI ELEMHALMAZOK

57

4.2. Az APRIORI algoritmus
Az Apriori algoritmus az egyik legelsË GYEK algoritmus. SzÂ´lessÂ´gi bejÂ´rÂ´st valÂ´sÂ´ meg, o e e aa o Ä±t ami azt jelenti, hogy a legkisebb mintÂ´bÂ´l (ami az ures halmaz) kiindulva szintenkÂ´nt halad elËre a o Â¨ e o a nagyobb mÂ´retË gyakori elemhalmazok meghatÂ´rozÂ´sÂ´hoz. A kÂ¨vetkezË szinten (iterÂ´ciÂ´ban) e u a aa o o a o az eggyel nagyobb mÂ´retË elemhalmazokkal foglalkozik. Az iterÂ´ciÂ´k szÂ´ma legfeljebb eggyel e u a o a tÂ¨bb, mint a legnagyobb gyakori elemhalmaz mÂ´rete. o e A jelÂ¨ltek deï¬niÂ´lÂ´sÂ´nÂ´l a kÂ¨vetkezË egyszerË tÂ´nyt hasznÂ´lja fel : Gyakori elemhalmaz mino aa a a o o u e a den rÂ´szhalmaza gyakori. Az allÂ´ ast indirekten nÂ´zve elmondhatjuk, hogy egy elemhalmaz e Â´ Ä±tÂ´ e biztosan nem gyakori, ha van ritka rÂ´szhalmaza. Ennek alapjÂ´n ne legyen jelÂ¨lt azon eleme a o halmaz, amelynek van ritka rÂ´szhalmaza. Az Apriori algoritmus ezÂ´rt Â´pÂ´ e e e Ä±tkezik lentrËl. Egy o adott iterÂ´ciÂ´ban csak olyan jelÂ¨ltet veszÂ¨ nk fel, amelynek osszes valÂ´di rÂ´szhalmazÂ´rÂ´l tudjuk, a o o u Â¨ o e ao hogy gyakori. Az algoritmus onnan kapta a nevÂ´t, hogy az -elemË jelÂ¨lteket a bemeneti sorozat e u o -edik atolvasÂ´sÂ´nak megkezdÂ´se elËtt (a priori) allÂ´ elË. Az -elemË jelÂ¨ltek halmazÂ´t J -lel, Â´ aa e o Â´ Ä±tja o u o a az -elemË gyakori elemhalmazokat pedig GY -lel jelÂ¨ljÂ¨ k. u o u Algorithm 1 Apriori Require: T : tranzakciÂ´k sorozata, o min supp : tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b, a a u o â†0 J â† {âˆ…} while |J | = 0 do tÂ´mogatottsÂ´g meghatÂ´rozÂ´s( T , J ) ; a a a a for all j âˆˆ J do if supp(j) â‰¥ mins upp then GY â† j ; end if end for oÂ´ Ä±tÂ´ J +1 â† jelÂ¨lt elËallÂ´ as( GY ) ; o â† +1; end while return GY A kezdeti Â´rtÂ´kek beÂ´llÂ´ asa utÂ´n egy ciklus kÂ¨vetkezik, amely akkor Â´r vÂ´get, ha nincsen e e a Ä±tÂ´ a o e e egyetlen -elemË jelÂ¨lt sem. A cikluson belÂ¨ l elËszÂ¨r meghatÂ´rozzuk a jelÂ¨ltek tÂ´mogatottsÂ´gÂ´t. u o u o o a o a a a Ehhez egyesÂ´vel vesszÂ¨ k a tranzakciÂ´kat, Â´s azon jelÂ¨ltek szÂ´mlÂ´lÂ´jÂ´t nÂ¨veljÂ¨ k eggyel, amelyeket e u o e o a aoa o u tartalmaz a vizsgÂ´lt tranzakciÂ´. Ha rendelkezÂ´sre allnak a tÂ´mogatottsÂ´gok, akkor a jelÂ¨ltek a o e Â´ a a o kÂ¨zÂ¨ l kivÂ´logathatjuk a gyakoriakat. o u a

4.2.1. JelÂ¨ltek elËÂ´llÂ´ asa o oa Ä±tÂ´
Â¨ Ë Â´ Ä±t Â´ u e A Jelolt-eloallÂ´ as fÂ¨ ggvÂ´ny az -elemË gyakori elemhalmazokbÂ´l ( +1)-elemË jelÂ¨lteu o u o ket allÂ´ elË. Azok Â´s csak azok az elemhalmazok lesznek jelÂ¨ltek, amelyek minden rÂ´szhalmaza Â´ Ä±t o e o e gyakori. A jelÂ¨ltek elËallÂ´ asa sorÂ´n olyan -elemË , gyakori I1 , I2 elemhalmaz pÂ´rokat keresÂ¨ nk, ameo oÂ´ Ä±tÂ´ a u a u lyekre igaz, hogy

4. FEJEZET. GYAKORI ELEMHALMAZOK â€“ I1 lexikograï¬kusan megelËzi I2 -t, o

58

â€“ I1 -bËl a legnagyobb elem tÂ¨rlÂ´sÂ´vel ugyanazt az elemhalmazt kapjuk, mintha az I 2 -bËl o o ee o tÂ¨rÂ¨lnÂ´nk a legnagyobb elemet. oo e Ha a feltÂ´teleknek megfelelË pÂ´rt talÂ´lunk, akkor kÂ´pezzÂ¨ k a pÂ´r uniÂ´jÂ´t, majd ellenËrizzÂ¨ k, e o a a e u a oa o u hogy a kapott elemhalmaznak minden valÂ´di rÂ´szhalmaza gyakori-e. A tÂ´mogatottsÂ´g antio e a a monotonitÂ´sa miatt szÂ¨ ksÂ´gtelen az osszes valÂ´di rÂ´szhalmazt megvizsgÂ´lni ; ha mind az + a u e Â¨ o e a + 1 darab -elemË rÂ´szhalmaz gyakori, akkor az osszes valÂ´di rÂ´szhalmaz is gyakori. Az I 1 , I2 u e Â¨ o e halmazokat a jelÂ¨lt generÂ´torainak szokÂ´s hÂ´ o a a Ä±vni. 4.1. pÂ´lda. Legyenek a 3-elemË gyakori elemhalmazok a kÂ¨vetkezËk : GY 3 = {ABC, ABD, e u o o ACD, ACE, BCD}. Az ABC Â´s ABD elemhalmazok megfelelnek a feltÂ´telnek, ezÂ´rt kÂ´pezzÂ¨k e e e e u az uniÂ´jukat. Mivel ABCD minden hÂ´romelemË rÂ´szhalmaza a GY 3 -nak is eleme, az ABCD o a u e jelÂ¨lt lesz. Az ACD, ACE pÂ´r is megfelel a kÂ´t feltÂ´telnek, de uniÂ´juknak van olyan rÂ´szhalmaza o a e e o e (ADE), amely nem gyakori. Az Apriori a kÂ¨vetkezË iterÂ´ciÂ´ban tehÂ´t mÂ´r csak egyetlen jelÂ¨lt o o a o a a o tÂ´mogatottsÂ´gÂ´t hatÂ´rozza meg. a a a a A fenti mÂ´dszer csak akkor alkalmazhatÂ´, ha >0. Az egyelemË jelÂ¨ltek elËallÂ´ asa egyszerË : o o u o oÂ´ Ä±tÂ´ u minden egyelemË halmaz jelÂ¨lt, amennyiben az ures elemhalmaz gyakori (|T | â‰¥ min supp). Ez u o Â¨ osszhangban all azzal, hogy akkor lehet egy elemhalmaz jelÂ¨lt, ha minden rÂ´szhalmaza gyakori. Â¨ Â´ o e

4.2.2. JelÂ¨ltek tÂ´mogatottsÂ´gÂ´nak meghatÂ´rozÂ´sa o a a a a a
A jelÂ¨ltek elËfordulÂ´sait ossze kell szÂ´molni. Ehhez egyesÂ´vel vizsgÂ´ljuk a kosarakat, Â´s azon o o a Â¨ a e a e jelÂ¨ltek szÂ´mlÂ´lÂ´it nÂ¨veljÂ¨ k eggyel, amelyeket tartalmaz a kosÂ´r. o a ao o u a 1- Â´s 2-elemË jelÂ¨ltek tÂ´mogatottsÂ´ga e u o a a KÂ¨nnyË dolgunk van, amennyiben a jelÂ¨ltek mÂ´rete 1 vagy 2. A feladatot megoldhatjuk o u o e egy olyan lista, illetve fÂ´ltÂ¨mb segÂ´ egÂ´vel, amelyekben a szÂ´mlÂ´lÂ´kat tÂ´roljuk. Az elemek e o Ä±tsÂ´ e a ao a tÂ´mogatottsÂ´gÂ´nak meghatÂ´rozÂ´sÂ´nÂ´l a lista j-edik eleme tÂ´rolja a j-edik elem szÂ´mlÂ´lÂ´jÂ´t. a a a a aa a a a aoa A tranzakciÂ´k feldolgozÂ´sÂ´nÂ´l vÂ´gigmegyÂ¨ nk a tranzakciÂ´ elemein Â´s nÂ¨veljÂ¨ k a megfelelË o aa a e u o e o u o cellÂ´kban talÂ´lhatÂ´ szÂ´mlÂ´lÂ´kat. a a o a ao Az elsË vÂ´gigolvasÂ´s utÂ´n kivÂ´logathatjuk a gyakori elemeket. A tovÂ´bbiakban mÂ´r csak o e a a a a a ezekkel az elemekkel dolgozunk, Â´ uj sorszÂ´mokat adhatunk nekik a [1..|GY 1 |] intervallumbÂ´l Ä±gy Â´ a o (emlÂ´keztetËul GYj -vel jelÂ¨ljÂ¨ k a j-elemË gyakori mintÂ´kat). Az l Â´s k-adik elemekbËl allÂ´ pÂ´r e oÂ¨ o u u a e o Â´ o a tÂ´mogatottsÂ´gÂ´t a tÂ¨mb l-edik sorÂ´nak k âˆ’ l-edik eleme tÂ´rolja (az altalÂ´nossÂ´g megsÂ´rtÂ´se a a a o a a Â´ a a e e nÂ´lkÂ¨ l feltehetjÂ¨ k, hogy l < k). e u u Ha egy szÂ´mlÂ´lÂ´ 4 byte-ot foglal, akkor a tÂ¨mb helyigÂ´nye nagyjÂ´bÂ´l 4 Â· |GY1 | byte. Azon a ao o e a o 2 elempÂ´rokhoz tartozÂ´ tÂ¨mbelem Â´rtÂ´ke, amelyek sosem fordulnak elË egyÂ¨ tt, 0 lesz. Helyet a o o e e o u takarÂ´ Ä±thatunk meg, hogy ha csak akkor vesszÂ¨ k fel egy jelÂ¨ltpÂ´r szÂ´mlÂ´lÂ´jÂ´t, ha a pÂ´rt legu o a a aoa a alÂ´bb egy tranzakciÂ´ tartalmazza [127]. A pÂ´rok tÂ´mogatottsÂ´gÂ´nak meghatÂ´rozÂ´sa kevesebb a o a a a a a a memÂ´riÂ´t fog igÂ´nyelni, de ezzel egyÂ¨ tt lassabb is lesz. o a e u

4. FEJEZET. GYAKORI ELEMHALMAZOK 1 2 3 1 2 . . . . . . . . 1 2 3 N-1 N supp(j)=vector[j] |GY1 | âˆ’ 2 |GY1 | âˆ’ 1 supp({l, k})=tÂ¨mb[l][k-l] o ... ... |GY1 | âˆ’ 1

59

4.4. abra. AdatstruktÂ´ rÂ´k az 1- Â´s 2-elemË jelÂ¨ltek tÂ´mogatottsÂ´gÂ´nak meghatÂ´rozÂ´sÂ´hoz. Â´ ua e u o a a a a aa Nagyobb elemhalmazok tÂ´mogatottsÂ´ga a a VizsgÂ´ljuk meg rÂ´szletesebben az 5. sort. Adott egy tranzakciÂ´ Â´s -mÂ´retË jelÂ¨ltek egy hala e oe e u o maza. Feladatunk meghatÂ´rozni azon jelÂ¨lteket, amelyek a tranzakciÂ´ rÂ´szhalmazai. Megolda o o e hatjuk ezt egyszerË en ugy, hogy a jelÂ¨lteket egyesÂ´vel vesszÂ¨ k, Â´s eldÂ¨ntjÂ¨ k, hogy tartalmazza-e u Â´ o e u e o u oket a tranzakciÂ´. Rendezett halmazban rendezett rÂ´szhalmaz keresÂ´se elemi feladat. Ë o e e VegyÂ¨ nk fel kÂ´t mutatÂ´t, amelyek a kosÂ´r, illetve u e o a a jelÂ¨lt elemein fognak vÂ´gighaladni. Kezdetben muo e tasson mindkÂ´t mutatÂ´ az elemhalmazok elsË elemeire. e o o kosÂ´rmutatÂ´ a o Amennyiben a kÂ´t mutatÂ´ altal mutatott elemek mege oÂ´ ? egyeznek, akkor lÂ´ptessÂ¨ k mindkÂ´t mutatÂ´t a kÂ¨vete u e o o kosÂ´r : A B C D E F G I a kezË elemre. Ha a tranzakciÂ´ban talÂ´lhatÂ´ elem kisebb o o a o sorszÂ´mÂ´ , akkor csak a kosÂ´r mutatÂ´jÂ´t lÂ´ptessÂ¨ k, ela u a oa e u jelÂ¨lt : B E G o lenkezË esetben pedig alljunk meg ; ekkor a kosÂ´r bizo Â´ a 6 tosan nem tartalmazza a jelÂ¨ltet. Ha a jelÂ¨lt utolsÂ´ o o o eleme is megegyezik a kosÂ´r valamelyik elemÂ´vel, aka e jelÂ¨ltmutatÂ´ o o kor a kosÂ´r tartalmazza a jelÂ¨ltet. a o Ennek az egyszerË mÂ´dszernek a hÂ´trÂ´nya, hogy sok jelÂ¨lt esetÂ´n lassÂ´ , hiszen annyiszor kell u o a a o e u a tranzakciÂ´ elemein vÂ´gighaladni, amennyi a jelÂ¨ltek szÂ´ma. A gyorsabb mË kÂ¨dÂ´s Â´rdekÂ´ben o e o a u o e e e a jelÂ¨lteket szÂ´fÂ´ban vagy hash-fÂ´ban (hash-tree) cÂ´lszerË tÂ´rolni. A szÂ´fÂ´t szokÂ´s preï¬x-fÂ´nak o oa a e u a oa a a vagy lexikograï¬kus fÂ´nak is hÂ´ a Ä±vni [3]. Az eredeti APRIORI implementÂ´ciÂ´ban hash-fÂ´t alkala o a maztak, azonban tesztek bizonyÂ´ ak, hogy a szÂ´fa gyorsabb mË kÂ¨dÂ´st eredmÂ´nyez, mint a Ä±tjÂ´ o u o e e hash-fa. A hash-fa szÂ´fÂ´val valÂ´ helyettesÂ´ esÂ´rËl mÂ´r a [123]-ban Â´ oa o Ä±tÂ´ e o a Ä±rtak, ahol a szÂ´fÂ´t alkaloa mazÂ´ APRIORI algoritmust SEAR-nek neveztÂ´k el. A tovÂ´bbiakban a szÂ´fÂ´ban valÂ´ keresÂ´st o e a oa o e ismertetjÂ¨ k (a szÂ´fÂ´k felÂ´pÂ´ esÂ´rËl a 2.8.1 rÂ´szben mÂ´r szÂ´ltunk). u oa e Ä±tÂ´ e o e a o A szÂ´fa Â´leinek cÂ´ ei elemek lesznek. Minden csÂ´ cs egy elemhalmazt reprezentÂ´l, amelynek o e Ä±mkÂ´ u a elemei a gyÂ¨kÂ´rbËl a csÂ´ csig vezetË ut Â´leinek cÂ´ eivel egyeznek meg. FeltehetjÂ¨ k, hogy az egy o e o u oÂ´ e Ä±mkÂ´ u csÂ´ csbÂ´l indulÂ´ Â´lek, tovÂ´bbÂ´ az egy uton talÂ´lhatÂ´ Â´lek cÂ´ ek szerint rendezve vannak (pl. u o oe a a Â´ a oe Ä±mkÂ´ legnagyobb elem az elsË helyen). A jelÂ¨ltek szÂ´mlÂ´lÂ´it a jelÂ¨ltet reprezentÂ´lÂ´ levÂ´lhez rendeljÂ¨ k. o o a ao o ao e u A 4.5. abrÂ´n egy szÂ´fÂ´t lÂ´thatunk. Â´ a oa a A t tranzakciÂ´ban az -elemË jelÂ¨lteket ugy talÂ´ljuk meg, hogy a jelÂ¨lteket leÂ´ o fa gyÂ¨kerÂ´bËl o u o Â´ a o Ä±rÂ´ o e o kiindulva, rekurzÂ´ mÂ´don bejÂ´runk bizonyos rÂ´szfÂ´kat. Ha egy d szintË belsË csÂ´ cshoz a tranzÄ±v o a e a u o u akciÂ´ j-edik elemÂ´n keresztÂ¨ l jutunk, akkor azon Â´lein keresztÂ¨ l lÂ´pÂ¨ nk eggyel mÂ´lyebb szintre, o e u e u e u e

4. FEJEZET. GYAKORI ELEMHALMAZOK
A B C D C D B C D

60

4.5. abra. Az ABC, ABD, ACD, BCD jelÂ¨lteket tÂ´rolÂ´ szÂ´fa. Â´ o a o o amelyeknek cÂ´ eje megegyezik a tranzakciÂ´ j -edik elemÂ´vel, ahol j < j â‰¤ |t| âˆ’ + d (ugyanis Ä±mkÂ´ o e âˆ’ d elemre mÂ´g szÂ¨ ksÂ´g van ahhoz, hogy levÂ´lbe Â´rjÂ¨ nk). Ha ily mÂ´don eljutunk egy szintË e u e e e u o u csÂ´ cshoz, az azt jelenti, hogy a csÂ´ cs altal reprezentÂ´lt elemhalmazt tartalmazza t, Â´ ennek a u u Â´ a Ä±gy levÂ´lnek a szÂ´mlÂ´lÂ´jÂ´t kell nÂ¨velnÂ¨ nk eggyel. e a aoa o u A szÂ´fÂ´t preï¬x fÂ´nak is szoktÂ´k hÂ´ oa a a Ä±vni, ami arra utal, hogy a kÂ¨zÂ¨s preï¬xeket csak egyszer o o tÂ´rolja. EttËl lesz gyorsabb a szÂ´fÂ´s tÂ´mogatottsÂ´g-meghatÂ´rozÂ´s a naiv mÂ´dszernÂ´l. A kÂ¨zÂ¨s a o oa a a a a o e o o preï¬xeket osszevonjuk, Â´s csak egyszer foglalkozunk velÂ¨ k. Â¨ e u A szÂ´fa nagy elËnye a gyors tÂ´mogatottsÂ´g-meghatÂ´rozÂ´s mellett, hogy a jelÂ¨lt-elËallÂ´ ast o o a a a a o oÂ´ Ä±tÂ´ is tÂ´mogatja. Tudjuk, hogy kÂ´t gyakori elemhalmaz akkor lesz generÂ´tor, ha a legnagyobb a e a sorszÂ´mÂ´ elemÂ¨ k elhagyÂ´sÂ´val ugyanazt az elemhalmazt kapjuk, vagy mÂ´s szavakkal, a kÂ´t a u u aa a e gyakori elemhalmaz âˆ’ 1 hosszÂ´ preï¬xei megegyeznek. A tÂ´mogatottsÂ´g-meghatÂ´rozÂ´sÂ´ban u a a a aa hasznÂ´lt szÂ´fÂ´t felhasznÂ´lhatjuk a kÂ¨vetkezË iterÂ´ciÂ´s lÂ´pÂ´s jelÂ¨ltjeinek az elËallÂ´ asÂ´ra, hiszen a oa a o o a o e e o oÂ´ Ä±tÂ´ a a szÂ´fa tÂ´rolja a jelÂ¨lt-elËallÂ´ ashoz szÂ¨ ksÂ´ges gyakori elemhalmazokat. o a o oÂ´ Ä±tÂ´ u e Az egÂ´sz algoritmus alatt tehÂ´t egyetlen szÂ´fÂ´t tartunk karban, amely az algoritmus kezdee a oa tekor csak egy csÂ´ csbÂ´l all (ez reprezentÂ´lja az ures halmazt). A tÂ´mogatottsÂ´g-meghatÂ´rozÂ´s u o Â´ a Â¨ a a a a a a o e e e e utÂ´n tÂ¨rÂ¨ljÂ¨ k azon leveleket, amelyek szÂ´mlÂ´lÂ´ja kisebb min supp-nÂ´l. Az iterÂ´ciÂ´s lÂ´pÂ´s vÂ´gÂ´re a oo u a ao kialakulÂ´ szÂ´fa alapjÂ´n elËallÂ´ o o a oÂ´ Ä±tjuk a jelÂ¨lteket, amely sorÂ´n a szÂ´fa uj, eggyel mÂ´lyebb szinten o a o Â´ e lÂ´vË levelekkel bËvÂ¨ l. A jelÂ¨lt-elËallÂ´ as sorÂ´n arra is lehetËsÂ´gÂ¨ nk van, hogy az elËzË iterÂ´ciÂ´ban e o o u o oÂ´ Ä±tÂ´ a oe u o o a o gyakorinak talÂ´lt elemhalmazokat Â´s azok szÂ´mlÂ´lÂ´it kiÂ´ a e a ao Ä±rjuk (a kimenetre vagy a hÂ´ttÂ´rtÂ´rolÂ´ra). a e a o A 2.8.1 rÂ´szben mÂ´r volt arrÂ´l szÂ´, hogy az elemeken deï¬niÂ´lt rendezÂ´s milyen hatÂ´ssal e a o o a e a van a szÂ´fa alakjÂ´ra. Tapasztalatok alapjÂ´n gyakorisÂ´g szerint csÂ¨kkenË rendezÂ´s kisebb o a a a o o e szÂ´fÂ´t eredmÂ´nyez, mint a gyakorisÂ´g szerint nÂ¨vekvË rendezÂ´s, vagy mÂ´s vÂ´letlenszerË en oa e a o o e a e u megvÂ´lasztott rendezÂ´sek. Ennek ellenÂ´re olyan szÂ´fÂ´t cÂ´lszerË alkalmazni, amelyben az elea e e oa e u meken Â´rtelmezett rendezÂ´s a gyakorisÂ´g szerint nÂ¨vekvË sorrendnek felel meg. Ennek ugyanis e e a o o kÂ´t elËnye van. EgyrÂ´szrËl a szÂ´fa pontjai kisebbek lesznek (kevesebb Â´l indul ki belËlÂ¨ k), de e o e o o e ou ami mÂ´g fontosabb, hogy a ritka elemek lesznek kÂ¨zel a gyÂ¨kÂ´rhez. A ritka elemekkel kevee o o e sebb kosÂ´rbeli elem fog egyezni, ezÂ´ltal a szÂ´fa kisebb rÂ´szÂ´t jÂ´rjuk be a tÂ´mogatott jelÂ¨ltek a a o e e a a o meghatÂ´rozÂ´sa sorÂ´n. a a a A szÂ´fa hatÂ´kony megvalÂ´sÂ´ asÂ´nak rÂ´szleteit Â´s tovÂ´bbi gyorsÂ´ asi otleteket a [20, 23, 58] o e o Ä±tÂ´ a e e a Ä±tÂ´ Â¨ Â´ asokban talÂ´lhatunk. Egy olyan programcsomag, amely szÂ´fa alapÂ´ APRIORI implementÂ´ciÂ´t Ä±rÂ´ a o u a o tartalmaz (tovÂ´bbÂ´ hatÂ´kony Eclat Â´s Fp-growth implementÂ´ciÂ´t) Â´s kutatÂ´si cÂ´lokra szabadon a a e e a o e a e letÂ¨lthetË a o o http ://www.cs.bme.hu/~bodon/en/fim env oldalrÂ´l. o

4. FEJEZET. GYAKORI ELEMHALMAZOK

61

4.2.3. ZsÂ´kutca nyesÂ´s a e
SzÂ¨ ksÂ´gtelen tÂ´rolni azon csÂ´ csokat, amelyekbËl az osszes elÂ´rhetË levelet tÂ¨rÂ¨ltÂ¨ k. Ezek u e a u o Â¨ e o oo u ugyanis lassÂ´ ak a tÂ´mogatottsÂ´gok meghatÂ´rozÂ´sÂ´t (mikÂ¨zben szerepet nem jÂ´tszanak benne) Ä±tjÂ´ a a a aa o a Â´s feleslegesen foglaljÂ´k a memÂ´riÂ´t. e a o a Â¨ FOLYT KOV.

4.2.4. A bemenet tÂ´rolÂ´sa a a
Amikor megvizsgÂ´lunk egy kosarat annak Â´rdekÂ´ben, hogy eldÂ¨ntsÂ¨ k, mely jelÂ¨lteket tartala e e o u o mazza, akkor az operÂ´ciÂ´s rendszer a hÂ´ttÂ´rtÂ´rolÂ´bÂ´l bemÂ´solja a tranzakciÂ´t a memÂ´riÂ´ba. Ha a o a e a o o a o o a van elÂ´g hely a memÂ´riÂ´ban, akkor a tranzakciÂ´ ott is marad, Â´s amikor ismÂ´t szÂ¨ ksÂ´g van rÂ´, e o a o e e u e a nem kell lassÂ´ IO mË veletet vÂ´geznÂ¨ nk. A bemenetet tehÂ´t szÂ¨ ksÂ´gtelen explicit eltÂ´rolnunk a u u e u a u e a memÂ´riÂ´ban, hiszen az operÂ´ciÂ´s rendszer ezt megteszi helyettÂ¨ nk. SËt, ha a program eltÂ´rolja o a a o u o a a bemeneti adatot (pÂ´ldÂ´ul egy listÂ´ban), akkor a valÂ´sÂ´gban duplÂ´n lesz eltÂ´rolva. e a a oa a a A bemenet tÂ´rolÂ´sÂ´nak vannak elËnyei is. PÂ´ldÂ´ul osszegyË jthetjÂ¨ k az azonos tranzakciÂ´kat a aa o e a Â¨ u u o Â´s ahelyett, hogy tÂ¨bbszÂ¨r hajtanÂ´nk vÂ´gre ugyanazon a tranzakciÂ´n a tÂ´mogatott jelÂ¨ltek e o o a e o a o meghatÂ´rozÂ´sÂ´t, ezt egyszer tesszÂ¨ k meg. SzÂ¨ ksÂ´gtelen az eredeti tranzakciÂ´kat tÂ´rolni. Az a aa u u e o a elsË vÂ´gigolvasÂ´s utÂ´n rendelkezÂ´sre allnak a gyakori elemek. A ritka elemek ugysem jÂ´tszanak o e a a e Â´ Â´ a szerepet, ezÂ´rt elÂ´g a tranzakciÂ´knak csak a gyakori elemeit tÂ´rolni. Ennek tovÂ´bbi elËnye, hogy e e o a a o sokkal tÂ¨bb azonos ,,szË rtâ€ tranzakciÂ´ lehet, ezÂ´ltal tovÂ´bb csÂ¨kken a tÂ´mogatott jelÂ¨lteket o u o a a o a o keresË eljÂ´rÂ´s meghÂ´ asÂ´nak szÂ´ma. RÂ´adÂ´sul az -edik vÂ´gigolvasÂ´s sorÂ´n tÂ¨rÂ¨lhetjÂ¨ k azokat a o aa Ä±vÂ´ a a a a e a a oo u szË rt tranzakciÂ´kat, amelyek nem tartalmaznak egyetlen -elemË jelÂ¨ltet sem. u o u o A szË rt tranzakciÂ´kat cÂ´lszerË olyan adatstruktÂ´ rÂ´ban tÂ´rolni, amit gyorsan fel lehet Â´pÂ´ u o e u ua a e Ä±teni (azaz gyorsan tudjuk beszÂ´ rni a szË rt tranzakciÂ´kat) Â´s gyorsan vÂ´gig tudunk menni a beszÂ´ rt u u o e e u elemeken. Alkalmazhatunk erre a cÂ´lra egy szÂ´fÂ´t, de tesztek azt mutatjÂ´k, hogy egy pirose oa a fekete fa (kiegyensÂ´ lyozott binÂ´ris fa), amelynek csÂ´ csaiban egy-egy szË rt tranzakciÂ´ talÂ´lhatÂ´, u a u u o a o mÂ´g jobb megoldÂ´s, mert jÂ´val kisebb a memÂ´riaigÂ´nye. e a o o e

4.2.5. TranzakciÂ´k szË rÂ´se o u e
A feldolgozÂ´s sorÂ´n a tranzakciÂ´kat mÂ´dosÂ´ a a o o Ä±thatjuk/tÂ¨rÂ¨lhetjÂ¨ k annak Â´rdekÂ´ben, hogy az oo u e e Apriori mÂ´g hatÂ´konyabb legyen. A tranzakciÂ´ szË rÂ´se alatt a tranzakciÂ´ olyan elemeinek e e o ue o tÂ¨rlÂ´sÂ´t Â´rtjÂ¨ k, amelyek nem jÂ´tszanak szerepet az algoritmus kimenetÂ´nek elËallÂ´ asÂ´ban. A o ee e u a e oÂ´ Ä±tÂ´ a nem fontos elemek lassÂ´ ak az algoritmust, gondoljunk itt a tÂ´mogatottsÂ´g meghatÂ´rozÂ´sÂ´nak Ä±tjÂ´ a a a aa mÂ´djÂ´ra. A szÂ´fa egy belsË csomÂ´pontjÂ´nÂ´l meg kell hatÂ´roznunk a kÂ¨zÂ¨s elemeket az Â´lek o a o o o a a a o o e cÂ´ einek Â´s a tranzakciÂ´ elemeinek halmazÂ´ban. MinÂ´l tÂ¨bb elem van a tranzakciÂ´ban, annÂ´l Ä±mkÂ´ e o a e o o a tovÂ´bb tart ez a mË velet. a u SzË rÂ´snek tekinthetjÂ¨ k az elsË iterÂ´ciÂ´ utÂ´n vÂ´grehajtott lÂ´pÂ´st : ue u o a o a e e e 1. szËrË otlet. Minden tranzakciÂ´bÂ´l tÂ¨rÂ¨ljÂ¨k a ritka elemeket. u oÂ¨ o o o o u EgyszerË szË rË otletek a kÂ¨vetkezËk : u uoÂ¨ o o 2. szËrË otlet. Az -edik iterÂ´ciÂ´ban a tranzakciÂ´ feldolgozÂ´sa utÂ´n tÂ¨rÂ¨ljÂ¨k a t tranzakciÂ´t, u oÂ¨ a o o a a o o u o amennyiben t elemeinek szÂ´ma nem nagyobb, mint . NyilvÂ´nvalÂ´, hogy ez a tranzakciÂ´ nem a a o o tartalmaz olyan elemhalmazt, amely a kÂ´sËbbi iterÂ´ciÂ´ban lesz jelÂ¨lt. e o a o o

4. FEJEZET. GYAKORI ELEMHALMAZOK 3. szËrË otlet. TÂ¨rÂ¨ljÂ¨k a tranzakciÂ´t, amennyiben nem tartalmaz jelÂ¨ltet. u oÂ¨ o o u o o Ennek az otletnek a javÂ´ Â¨ Ä±tott vÂ´ltozata : a

62

4. szËrË otlet. TÂ¨rÂ¨ljÂ¨k a tranzakciÂ´ azon elemeit, amelyek nem elemei egyetlen olyan jelÂ¨ltu oÂ¨ o o u o o nek sem, amelyet tartalmaz a tranzakciÂ´. o Amennyiben az Â´ keletkezett tranzakciÂ´ mÂ´rete , akkor tÂ¨rÂ¨ljÂ¨ k teljesen a tranzakciÂ´t. Ä±gy o e oo u o PÂ´ldÂ´ul, ha a hÂ´romelemË jelÂ¨ltek halmaza {ABC, ABD, BCD, F GH} Â´s t = ABCDH, akkor e a a u o e a H elemet tÂ¨rÂ¨lhetjÂ¨ k a tranzakciÂ´bÂ´l. t = ABCGH esetÂ´ben a teljes tranzakciÂ´t tÂ¨rÂ¨ljÂ¨ k. oo u o o e o oo u Az elËzË szË rËotletet tovÂ´bb szigorÂ´ o o u oÂ¨ a Ä±thatjuk. Mi kell ahhoz, hogy egy elem eleme legyen majd egy olyan + A vÂ´rnyomÂ´s Â´s a nemzetek boldogsÂ´ga e a e a +1-elemË j jelÂ¨ltnek a kÂ¨vetkezË iterÂ´ciÂ´ban, amelyet kÂ¨zÂ¨tti osszefÂ¨ggÂ´sekre mutatott rÂ´ egy u o o o a o o o Â¨ u e a tartalmaz az aktuÂ´lis jelÂ¨lt. SzÂ¨ ksÂ´ges feltÂ´tel, hogy a amerikai kutatÂ´ : Az amerikai kutatÂ´k a o u e e o o â€ j minden -elemË rÂ´szhalmazÂ´t tartalmazza a tranz- szerint az eredmÂ´nyek egÂ´szen egyu e a e e akciÂ´. A j egy eleme pontosan darab rÂ´szhalmaznak szerËek, a boldog orszÂ´gokbÂ´l szÂ´rmazÂ´ o e u a o a o az eleme. Ez alapjÂ´n : a emberek - svÂ´dek, dÂ´nok, britek Â´s e a e 5. szËrË otlet. TÂ¨rÂ¨ljÂ¨k a tranzakciÂ´ azon elemeit, u oÂ¨ o o u o amelyek nem elemei darab olyan jelÂ¨ltnek, amelyet o tartalmaz a tranzakciÂ´. o TermÂ´szetesen most is igaz, hogy ez utÂ´n a szË rÂ´s utÂ´n e a ue a alkalmazzuk az mÂ´sodik szË rË otletet, ha ez lehetsÂ´ges. a u oÂ¨ e A fenti pÂ´ldÂ´ban a t = ABCF GH tranzakciÂ´t ez a e a o szË rÂ´s teljes egÂ´szÂ´ben tÂ¨rli. ue e e o hollandok - kevesebbet szenvednek a magas vÂ´rnyomÂ´stÂ´l, mint a nÂ´metek, e a o e vagy a portugÂ´lok, akik az eurÂ´pai a o boldogsÂ´gskÂ´la a a vÂ´gÂ´n e e talÂ´lhatÂ´k.â€ a o ForrÂ´s : a http://www.karpatinfo. net/article38511.html

4.2.6. Equisupport nyesÂ´s e
Az egyenlË tÂ´mogatottsÂ´gÂ´ elemhalmazok alapjÂ´n tÂ¨rtÂ´nË, un. equisupport nyesÂ´s talÂ´n a o a a u a o e o Â´ e a legelterjedtebb trÂ¨ kk a gyakori elemhalmazok kinyerÂ´sÂ´nek meggyorsÂ´ asÂ´ra. A nyesÂ´s a 4.2 u ee Ä±tÂ´ a e tulajdonsÂ´g egy kÂ¨vetkezmÂ´nyÂ´t hasznÂ´lja ki. A tÂ´mogatottsÂ´g meghatÂ´rozÂ´sÂ´nÂ´l kihagya o e e a a a a aa a hatjuk azokat a halmazokat, amelyeknek van olyan -elemË valÂ´di rÂ´szhalmazuk, amelyek u o e tÂ´mogatottsÂ´ga egyenlË egy ( -1)-elemË rÂ´szhalmazukÂ´val. a a o u e e 4.2. tulajdonsÂ´g. Legyen X âŠ‚Y âŠ†I. Ha supp(X)=supp(Y ), akkor supp(X âˆªZ)=supp(Y âˆªZ) a teljesÂ¨l minden Z âŠ† I-re. u Ez az allÂ´ as minden Z âŠ† I elemhalmazra igaz, de nekÂ¨ nk elÂ´g lesz csak a Z âŠ† I\Y halmazokra Â´ Ä±tÂ´ u e koncentrÂ´lnunk. a Az equisupport nyesÂ´s Â´s a zÂ´rt elemhalmazok kÂ¨zÂ¨tti osszefÂ¨ ggÂ´s egyÂ´rtelmË . Az X eleme e a o o Â¨ u e e u halmaz nem zÂ´rt, Â´s lezÂ´rtja Y , amennyiben X âŠ‚ Y , supp(X) = supp(Y ), tovÂ´bbÂ´ nem a e a a a lÂ´tezik olyan elemhalmaz, amelynek Y valÂ´di rÂ´szhalmaza, Â´s tÂ´mogatottsÂ´ga megegyezik Y e o e e a a tÂ´mogatottsÂ´gÂ´val. Egy X elemhalmaz akkor, Â´s csak akkor lehet egy egzakt (100% bizoa a a e nyossÂ´gÂ´ ) asszociÂ´ciÂ´s szabÂ´ly feltÂ´tel rÂ´sze, ha X nem zÂ´rt elemhalmaz. Az X elemhalmaz a u a o a e e a kulcs minta [14], ha nincs vele egyenlË tÂ´mogatottsÂ´gÂ´ valÂ´di rÂ´szhalmaza. o a a u o e Ha az Y jelÂ¨ltnek a tÂ´mogatottsÂ´ga megegyezik az X-el jelÂ¨lt preï¬xe tÂ´mogatottsÂ´gÂ´val, o a a o a a a akkor felesleges az Y -t tartalmazÂ´ Y âˆª Z halmazokat mint uj jelÂ¨lteket elËallÂ´ o Â´ o oÂ´ Ä±tani, a 4.2 tulajdonsÂ´g alapjÂ´n ezek tÂ´mogatottsÂ´ga X âˆª Z rÂ´szhalmazukbÂ´l kÂ¨zvetlenÂ¨ l szÂ´mÂ´ a a a a e o o u a Ä±thatÂ´ [66]. o

4. FEJEZET. GYAKORI ELEMHALMAZOK

63

Az alulrÂ´l Â´pÂ´ o e Ä±tkezË algoritmusoknÂ´l (Apriori, Eclat, Fp-growth, stb.) a preï¬xek o a tÂ´mogatottsÂ´ga mindig elÂ´rhetË, Â´ a preï¬x equisupportnyesÂ´st (az X az Y preï¬xe Â´s |X| + a a e o Ä±gy e e + 1 = |Y |) bÂ´rmikor alkalmazhatjuk. A preï¬x equisupport nyesÂ´s a kÂ¨vetkezËkÂ´ppen mË kÂ¨dik : a e o o e u o miutÂ´n kiszÂ´moltuk a P elemhalmaz gyerekeinek tÂ´mogatottsÂ´gÂ´t, a ritka elemek elhagyÂ´sakor a a a a a a ellenËrizzÂ¨ k, hogy a tÂ´mogatottsÂ´guk egyenlË-e a szÂ¨ lË tÂ´mogatottsÂ´gÂ´val, azaz supp(P )-vel. o u a a o uo a a a Az ezt teljesÂ´ o elemeket nem kell ï¬gyelembe vennÂ¨ nk mint generÂ´torokat a kÂ¨vetkezË jelÂ¨ltÄ±tË u a o o o elËallÂ´ as sorÂ´n. Ezen jelÂ¨lteket tÂ¨rÂ¨ljÂ¨ k Â´s az utolsÂ´ elemeiket egy halmazban tÂ´roljuk el, amit oÂ´ Ä±tÂ´ a o oo u e o a equisupport halmaznak hÂ´ Ä±vunk Â´s P -hez rendeljÂ¨ k. VegyÂ¨ k Â´szre, hogy az elemhalmazhÂ´lÂ´ pree u u e ao ï¬x bejÂ´rÂ´snak kÂ¨szÂ¨nhetËen a jelÂ¨lt-elËallÂ´ as sorÂ´n az X \ Y aa o o o o oÂ´ Ä±tÂ´ a z minden z âˆˆ Z, ahol az elemhalmaz bejÂ´rÂ´sÂ´nÂ´l hasznÂ´lt rendezÂ´s. aaa a a e Amikor kiÂ´ Ä±rjuk a GY gyakori elemhalmazt, vele egyÂ¨ tt kiÂ´ u Ä±rjuk minden E âŠ† E halmazokkal vett uniÂ´jÂ´t is, ahol E a GY preï¬xeinek equisuporthalmazainak uniÂ´ja. oa o 4.3. pÂ´lda. Legyenek a kÂ´telemË, A preï¬xË gyakori elemhalmazok a kÂ¨vetkezËk : e e u u o o {AB, AC, AD} Â´s supp(A) = supp(AB) = supp(AC) = 4 tovÂ´bbÂ´ supp(AD) = 3. A tÂ¨bbi e a a o A preï¬xË jelÂ¨lt elËallÂ´tÂ´sÂ´hoz egyedÂ¨l az AD elemhalmazt kell ï¬gyelembe vennÂ¨nk. Azonban u o oÂ´ Ä± a a u u egy jelÂ¨lt lÂ´trehozÂ´sÂ´hoz mind az apriori, az ECLAT- Â´s az FP-growth algoritmusnÂ´l legalÂ´bb o e a a e a a kÂ´t elemhalmaz szÂ¨ksÂ´ges, Â´gy itt vÂ´get is Â´r az A preï¬xË halmazok feldolgozÂ´sa. Az AD Â´s A e u e Ä± e e u a e elemhalmazok kiÂ´rÂ´sakor BC minden rÂ´szhalmazÂ´t is hozzÂ´juk kell venni, Â´gy vÂ´gÂ¨l az AD, Ä± a e a a Ä± e u ABD, ACD, ABCD, valamint az A, AB, AC, ABC halmazok kerÂ¨lnek kiÂ´rÂ´sra ; az elËbbiek u Ä± a o tÂ´mogatottsÂ´ga 3, utÂ´bbiakÂ´ 4 lesz. a a o e Ha az adatbÂ´zis csak zÂ´rt elemhalmazokat tartalmaz, akkor nem tudjuk ezt a nyesÂ´st ala a e kalmazni, a tÂ´mogatottsÂ´gok egyenlËsÂ´gÂ´nek vizsgÂ´lata viszont lelassÂ´ az algoritmust. A taa a oe e a Ä±tja pasztalat azonban azt mutatja, hogy az ellenËrzÂ´s gyors (pÂ´ldÂ´ul az Apriori algoritmusnÂ´l nem o e e a a kell ujra bejÂ´rni a szÂ´fÂ´t), Â´s nem okoz cache miss-t. A kevÂ´s nemzÂ´rt elemhalmazt tartalÂ´ a oa e e a mazÂ´ adatbÂ´zisoknÂ´l elenyÂ´szË a futÂ´siidË nÂ¨vekedÂ´se. Az equisupport nyesÂ´s ezÂ´rt biztonsÂ´gos o a a e o a o o e e e a gyorsÂ´ asi trÂ¨ kknek tekinthetË. Ä±tÂ´ u o A fenti leÂ´ asban nem hasznÂ´ltuk ki az Apriori algoritmus sajÂ´tossÂ´gait, csak azt, hogy az Ä±rÂ´ a a a algoritmus alulrÂ´l Â´pÂ´ o e Ä±tkezË Â´s az elemhalmaz bejÂ´rÂ´s sorÂ´n deï¬niÂ´lva van egy rendezÂ´s Â´s Â´ a oe aa a a e e Ä±gy preï¬x is. A tovÂ´bbiakban jobban a rÂ´szletekbe mÂ´lyedÂ¨ nk Â´s megnÂ´zzÂ¨ k, hogy mit kell tennÂ¨ nk a e e u e e u u az Apriori algoritmusban, ha a preï¬x equisupport nyesÂ´st kÂ´ anjuk alkalmazni. e Ä±vÂ´ Az Apriori algoritmus szÂ´fÂ´s megkÂ¨zelÂ´ ese esetÂ´n minden csÂ´ cshoz egy listÂ´t kell oa o Ä±tÂ´ e u a hozzÂ´vennÂ¨ nk, mely az equisupport halmaz elemeit tartalmazza. A ritkÂ´nak bizonyulÂ´ a u a o jelÂ¨ltek eltÂ´volÂ´ asakor ellenËrizzÂ¨ k, hogy a levÂ´l tÂ´mogatottsÂ´ga megegyezik-e preï¬xÂ´nek o a Ä±tÂ´ o u e a a e tÂ´mogatottsÂ´gÂ´val. Ha igen, a levelet tÂ¨rÂ¨lhetjÂ¨ k a szÂ´fÂ´bÂ´l, Â´s az Â´le cÂ´ ejÂ´t hozzÂ´Â´ a a a oo u oa o e e Ä±mkÂ´ e aÄ±rjuk a szÂ¨ lË uo equisupport halmazÂ´hoz. Minden i elem egy equisupport halmazban tekinthetË egy i cÂ´ ejË a o Ä±mkÂ´ u hurokÂ´lnek. A hurokÂ´leket nem kell ï¬gyelembe venni a tÂ´mogatottsÂ´g meghatÂ´rozÂ´sakor, de a e e a a a a jelÂ¨lt-elËallÂ´ asnÂ´l igen. o oÂ´ Ä±tÂ´ a 4.4. pÂ´lda. Legyenek AB, AC, BC a gyakori pÂ´rok. supp(AB) = supp(A) = supp(AC) e a Â´s supp(B) = supp(BC) = supp(BD). A 4.6 abra a szÂ´fa ritka jelÂ¨ltek eltÂ´volÂ´tÂ´sa utÂ´ni e Â´ o o a Ä±a a allapotÂ´t mutatja. VegyÂ¨k Â´szre, hogy ha a hurokÂ´leket ï¬gyelmen kÂ´vÂ¨l hagytuk volna a jelÂ¨ltgeÂ´ a u e e Ä± u o nerÂ´lÂ´s sorÂ´n, akkor az ABC elemhalmazt nem allÂ´tottuk volna elË mint jelÂ¨lt, holott minden aa a Â´ Ä± o o rÂ´szhalmaza gyakori. e

4. FEJEZET. GYAKORI ELEMHALMAZOK

64

A C B

B C,D

4.6. abra. PÂ´lda : equisupport levelek eltÂ´volÂ´ asa Â´ e a Ä±tÂ´ Ez a pÂ´lda az equisupport nyesÂ´s Â´s a zsÂ´kutcanyesÂ´s kÂ¨zti osszefÂ¨ ggÂ´sre is felhÂ´ a ï¬gyele e e a e o Â¨ u e Ä±vja met. LÂ´ttuk, hogy a B csomÂ´pont nem vezet 2 mÂ´lysÂ´gË levÂ´lbe, Â´ a zsÂ´kutcanyesÂ´s tÂ¨rÂ¨lte a o e e u e Ä±gy a e oo Â´ volna ezt a csÂ´ csot, Â´s nem lett volna jelÂ¨lt az ABC elemhalmaz. Ujra kell Â´rtelmeznÂ¨ nk u e o e u a csomÂ´pontok mÂ´lysÂ´gÂ´t a zsÂ´kutcanyesÂ´snÂ´l azÂ´rt, hogy ne tÂ¨rÂ¨ljÂ¨n olyan leveleket, amiko e e e a e e e oo o re szÂ¨ ksÂ´g lehet a jelÂ¨lt-elËallÂ´ as sorÂ´n. Az X elemhalmaz tÂ´mogatottsÂ´ga megegyezik az X u e o oÂ´ Ä±tÂ´ a a a olyan bËvÂ´ esÂ´nek tÂ´mogatottsÂ´gÂ´val, ahol a hozzÂ´adott elem az X valamely preï¬xÂ´hez tartozÂ´ o Ä±tÂ´ e a a a a e o equisupport halmaz egy eleme. Â´ amikor ï¬gyelembe vesszÂ¨ k az X csomÂ´pont mÂ´lysÂ´gÂ´t a Igy u o e e e zsÂ´kutcanyesÂ´s sorÂ´n, hozzÂ´ kell adnunk X aktuÂ´lis mÂ´lysÂ´gÂ´hez a gyÂ¨kÂ´rbËl az X-be vezetË a e a a a e e e o e o o pontok equisupport halmazainak osszmÂ´retÂ´t. PÂ´ldÂ´ul a 4.6 abrÂ´n lÂ´thatÂ´ szÂ´fÂ´n a B mÂ´lysÂ´ge Â¨ e e e a Â´ a a o oa e e 1 helyett 3.

4.2.7. Borgelt-fÂ´le tÂ´mogatottsÂ´g-meghatÂ´rozÂ´s e a a a a
Ha a tranzakciÂ´kat szÂ´fÂ´ban vagy PatrÂ´ o oa Ä±cia-fÂ´ban tÂ´roljuk, akkor egy mÂ´sik technikÂ´t is a a a a hasznÂ´lhatunk a tÂ´mogatottsÂ´gok meghatÂ´rozÂ´sÂ´ra [22, 23]. Ezt a mÂ´dszert alkalmazza Chrisa a a a aa o tian Borgelt a vilÂ´ghÂ´ u Apriori implementÂ´ciÂ´ja utolsÂ´ vÂ´ltozataiban. a Ä±rË a o o a Az a megï¬gyelÂ´s all az otlet mÂ¨gÂ¨tt, hogy kÂ´t tranzakciÂ´ a kÂ¨zÂ¨s preï¬xig ugyanazt a proge Â´ Â¨ o o e o o o ramfutÂ´st eredmÂ´nyezi a tÂ´mogatottsÂ´g meghatÂ´rozÂ´sakor (ugyanazt a szÂ´farÂ´szt jÂ´rjuk be). a e a a a a o e a Ha szÂ´fÂ´ban tÂ´roljuk a tranzakciÂ´kat, akkor rendelkezÂ´sre all minden szÂ¨ ksÂ´ges informÂ´ciÂ´ a oa a o e Â´ u e a o kÂ¨zÂ¨s preï¬xekrËl. MegoldhatÂ´, hogy ugyanazokat a preï¬xeket csak egyszer dolgozzuk fel, Â´s ne o o o o e annyiszor, ahÂ´nyszor elËfordulnak. a o A tranzakciÂ´fÂ´ba minden csomÂ´ponthoz egy szÂ´mlÂ´lÂ´t rendelÂ¨ nk. Az I elemhalmaz oa o a ao u szÂ´mlÂ´lÂ´ja azoknak a tranzakciÂ´knak a szÂ´mÂ´t tÂ´rolja, amelyek preï¬xe I. EbbËl a szempontbÂ´l a ao o a a a o o ez a megoldÂ´s eltÂ´r a bemenet tÂ´rolÂ´sÂ´nÂ´l bemutatott (lÂ´sd 4.2.4-es rÂ´sz) szÂ´fa alapÂ´ mega e a aa a a e o u oldÂ´stÂ´l (Â´s inkÂ´bb egy olyan FP-fÂ´ra hasonlÂ´ amelybËl elhagytuk a keresztÂ´leket Â´s a fejlÂ´c a o e a a Ä±t, o e e e tÂ´blÂ´t, lÂ´sd a 4.7 oldal). A tranzakciÂ´ szÂ´fÂ´nÂ´l Â´s a jelÂ¨lt szÂ´fÂ´nÂ´l hasznÂ´lt rendezÂ´snek meg a a a o oa a e o oa a a e kell egyeznie. Ez hÂ´trÂ´ny, mivel az egyes szÂ´fÂ´khoz mÂ´s-mÂ´s rendezÂ´s lenne optimÂ´lis. a a oa a a e a Sajnos a [22]-ben nincsen rÂ´szletesen kidolgozva az algoritmus, de vÂ´lhetËen a kÂ¨vete e o o kezËkÂ´pp mË kÂ¨dik : PÂ´rhuzamosan bejÂ´rjuk a jelÂ¨lt- Â´s a tranzakciÂ´ szÂ´fÂ´t duplÂ´n rekurzÂ´ o e u o a a o e o oa a Ä±v mÂ´don. KÂ´t mutatÂ´t hasznÂ´lunk, melyek kezdetben az egyes gyÂ¨kerekre mutatnak. EzutÂ´n o e o a o a vÂ´gigmegyÂ¨ nk mindkÂ´t csÂ´ cs Â´lein. Ha a tranzakciÂ´szÂ´fa aktuÂ´lis cÂ´ eje kisebb vagy egyenlË e u e u e o o a Ä±mkÂ´ o a mÂ´sik cÂ´ enÂ´l, akkor rekurzÂ´ a Ä±mkÂ´ e Ä±van tovÂ´bblÂ´pÂ¨ nk a tranzakciÂ´szÂ´fÂ´ban a gyerekcsomÂ´pontra a e u o oa o (az szÂ´fa aktuÂ´lis csomÂ´pontmutatÂ´ja nem vÂ´ltozik). Amennyiben a kÂ´t cÂ´ o a o o a e Ä±mke egyenlË, a reo kurziÂ´t azokkal a gyerekekkel folytatjuk, amelyekre a mutatÂ´k altal mutatott Â´lek mutatnak. o o Â´ e A 65 oldalon talÂ´lhatÂ´ pszeudÂ´-kÂ´d a Borgelt-fÂ´le tÂ´mogatottsÂ´g-meghatÂ´rozÂ´s egy tovÂ´bb opa o o o e a a a a a timalizÂ´lt vÂ´ltozatÂ´t adja meg. a a a A fenti megoldÂ´snak hÂ´trÂ´nya, hogy sok olyan utat jÂ´r be a jelÂ¨lt szÂ´fÂ´ban, amelyet az a a a a o oa eredeti tÂ´mogatottsÂ´g meghatÂ´rozÂ´ mÂ´dszer nem tenne, mert nem vezet levÂ´lbe. A mÂ´dszer a a a o o e o

4. FEJEZET. GYAKORI ELEMHALMAZOK

65

Algorithm 2 BORGELT SUPPCOUNT Require: nc : a szÂ´fa aktuÂ´lis csomÂ´pontja, o a o nt : a tranzakciÂ´fa aktuÂ´lis csomÂ´pontja, o a o : az nc -bËl levÂ´lbe vezetË ut hossza, o e oÂ´ i : az nc legkisebb olyan Â´lÂ´nek indexe, amely cÂ´ eje nagyobb, mint az nt -be vezetË Â´l cÂ´ eje ee Ä±mkÂ´ o e Ä±mkÂ´ = 0 then nc .szÂ´mlÂ´lÂ´ â† nc .szÂ´mlÂ´lÂ´ + nt .szÂ´mlÂ´lÂ´ a ao a ao a ao else for j = 0 to nt .Â´lszÂ´m âˆ’ 1 do e a while i < nc .Â´lszÂ´m AND nc .Â´l[i].cÂ´ e a e Ä±mke < nt .Â´l[j].cÂ´ e Ä±mke do i â† i+1 end while if i < nc .Â´lszÂ´m AND nc .Â´l[i].cÂ´ e a e Ä±mke â‰¥ nt .Â´l[j].cÂ´ e Ä±mke then e BORGELT SUPPCOUNT(nc , nt .Â´l[j].gyermek, , i) if nc .Â´l[i].cÂ´ e Ä±mke = nt .Â´l[j].cÂ´ e Ä±mke then BORGELT SUPPCOUNT(nc .Â´l[i].gyermek, nt .Â´l[j].gyermek, âˆ’ 1, 0) e e i â† i+1 end if else break end if end for end if nem veszi ï¬gyelembe, hogy a tranzakciÂ´nak csak egy rÂ´szÂ´t kell kiÂ´rtÂ´kelnÂ¨ nk. Megoldhatjuk a o e e e e u problÂ´mÂ´t, ha hozzÂ´rendelÂ¨ nk egy szÂ´mlÂ´lÂ´t a tranzakciÂ´ szÂ´fa minden pontjÂ´hoz. A szÂ´mlÂ´lÂ´ e a a u a ao o o a a ao adja meg a pontbÂ´l kiindulÂ´ leghosszabb ut hosszÂ´t. A tÂ´mogatottsÂ´g meghatÂ´rozÂ´sa sorÂ´n o o Â´ a a a a a a nem vesszÂ¨ k ï¬gyelembe azokat a csomÂ´pontokat, melyek szÂ´mlÂ´lÂ´ja kisebb, mint âˆ’ 1, ahol u o a ao azon lÂ´pÂ´sek szÂ´mÂ´t adja, amelyeket meg kell mÂ´g tenni a jelÂ¨ltszÂ´fa aktuÂ´lis pontjÂ´bÂ´l, hogy e e a a e o o a a o levÂ´lbe jussunk. Az algoritmus gyorsÂ´ e Ä±thatÂ´, ha a tranzakciÂ´ szË rÂ´sÂ´nek otletÂ´t (lÂ´sd 4.2.5-Â¨s o o uee Â¨ e a o rÂ´sz) is alkalmazzuk. TovÂ´bbi rÂ´szletek tudhatunk meg a [22] tanulmÂ´nybÂ´l. e a e a o if

4.2.8. FutÂ´si idË Â´s memÂ´riaigÂ´ny a oe o e
A GYEK feladat megadÂ´sakor elmondtuk, hogy mÂ´r az eredmÂ´ny kiÂ´ asa â€“ ami a futÂ´si a a e Ä±rÂ´ a idËnek a rÂ´sze â€“ az |I|-ben exponenciÂ´lis lehet. A memÂ´riaigÂ´nyrËl is hasonlÂ´ mondhatÂ´ el. Az o e a o e o o o ( + 1)-elemË jelÂ¨ltek elËallÂ´ asÂ´hoz szÂ¨ ksÂ´gÂ¨ nk van az osszes -elemË jelÂ¨ltre, amelyek szÂ´ma u o oÂ´ Ä±tÂ´ a u e u Â¨ u o a |I| akÂ´r |I|/2 is lehet. Ezek a felsË korlÂ´tok Â´lesek is, hiszen min supp = 0-nÂ´l minden elemhalmaz a o a e a gyakori. Az algoritmus indÂ´ asa elËtt tehÂ´t nem sokat tudunk mondani a futÂ´si idËrËl. A futÂ´s sorÂ´n, Ä±tÂ´ o a a oo a a azonban egyre tÂ¨bb informÂ´ciÂ´t gyË jtÂ¨ nk, Â´ felmerÂ¨ l a kÂ´rdÂ´s, hogy ezt fel tudjuk-e hasznÂ´lni o a o u u Ä±gy u e e a az algoritmus maradÂ´k futÂ´si idejÂ´nek jÂ´slÂ´sÂ´ra. PÂ´ldÂ´ul, ha a gyakori elemek szÂ´ma nÂ´gy, akkor e a e o aa e a a e tudjuk, hogy a legnagyobb gyakori elemhalmaz mÂ´rete legfeljebb nÂ´gy (azaz mÂ´g legfeljebb e e e hÂ´romszor olvassuk vÂ´gig az adatbÂ´zist), az osszes jelÂ¨lt maximÂ´lis szÂ´ma pedig 4 + 4 + a e a Â¨ o a a 2 3 + 4 = 11. A kÂ¨vetkezËkben megvizsgÂ´ljuk, hogy mit tudunk elmondani a jelÂ¨ltek szÂ´mÂ´rÂ´l Â´s o o a o a ao e 4

4. FEJEZET. GYAKORI ELEMHALMAZOK a maximÂ´lis jelÂ¨ltek mÂ´retÂ´rËl, ha adottak az -elemË gyakori elemhalmazok (GY ). a o e eo u A kÂ¨vetkezË rÂ´sz fontos fogalma a kanonikus reprezentÂ´ciÂ´ lesz. o o e a o 4.5. lemma. Adott n Â´s e pozitÂ´v egÂ´szek esetÂ´ben a kÂ¨vetkezË felÂ´rÂ´s egyÂ´rtelmË : Ä± e e o o Ä± a e u n= m + m âˆ’1 mr + Â· Â· Â·+ , âˆ’1 r

66

ahol r â‰¥ 1, m > m âˆ’1 > Â· Â· Â· > mr Â´s mj â‰¥ j minden j = r, r + 1, . . . , szÂ´mra. e a Ezt a reprezentÂ´ciÂ´t hÂ´ ak -kanonikus reprezentÂ´ciÂ´nak . MeghatÂ´rozÂ´sa nagyon egyszerË : a o Ä±vjÂ´ a o a a u âˆ’1 e m -nek ki kell elÂ´gÂ´ e Ä±tenie a m â‰¤ n < m +1 feltÂ´telt, m âˆ’1 -nek a mâˆ’1 â‰¤ n âˆ’ m < m âˆ’1 +1 âˆ’1 âˆ’1 feltÂ´telt, Â´s Â´ tovÂ´bb, amÂ´ n âˆ’ m âˆ’ mâˆ’1 âˆ’ Â· Â· Â· âˆ’ mr nulla nem lesz. e e Ä±gy a Ä±g r Legyen I = {i1 , i2 , . . . , im } elemek halmaza Â´s GY egy olyan I feletti halmazcsalÂ´d1 , amelye a nek minden eleme -elemË . Az -nÂ´l nagyobb mÂ´retË I âŠ† I halmaz fedi a GY -et, ha I minden u e e u elemË rÂ´szhalmaza eleme GY -nek. Az osszes lehetsÂ´ges ( +p)-mÂ´retË GY -et fedË halmazokbÂ´l u e Â¨ e e u o o alkotott halmazcsalÂ´dot J +p (GY )-lel jelÂ¨ljÂ¨ k. Nem vÂ´letlen, hogy ezt a halmazt ugyanÂ´ gy a o u e u jelÂ¨ltÂ¨ k, mint az Apriori algoritmus jelÂ¨ltjeit, ugyanis az ( +p)-mÂ´retË jelÂ¨ltek ezen halmazo u o e u o csalÂ´dnak az elemei, Â´s ha az algoritmus sorÂ´n minden jelÂ¨lt gyakori, akkor az ( + p)-mÂ´retË a e a o e u jelÂ¨ltek halmaza megegyezik J +p (GY )-lel. o A kÂ¨vetkezË tÂ´tel megadja, hogy adott GY esetÂ´n legfeljebb mennyi lehet a J +p (GY ) o o e e elemeinek szÂ´ma. a 4.6. tÂ´tel. Ha e |GY | = -kanonikus reprezentÂ´ciÂ´, akkor a o |J +p (GY )| â‰¤ m + +p m mr m âˆ’1 +Â· Â· Â·+ r âˆ’1 ms m âˆ’1 , + Â· Â· Â·+ s+p âˆ’1+p

+

ahol s a legkisebb olyan egÂ´sz, amelyre ms < s + p. Ha nincs ilyen egÂ´sz szÂ´m, akkor s = r âˆ’ 1. e e a A fenti tÂ´tel a Kruskalâ€“Katona tÂ´tel kÂ¨vetkezmÂ´nye, ezÂ´rt a tÂ´telben szereplË felsË korlÂ´tot a e e o e e e o o a +p tovÂ´bbiakban KK (|GY |)-el jelÂ¨ljÂ¨ k. a o u 4.7. tÂ´tel. A 4.6. tÂ´telben szereplË felsË korlÂ´t Â´les, azaz adott n, , p szÂ´mokhoz mindig lÂ´tezik e e o o a e a e GY , amelyre |GY | = n, Â´s |J +p (GY )| = KK +p (|GY |). e A kanonikus reprezentÂ´ciÂ´ segÂ´ egÂ´vel egyszerË Â´les felsË becslÂ´st tudunk adni a legnagyobb a o Ä±tsÂ´ e ue o e jelÂ¨lt mÂ´retÂ´re (jelÂ¨lÂ´sben maxsize(GY )) is. Tudjuk, hogy |GY | < m +1 , ami azt jelenti, hogy o e e oe nem lÂ´tezhet olyan jelÂ¨lt, amelynek mÂ´rete nagyobb m -nÂ´l. e o e e 4.8. kÂ¨vetkezmÂ´ny. Amennyiben a |GY | szÂ´mnak az -kanonikus reprezentÂ´ciÂ´jÂ´ban szereplË o e a a oa o elsË tag m , akkor maxsize(GY ) â‰¤ m . o Az m szÂ´mot a tovÂ´bbiakban Âµ (|GY |)-el jelÂ¨ljÂ¨ k. Ez az Â´rtÂ´k azt is megmondja, hogy mekkora a a o u e e jelÂ¨ltmÂ´retnÂ´l vÂ´lik nullÂ´vÂ´ a felsË korlÂ´t, azaz : o e e a a a o a
1

A H-t az I feletti halmazcsalÂ´dnak nevezzÂ¨k, amennyiben H âŠ† 2I . a u

4. FEJEZET. GYAKORI ELEMHALMAZOK 4.9. kÂ¨vetkezmÂ´ny. Âµ (|GY |) = + min{p|KK o e
+p

67 (|GY |) = 0} âˆ’ 1

A maradÂ´k futÂ´si idË jÂ´slÂ´sÂ´ra a kÂ¨vetkezË allÂ´ as nyÂ´ jt segÂ´ eget. e a o o aa o o Â´ Ä±tÂ´ u Ä±tsÂ´ 4.10. kÂ¨vetkezmÂ´ny. Az osszes lehetsÂ´ges -nÂ´l nagyobb mÂ´retË jelÂ¨lt szÂ´ma legfeljebb o e Â¨ e e e u o a KK
o Â¨sszes

(|GY |) =

Âµ (|GY |) p=1

KK

+p

(|GY |).

A fenti korlÂ´tok szÂ´pek Â´s egyszerË ek, mivel csak a e e u kÂ´t paramÂ´tert hasznÂ´lnak : az e e a aktuÂ´lis mÂ´retet a e Â´s az -elemË gyakori elemhalmazok szÂ´mÂ´t (|GY |). e u a a EnnÂ´l jÂ´val tÂ¨bbet tudunk. Nem csak a gyakori e o o elemhalmazok szÂ´mÂ´t ismerjÂ¨ k, hanem mÂ´r pontoa a u a san meghatÂ´roztuk oket magukat is ! Az uj informÂ´ciÂ´ a Ë Â´ a o segÂ´ egÂ´vel szÂ´mos esetben jobb felsË korlÂ´tot adhaÄ±tsÂ´ e a o a tunk. PÂ´ldÂ´ul, ha a GY -ben csak pÂ´ronkÂ´nt diszjunkt e a a e elemhalmazok vannak, akkor nem allÂ´ Â´ Ä±tunk elË jelÂ¨lteo o ket. A 4.6. tÂ´telben szereplË felsË korlÂ´t azonban jÂ´val e o o a o nagyobb lehet nullÂ´nÂ´l. A kÂ¨vetkezËkben bemutatjuk, a a o o hogyan lehet a meglÂ´vË felsË korlÂ´tot az mÂ´retË gyae o o a e u kori elemhalmazok struktÂ´rÂ´jÂ´ra rekurzÂ´ u aa Ä±van alkalmazni. Ehhez feltesszÂ¨ k, hogy egy teljes rendezÂ´st tudunk u e deï¬niÂ´lni az I elemein, ami alapjÂ´n tetszËleges elema a o halmaznak meg tudjuk hatÂ´rozni a legkisebb elemÂ´t. a e VezessÂ¨ k be a kÂ¨vetkezË kÂ´t jelÂ¨lÂ´st : u o o e oe

Angol kutatÂ´k allÂ´tjÂ´k, apukÂ´ddal o Â´ Ä± a a â€ valÂ´ kapcsolatod befolyÂ´solja, mio a lyen fÂ´rï¬akat e talÂ´lsz a vonzÂ´nak. o SzerintÂ¨k az egÂ´szsÂ´ges apa-lÂ´nya u e e a kapcsolatot apolÂ´ lÂ´nyok inkÂ´bb Â´ o a a az ugynevezett Â´ alfa-hÂ´m Ä± tÂ´pusÂ´ Ä± u fÂ´rï¬akhoz vonzÂ´dnak : a veszÂ´lyes e o e kinÂ´zetË, szÂ´les allÂ´, dÂ´s szemÂ¨ldÂ¨kË e u e Â´ u u o o u tÂ´pusokhoz, mÂ´g azok a lÂ´nyok, akikÄ± Ä± a nek kevÂ´sbÂ´ pozitÂ´v a kapcsolatuk a e e Ä± csalÂ´dfenntartÂ´val, azok inkÂ´bb a ï¬a o a nom vonÂ´sÂ´, mÂ´r szinte nËies kinÂ´zetË a u a o e u fÂ´rï¬akat rÂ´szesÂ´tik elËnyben.â€ ForrÂ´s : e e Ä± o a http://shape.proweb.hu/main.php? rovat=6&cikk=507

GY i = {I âˆ’ {i}|I âˆˆ GY , i = min I}, Â´ o u A GY i halmazt ugy kapjuk GY -bËl, hogy vesszÂ¨ k azon halmazokat, amelyek legkisebb eleme i, majd tÂ¨rÂ¨ljÂ¨ k ezekbËl az i elemet. oo u o Ezek utÂ´n deï¬niÂ´lhatjuk a kÂ¨vetkezË rekurzÂ´ fÂ¨ ggvÂ´nyt tetszËleges p > 0-ra : a a o o Ä±v u e o KK âˆ—,p (GY )=
|GY | p+1

min{KK

+p

(|GY |),

i âˆ— iâˆˆI KK âˆ’1,p (GY )} +p

, ha = 1 , ha > 1.

A deï¬nÂ´ obÂ´l kÂ¨vetkezi, hogy KK âˆ—,p (GY ) â‰¤ KK Ä±ciÂ´ o o 4.11. tÂ´tel. |J +p (GY )| â‰¤ KK âˆ—,p (GY ). e

(|GY |), tovÂ´bbÂ´ a a

BizonyÂ´tÂ´s: A bizonyÂ´ as teljes indukciÂ´n alapul, az = 1 eset triviÂ´lis. TulajdonkÂ´ppen csak Ä±a Ä±tÂ´ o a e az kell belÂ´tni, hogy a |J +p (GY )| â‰¤ KK âˆ—âˆ’1,p (GY i )
iâˆˆI

Az egyszerË sÂ´g kedvÂ´Â´rt vezessÂ¨ k be a kÂ¨vetkezË jelÂ¨lÂ´st : H âˆª i = {I âˆª {i}|I âˆˆ H}, ahol H egy ue ee u o o oe I feletti halmazcsalÂ´d. VegyÂ¨ k Â´szre, hogy GY = iâˆˆI GY i âˆª i Â´s GY i âˆ© GY j = âˆ… minden i = j a u e e elempÂ´rra. Azaz a GY halmazcsalÂ´d egy partÂ´ ojÂ´t kÂ´peztÂ¨ k. a a Ä±ciÂ´ a e u

4. FEJEZET. GYAKORI ELEMHALMAZOK Amennyiben I âˆˆ J +p (GY ), Â´s I-nek legkisebb eleme i, akkor I \ {i} âˆˆ J e I \ {i} minden ( âˆ’ 1)-elemË rÂ´szhalmaza GY i -beli. EbbËl kÂ¨vetkezik, hogy u e o o J +p (GY ) âŠ†
iâˆˆI âˆ’1+p (GY i

68 ), hiszen

J âˆ’1+p (GY i ) âˆª i.
âˆ’1+p (GY i

AbbÂ´l, hogy az GY i halmazcsalÂ´dok pÂ´ronkÂ´nt diszjunktak kÂ¨vetkezik, hogy J o a a e o is pÂ´ronkÂ´nt diszjunkt halmazcsalÂ´dok. EbbËl kÂ¨vetkezik az allÂ´ as, hiszen : a e a o o Â´ Ä±tÂ´ |J +p (GY )| â‰¤ | =
iâˆˆI

)âˆªi

iâˆˆI

J âˆ’1+p (GY i ) âˆª i| |J âˆ’1+p (GY i ) âˆª i| |J âˆ’1+p (GY i )| KK âˆ—âˆ’1,p (GY i ),

=
iâˆˆI

â‰¤

iâˆˆI

ahol az utolsÂ´ egyenlËtlensÂ´gnÂ´l az indukciÂ´s feltevÂ´st hasznÂ´ltuk. o o e e o e a

A pÂ´ronkÂ´nt diszjunkt halmazok esete jÂ´ pÂ´lda arra, hogy a minimum kifejezÂ´sben szereplË a e o e e o mÂ´sodik tag kisebb lehet az elsËnÂ´l. ElËfordulhat azonban az ellenkezË eset is. PÂ´ldÂ´ul legyen a o e o o e a 3 GY2 = {AB, AC}. KÂ¨nnyË ellenËrizni, hogy KK2 (|GY2 |) = 0, ugyanakkor a mÂ´sodik tagban o u o a szereplË osszeg 1-et ad. Nem tudhatjuk, hogy melyik Â´rtÂ´k a kisebb, Â´ jogos a kÂ´t Â´rtÂ´k o Â¨ e e Ä±gy e e e minimumÂ´t venni. a JavÂ´ Ä±thatjuk a legnagyobb jelÂ¨lt mÂ´retÂ´re, illetve az osszes jelÂ¨lt szÂ´mÂ´ra vonatkozÂ´ felsË o e e Â¨ o a a o o âˆ— âˆ— e korlÂ´tokon is. Legyen Âµ (GY ) = + min{p|KK +p (GY ) = 0} âˆ’ 1 Â´s a
Âµâˆ— (GY ) âˆ— KKosszes (GY Â¨

)=
p=1

KK âˆ—+p (GY ).

4.12. kÂ¨vetkezmÂ´ny. maxsize(GY ) â‰¤ Âµâˆ— (GY ) â‰¤ Âµ (|GY |). o e 4.13. kÂ¨vetkezmÂ´ny. Az osszes lehetsÂ´ges -nÂ´l nagyobb mÂ´retË jelÂ¨lt szÂ´ma legfeljebb o e Â¨ e e e u o a âˆ— âˆ— o Â¨sszes (|GY |). KKÂ¨sszes (GY ) lehet, Â´s KKÂ¨sszes (GY ) â‰¤ KK e o o
âˆ— A KK âˆ— Â´rtÂ´k fÂ¨ gg a rendezÂ´stËl. PÂ´ldÂ´ul a KK2,1 ({AB, AC}) Â´rtÂ´ke 1, amennyiben a e e u e o e a e e rendezÂ´s szerinti legkisebb elem A, Â´s 0 bÂ´rmely mÂ´s esetben. ElmÂ´letileg meghatÂ´rozhatjuk e e a a e a az osszes rendezÂ´s szerinti felsË korlÂ´tot, Â´s kivÂ´laszthatjuk azt, amelyik a legkisebb Â´rtÂ´ket Â¨ e o a e a e e adja. Ez a megoldÂ´s azonban tÂ´ l sok idËbe telne. A szÂ´fa altal hasznÂ´lt rendezÂ´s szerinti felsË a u o o Â´ a e o korlÂ´tot viszonylag kÂ¨nnyen meghatÂ´rozhatjuk. Ehhez azt kell lÂ´tnunk, hogy a gyÂ¨kÂ´r i cÂ´ ejË a o a a o e Ä±mkÂ´ u o aaa Â´lÂ´hez tartozÂ´ rÂ´szfa levelei reprezentÂ´ljÂ´k a GY i elemeit. A szÂ´fa egyetlen bejÂ´rÂ´sÂ´val egy ee o e a a egyszerË rekurzÂ´ mÂ´dszer segÂ´ egÂ´vel minden csÂ´ cshoz kiszÂ´mÂ´ u Ä±v o Ä±tsÂ´ e u a Ä±thatjuk a KK âˆ—âˆ’d,p (GY I ) Â´s âˆ’d e âˆ’d+p I I u e e u e e e o KK âˆ’d (|GY âˆ’d |) Â´rtÂ´keket, ahol d a csÂ´ cs mÂ´lysÂ´gÂ´t jelÂ¨li, GY âˆ’d pedig az adott csÂ´ cshoz

4. FEJEZET. GYAKORI ELEMHALMAZOK

69

tartozÂ´ rÂ´szfa altal reprezentÂ´lt elemhalmazokat. A gyÂ¨kÂ´rhez kiszÂ´mÂ´ o e Â´ a o e a Ä±tott kÂ´t Â´rtÂ´k adja meg e e e a KK Â´s KK âˆ— korlÂ´tokat. e a Ha a maradÂ´k futÂ´si idË becslÂ´sÂ´re kÂ´ anjuk hasznÂ´lni a fenti felsË korlÂ´tot, akkor tudnunk e a o ee Ä±vÂ´ a o a kell, hogy a jelÂ¨ltek tÂ´mogatottsÂ´gÂ´nak meghatÂ´rozÂ´sa fÂ¨ gg az Apriori algoritmusban felo a a a a a u hasznÂ´lt adatstruktÂ´ rÂ´tÂ´l. SzÂ´fa esetÂ´ben pÂ´ldÂ´ul egy jelÂ¨lt elËfordulÂ´sÂ´nak meghatÂ´rozÂ´sÂ´hoz a uao o e e a o o aa a aa el kell jutnunk a jelÂ¨ltet reprezentÂ´lÂ´ levÂ´lhez, ami a jelÂ¨lt mÂ´retÂ´vel arÂ´nyos lÂ´pÂ´sszÂ´mÂ´ o ao e o e e a e e a u âˆ— mË veletet igÂ´nyel. A maradÂ´k futÂ´si idË pontosabb felsË becslÂ´sÂ´hez a KK +p (GY ) Â´rtÂ´keket u e e a o o ee e e sÂ´ lyozni kell ( + p)-vel. u

4.3. Az ECLAT algoritmus
Az Eclat az ures mintÂ´bÂ´l indulva egy rekurzÂ´ mÂ´lysÂ´gi jellegË bejÂ´rÂ´st valÂ´sÂ´ meg. A Â¨ a o Ä±v, e e u aa o Ä±t rekurziÂ´ mÂ´lysÂ´ge legfeljebb eggyel tÂ¨bb, mint a legnagyobb gyakori elemhalmaz mÂ´rete. Az o e e o e Apriori-val szemben mindig egyetlen jelÂ¨ltet allÂ´ elË, majd ennek azonnal meghatÂ´rozza a o Â´ Ä±t o a tÂ´mogatottsÂ´gÂ´t. Az ( + 1)-elemË , P preï¬xË jelÂ¨lteket, ahol |P | = âˆ’ 1 az -elemË , P preï¬xË a a a u u o u u gyakori elemhalmazokbÂ´l allÂ´ elË egyszerË pÂ´ronkÂ´nti uniÂ´kÂ´pzÂ´ssel. o Â´ Ä±tja o u a e o e e Az algoritmus kÂ¨zponti fogalma az un. TID-halmaz. Egy elemhalmaz TID-halmazÂ´nak o Â´ a (Transaction IDentiï¬er) elemei azon bemeneti sorozatok azonosÂ´ oi (sorszÂ´mai), amelyek tarÄ±tÂ´ a talmazzÂ´k az adott elemhalmazt. MÂ´s szÂ´val egy TID-halmaz a vertikÂ´lis adatbÂ´zis egy mega a o a a felelË sora. PÂ´ldÂ´ul AD, AC, ABCD, B, AD, ABD, D bemenet esetÂ´n az {A, C} elemhalmaz o e a e TID-halmaza {1,2}, amennyiben egy tranzakciÂ´ azonosÂ´ oja megegyezik a bemeneti sorozatban o Ä±tÂ´ elfoglalt helyÂ´vel, Â´s a helyek szÂ´mozÂ´sÂ´t nullÂ´tÂ´l kezdjÂ¨ k. e e a aa ao u A TID-halmaz kÂ´t fontos tulajdonsÂ´ggal bÂ´ : e a Ä±r I. Az I elemhalmaz TID-halmazÂ´nak mÂ´rete megadja az I tÂ´mogatottsÂ´gÂ´t. a e a a a II. Egy jelÂ¨lt TID-halmazÂ´t megkaphatjuk a generÂ´torainak TID-halmazaibÂ´l egy egyszerË o a a o u metszetkÂ´pzÂ´ssel. e e Az Eclat pszeudokÂ´dja az alÂ´bbi. o a ElËszÂ¨r meghatÂ´rozzuk a gyakori elemeket, majd felÂ´pÂ´ uk a gyakori elemek TID-halmazait. o o a e Ä±tjÂ¨ A kÂ´sËbbiekben nem hasznÂ´ljuk a bemenetet, csak a TID-halmazokat. Az algoritmus lÂ´nyege eo a e a Eclat-segÂ´d rekurziÂ´s eljÂ´rÂ´s. JelÂ¨ljÂ¨ k a P preï¬xË , P -nÂ´l eggyel nagyobb mÂ´retË gyakori e o aa o u u e e u elemhalmazokbÂ´l alkotott halmazcsalÂ´dot GY P -vel. NyilvÂ´nvalÂ´, hogy GY âˆ… = GY1 . o a a o Az Eclat jelÂ¨lt-elËallÂ´ asa megegyezik az Apriori jelÂ¨lt-elËallÂ´ asÂ´val, azzal a o oÂ´ Ä±tÂ´ o oÂ´ Ä±tÂ´ a kÂ¨ lÂ¨nbsÂ´ggel, hogy nem ellenËrizzÂ¨ k az uniÂ´kÂ´pzÂ´ssel kapott halmaznak minden rÂ´szhalmazÂ´ra, uo e o u o e e e a hogy gyakori-e (a mÂ´lysÂ´gi bejÂ´rÂ´s miatt ez az informÂ´ciÂ´ nem is all rendelkezÂ´sÂ¨ nkre). LÂ´thatÂ´, e e aa a o Â´ eu a o hogy az Eclat abban is kÂ¨ lÂ¨nbÂ¨zik az Apriori-tÂ´l, hogy egy jelÂ¨lt elËallÂ´ asa utÂ´n azonnal uo o o o oÂ´ Ä±tÂ´ a meghatÂ´rozza a tÂ´mogatottsÂ´gÂ´t, mielËtt ujabb jelÂ¨ltet allÂ´ a a a a o Â´ o Â´ Ä±tana elË. NÂ´zzÂ¨ nk egy pÂ´ldÂ´t a keo e u e a resÂ´si tÂ´r bejÂ´rÂ´sÂ´ra. e e aaa 4.14. pÂ´lda. Legyen T = ACDE, ACG, AF GM, DM Â´s min supp = 2. ElsË lÂ´pÂ´sben mege e o e e âˆ… hatÂ´rozzuk a gyakori elemeket : A, C, D, G, M , ami nem mÂ´s, mint GY . EzutÂ´n elËallÂ´tjuk Â´s a a a oÂ´ Ä± e azonnal meg is hatÂ´rozzuk az (A, C), (A, D), (A, G), (A, M ) pÂ´rok uniÂ´jÂ´t. Ezek kÂ¨zÂ¨l csak az a a oa o u AC, AG halmazok gyakoriak. A kÂ¨vetkezË rekurziÂ´s lÂ´pÂ´sben ennek a kÂ´t halmaznak vesszÂ¨k az o o o e e e u uniÂ´jÂ´t, allÂ´tjuk elË a TID-halmazÂ´t, amely alapjÂ´n kiderÂ¨l, hogy az ACG ritka, Â´s a rekurziÂ´ oa Â´ Ä± o a a u e o

4. FEJEZET. GYAKORI ELEMHALMAZOK Algorithm 3 Eclat Require: T : tranzakciÂ´k sorozata, o min supp : tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b, a a u o for all t âˆˆ T do for all i âˆˆ t do J1 â† J1 âˆª {i} i.szÂ´mlÂ´lÂ´ â† i.szÂ´mlÂ´lÂ´ + 1 a ao a ao end for end for for all j âˆˆ J1 do if j.szÂ´mlÂ´lÂ´ â‰¥ min supp then a ao GY1 â† GY1 âˆª {j} end if end for for i â† 1 to |T | do for all j âˆˆ ti âˆ© GY1 do j.T ID â† j.T ID âˆª {i} end for end for return GY1 âˆª Eclat-segÂ´d(âˆ…, GY1 , min supp) e

70

Algorithm 4 Eclat-segÂ´d e Require: P : preï¬x elemhalmaz. GY P : P preï¬xË , P -nÂ´l eggyel nagyobb mÂ´retË gyakori elemhalmazokbÂ´l alkotott halmazu e e u o P csalÂ´dot GY -vel, a min supp : tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b, a a u o for all gy âˆˆ GY P do for all gy âˆˆ GY P , gy gy do j â† gy âˆª gy j.T ID â† gy.T ID âˆ© gy .T ID if |j.T ID| â‰¥ min supp then GY gy â† GY gy âˆª {j} end if end for if |GY gy | â‰¥ 2 then GY â† GY âˆª GY gy âˆª Eclat-segÂ´d(gy, GY gy , min supp) e else GY â† GY âˆª GY gy end if end for return GY ezen aga vÂ´get Â´r. EzutÂ´n a C elemnek vesszÂ¨k az uniÂ´jÂ´t a sorban utÂ´na kÂ¨vetkezË elemekkel Â´ e e a u oa a o o egyesÂ´vel Â´s Â´gy tovÂ´bb. e e Ä± a

4. FEJEZET. GYAKORI ELEMHALMAZOK

71

LÂ´tnunk kell, hogy az Eclat legalÂ´bb annyi jelÂ¨ltet allÂ´ elË, mint az Apriori. A mÂ´lysÂ´gi a a o Â´ Ä±t o e e bejÂ´rÂ´s miatt ugyanis egy jelÂ¨lt elËallÂ´ asÂ´nÂ´l nem all rendelkezÂ´sÂ¨ nkre az osszes rÂ´szhalmaz. Az aa o oÂ´ Ä±tÂ´ a a Â´ eu Â¨ e elËzË pÂ´lda esetÂ´ben pÂ´ldÂ´ul az {A,C,G} tÂ´mogatottsÂ´gÂ´t hamarabb vizsgÂ´lja, mint a {C,G} o o e e e a a a a a halmazÂ´t, holott ez utÂ´bbi akÂ´r ritka is lehet. Ebben a tekintetben tehÂ´t az Eclat rosszabb e o a a az Apriori-nÂ´l, ugyanis tÂ¨bb lesz a ritka jelÂ¨lt. a o o Az Eclat igazi ereje a jelÂ¨ltek tÂ´mogatottsÂ´gÂ´nak meghatÂ´rozÂ´sÂ´ban van. A jelÂ¨ltek TIDo a a a a aa o halmazainak elËallÂ´ asa egy rendkÂ´ ul egyszerË Â´s nagyon gyors mË velet lesz. Emellett ahogy oÂ´ Ä±tÂ´ Ä±vÂ¨ ue u haladunk egyre mÂ´lyebbre a mÂ´lysÂ´gi bejÂ´rÂ´s sorÂ´n, ugy csÂ¨kken a TID-halmazok mÂ´rete, e e e aa a Â´ o e Â´s ezzel a tÂ´mogatottsÂ´g meghatÂ´rozÂ´sÂ´nak ideje is. Ezzel szemben az Apriori-nÂ´l ahogy e a a a aa a haladunk az egyre nagyobb mÂ´retË jelÂ¨ltek felÂ´, ugy nË a szÂ´fa mÂ´lysÂ´ge, Â´s lesz egyre lassabb e u o e Â´ o o e e e minden egyes jelÂ¨lt tÂ´mogatottsÂ´gÂ´nak meghatÂ´rozÂ´sa. o a a a a a A keresÂ´si tÂ´r bejÂ´rÂ´sa fÂ¨ gg a preï¬x deï¬nÂ´ ojÂ´tÂ´l, amit az elemeken deï¬niÂ´lt rendezÂ´s e e aa u Ä±ciÂ´ a o a e hatÂ´roz meg. Melyek lesznek azok a jelÂ¨ltek, amelyek az Apriori-ban nem lennÂ´nek jelÂ¨ltek a o e o (tehÂ´t biztosan ritkÂ´k), illetve vÂ´rhatÂ´an melyik az a rendezÂ´s, amely a legkevesebb ilyen tulaja a a o e donsÂ´gÂ´ halmazt adja ? Ha egy elemhalmaz jelÂ¨lt az Eclat algoritmusban, de az Apriori-ban a u o nem, akkor van olyan rÂ´szhalmaza, amely ritka. Amennyiben feltÂ´telezzÂ¨ k, hogy az elemek e e u fÂ¨ ggetlenek, akkor azon rÂ´szhalmaz elËfordulÂ´sÂ´nak lesz legkisebb a valÂ´szÂ´ usÂ´ge (Â´s ezzel u e o aa o Ä±nË e e egyÂ¨ tt az esÂ´lye annak, hogy ritka), amely a leggyakoribb elemet nem tartalmazza. A jelÂ¨lt preu e o ï¬xe generÂ´tor, tehÂ´t gyakori, Â´ akkor lesz a legnagyobb esÂ´lye annak, hogy minden rÂ´szhalmaz a a Ä±gy e e gyakori, ha a preï¬x a leggyakoribb elemet nem tartalmazza. Az Eclat algoritmusnÂ´l a legkea vesebb ritka jelÂ¨ltet Â´s Â´ a legjobb futÂ´si idËt tehÂ´t a gyakorisÂ´g szerint nÂ¨vekvË rendezÂ´stËl o e Ä±gy a o a a o o e o vÂ´rhatjuk. a 4.15. pÂ´lda. Ennek a gondolatmenetnek az illusztrÂ´lÂ´sÂ´ra nÂ´zzÂ¨k a kÂ¨vetkezË pÂ´ldÂ´t. Legyenek e aa a e u o o e a gyakori halmazok a kÂ¨vetkezËk : A, B, C, D, AB, AC, BC, AD, ABC, tovÂ´bbÂ´ supp(D) o o a a supp(C) supp(B) supp(A). Amennyiben az Eclat algoritmus a gyakorisÂ´g szerint a csÂ¨kkenË sorrendet hasznÂ´lja, akkor az elËallÂ´tÂ´s sorrendjÂ´ben a kÂ¨vetkezË halmazok lesznek o o a oÂ´ Ä± a e o o jelÂ¨ltek : A, B, C, D, AB, AC, AD, ABC, ABD, ACD, BC, BD, CD. Ugyanez gyakorisÂ´g o a szerint nÂ¨vekvË sorrendnÂ´l D, C, B, A, DC, DB, DA, CB, CA, CBA, BA. Az utÂ´bbi esetben o o e o tehÂ´t nÂ´gy ritka jelÂ¨lt helyett (ABD, ACD, BD, CD) csak kettË lesz (CD, BD). MegjegyezzÂ¨k, a e o o u hogy ez a kÂ´t elemhalmaz az Apriori esetÂ´ben is jelÂ¨lt lesz. A gyakorisÂ´g szerint csÂ¨kkenË esete e o a o o ben egyszer allÂ´tunk elË olyan hÂ´romelemË jelÂ¨ltet, amelynek van olyan kÂ´telemË rÂ´szhalmaza, Â´ Ä± o a u o e u e amelyet nem vizsgÂ´ltunk. Ez a jelÂ¨lt a CBA Â´s a nem megvizsgÂ´lt rÂ´szhalmaz a BA. Mivel a a o e a e rÂ´szhalmaz Â´ppen a leggyakoribb elemeket tÂ´rolja, ezÂ´rt van nagy esÂ´lye annak, hogy gyakori e e a e e (fËleg ha hozzÂ´vesszÂ¨k, hogy a jelÂ¨lt kÂ´t generÂ´tora, CB Â´s CA is gyakori). o a u o e a e JavÂ´ Ä±thatunk az algoritmus hatÂ´konysÂ´gÂ´n, ha nem a jelÂ¨ltek TID-listÂ´it tÂ´roljuk, hanem e a a o a a a jelÂ¨lt Â´s preï¬xe TID-listÂ´jÂ´nak kÂ¨ lÂ¨nbsÂ´gÂ´t. A preï¬x tÂ´mogatottsÂ´gÂ´bÂ´l Â´s a TID listÂ´k o e aa uo e e a a a o e a kÂ¨ lÂ¨nbsÂ´gÂ´bËl a tÂ´mogatottsÂ´g egyÂ´rtelmË en megadhatÂ´. A kÂ¨ lÂ¨nbsÂ´gi listÂ´k akÂ´r nagyobuo e e o a a e u o uo e a a bak is lehetnek az eredeti TID-listÂ´knÂ´l (pÂ´ldÂ´ul, ha a I tÂ´mogatottsÂ´ga kicsi, de a preï¬xÂ´nek a a e a a a e tÂ´mogatottsÂ´ga nagy), Â´ a legjobb megoldÂ´st a kÂ´t technika otvÂ¨zÂ´se adhatja (pÂ´ldÂ´ul 4-nÂ´l a a Ä±gy a e Â¨ o e e a e kisebb elemszÂ´mnÂ´l TID lista, utÂ´na kÂ¨ lÂ¨nbsÂ´gi listÂ´k) [190]. A kÂ¨ lÂ¨nbsÂ´gi listÂ´t hasznÂ´lÂ´ algoa a a uo e a uo e a ao ritmusok nagy fÂ¨lÂ´nnyel verik a tÂ¨bbi algoritmust, amennyiben a bemenet sË rË , Â´s nagy mÂ´retË oe o uu e e u gyakori mintÂ´k is vannak. a

4. FEJEZET. GYAKORI ELEMHALMAZOK

72

4.3.1. kdci 4.3.2. lcm

4.4. Az FP-growth algoritmus
Az FP-growth algoritmus[74] 2 egy mÂ´lysÂ´gi jellegË , rekurzÂ´ algoritmus, a keresÂ´si tÂ´r e e u Ä±v e e bejÂ´rÂ´sa tekintetÂ´ben megegyezik az Eclat-tal. A tÂ´mogatottsÂ´gok meghatÂ´rozÂ´sÂ´t az egyeaa e a a a aa lemË gyakori halmazok meghatÂ´rozÂ´sÂ´val, majd a bemenet szËrÂ´sÂ´vel Â´s vetÂ´tÂ´sÂ´vel valÂ´sÂ´ u a aa u e e e Ä±e e o Ä±tja meg rekurzÂ´ mÂ´don. A bemenet szË rÂ´se azt jelenti, hogy az egyes tranzakciÂ´kbÂ´l tÂ¨rÂ¨ljÂ¨ k Ä±v o ue o o oo u a bennÂ¨ k elËfordulÂ´ ritka elemeket. A T elemhalmaz P elemhalmazra vetÂ´ esÂ´t (jelÂ¨lÂ´sben u o o Ä±tÂ´ e oe T |P ) pedig ugy kapjuk, hogy vesszÂ¨ k a P -t tartalmazÂ´ tranzakciÂ´kat, majd tÂ¨rÂ¨ljÂ¨ k belËlÂ¨ k a Â´ u o o oo u ou P -t. PÂ´ldÂ´ul ACD, BCE, ABCE, BE, ABCE |B = CE, ACE, E, ACE . Az algoritmus pszee a udokÂ´dja a kÂ¨vetkezËkben olvashatÂ´. o o o o Algorithm 5 FP-growth Require: T : tranzakciÂ´k sorozata, o a a u o min supp : tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b, FP-growth-segÂ´d(T , min supp, âˆ…) e A segÂ´deljÂ´rÂ´s harmadik paramÂ´tere (P ) egy preï¬x elemhalmaz, az elsË paramÂ´ter pedig az e aa e o e eredeti bemenet P -re vetÂ´ ese. Az eredeti bemenet âˆ…-ra vetÂ´ ese megegyezik onmagÂ´val. Ä±tÂ´ Ä±tÂ´ Â¨ a Egy rekurziÂ´s lÂ´pÂ´s hÂ´rom fË lÂ´pÂ´sbËl all. ElËszÂ¨r meghatÂ´rozzuk azon elemek o e e a o e e o Â´ o o a tÂ´mogatottsÂ´gÂ´t, amelyek elËfordulnak valamelyik tranzakciÂ´ban (1â€“4. sorok). EzekbËl a a a o o o kivÂ´lasztjuk a gyakoriakat (5â€“7. sorok). EzutÂ´n minden gy gyakori elemet egyesÂ´vel veszÂ¨ nk a a e u (9. sor). MeghatÂ´rozzuk a gy-hez tartozÂ´ vetÂ´ a o Ä±tett bemenetet, majd meghÂ´ Ä±vjuk az algoritmust rekurzÂ´ Ä±van a T |gy bemenetre. TÂ¨rÂ¨lnÂ¨ nk kell a gy elemet a T âˆ— -beli tranzakciÂ´k elemei kÂ¨zÂ¨ l oo u o o u (13. sor) annak Â´rdekÂ´ben, hogy egy jelÂ¨ltet csak egyszer allÂ´ e e o Â´ Ä±tsunk elË. o A jelÂ¨ltek elËallÂ´ asÂ´nak tekintetÂ´ben az FP-growth algoritmus a legegyszerË bb. Ha az I o oÂ´ Ä±tÂ´ a e u elemhalmaz gyakori, akkor a kÂ¨vetkezË rekurziÂ´s szinten azon I âˆªj halmazok lesznek a jelÂ¨ltek, o o o o ahol j az I-re vetÂ´ Ä±tett bemenetben elËfordulÂ´ elem Â´s I âˆª j nem volt jelÂ¨lt korÂ´bban. Tuo o e o a lajdonkÂ´ppen az FP-growth a nagy elemszÂ´mÂ´ jelÂ¨ltek tÂ´mogatottsÂ´gÂ´nak meghatÂ´rozÂ´sÂ´t e a u o a a a a aa visszavezeti hÂ´rom egyszerË mË veletre : egyelemË gyakori elemhalmazok kivÂ´logatÂ´sa, szË rÂ´s Â´s a u u u a a ue e vetÂ´ Ä±tett bemenet elËallÂ´ asa. oÂ´ Ä±tÂ´ A 9. sorban egyesÂ´vel vesszÂ¨ k a gyakori elemeket. Ezt valamilyen rendezÂ´s szerint kell e u e tennÂ¨ nk Â´s ez a rendezÂ´s hatÂ´rozza meg, hogy milyen sorban jÂ´rjuk be a keresÂ´si teret, milyen u e e a a e vetÂ´ Ä±tett bemeneteket allÂ´ Â´ Ä±tunk elË Â´s mely elemhalmazok lesznek a hamis jelÂ¨ltek. Az Eclat-nÂ´l oe o a elmondottak itt is Â´lnek ; vÂ´rhatÂ´an abban az esetben lesz a hamis jelÂ¨ltek szÂ´ma minimÂ´lis, e a o o a a amennyiben a preï¬xben a legritkÂ´bb elemek vannak, azaz a 9. sorban gyakorisÂ´g szerint nÂ¨vekvË a a o o sorban vesszÂ¨ k az elemeket. u Az FP-growth algoritmus szerves rÂ´sze az FP-fa, amelyben a szË rt bemenetet tÂ´roljuk. e u a Az FP-fa segÂ´ egÂ´vel kÂ¨nnyen elËallÂ´ Ä±tsÂ´ e o oÂ´ Ä±thatjuk a vetÂ´ Ä±tett bemeneteket, azokban kÂ¨nnyen mego
Az FP a Frequent Pattern rÂ¨vidÂ´ ese, ami miatt az algoritmust mintanÂ¨velË algoritmusnak is hÂ´ ak. Ez o Ä±tÂ´ o o Ä±vjÂ´ az elnevezÂ´s azonban fÂ´lrevezetË, ugyanis szinte az osszes GYEK algoritmus mintanÂ¨velË abban az Â´rtelemben, e e o Â¨ o o e hogy egy uj jelÂ¨lt a generÂ´torainak egyelemË bËvÂ´ ese, vagy mÂ´s szÂ´val nÂ¨velÂ´se. Az FP-growth sajÂ´tsÂ´ga Â´ o a u o Ä±tÂ´ a o o e a a nem a jelÂ¨ltek elËallÂ´ asa, hanem a jelÂ¨ltek tÂ´mogatottsÂ´g-meghatÂ´rozÂ´sÂ´nak mÂ´dja. o oÂ´ Ä±tÂ´ o a a a aa o
2

4. FEJEZET. GYAKORI ELEMHALMAZOK Algorithm 6 FP-growth-segÂ´d e Require: T : vetÂ´ Ä±tett bemenet, min supp : tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b, a a u o P : preï¬x elemhalmaz, for all t âˆˆ T do for all i âˆˆ t do J1 â† {i} i.szÂ´mlÂ´lÂ´ â† i.szÂ´mlÂ´lÂ´ + 1 a ao a ao end for end for for all j âˆˆ J1 do if j.szÂ´mlÂ´lÂ´ â‰¥ min supp then a ao GY1 â† GY1 âˆª {j} end if end for Ë e T âˆ— â† szurÂ´s(T, GY1 ) for all gy âˆˆ GY1 do T âˆ— |gy â† vetÂ´ Â´s(T âˆ— , gy) Ä±te GY â† GY âˆª {P âˆª {gy}} FP-growth(T âˆ— |gy,min supp, P âˆª {gy}) Â¨ e T âˆ— â† torlÂ´s(T âˆ— , gy) end for return GY

73

hatÂ´rozhatjuk az elemek tÂ´mogatottsÂ´gÂ´t, amibËl elËallÂ´ a a a a o oÂ´ Ä±thatjuk a vetÂ´ Ä±tett, majd szË rt bemeneu tet. Ezt a vetÂ´ Ä±tett Â´s szË rt bemenetet szintÂ´n egy FP-fÂ´ban tÂ´roljuk, amelyet vetÂ´tett FP-fÂ´nak e u e a a Ä± a hÂ´ Ä±vunk. Az FP-fa egy keresztÂ´lekkel Â´s egy fejlÂ´c tÂ´blÂ´val kibËvÂ´ e e e a a o Ä±tett szÂ´fa. Az Â´lek cÂ´ ei gyakori o e Ä±mkÂ´ elemek. Az egyszerË bb leÂ´ as kedvÂ´Â´rt egy (nemgyÂ¨kÂ´r) csÂ´ cs cÂ´ ejÂ´n a csÂ´ csba mutatÂ´ Â´l u Ä±rÂ´ ee o e u Ä±mkÂ´ e u o e cÂ´ ejÂ´t Â´rtjÂ¨ k. Minden csÂ´ cs egy elemhalmazt reprezentÂ´l, amelynek elemei a gyÂ¨kÂ´rbËl a Ä±mkÂ´ e e u u a o e o csÂ´ csig vezetË ut csÂ´ csainak cÂ´ eivel egyeznek meg. Minden csÂ´ cshoz egy szÂ´mlÂ´lÂ´t rendelÂ¨ nk. u oÂ´ u Ä±mkÂ´ u a ao u Ez a szÂ´mlÂ´lÂ´ adja meg, hogy a csÂ´ cs altal reprezentÂ´lt halmaz mennyi bemeneti (vagy vetÂ´ a ao u Â´ a Ä±tett) elemhalmaznak a preï¬xe. Az azonos cÂ´ ejË csÂ´ csok lÂ´ncolt listaszerË en ossze vannak kÂ¨tve Ä±mkÂ´ u u a u Â¨ o keresztirÂ´nyÂ´ Â´lekkel. A lÂ´nc legelsË elemÂ´re mutat a fejlÂ´ctÂ´blÂ´nak az adott elemÂ´hez tartozÂ´ a ue a o e e a a e o mutatÂ´ja. o 4.16. pÂ´lda. TegyÂ¨k fel, hogy bemenetkÂ´nt a ACDF M Q, ABCF M O, BF O, BCKSQ, e u e ACF M Q, CS, DF J, F HI sorozat van adva, Â´s min supp = 3. A gyakori elemek : A, B, C, e F , M , Q, amelyek tÂ´mogatottsÂ´ga rendre 3, 3, 5, 6, 3, 3. Ekkor a szËrt bemenetet ( ACF M Q, a a u ABCF M , BF , BCQ, ACF M Q, C, F , F ) reprezentÂ´lÂ´ FP-fa, amely gyakorisÂ´g szerint ao a csÂ¨kkenË sorrendet (Q M B A C F ) hasznÂ´l, a 4.7. abrÂ´n lÂ´thatÂ´ o o a Â´ a a o Egy FP-fÂ´t hasonlÂ´ mÂ´don Â´pÂ´ unk fel, mint egy szÂ´fÂ´t. KÂ¨ lÂ¨nbsÂ´g, hogy egy I elemhalmaz a o o e Ä±tÂ¨ oa uo e beszÂ´ rÂ´sÂ´nÂ´l nem csak az I-t reprezentÂ´lÂ´ levÂ´lnek a szÂ´mlÂ´lÂ´jÂ´t nÂ¨veljÂ¨ k eggyel, hanem minden uaa a ao e a aoa o u olyan csÂ´ csÂ´t, amelyet Â´rintÂ¨ nk a beszÂ´ rÂ´s sorÂ´n (hiszen ezen csÂ´ csokat reprezentÂ´lÂ´ halmazok u e e u ua a u ao az I preï¬xei). A keresztirÂ´nyÂ´ Â´leket Â´s a fejlÂ´ctÂ´blÂ´t is egyszerË en megkaphatjuk. Legyen a a u e e e a a u fejlÂ´ctÂ´bla mutatÂ´inak kezdeti Â´rtÂ´ke NIL. Amikor beszÂ´ runk egy uj, i cÂ´ ejË csÂ´ csot, akkor e a o e e u Â´ Ä±mkÂ´ u u

4. FEJEZET. GYAKORI ELEMHALMAZOK
elem
F C A B M A Q 3 M 2 Q 2 M 1 B 1 Q 1 3 C 6 B 1

74
8 F C 2 B 1

mutatÃ³

4.7. abra. Az ACF M Q, ABCF M , BF , BCQ, ACF M Q, C, F , F szË rt bemenetet tÂ´rolÂ´ Â´ u a o FP-fa. kÂ´t dolgot kell tennÂ¨ nk. Az uj csÂ´ cs keresztÂ´l mutatÂ´ja felveszi a fejlÂ´ctÂ´bla i-hez tartozÂ´ e u Â´ u e o e a o bejegyzÂ´sÂ´t, majd ezt a bejegyzÂ´st az uj csÂ´ cs cÂ´ ere cserÂ´ljÂ¨ k. Ezzel tulajdonkÂ´ppen olyan ee e Â´ u Ä±mÂ´ e u e lÂ´ncot kÂ´szÂ´ unk, amelyben a csÂ´ csok a beszÂ´ rÂ´si idejÂ¨ k szerint csÂ¨kkenËen vannak rendezve a e Ä±tÂ¨ u ua u o o (az elËszÂ¨r beszÂ´ rt elem van leghÂ´tul) Â´s a lista a fejlÂ´ctÂ´blÂ´ban kezdËdik. o o u a e e a a o A fejlÂ´c mutatÂ´kbÂ´l kiindulva Â´s a keresztÂ´leket kÂ¨vetve megkaphatjuk a vetÂ´ e o o e e o Ä±tett bemenetet Â´s meghatÂ´rozhatjuk a vetÂ´ e a Ä±tett bemenetben gyakori elemeket. Az adott tranzakciÂ´k elËfordulÂ´sa o o a megegyezik a keresztÂ´lek altal mutatott pontok szÂ´mlÂ´lÂ´jÂ´val. Ezek alapjÂ´n a vetÂ´ e Â´ a aoa a Ä±tett bemenetet szË rhetjÂ¨ k Â´s belËle egy ujabb FP-fÂ´t Â´pÂ´ u u e o Â´ a e Ä±thetÂ¨ nk fel. Ezt a fÂ´t vetÂ´ u a Ä±tett FP-fÂ´nak hÂ´ a Ä±vjuk. A kÂ¨vetkezË abrÂ´n az M elemhez tartozÂ´ vetÂ´ o oÂ´ a o Ä±tett Â´s szË rt bemenet FP-fÂ´jÂ´t lÂ´thatjuk (amelyet e u aa a a Q elem feldolgozÂ´sa utÂ´n kapunk). a a
elem F C A 3 A 3 C 3 mutatÃ³ F 3

4.8. abra. pÂ´lda : vetÂ´ Â´ e Ä±tett FP-fa Az FP-fa mÂ´rete â€“ hasonlÂ´an a szÂ´fa mÂ´retÂ´hez â€“ fÂ¨ gg az elemeken deï¬niÂ´lt rendezÂ´stËl. Az e o o e e u a e o FP-growth algoritmus akkor lesz hatÂ´kony, ha a fa elfÂ´r a memÂ´riÂ´ban, ezÂ´rt fontos lenne e e o a e azt a rendezÂ´st hasznÂ´lni, ami vÂ´rhatÂ´an a legkisebb fÂ´t eredmÂ´nyezi. Az Apriori esetÂ´ben e a a o a e e mÂ´r elmondtuk, hogy az a heurisztika, amely az elemek gyakorisÂ´g szerint csÂ¨kkenË rendezÂ´sÂ´t a a o o ee

4. FEJEZET. GYAKORI ELEMHALMAZOK

75

hasznÂ´lja, altalÂ´ban kis mÂ´retË fÂ´t eredmÂ´nyez. a Â´ a e u a e EgyszerË lesz a vetÂ´ u Ä±tett bemenet elËallÂ´ asa Â´s a szË rt bemenetbËl egy elem tÂ¨rlÂ´se, amennyioÂ´ Ä±tÂ´ e u o o e ben a legritkÂ´bb gyakori elemet (gyr ) vesszÂ¨ k elËszÂ¨r. Ez osszhangban all azzal, hogy a pszeua u o o Â¨ Â´ dokÂ´d 9. sorÂ´ban az elemeket gyakorisÂ´g szerint nÂ¨vekvË sorrendben vesszÂ¨ k. A gy r csak levÂ´l o a a o o u e cÂ´ eje lehet. Mivel a fÂ´bÂ´l tÂ¨rÂ¨lni fogjuk a gyr cÂ´ ejË csÂ´ csokat a rekurziÂ´s mË velet utÂ´n Ä±mkÂ´ a o oo Ä±mkÂ´ u u o u a (13. sor), a kÂ¨vetkezË elem is csak levÂ´l cÂ´ eje lesz. o o e Ä±mkÂ´ NÂ´zzÂ¨ k most meg, hogy amennyiben a szË rt bemenet egy FP-fÂ´ban van tÂ´rolva, akkor e u u a a hogyan kaphatjuk meg a gyr elemre vett vetÂ´ esben az elemek tÂ´mogatottsÂ´gÂ´t. A fejlÂ´ctÂ´bla Ä±tÂ´ a a a e a gyr elemÂ´hez tartozÂ´ mutatÂ´bÂ´l kiindulva a keresztÂ´lek alkotta lÂ´ncban pontosan azok a csÂ´ csok e o o o e a u vannak, amelyek gyr -t tartalmazÂ´ bemeneti elemet reprezentÂ´lnak. Az egyes elemhalmazok o a elËfordulÂ´sÂ´t a gyr cÂ´ ejË csÂ´ csokhoz rendelt szÂ´mlÂ´lÂ´ adja meg, az elemeiket pedig a gyÂ¨kÂ´rig o aa Ä±mkÂ´ u u a ao o e felsÂ´tÂ´lva kaphatjuk. A lista utolsÂ´ csÂ´ csÂ´nak feldolgozÂ´sa utÂ´n rendelkezÂ´sÂ¨ nkre allnak a gy r ea o u a a a eu Â´ elemhez tartozÂ´ vetÂ´ o Ä±tett bemenetben valahol elËfordulÂ´ elemek tÂ´mogatottsÂ´gai, amely alapjÂ´n o o a a a kivÂ´logathatjuk a vetÂ´ a Ä±tett bemenetben gyakori elemeket. Ugyanilyen bejÂ´rÂ´ssal kaphatjuk meg a vetÂ´ aa Ä±tett, majd szË rt bemenetet tartalmazÂ´ FP-fÂ´t. A u o a A nyugalom megÂ´v az UV sugaraktÂ´l o o fejlÂ´ctÂ´blÂ´bÂ´l kiindulva vÂ´gigmegyÂ¨ nk a lÂ´ncolt lista â€ e a a o e u a Amerikai kutatÂ´k szerint a stressz o elemein. A csÂ´ cs altal reprezentÂ´lt elemhalmazbÂ´l Â´s az UV-sugÂ´rzÂ´s egyÂ¨ttesen tudu Â´ a o e a a u tÂ¨rÂ¨ljÂ¨ k a ritka elemeket, majd a kapott elemhal- nak csak igazÂ´n veszÂ´lyesek lenni. oo u a e mazt beszÂ´ rjuk az uj FP-fÂ´ba. A kis memÂ´riaigÂ´ny Ez az eredmÂ´ny azt az ismert tÂ´nyt u Â´ a o e e e Â´rdekÂ´ben a gyakorisÂ´g szerint csÂ¨kkenË sorrendet erËsÂ´ti meg, hogy a krÂ´nikus stressz e e a o o o Ä± o hasznÂ´ljuk. Ezt a sorrendet a vetÂ´ a Ä±tett bemenet lecsÂ¨kkenti a bËr vÂ´dekezË kÂ´pessÂ´gÂ´t. o o e o e e e alapjÂ´n allÂ´ a Â´ Ä±tjuk fel (lÂ´vÂ´n az uj fa a vetÂ´ e e Â´ Ä±tett Â´s szË rt Ha tehÂ´t nem idegeskedÂ¨nk, nem kell e u a u bemenetet fogja tÂ´rolni), ami kÂ¨ lÂ¨nbÂ¨zhet az eredeti fÂ´lnÂ¨nk a napsugaraktÂ´l.â€ ForrÂ´s : a uo o e u o a FP-fÂ´ban alkalmazott rendezÂ´stËl. a e o http://www.habostorta.hu/hab/ tomy/tudomany/200507/a_nyugalom_ 4.17. pÂ´lda. Folytassuk az elËzË pÂ´ldÂ´t Â´s allÂ´tsuk megov_az_uvsugaraktol?print=1 e o o e a e Â´ Ä± elË a legritkÂ´bb gyakori elemhez (Q) tartozÂ´ vetÂ´tett o a o Ä± Â´s szËrt bemenetet. A fejlÂ´ctÂ´bla Q elemÂ´hez tartozÂ´ e u e a e o mutatÂ´bÂ´l kiindulva mindÂ¨ssze kÂ´t csÂ´csot lÂ´togatunk o o o e u a meg, ami azt jelenti, hogy a vetÂ´tett bemenet kÂ´t kÂ¨lÂ¨nbÂ¨zË elemhalmazt tartalmaz : az F CAM Ä± e uo o o et kÂ´tszer, a CB-t egyszer. Ez alapjÂ´n a vetÂ´tett bemenetben egyetlen gyakori elem van, C. e a Ä± Ez a rekurziÂ´s ag nem folytatÂ´dik, hanem visszatÂ´r a QC gyakori elemhalmazzal. Az FPo Â´ o e fÂ´bÂ´l tÂ¨rÂ¨lhetjÂ¨k a fejlÂ´ctÂ´bla Q bejegyzÂ´sÂ´hez tartozÂ´ mutatÂ´bÂ´l, keresztirÂ´nyÂ´ Â´lek segÂ´tsÂ´gÂ´vel a o o o u e a e e o o o a ue Ä± e e elÂ´rhetË csÂ´csokat. A kÂ¨vetkezË vizsgÂ´lt elem az M . Az M vetÂ´tett bemenetÂ´ben hÂ´rom gyakoe o u o o a Ä± e a ri elem van, Â´s a vetÂ´tett szËrt bemenet az F CA elemhalmazt tartalmazza hÂ´romszor. Ezt a e Ä± u a vetÂ´tett, szËrt bemenetet egy egyetlen utbÂ´l allÂ´ FP-fa fogja reprezentÂ´lni. A tÂ¨bbi FP-fa ugyanÄ± u Â´ o Â´ o a o ilyen egyszerËen megkaphatÂ´. u o HatÂ´konysÂ´gi szempontbÂ´l rendkÂ´ ul fontos, hogy a rekurziÂ´t ne folytassuk, ha a vizsgÂ´lt e a o Ä±vÂ¨ o a FP-fa egyetlen utbÂ´l all. A rekurziÂ´ helyett kÂ´pezzÂ¨ k inkÂ´bb az ut altal reprezentÂ´lt elemhalmaz Â´ o Â´ o e u a Â´ Â´ a minden rÂ´szhalmazÂ´t. A rÂ´szhalmaz tÂ´mogatottsÂ´gÂ´t annak a csÂ´ csnak a szÂ´mlÂ´lÂ´ja adja meg, e a e a a a u a ao amely a legmÂ´lyebben van a rÂ´szhalmazt meghatÂ´rozÂ´ csÂ´ csok kÂ¨zÂ¨tt. e e a o u o o

4. FEJEZET. GYAKORI ELEMHALMAZOK

76

4.4.1. Az FP-growth* algoritmus
2003 novemberÂ´ben megszerveztÂ´k az elsË gyakori elemhalmaz-kinyerË algoritmusok vere e o o senyÂ´t [67]. BÂ´rki benevezhetett egy altala kÂ´szÂ´ e a Â´ e Ä±tett programot. Ezeket kÂ¨zpontilag teszo teltÂ´k kÂ¨ lÂ¨nbÂ¨zË adatbÂ´zisokon, kÂ¨ lÂ¨nbÂ¨zË tÂ´mogatottsÂ´gi kÂ¨ szÂ¨bÂ¨kkel. Nem volt olyan implee uo o o a uo o o a a u o o mentÂ´ciÂ´, amely minden esetben a legjobban szerepelt, de ki lehet emelni nÂ´hÂ´ny olyat, amelyek a o e a szinte mindig az elsËk kÂ¨zÂ¨tt vÂ´geztek. A szervezËk vÂ´gÂ¨ l annak adtÂ´k a fËdÂ´ (egy sÂ¨rt Â´s o o o e o e u a o Ä±jat o e egy pelenkÂ´t !), aki az FP-growth* algoritmust [69] kÂ¨ ldte be. a u Az FP-growth* algoritmus az FP-growth mÂ´dosÂ´ asa. ElËnye, hogy gyorsabban allÂ´ elË a o Ä±tÂ´ o Â´ Ä±tja o vetÂ´ Ä±tett fÂ´t, amiÂ´rt viszont memÂ´riÂ´val ï¬zet. NÂ´zzÂ¨ k meg, hogy pontosan mi tÂ¨rtÂ´nik egy rekura e o a e u o e ziÂ´s lÂ´pÂ´sben. ElËszÂ¨r ellenËrizzÂ¨ k, hogy a fa egyetlen utbÂ´l all-e. Ha nem, akkor a legritkÂ´bb o e e o o o u Â´ o Â´ a elembËl kiindulva elËallÂ´ o oÂ´ Ä±tjuk a vetÂ´ Ä±tett fÂ´kat, Â´s rekurzÂ´ a e Ä±van meghÂ´ Ä±vjuk az algoritmust. A vetÂ´ Ä±tett fÂ´ban elsË lÂ´pÂ´skÂ´nt meg kell hatÂ´rozni a vetÂ´ a o e e e a Ä±tett bemenetben szereplË elemek tÂ´mogatottsÂ´gÂ´t, o a a a mÂ´sodik lÂ´pÂ´skÂ´nt pedig elËallÂ´ a e e e oÂ´ Ä±tjuk a vetÂ´ Ä±tett FP-fÂ´t. Ez tulajdonkÂ´ppen az aktuÂ´lis fa adott a e a elemhez tartozÂ´ againak kÂ´tszeri bejÂ´rÂ´sÂ´t jelenti. Az elsË bejÂ´rÂ´st lehet meggyorsÂ´ o Â´ e aaa o aa Ä±tani egy segÂ´dtÂ¨mb hasznÂ´latÂ´val. e o a a Az FP-fa Â´pÂ´ esÂ´nÂ´l tÂ¨ltsÂ¨ nk fel egy, kezdetben 0 Â´rtÂ´keket tartalmazÂ´ tÂ¨mbÂ¨t is. Amikor e Ä±tÂ´ e e o u e e o o o beszÂ´ runk egy t (akÂ´r vetÂ´ u a Ä±tett) tranzakciÂ´t az (akÂ´r vetÂ´ o a Ä±tett) FP-fÂ´ba, nÂ¨veljÂ¨ k eggyel a tÂ¨mb a o u o (i, j)-edik cellÂ´jÂ´t, amennyiben az i Â´s j elemei t-nek. A fa felÂ´pÂ´ ese utÂ´n rendelkezÂ´sÂ¨ nkre all aa e e Ä±tÂ´ a eu Â´ egy tÂ¨mb, ami tartalmazza az elempÂ´rok elËfordulÂ´sÂ´t. Ha ezek utÂ´n egy vetÂ´ o a o aa a Ä±tett fÂ´t akarunk a kÂ´szÂ´ e Ä±teni, akkor szÂ¨ ksÂ´gtelen idËt tÂ¨ltenÂ¨ nk az elsË lÂ´pÂ´ssel, hiszen a tÂ¨mb megfelelË sorÂ´bÂ´l u e o o u o e e o o a o Â¨ kÂ¨zvetlen megkaphatjuk a tÂ´mogatottsÂ´gokat. OsszessÂ´gÂ´ben az elsË lÂ´pÂ´s gyorsabb (nem kell o a a e e o e e a fÂ´ban bolyonganunk, csak a tÂ¨mb elemeit kiolvasni), a mÂ´sodik lassabb (a tÂ¨mbÂ¨t is fel kell a o a o o tÂ¨lteni), a memÂ´riafogyasztÂ´s pedig nagyobb (a tÂ¨mb mÂ´retÂ´vel). o o a o e e

4.4.2. Patricia

4.5. Elavult technikÂ´k a
1993 ota kÂ´tszÂ´z kÂ¨rÂ¨ li cikk jelent meg gyakori elemhalmazokat kinyerË algoritmusok Â´ e a ou o tÂ´mÂ´jÂ´ban. LegtÂ¨bb cikk egy uj gyorsÂ´ asi trÂ¨ kkÂ¨t vagy egy ugy mÂ´dszert mutatott be Â´s a e aa o Â´ Ä±tÂ´ u o Â´ o e szerzËi azt allÂ´ ak, hogy az o mÂ´dszerÂ¨ k a legjobb. Ez nyilvÂ´nvalÂ´an kÂ´ptelensÂ´g. A rengetek o Â´ Ä±tjÂ´ Ë o u a o e e mÂ´dszer miatt kialakult kÂ´oszt nÂ´hÂ´ny kutatÂ´ megelÂ´gelte Â´s megrendeztÂ´k 2003-ban Â´s 2004o a e a o e e e e ben a gyakori elemhalmazokat kinyerË algoritmusok versenyÂ´t. SebessÂ´g tekintetÂ´ben az Eclat o e e e Â´s az Fp-growth kÂ¨ lÂ¨nbÂ¨zË mÂ´dosÂ´ asai voltak a legjobbak, a memÂ´ria terÂ´n pedig az Apriori e u o o o o Ä±tÂ´ o e volt kiemelkedË. o A tovÂ´bbiakban felsoroljuk azokat az algoritmusokat, amelyeket mai napig megtalÂ´lhatunk a a kÂ¨ lÂ¨nbÂ¨zË adatbÂ´nyÂ´szati tankÂ¨nyvekben, a legtÂ¨bb kutatÂ´ altal ismertek, de a versenyek sorÂ´n uo o o a a o o oÂ´ a egyik sem bizonyÂ´ Ä±totta be, hogy befÂ´rne az elit algoritmusok kÂ¨rÂ´be. A tanulmÂ´ny korÂ´bbi e oe a a verziÂ´iban ezek az elavult mÂ´dszerek leÂ´ asai is ott szerepeltek az Apriori, Eclat Â´s Fp-growth o o Ä±rÂ´ e mellett, mÂ´ra azonban csak a kÂ¨vetkezË listÂ´ban kapnak helyet : SETM [77], APRIORI-TID a o o a [7], APRIORI-HYBRID [7], DHP [129], DIC, PatrÂ´ Ä±cia, Tree projection, DF-apriori [136],

4. FEJEZET. GYAKORI ELEMHALMAZOK

77

4.6. MintavÂ´telezË algoritmus elemzÂ´se e o e
Az egyszerË mintavÂ´telezË algoritmust bemutattuk az 5.5.4 rÂ´szben. Itt azt vizsgÂ´ljuk, hogy u e o e a mekkora mintÂ´t cÂ´lszerË venni annak Â´rdekÂ´ben, hogy az algoritmus minden gyakori elemhala e u e e mazt megtalÂ´ljon. a

4.6.1. MintavÂ´tel nagysÂ´ga e a
MintavÂ´telezÂ´sen alapulÂ´ eljÂ´rÂ´soknÂ´l a minta mÂ´rete kÂ¨zponti kÂ´rdÂ´s. Ha a minta tÂ´ l kie e o aa a e o e e u csi, akkor a mintÂ´bÂ´l nyert informÂ´ciÂ´ tÂ´vol allhat a teljes adatbÂ´zisban talÂ´lhatÂ´ globÂ´lis a o a o a Â´ a a o a helyzettËlâ€. Mivel fÂ¨lÂ¨slegesen nagy minta lassÂ´ algoritmusokat eredmÂ´nyez, ezÂ´rt fontos egy o oo u e e â€ kicsi, de mÂ´r pontos kÂ´pet adÂ´ mintamÂ´ret meghatÂ´rozÂ´sa. A 3.1.3 rÂ´szben megadtuk, hogy a e o e a a e mekkora mintÂ´t kell vÂ´lasztani, ha azt akarjuk, hogy a relatÂ´ gyakorisÂ´gok megegyezzenek az a a Ä±v a elËfordulÂ´sok valÂ´szÂ´ usÂ´gÂ´vel. HasznÂ´ljuk most is a A 3.1.3 rÂ´szben bevezetett elnevezÂ´seket o a o Ä±nË e e a e e Â´s jelÂ¨lÂ´seket. e oe NÂ´zzÂ¨ k, hogy mennyivel kell csÂ¨kkenteni a gyakorisÂ´gi kÂ¨ szÂ¨bÂ¨t (min f req ) ahhoz, hogy e u o a u o o kicsi legyen annak valÂ´szÂ´ usÂ´ge, hogy tetszËleges gyakori elem mintÂ´hoz tartozÂ´ gyakorisÂ´ga o Ä±nË e o a o a kisebb a csÂ¨kkentett kÂ¨ szÂ¨bnÂ´l, tehÂ´t : o u o e a P(gyakorisÂ´g(x, m) < min f req ) = P a Y < min f req m

egy adott kÂ¨ szÂ¨bnÂ´l (Î´ ) kisebb kell legyen Â´s tudjuk, hogy u o e e p > min f req A fenti egyenletre alkalmazva a Hoeï¬€ding-korlÂ´tot azt kapjuk, hogy a P P P Y < min f req = m

Y âˆ’ p < min f req âˆ’ p < m

Y âˆ’ p < min f req âˆ’ min f req m â‰¤ eâˆ’2(min freqâ€™-min freq)
2m

tehÂ´t ahhoz, hogy a hibÂ´zÂ´s valÂ´szÂ´ usÂ´ge kisebb legyen Î´ -nÂ´l teljesÂ¨ lnie kell, hogy a a a o Ä±nË e e u min f req < min f req âˆ’ 1 1 ln 2m Î´

A 4.2 tÂ´blÂ´zat azt mutatja, hogy rÂ¨gzÂ´ a a o Ä±tett hibakorlÂ´t mellett (Î´ = 0.001) adott mintamÂ´rethez a e mennyi legyen a csÂ¨kkentett kÂ¨ szÂ¨b. o u o

4. FEJEZET. GYAKORI ELEMHALMAZOK Minta mÂ´rete e 40000 60000 0.17 0.18 0.38 0.40 0.61 0.63 0.83 0.86 1.30 1.33 1.77 1.81

78

min freq (%) 0.25 0.50 0.75 1.00 1.50 2.00

20000 0.13 0.34 0.55 0.77 1.22 1.67

80000 0.19 0.41 0.65 0.88 1.35 1.84

4.2. tÂ´blÂ´zat. A kÂ¨ szÂ¨b csÂ¨kkentÂ´se adott mintamÂ´retekre rÂ¨gzÂ´ a a u o o e e o Ä±tett Î´ = 0.001 mellett

4.7. Elemhalmazok Galois lezÂ´rja a
Egy minta zÂ´rt, ha nincs vele egyezË tÂ´mogatottsÂ´gÂ´ bËvebb minta. EsetÂ¨ nkben ez azt a o a a u o u jelenti, hogy ha egy elemhalmaz nem zÂ´rt, akkor pontosan azokban a bemeneti elemekben a fordul elË, amelyekben a lezÂ´rtja. Ha pÂ´ldÂ´ul az A elem lezÂ´rtja az AB halmaz, akkor tudjuk, o a e a a hogy az A halmaz soha nem fordul elË a bemeneti elemekben a B elem nÂ´lkÂ¨ l. o e u Ebben a rÂ´szben a lezÂ´rt tovÂ´bbi tulajdonsÂ´gait fogjuk megismerni. AzÂ´rt illetjÂ¨ k a lezÂ´rtat e a a a e u a a Galois jelzËvel, mert teljesÂ¨ lni fog a lezÂ´rÂ´s operÂ´torra a galois elmÂ´letbËl jÂ´l ismert 3 tulajo u aa a e o o donsÂ´g. MielËtt erre rÂ´tÂ´rÂ¨ nk nÂ´zzÂ¨ k meg, hogy az elemhalmazokat tartalmazÂ´ mintakÂ¨rnyezet a o aeu e u o o egyÂ´rtelmË -e a zÂ´rtsÂ´gra nÂ´zve. e u a a e 4.18. lemma. Az elemhalmazokat tartalmazÂ´ mintakÂ¨rnyezet a zÂ´rtsÂ´gra nÂ´zve egyÂ´rtelmË. o o a a e e u BizonyÂ´tÂ´s: Indirekt tegyÂ¨ k fel, hogy az I elemhalmaznak lÂ´tezik kÂ´t lezÂ´rtja, azaz lÂ´tezik I , I Ä±a u e e a e kÂ¨ lÂ¨nbÂ¨zË elemhalmazok, amelyekre a minimalitÂ´s mellett teljesÂ¨ lnek a I âŠ‚ I , I âŠ‚ I , |I | = uo o o a u = |I |, supp(I ) = supp(I ) feltÂ´telek. Ez azt jelenti, ahogy azon tranzakciÂ´k, amelyek I-t tare o talmazzÂ´k, tartalmazzÂ´k az I \ I Â´s az I \ I halmazokat is. De ebbËl kÂ¨vetkezik, hogy ezek a a a e o o tranzakciÂ´k I âˆª I is tartalmazzÂ´k, azaz I âˆª I is lezÂ´rtja I-nek, Â´ sem I sem I nem lehet o a a Ä±gy minimÂ´lis. a

A fentiek miatt a gyakori zÂ´rt elemhalmazokbÂ´l Â´s azok tÂ´mogatottsÂ´gaibÂ´l egyÂ´rtelmË en a o e a a o e u meg tudjuk hatÂ´rozni a gyakori elemhalmazokat Â´s azok tÂ´mogatottsÂ´gÂ´t. A gyakori zÂ´rt mintÂ´k a e a a a a a tehÂ´t a zÂ´rt mintÂ´k egy vesztesÂ´gmentes tÂ¨mÂ¨rÂ´ ese, Â´rdemes csak ezeket meghatÂ´rozni Â´s a a a e o o Ä±tÂ´ e a e eltÂ´rolni [130â€“132, 193]. a

4.7.1. A zÂ´rt elemhalmazok fogalma a
A zÂ´rt minta fogalmÂ´t mÂ´r bevezettÂ¨ k az 5.2.1 rÂ´szben. IsmÂ´teljÂ¨ k meg ugy, hogy a deï¬nÂ´ o a a a u e e u Â´ Ä±ciÂ´ elemhalmazokra vonatkozzon : Az I elemhalmaz zÂ´rt, amennyiben nincs nÂ´la bËvebb halmaz, a a o amelynek tÂ´mogatottsÂ´ga megegyezik I tÂ´mogatottsÂ´gÂ´val. JelÂ¨ljÂ¨ k cover-rel azt a fÂ¨ ggvÂ´nyt, a a a a a o u u e amely egy elemhalmazhoz az azt tartalmazÂ´ tranzakciÂ´k halmazÂ´t adja meg. o o a A zÂ´rt elemhalmazokra adhatunk egy mÂ´sik deï¬nÂ´ ot is. VezessÂ¨ k, be a cover fÂ¨ ggvÂ´nyt : a a Ä±ciÂ´ u u e

4. FEJEZET. GYAKORI ELEMHALMAZOK

79

4.19. deï¬nÂ´ o. Legyen T = t1 , . . . , tn tranzakciÂ´k sorozata, amelynek minden eleme az I-nek Ä±ciÂ´ o egy rÂ´szhalmaza. Deï¬niÂ´ljuk a cover : 2N â†’ 2I fÂ¨ggvÂ´nyt a kÂ¨vetkezËkÂ´ppen e a u e o o e cover (T ) = {i âˆˆ I|âˆ€j âˆˆ T, i âˆˆ cover(tj )} = cover(t)
tâˆˆT

TehÂ´t cover (T ) megadja azon kÂ¨zÂ¨s elemeket, amelyeket minden olyan tranzakciÂ´ tartalmaz, a o o o amelynek sorszÂ´ma T -beli. a A (cover, cover ) fÂ¨ ggvÂ´nypÂ´rt az T Â´s I hatvÂ´nyhalmazai kÂ¨zÂ¨tti Galois-kapcsolatnak u e a e a o o hÂ´ Ä±vjuk. Legyen a pÂ´ldaadatbÂ´zisunk a kÂ¨vetkezË : ACD, BCE, ABCE, BE, ABCE . Ekkor : e a o o cover({A, C}) = {1,3,5}, cover(âˆ…) = {1,2,3,4,5}), cover ({1,2,3}) = {C}, cover ({1,4}) = âˆ…). Az alÂ´bbi tulajdonsÂ´gok igazak tetszËleges t, t1 , t2 âŠ† T Â´s I, I1 , I2 âŠ† I halmazokra : a a o e (1) I1 âŠ† I2 â‡’ cover(I1 ) âŠ‡ cover(I2 ) (1 ) T1 âŠ† T2 â‡’ cover (T1 ) âŠ‡ cover (T2 ) (2) T âŠ† cover(I) â‡â‡’ I âŠ† cover (T ) 4.20. deï¬nÂ´ o. A h = cover â—¦ cover (vagy h = cover â—¦ cover ) operÂ´tort Galois-lezÂ´rÂ´s Ä±ciÂ´ a a a operÂ´tornak hÂ´vjuk. a Ä± BelÂ´thatÂ´, hogy tetszËleges halmaznak a lezÂ´rtja tartalmazza magÂ´t a halmazt, tovÂ´bbÂ´ a a o o a a a a Galois-lezÂ´rÂ´s operÂ´tora idempotens Â´s monoton, tehÂ´t aa a e a (I) I âŠ† h(I) (I ) T âŠ† h (T ) (II) h(h(I)) = h(I) (II ) h (h (T )) = h (T ) (II) I1 âŠ† I2 â‡’ h(I1 ) âŠ† h(I2 ) (III ) T1 âŠ† T2 â‡’ h (T1 ) âŠ† h (T2 ) 4.21. deï¬nÂ´ o (zÂ´rt elemhalmaz). I elemhalmaz zÂ´rt, amennyiben I = h(I). Ä±ciÂ´ a a TetszËleges elemhalmazt (I) tartalmazÂ´ minimÂ´lis elemszÂ´mÂ´ zÂ´rt elemhalmazt a lezÂ´rÂ´s o o a a u a aa operÂ´tor alkalmazÂ´sÂ´val kaphatunk meg ; ez Â´ppen h(I) lesz. A pÂ´ldaadatbÂ´zisban talÂ´lhatÂ´ a aa e e a a o zÂ´rt elemhalmazok alÂ´bbiak : a a zÂ´rt elemhalmazok a {âˆ…}, {C}, {B,E}, {B,C,E}, {A,C}, {A,B,C,E}, {A,C,D}, {A,B,C,D,E} AdÂ´sok vagyunk mÂ´g annak bizonyÂ´ asÂ´val, hogy a kÂ´t deï¬nÂ´ o ekvivalens, azaz, o e Ä±tÂ´ a e Ä±ciÂ´ ha h(C) = C, akkor C-nÂ´l nincs bËvebb halmaz, amely tÂ´mogatottsÂ´ga megegyezne C e o a a tÂ´mogatottsÂ´gÂ´val, illetve fordÂ´ a a a Ä±tva. A kÂ´t allÂ´ as kÂ¨zvetlen adÂ´dik a kÂ¨vetkezË tÂ´telbËl. e Â´ Ä±tÂ´ o o o o e o 4.22. tÂ´tel. Minden elem tÂ´mogatottsÂ´ga megegyezik lezÂ´rtjÂ´nak tÂ´mogatottsÂ´gÂ´val, tehÂ´t e a a a a a a a a supp(I) = supp(h(I))

4. FEJEZET. GYAKORI ELEMHALMAZOK BizonyÂ´tÂ´s: A lezÂ´rÂ´s (1) tulajdonsÂ´ga miatt supp(I) â‰¥ supp(h(I)). Ugyanakkor Ä±a aa a supp(h(I)) = |cover(h(I))| = |cover(cover (cover(I)))| = |h (cover(I))| â‰¤ supp(I) a (IIIâ€™) miatt, amibËl kÂ¨vetkezik az egyenlËsÂ´g. o o oe

80

Az 5.4.2 rÂ´szben bemutattuk, hogy a gyakori mintÂ´kbÂ´l hogyan vÂ´laszthatjuk ki a zÂ´rtakat, e a o a a illetve az APRIOR-CLOSE algoritmust, ami mÂ´r eleve csak a gyakori zÂ´rt mintÂ´kat allÂ´ elË. a a a Â´ Ä±tja o Az APRIOR-CLOSE algoritmusnÂ´l lÂ´teznek gyorsabb algoritmusok (CHARM [192], CLOSET a e [134], CLOSET+ [179], MAFIA [29]), ezek ismertetÂ´sÂ´tËl eltekintÂ¨ nk. eeo u

4.8. KÂ´nyszerek kezelÂ´se e e
Ebben a rÂ´szben azt a speciÂ´lis feladatot nÂ´zzÂ¨ k meg, hogy mikÂ´nt lehet csÂ¨kkenteni a bee a e u e o menetet, ha az anti-monoton kÂ´nyszerek mellett monoton kÂ´nyszereket is megadunk. MÂ´r az e e a altalÂ´nos mintakeresÂ´snÂ´l megtÂ´rgyaltuk, hogy tetszËleges anti-monoton kÂ´nyszer kÂ¨nnyË szerrel Â´ a e e a o e o u beÂ´pÂ´ e Ä±thetË az APRIORI algoritmusba. Most azt nÂ´zzÂ¨ k meg, hogy a monoton kÂ´nyszerek hoo e u e gyan alkalmazhatÂ´k a bemeneti tÂ´r csÂ¨kkentÂ´sÂ´re. o e o ee Adott egy bemeneti sorozat, minimÂ´lis tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b Â´s monoton kÂ´nyszerek C hala a a u o e e maza. Feladat a bemenet csÂ¨kkentÂ´se oly mÂ´don, hogy bÂ´rmely teljes algoritmus a csÂ¨kkentett o e o a o bemeneten is teljes legyen.

4.8.1. ExAnte
Az ExAnte [102] algoritmus kÂ´tfÂ´le lÂ´pÂ´st ismÂ´tel egÂ´szen addig, amÂ´ ez valamilyen e e e e e e Ä±g vÂ´ltozÂ´st jelent. Az elsË lÂ´pÂ´s azon tranzakciÂ´k tÂ¨rlÂ´se, amelyek nem adnak igaz Â´rtÂ´ket minden a a o e e o o e e e C-beli kÂ´nyszeren. Az ilyen tranzakciÂ´k csak olyan mintÂ´k tÂ´mogatottsÂ´gÂ´t nÂ¨velik, amelyek e o a a a a o ugysem elÂ´gÂ´ ki a kÂ´nyszereket (ez kÂ¨vetkezik a kÂ´nyszerek monoton tulajdonsÂ´gÂ´bÂ´l). A Â´ e Ä±tik e o e a a o mÂ´sodik lÂ´pÂ´sben a bemenet elemei kÂ¨zÂ¨ l tÂ¨rÂ¨ljÂ¨ k a ritkÂ´kat, hiszen azok ugysem jÂ´tszanak a e e o u oo u a Â´ a szerepet a tÂ´mogatottsÂ´g meghatÂ´rozÂ´sÂ´nÂ´l. a a a aa a LÂ´tnunk kell, hogy az elsË lÂ´pÂ´sbeli tÂ¨rlÂ´s uj ritka elemekhez vezethet, ami csÂ¨kkenti bizonyos a o e e o e Â´ o tranzakciÂ´k mÂ´retÂ´t, ami viszont ahhoz vezethet, hogy ezek ujabb kÂ´nyszereket fognak sÂ´rteni. o e e Â´ e e Jogos tehÂ´t, hogy a kÂ´t mÂ´dszert felvÂ´ltva futtassuk addig, amÂ´ van valami vÂ´ltozÂ´s. Az a e o a Ä±g a a algoritmus a bemenet csÂ¨kkentÂ´se mellett elËallÂ´ azon gyakori elemeket, amelyekre minden o e oÂ´ Ä±tja kÂ´nyszer teljesÂ¨ l. Gyakori elemhalmaz csak ezekbËl az elemekbËl Â´pÂ¨ lhetnek fel. e u o o e u NÂ´zzÂ¨ nk egy pÂ´ldÂ´t. Az adatbÂ´zisban 8 elem Â´s 9 tranzakciÂ´ van. Legyen min supp = 4. e u e a a e o Minden elemnek van egy ara. Az egyetlen kÂ´nyszer (sum(i.Â´r) > 44) szerint a halmazban Â´ e a talÂ´lhatÂ´ termÂ´kek arÂ´nak osszege 44-nÂ´l nagyobb legyen. A kÂ¨vetkezË kÂ´t tÂ´blÂ´zat adja meg a o e Â´a Â¨ e o o e a a az adatokat.

4. FEJEZET. GYAKORI ELEMHALMAZOK

81

termÂ´k e A B C D E F G H

ar Â´ 5 8 14 30 20 15 6 12

TID 1 2 3 4 5 6 7 8 9

tranzakciÂ´ o B, C, D, G A, B, D, E B, C, D, G, H A, E, G C, D, F, G A, B, C, D, E A, B, D, F, G, H B, C, D B, E, F, G

ar osszeg Â´ Â¨ 58 63 70 31 65 77 76 52 49

Az elsË vÂ´gigolvasÂ´s sorÂ´n meghatÂ´rozzuk az elemek tÂ´mogatottsÂ´gÂ´t azon tranzakciÂ´kban, o e a a a a a a o amelyek kielÂ´gÂ´ a kÂ´nyszert (a 4-es kivÂ´telÂ´vel mindegyik). EzutÂ´n tÂ¨rÂ¨ljÂ¨ k a ritka elemeket e Ä±tik e e e a oo u (A, E, F, H). IsmÂ´t vÂ´gigmegyÂ¨ nk az adatbÂ´zison, de most mÂ´r ezeket az elemeket nem nÂ´zzÂ¨ k, e e u a a e u aminek kÂ¨vetkeztÂ´ben ujabb tranzakciÂ´k esnek ki (2,7,9). A kiesett tranzakciÂ´k miatt csÂ¨kkeno e Â´ o o o nek a tÂ´mogatottsÂ´gok, Â´ ujabb elem lesz ritka (G). Ezt Â´ folytatjuk, amÂ´ van vÂ´ltozÂ´s. A a a Ä±gy Â´ Ä±gy Ä±g a a 4. vÂ´gigolvasÂ´s utÂ´n azt kapjuk, hogy csak az 1,3,6,8 tranzakciÂ´kat Â´s a B, C, D elemeket kell e a a o e ï¬gyelembe venni.

4.9. TÂ¨bbszÂ¨rÂ¨s tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b o o o a a u o
Az univerzÂ´lis tÂ´mogatottsÂ´gi kÂ¨ szÂ¨bnek vannak elËnyei Â´s hÂ´trÂ´nyai. ElËnye, hogy fela a a u o o e a a o hasznÂ´lhatjuk azt a tÂ´nyt, hogy gyakori minta minden rÂ´szmintÂ´ja gyakori, ami alapjÂ´n a e e a a hatÂ´kony algoritmusokat adhatunk. HÂ´trÂ´nya, hogy a ritkÂ´n elËfordulÂ´, de mÂ´gis fontos e a a a o o e mintÂ´kat csak akkor tudjuk kinyerni, ha a tÂ´mogatottsÂ´gi kÂ¨ szÂ¨bÂ¨t alacsonyra allÂ´ a a a u o o Â´ Ä±tjuk. Ez viszont rengeteg gyakori mintÂ´hoz fog vezetni, ha egyÂ´ltalÂ´n le tud futni az algoritmus. a a a KÂ¨ lÂ¨nbÂ¨zË tÂ´mogatottsÂ´gi kÂ¨ szÂ¨bÂ¨k (vagy mÂ´skÂ´nt tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b fÂ¨ ggvÂ´nyÂ´nek) uo o o a a u o o a e a a u o u e e megadÂ´sÂ´val ez a problÂ´ma elkerÂ¨ lhetË : a nem lÂ´nyeges mintÂ´knak legyen nagy a kÂ¨ szÂ¨bÂ¨ k, a aa e u o e a u o u lÂ´nyegesebbeknek legyen alacsony. e Egyedi tÂ´mogatottsÂ´gi kÂ¨ szÂ¨bÂ¨k bevezetÂ´sÂ´vel azonban felborul eddigi kÂ´nyelmes vilÂ´gunk, a a u o o ee e a amelyet az biztosÂ´ Ä±tott, hogy nem lehet egy minta gyakori, ha van ritka rÂ´szmintÂ´ja. A rÂ´szmintÂ´k e a e a tÂ´mogatottsÂ´gi kÂ¨ szÂ¨be ugyanis nagyobb lehet, Â´ hiÂ´ba nagyobb a tÂ´mogatottsÂ´ga, ettËl mÂ´g a a u o Ä±gy a a a o e lehet ritka. A kÂ¨vetkezËkben bemutatjuk a legelsË Â´s legegyszerË bb tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b o o o e u a a u o fÂ¨ ggvÂ´nyt, majd bemutatjuk az MSApriori algoritmust, amely ezt hatÂ´konyan kezeli. u e e

4.9.1. MSApriori algoritmus
KÂ´zzel megadni a 2I minden elemÂ´nek tÂ´mogatottsÂ´gi kÂ¨ szÂ¨bÂ´t fÂ´radsÂ´gos, sËt nagy |I| e e a a u o e a a o esetÂ´n kivitelezhetetlen feladat. Az MSApriori algoritmusnÂ´l csak az egyelemË elemhalmae a u zok tÂ´mogatottsÂ´gi kÂ¨ szÂ¨bÂ´t lehet megadni. JelÂ¨ljÂ¨ k az i elem kÂ¨ szÂ¨bÂ´t M IS(i)-vel. Az I a a u o e o u u o e elemhalmaz tÂ´mogatottsÂ´gi kÂ¨ szÂ¨be legyen a legkisebb tÂ´mogatottsÂ´gi kÂ¨ szÂ¨bbel rendelkezË a a u o a a u o o elemÂ´nek tÂ´mogatottsÂ´gi kÂ¨ szÂ¨be (M IS(I) = miniâˆˆI {M IS(i)}). Akkor gyakori az I halmaz, ha e a a u o tÂ´mogatottsÂ´ga nagyobb vagy egyenlË M IS(I)-nÂ´l. a a o e A deï¬nÂ´ obÂ´l kÂ¨vetkezik, hogy tÂ´nyleg nem mondhatjuk, hogy gyakori minta minden Ä±ciÂ´ o o e rÂ´szmintÂ´ja gyakori. PÂ´ldÂ´ul az ABC elemhalmaz BC rÂ´szhalmazÂ´nak nagyobb lehet MIS e a e a e a

4. FEJEZET. GYAKORI ELEMHALMAZOK

82

Â´rtÂ´ke. Ha a feladat megoldÂ´sÂ´ra az APRIORI algoritmust hasznÂ´ljuk ugy, hogy csak a gyakori e e aa a Â´ elemhalmazok kivÂ´lasztÂ´sÂ´nak mÂ´djÂ´t mÂ´dosÂ´ a aa o a o Ä±tjuk (min supp cserÂ´je M IS(I)-re), akkor nem e garantÂ´lt, hogy jÂ´ megoldÂ´st kapunk. Ha pÂ´ldÂ´ul a BC ritka, akkor az ABC halmaz nem lenne a o a e a a jelÂ¨ltek kÂ¨zÂ¨tt annak ellenÂ´re, hogy akÂ´r gyakori is lehet. o o o e a SzerencsÂ´re a problÂ´ma kÂ¨nnyen orvosolhatÂ´. Csak e e o o azt kell Â´szrevennÂ¨ nk, hogy mi okozhatja a hibÂ´t. Az e u a VaksÂ´got okoz a nyakkendË a o â€ altalÂ´nossÂ´g megsÂ´rtÂ´se nÂ´lkÂ¨ l feltehetjÂ¨ k, hogy az ele- A kutatÂ´s szerint a szorosan Â´ a a e e e u u a mek MIS Â´rtÂ´kÂ¨ k alapjÂ´n nÂ¨vekvË sorba van rendez- megkÂ¨tÂ¨tt nyakkendË csÂ¨kkenthee e u a o o oo o o ve. A MIS deï¬nÂ´ ojÂ´bÂ´l kÂ¨vetkezik, hogy tetszËleges - ti a nyaki vÂ´na hatÂ´konysÂ´gÂ´t, Ä±ciÂ´ a o o o e e a a elemË I = {i1 , . . . , i } halmaz âˆ’ 1 darab ( âˆ’ 1)-elemË ezÂ´ltal a szem vÂ´rellÂ´tÂ´sÂ´t, u u a e aa a rÂ´szhalmazÂ´nak MIS Â´rtÂ´ke megegyezik I MIS Â´rtÂ´kÂ´vel, Â´s e a e e e e e e hÂ´lyog a kialakulÂ´sÂ´hoz, a a ami M IS(i1 ). Ezeknek a rÂ´szhalmazoknak tehÂ´t gyakorinak legsÂ´lyosabb e a u esetben pedig kell lenniÂ¨ k, hiszen a tÂ´mogatottsÂ´g monotonsÂ´ga most is rÂ´szleges vagy teljes vaksÂ´ghoz u a a a e a fennÂ´ll. Az egyetlen rÂ´szhalmaz, amely lehet ritka, az I leg- vezethet. MÂ´g veszÂ´lyesebb a a e e e elsË elemÂ´t nem tartalmazÂ´ rÂ´szhalmaz. Ezt a rÂ´szhalmazt helyzet a vÂ´kony nyakÂ´ emberek o e o e e e u tehÂ´t ne vizsgÂ´ljuk a jelÂ¨lt elËallÂ´ as mÂ´sodik lÂ´pÂ´se sorÂ´n. esetÂ´ben, mert az o vÂ´nÂ´juk a a o oÂ´ Ä±tÂ´ a e e a e Ë e a KivÂ´tel ez alÂ´l azon eset, amikor a mÂ´sodik elem MIS Â´rtÂ´ke Â´rzÂ´kenyebb â€“ mutatnak rÂ´ az e o a e e e e a megegyezik az elsË elem MIS Â´rtÂ´kÂ´vel, mert ekkor mÂ´g en- orvosok.â€ ForrÂ´s : http://pvg. o e e e e a nek a rÂ´szhalmaznak is gyakorinak kell lennie. e uw.hu/cikk/nyakkendo.html Amennyiben > 2, akkor biztos, hogy a generÂ´torok a egyike sem egyezik meg a legkisebb elemet nem tartalmazÂ´ o rÂ´szhalmazzal ( >2 esetÂ´ben ugyanis a generÂ´torok ( âˆ’2)-elemË preï¬xei megegyeznek, amelyek e e a u biztos, hogy tartalmazzÂ´k a jelÂ¨lt elsË elemÂ´t). Ez pedig garantÂ´lja, hogy az algoritmus teljes, a o o e a amennyiben az osszes gyakori elempÂ´rt megtalÂ´ltuk. NÂ´zzÂ¨ k meg most az egy- Â´s kÂ´telemË Â¨ a a e u e e u jelÂ¨ltek esetÂ´t. o e Gyakori elemek meghatÂ´rozÂ´sÂ´nÂ´l a szokÂ´sos eljÂ´rÂ´st kÂ¨vetjÂ¨ k : minden elem jelÂ¨lt. a aa a a aa o u o ElempÂ´rok esetÂ´ben azonban nem allÂ´ a e Â´ Ä±thatjuk, hogy egy pÂ´r akkor jelÂ¨lt, ha mindkÂ´t eleme a o e gyakori. PÂ´ldÂ´ul az AB pÂ´r lehet gyakori akkor is, ha az A ritka. Ha ugyanis B-nek MIS Â´rtÂ´ke e a a e e kisebb A-nak MIS Â´rtÂ´kÂ´nÂ´l, akkor az AB-nek a MIS Â´rtÂ´ke megegyezik B-nek a MIS Â´rtÂ´kÂ´vel, e e e e e e e e e Â´ AB lehet gyakori. SzerencsÂ´re szÂ¨ ksÂ´gtelen az osszes elemet ï¬gyelembe venni. Ha pÂ´ldÂ´ul az Ä±gy e u e Â¨ e a A elem ritka Â´s az A MIS Â´rtÂ´ke a legkisebb, akkor a tÂ´mogatottsÂ´g monotonsÂ´gÂ´bÂ´l kÂ¨vetkezik, e e e a a a a o o hogy az A-t tartalmazÂ´ halmazok ritkÂ´k. Ha tehÂ´t MIS Â´rtÂ´k szerint nÂ¨vekvËen vannak reno a a e e o o dezve az elemek, akkor a legkisebbËl kiindulva keressÂ¨ k meg az elsË gyakori elemet. Az osszes o u o Â¨ utÂ´na kÂ¨vetkezËt ï¬gyelembe kell venni a jelÂ¨ltpÂ´rok elËallÂ´ asÂ´nÂ´l akkor is, ha valamelyik ritka. a o o o a oÂ´ Ä±tÂ´ a a

5. fejezet Gyakori mintÂ´k kinyerÂ´se a e
A fejlett tÂ´rsadalmakra jellemzË, hogy szÂ´mos, a mindennapi Â´letÂ¨ nk sorÂ´n gyakran hasznÂ´lt a o a e u a a termÂ´ket Â´s szolgÂ´ltatÂ´st nÂ´lkÂ¨ lÂ¨zhetetlennek tartunk. MinÂ´l sokszÂ´ ubb a felhasznÂ´lÂ´i csoport, e e a a e uo e Ä±nË ao annÂ´l nehezebb egy olyan uzenetet eljuttatni rÂ´szÂ¨ kre, ami mindenki szÂ´mÂ´ra egyÂ´rtelmË , a Â¨ e u a a e u am ha valakinek ez sikerÂ¨ l, az nagy haszonnal jÂ´rhat, hiszen pÂ´r szÂ´zalÂ´kpontos nÂ¨vekedÂ´s Â´ u a a a e o e is szigniï¬kÂ´ns a nagy volumenben Â´rtÂ´kesÂ´ a e e Ä±tett termÂ´keknÂ´l. A piaci stratÂ´giÂ´k kialakÂ´ asÂ´nÂ´l is e e e a Ä±tÂ´ a a elsËsorban a sokasÂ´gra, illetve a sokasÂ´g jellemzËire vagyunk kÂ´ ancsiak. Egyedi, kÂ¨ lÂ¨nc elemek o a a o Ä±vÂ´ uo akkor Â´rdekesek, ha pÂ´ldÂ´ul csalÂ´sokat akarunk felderÂ´ e e a a Ä±teni. Fenti eseteken kÂ´ ul vizsgÂ´lhatjuk a Ä±vÂ¨ a gyakori balesetet okozÂ´ helyzeteket, a szÂ´mÂ´ ogÂ´pes hÂ´lÂ´zatban gyakran elËfordulÂ´, riasztÂ´ssal o a Ä±tÂ´ e ao o o a vÂ´gzËdË esemÂ´nysorozatokat, vagy pl. azt, hogy az egyes nyomtatott mÂ´diumoknak milyen az e o o e e olvasÂ´i osszetÂ´tele, Â´s amennyiben tÂ¨bb magazinnak, ujsÂ´gnak hasonlÂ´ a cÂ´lcsoportja, Â´rdemes o Â¨ e e o Â´ a o e e uzenetÂ¨ nket tÂ¨bb helyen is elhelyezni, hogy hatÂ´konyabban osztÂ¨nÂ¨zzÂ¨ k meglevË Â´s potenciÂ´lis Â¨ u o e Â¨ o o u oe a vÂ´sÂ´rlÂ´inkat. aa o Oldalakon keresztÂ¨ l lehetne sorolni azon pÂ´ldÂ´kat, amikor a gyakran elËfordulÂ´ dolgokâ€ u e a o o â€ Â´rtÂ´kes informÂ´ciÂ´t rejtenek magukban. A szakirodalomban a dolgokat mintÂ´knak nevezzÂ¨ k, Â´s e e a o a u e gyakori mintÂ´k kinyerÂ´sÂ´rËl beszÂ´lÂ¨ nk. a e e o eu A minta tÂ´ Ä±pusa tÂ¨bbfÂ´le lehet. VÂ´sÂ´rlÂ´i szokÂ´sok felderÂ´ esÂ´nÂ´l gyakori elemhalmazokat keo e aa o a Ä±tÂ´ e e resÂ¨ nk, ahol az elemek a termÂ´keknek felel meg. UtazÂ´sokkal kapcsolatos szokÂ´soknÂ´l a gyakran u e a a a igÂ´nybe vett, kÂ¨ltsÂ´ges szolgÂ´ltatÂ´sok sorrendje is fontos, Â´ gyakori sorozatokat keresÂ¨ nk. Tee o e a a Ä±gy u lekommunikÂ´ciÂ´s hÂ´lÂ´zatokban olyan feltÂ´telek (predikÂ´tumok) gyakori fennÂ´llÂ´sÂ´t keressÂ¨ k, a o ao e a a aa u amelyek gyakran eredmÂ´nyeznek riasztÂ´st. Ezeket a gyakori bool formulÂ´kat megvizsgÂ´lva kape a a a hatjuk meg pÂ´ldÂ´ul a gyakori tÂ´ves riasztÂ´sok okait. A bÂ¨ngÂ´szÂ´si szokÂ´sok alapjÂ´n fejleszthetjÂ¨ k e a e a o e e a a u oldalaink struktÂ´ rÂ´jÂ´t, linkjeit, Â´ a lÂ´togatÂ´k mÂ´g gyorsabban Â´s hatÂ´konyabban talÂ´ljÂ´k meg uaa Ä±gy a o e e e a a a keresett informÂ´ciÂ´kat. A bÂ¨ngÂ´szÂ´s folyamatÂ´t cÂ´mkÂ´zett gyÂ¨keres fÂ´kkal jellemezhetjÂ¨ k Gyaa o o e e a Ä± e o a u kori mintÂ´kat kinyerË algoritmusokat a rÂ´kkutatÂ´sban is alkalmaztak. Azt vizsgÂ´ltÂ´k, hogy a a o a a a a rÂ´kkeltË anyagokban vannak-e gyakran elËfordulÂ´ molekula-struktÂ´ rÂ´k. Ezeket a struktÂ´ rÂ´kat a o o o ua ua cÂ´ ezett grÂ´fokkal Â´ Ä±mkÂ´ a Ä±rjuk le. A pÂ´ldÂ´kbÂ´l kÂ¨vetkezik, hogy a minta tÂ´ e a o o Ä±pusa sokfÂ´le lehet. SejthetjÂ¨ k, hogy mÂ´s technikÂ´kat e u a a kell majd alkalmazni pl. cÂ´ ezett grÂ´fok keresÂ´sÂ´nÂ´l, mintha csak egyszerË elemhalmazokat Ä±mkÂ´ a ee e u keresÂ¨ nk. Ebben a rÂ´szben egy altalÂ´nos leÂ´ ast adunk, egy egysÂ´ges matematikai keretbe heu e Â´ a Ä±rÂ´ e lyezzÂ¨ k a gyakori minta kinyerÂ´sÂ´nek feladatÂ´t. Emellett ismertetjÂ¨ k a legfontosabb mÂ´dszerek u ee a u o altalÂ´nos â€“ a minta tÂ´ atÂ´l fÂ¨ ggetlen â€“ leÂ´ asÂ´t. Â´ a Ä±pusÂ´ o u Ä±rÂ´ a

83

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

84

5.1. A gyakori minta deï¬nÂ´ oja Ä±ciÂ´
E rÂ´sz megÂ´rtÂ´sÂ´hez feltÂ´telezzÂ¨ k, hogy az olvasÂ´ tisztÂ´ban van a 2.1 rÂ´szben deï¬niÂ´lt foe e ee e u o a e a galmakkal (rendezÂ´sek, korlÂ´t, valÂ´di korlÂ´t, maximÂ´lis korlÂ´t, predikÂ´tum,). e a o a a a a 5.1. deï¬nÂ´ o. A H halmaz a rendezÂ´sre nÂ´zve lokÂ´lisan vÂ´ges, ha minden x, y âˆˆ H elemhez, Ä±ciÂ´ e e a e ahol x y,vÂ´ges szÂ´mÂ´ olyan z elem lÂ´tezik, amelyre x z y. e a u e 5.2. deï¬nÂ´ o. Az MK=(M, ) pÂ´rost, ahol M egy alaphalmaz, az M-en Â´rtelmezett rÂ´szben Ä±ciÂ´ a e e rendezÂ´s, mintakÂ¨rnyezetnek nevezzÂ¨k, amennyiben M-nek pontosan egy minimÂ´lis eleme van, e o u a M halmaz a rendezÂ´sre nÂ´zve lokÂ´lisan vÂ´ges Â´s rangszÂ´mozott (graded), azaz lÂ´tezik a | | : e e a e e a e : M â†’ Z un. mÂ´retfÂ¨ggvÂ´ny , amire |m| = |m | + 1, ha m-nek maximÂ´lis valÂ´di alsÂ´ korlÂ´tja Â´ e u e a o o a m . Az M elemeit mintÂ´knak (pattern) nevezzÂ¨k Â´s M-re, mint mintahalmaz vagy mintatÂ´r a u e e hivatkozunk. Az m m esetÂ´n azt mondjuk, hogy m az m rÂ´szmintÂ´ja, ha m e e a m, akkor valÂ´di o rÂ´szmintÂ´rÂ´l beszÂ´lÂ¨ nk. A -t tartalmazÂ´si relÂ´ciÂ´nak is hÂ´ e a o eu a a o Ä±vjuk. Az altalÂ´nossÂ´g megsÂ´rtÂ´se Â´ a a e e nÂ´lkÂ¨ l feltehetjÂ¨ k, hogy a minimÂ´lis mÂ´retË minta mÂ´rete 0. Ezt a mintÂ´t ures mintÂ´nak hÂ´ e u u a e u e a Â¨ a Ä±vjuk. Â´ Ime az egyik legegyszerË bb pÂ´lda mintakÂ¨rnyezetre, amelyet vÂ´sÂ´rlÂ´i szokÂ´sok feltÂ´rÂ´sa u e o aa o a aa sorÂ´n alkalmaztak elËszÂ¨r. Legyen I vÂ´ges halmaz. Gyakori elemhalmazok keresÂ´sÂ´nÂ´l a (2 I , âŠ† a o o e ee e âŠ†) lesz a mintakÂ¨rnyezetet, ahol âŠ† a halmazok tartalmazÂ´si relÂ´ciÂ´jÂ´t jelÂ¨li. A mÂ´retfÂ¨ ggvÂ´ny o a a oa o e u e egy halmazhoz az elemszÂ´mÂ´t rendeli. Az elemhalmazokon tÂ´ l kereshetÂ¨ nk gyakori sorozatoa a u u kat, epizÂ´dokat (vÂ´ges halmazon Â´rtelmezett rÂ´szben rendezÂ´seket), bool formulÂ´kat, cÂ´mkÂ´zett o e e e e a Ä± e gyÂ¨keres fÂ´kat vagy altalÂ´nos grÂ´fokat. Ezen mintakÂ¨rnyezetek pontos deï¬nÂ´ ojÂ´t a kÂ¨vetkezË o a Â´ a a o Ä±ciÂ´ a o o fejezetekben talÂ´ljuk. a 5.3. deï¬nÂ´ o. Legyen (H1 , 1 ) (H2 , 2 ) kÂ´t rÂ´szben rendezett halmaz. Az f :H1 â†’H2 fÂ¨ggvÂ´ny Ä±ciÂ´ e e u e rendezÂ´s vÂ´ltÂ´ vagy mÂ´s szÂ´val anti-monoton, amennyiben tetszËleges x, y âˆˆ H 1 , x 1 y elemekre e a o a o o f (y) 2 f (x). 5.4. deï¬nÂ´ o. A gyakori minta kinyerÂ´snek feladatÂ´ban adott egy B bemeneti (vagy feldolgoÄ±ciÂ´ e a zandÂ´) adathalmaz, MK = (M, ) mintakÂ¨rnyezet, egy suppB : M â†’ N anti-monoton fÂ¨ggvÂ´ny o o u e Â´s egy min supp âˆˆ N kÂ¨szÂ¨bszÂ´m. Feladat, hogy megkeressÂ¨k azon mintÂ´kat, amelyekre a supp e u o a u a fÂ¨ggvÂ´ny min supp-nÂ´l nagyobb vagy egyenlË Â´rtÂ´ket ad : u e a oe e GY = {gy : gy âˆˆ M, suppB (gy) â‰¥ min supp}. A suppB fÂ¨ ggvÂ´nyt tÂ´mogatottsÂ´gi fÂ¨ggvÂ´nynek (support function), min supp-ot tÂ´mogatottsÂ´gi u e a a u e a a kÂ¨szÂ¨bnek, a GY elemeit pedig gyakori mintÂ´knak hÂ´ u o a Ä±vjuk. A nem gyakori mintÂ´kat ritkÂ´knak a a nevezzÂ¨ k. Az Â´rthetËsÂ´g kedvÂ´Â´rt a B tagot gyakran elhagyjuk, tovÂ´bbÂ´ a supp(m)-re mint u e oe ee a a a minta tÂ´mogatottsÂ´ga hivatkozunk. A tÂ´mogatottsÂ´gi fÂ¨ ggvÂ´ny Â´rtÂ´ke adja meg, hogy egy a a a a u e e e minta mennyire gyakori a bemenetben. Az elemhalmazok pÂ´ldÂ´jÂ´nÂ´l maradva a bemenet lehet pÂ´ldÂ´ul elemhale aa a e a mazok sorozata. Ekkor egy H halmaz tÂ´mogatottsÂ´gÂ´t ugy Â´rtelmezhetjÂ¨ k, a a a Â´ e u mint a sorozat azon elemeinek szÂ´ma, amelyek tartalmazzÂ´k H-t. PÂ´ldÂ´ul a a a e a {A, D}, {A, C}, {A, B, C, D}, {B}, {A, D}, {A, B, D}, {D} bemenet esetÂ´n supp({A, D}) = 4. e Ha min supp-nak 4-et adunk meg, akkor GY = {{A}, {D}, {A, D}}. A tÂ´mogatottsÂ´g anti-monotonitÂ´sÂ´bÂ´l kÂ¨vetkezik az alÂ´bbi egyszerË tulajdonsÂ´g. a a aa o o a u a 5.5. tulajdonsÂ´g. Gyakori minta minden rÂ´szmintÂ´ja gyakori. a e a

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

85

A mintÂ´kat elemhalmazok, sorozatok, grÂ´fok, stb. a a Amerikai kutatÂ´s a sorÂ´n a formÂ´jÂ´ban fogjuk keresni, azaz a mintÂ´k mindig valamilyen â€ allapÂ´tottÂ´k, hogy 1 ora aa a megÂ´ Ä± a Â´ alaphalmazon deï¬niÂ´lt struktÂ´ rÂ´k lesznek. Ha az alaphal- tÂ´vÂ´zÂ´s hatÂ´sÂ´ra 200 dollÂ´rral a ua e e e a a a mazon deï¬niÂ´lunk egy teljes rendezÂ´st, akkor az alapjÂ´n â€“ tÂ¨bbet kÂ¨ltÂ¨nk a reklÂ´mok mia e a o o u a kÂ¨nnyebben vagy nehezebben â€“ a mintÂ´kon is tudunk teljes att.â€ ForrÂ´s : SlÂ´ger rÂ´diÂ´, 2007. o a a a a o rendezÂ´st adni. Ezt pÂ´ldÂ´ul elemhalmazok esetÂ´ben a lexi- oktÂ´ber 25., 17 ora 48 perc e e a e o Â´ kograï¬kus rendezÂ´s , grÂ´fok esetÂ´ben a kanonikus cÂ´ ezÂ´s e a e Ä±mkÂ´ e segÂ´ egÂ´vel fogjuk megtenni. A mintÂ´kon Â´rtelmezett teljes Ä±tsÂ´ e a e rendezÂ´s egyes algoritmusnÂ´l (pl. : APRIORI) a hatÂ´konysÂ´g nÂ¨velÂ´sÂ´re hasznÂ´lhatÂ´, mÂ´soknak e a e a o ee a o a pedig alapfeltÂ´tele (pl. : Zaki). Sokszor fog felbukkanni a preï¬x fogalma is, amihez szintÂ´n egy e e teljes rendezÂ´sre lesz szÂ¨ ksÂ´g. e u e 5.6. deï¬nÂ´ o. Legyen a H halmazon Â´rtelmezett rÂ´szben rendezÂ´s. A Ä±ciÂ´ e e e lineÂ´ris kiterjesztÂ´sÂ´nek hÂ´vjuk, ha minden x y pÂ´rra x y teljesÂ¨l. a ee Ä± a u teljes rendezÂ´st a e

A lineÂ´ris kiterjesztÂ´seknek azon csoportja Â´rdekes szÂ´munkra, amelyek mÂ´rettartÂ´ak. Ez azt a e e a e o jelenti, hogy |x| < |y| esetÂ´n a x y feltÂ´telnek is fenn kell allnia. Amikor tehÂ´t a MK = (M, ) e e Â´ a mintakÂ¨rnyezet o tagjÂ´nak egy mÂ´rettartÂ´ lineÂ´ris kiterjesztÂ´sÂ´t akarjuk megadni, akkor az a e o a ee azonos mÂ´retË elemek kÂ¨zÂ¨tt deï¬niÂ´lunk egy sorrendet. A tovÂ´bbiakban a mÂ´rettartÂ´ jelzËt e u o o a a e o o elhagyjuk, Â´s minden lineÂ´ris kiterjesztÂ´s alatt mÂ´rettartÂ´ lineÂ´ris kiterjesztÂ´st Â´rtÂ¨ nk. e a e e o a e e u 5.7. deï¬nÂ´ o. Legyen MK = (M, ) mintakÂ¨rnyezet Â´s Ä±ciÂ´ o e a egy lineÂ´ris kiterjesztÂ´se. Az a e m minta -elemË rÂ´szmintÂ´i kÂ¨zÂ¨l az u e a o u szerinti legelsËt hÂ´vjuk az m minta -elemË preï¬xÂ´nek. o Ä± u e PÂ´ldÂ´ul, ha I = {A, B, C, D, E}, Â´s az azonos mÂ´retË mintÂ´kon az abc rendezÂ´s szerinti lexikoe a e e u a e graï¬kus rendezÂ´st vesszÂ¨ k a teljes rendezÂ´snek, akkor pÂ´ldÂ´ul az {A, C, D, E} minta 2-elemË e u e e a u preï¬xe az {A, C} halmaz.

5.1.1. HatÂ´konysÂ´gi kÂ´rdÂ´sek e a e e
A bemeneti adat Â´s a mintÂ´k halmaza altalÂ´ban nagy. PÂ´ldÂ´ul bemeneti sorozatok esetÂ´ben e a Â´ a e a e 9 5 nem ritkÂ´k a 10 nagysÂ´grendË sorozatok, a mintatÂ´r pedig altalÂ´ban 10 nagysÂ´grendË hala a u e Â´ a a u mazok hatvÂ´nyhalmaza. Ilyen mÂ´retek mellett a naÂ´ algoritmusok (pÂ´ldÂ´ul hatÂ´rozzuk meg a e Ä±v e a a a mintahalmaz minden elemÂ´nek tÂ´mogatottsÂ´gÂ´t, majd vÂ´logassuk ki a gyakoriakat) tÂ´ l sok e a a a a u ideig futnÂ´nak, vagy tÂ´ l nagy lenne a memÂ´riaigÂ´nyÂ¨ k. HatÂ´kony, kiï¬nomult algoritmusokra a u o e u e van szÂ¨ ksÂ´g, amelyek speciÂ´lis adatstruktÂ´ rÂ´kat hasznÂ´lnak. u e a ua a Egy algoritmus hatÂ´konysÂ´gÂ´t a futÂ´si idËvel (ami arÂ´nyos az elemi lÂ´pÂ´sek szÂ´mÂ´val) Â´s e a a a o a e e a a e a felhasznÂ´lt memÂ´riÂ´val jellemezzÂ¨ k. PÂ´ldÂ´ul megmondhatjuk, hogy adott mÂ´retË bemenet a o a u e a e u esetÂ´n atlagosan, vagy legrosszabb esetben mennyi elemi lÂ´pÂ´st (Â¨sszehasonlÂ´ as, Â´rtÂ´kadÂ´s), e Â´ e e o Ä±tÂ´ e e a illetve memÂ´riÂ´t hasznÂ´l. Sajnos a gyakori mintÂ´t kinyerË algoritmusok mindegyike legrosszabb o a a a o esetben a teljes mintateret megvizsgÂ´lja, ugyanis a tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b fÂ¨ ggvÂ´nyÂ´ben a mina a a u o u e e tatÂ´r minden eleme gyakori lehet. e A gyakori minta-kinyerÂ´s korszakÂ´nak elsË 10-15 Â´vÂ´ben az algoritmusok hatÂ´konysÂ´gÂ´t â€“ e a o e e e a a elmÂ´leti elemzÂ´sek hÂ´ an â€“ minden esetben teszteredmÂ´nyekkel igazoltÂ´k. Szinte minden algoe e Ä±jÂ´ e a ritmushoz lehet talÂ´lni olyan bemeneti adatot, amit az algoritmus nagyon hatÂ´konyan kÂ´pes a e e feldolgozni. Ennek eredmÂ´nyekÂ´nt pÂ´ldÂ´ul, csak a gyakori elemhalmazokat kinyerË algoritmusok e e e a o

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

86

szÂ´ma meghaladja a 150-et, Â´s a mai napig nem tudunk olyan algoritmusrÂ´l, amelyik az osszes a e o Â¨ tÂ¨bbit legyËznÂ´ futÂ´si idË vagy memÂ´riafogyasztÂ´s tekintetÂ´ben. o o e a o o a e A jÂ¨vË feladata ennek a kÂ´osznak a tisztÂ´zÂ´sa. Ehhez a legfontosabb lÂ´pÂ´s a bemeneti adat o o a a a e e karakterisztikÂ´jÂ´nak formÂ´lis leÂ´ asa lenne. SejtjÂ¨ k, hogy legjobb gyakori mintakinyerË algoritaa a Ä±rÂ´ u o mus nem lÂ´tezik, de talÂ´n van esÂ´lyÂ¨ nk Â´rtelmes megÂ´llapÂ´ asokra, ha a bemenetre vonatkozÂ´an e a e u e a Ä±tÂ´ o kÂ¨ lÂ¨nbÂ¨zË feltÂ´telezÂ´sekkel Â´lÂ¨ nk (szokÂ´sos feltÂ´tel pÂ´ldÂ´ul az, hogy a bemenet olyan sorozat, uo o o e e eu a e e a melynek elemei kis mÂ´retË halmazok vagy az, hogy csak nagyon kevÂ´s magas tÂ´mogatottsÂ´gÂ´ e u e a a u minta van) Â´s ezekhez prÂ´bÂ´ljuk megtalÂ´lni az ideÂ´lis algoritmust. e o a a a

5.2. TovÂ´bbi feladatok a
A gyakori mintakinyerÂ´s egyik nagy kritikÂ´ja, hogy sokszor tÂ´ l nagy a kinyert mintÂ´k szÂ´ma. e a u a a Vannak olyan feladatok, ahol nem az osszes gyakori mintÂ´t kÂ´ anjuk kinyerni, hanem csak egy Â¨ a Ä±vÂ´ rÂ´szÂ¨ ket. Erre pÂ´lda az un. top-k mintakinyerÂ´s, melynek sorÂ´n a k legnagyobb tÂ´mogatottsÂ´gÂ´ e u e Â´ e a a a u mintÂ´t keressÂ¨ k. Emellett az alÂ´bbi feladatok lÂ´teznek. a u a e

5.2.1. Nem bËvÂ´ o Ä±thetË Â´s zÂ´rt mintÂ´k oe a a
5.8. deï¬nÂ´ o. Az m gyakori minta B-re nÂ´zve nem bËvÂ´ Ä±ciÂ´ e o Ä±thetË (maximal), ha nem lÂ´tezik olyan o e m gyakori minta B-ben, amelynek m valÂ´di rÂ´szmintÂ´ja. o e a 5.9. deï¬nÂ´ o. Az m minta B-re nÂ´zve zÂ´rt, amennyiben nem lÂ´tezik olyan m minta BÄ±ciÂ´ e a e ben, amelynek m valÂ´di rÂ´szmintÂ´ja, Â´s m tÂ´mogatottsÂ´ga megegyezik m tÂ´mogatottsÂ´gÂ´val o e a e a a a a a (supp(m ) = supp(m)). Az ember azonnal lÂ´thatja, hogy mi Â´rtelme van annak, hogy csak a nem bËvÂ´ a e o Ä±thetË mintÂ´kat o a keressÂ¨ k meg : egyÂ´rtelmË en meghatÂ´rozzÂ´k a gyakori mintÂ´kat Â´s szÂ´muk kevesebb. Sajnos u e u a a a e a a nem bËvÂ´ o Ä±thetË mintÂ´k alapjÂ´n csak azt tudjuk megmondani, hogy egy minta gyakori-e, a o a a tÂ´mogatottsÂ´got nem tudjuk megadni (legfeljebb egy alsÂ´ korlÂ´tot). a a o a Nem ilyen triviÂ´lis, hogy mi Â´rtelme van a gyakori zÂ´rt mintÂ´knak. Azt lÂ´tjuk, hogy a zÂ´rt a e a a a a gyakori mintÂ´k a gyakori mintÂ´k rÂ´szhalmazai, Â´s a zÂ´rt mintÂ´k rÂ´szhalmaza a nem bËvÂ´ a a e e a a e o Ä±thetË o mintÂ´k, hiszen a 5.10. tulajdonsÂ´g. Minden nem bËvÂ´thetË minta zÂ´rt. a o Ä± o a MÂ´gis mi cÂ´lt szolgÂ´lnak a gyakori zÂ´rt mintÂ´k ? Ennek tisztÂ´zÂ´sÂ´hoz kÂ´t uj fogalmat kell e e a a a a aa e Â´ bevezetnÂ¨ nk. u 5.11. deï¬nÂ´ o. Az m minta az m minta lezÂ´rtja, ha m Ä±ciÂ´ a m : m m , melyre supp(m ) = supp(m ). m , supp(m) = supp(m ) Â´s nincs e

NyilvÂ´nvalÂ´, ha m zÂ´rt, akkor lezÂ´rtja megegyezik onmagÂ´val. a o a a Â¨ a 5.12. deï¬nÂ´ o. Az MK = (M, ) mintakÂ¨rnyezet a zÂ´rtsÂ´gra nÂ´zve egyÂ´rtelmË , amennyiben Ä±ciÂ´ o a a e e u minden m âˆˆ M minta lezÂ´rtja egyÂ´rtelmË. a e u

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

87

LÂ´tni fogjuk, hogy pÂ´ldÂ´ul az elemhalmazokat tartalmazÂ´ mintakÂ¨rnyezet zÂ´rtsÂ´gra nÂ´zve a e a o o a a e egyÂ´rtelmË , mÂ´ a sorozatokat tartalmazÂ´ nem az. A zÂ´rtsÂ´gra nÂ´zve egyÂ´rtelmË mintakÂ¨rnyee u Ä±g o a a e e u o zetekben a zÂ´rt mintÂ´k jelentËsÂ´ge abban all, hogy ezek ismeretÂ´ben tetszËleges mintÂ´rÂ´l el a a oe Â´ e o ao tudjuk dÂ¨nteni, hogy gyakori-e, Â´s ha igen, meg tudjuk pontosan mondani tÂ´mogatottsÂ´gÂ´t. o e a a a SzÂ¨ ksÂ´gtelen tÂ´rolni az osszes gyakori mintÂ´t, hiszen a zÂ´rt mintÂ´kbÂ´l ezek egyÂ´rtelmË en u e a Â¨ a a a o e u meghatÂ´rozhatÂ´k. Az m minta gyakori, ha rÂ´sze valamely gyakori zÂ´rt mintÂ´nak, Â´s m a o e a a e tÂ´mogatottsÂ´ga megegyezik a legkisebb olyan zÂ´rt minta tÂ´mogatottsÂ´gÂ´val, amelynek rÂ´sze a a a a a a e m (ez ugyanis az m lezÂ´rtja). a

5.2.2. KÂ´nyszerek kezelÂ´se e e
Nem mindig Â´rdekes az osszes gyakori minta. ElËfordulhat, hogy pÂ´ldÂ´ul a nagy mÂ´retË , e Â¨ o e a e u vagy bizonyos mintÂ´kat tartalmazÂ´, vagy nem tartalmazÂ´, stb. gyakori mintÂ´k nem fontosak. a o o a Â´ AltalÂ´nosÂ´ a Ä±thatjuk a feladatot ugy, hogy a felhasznÂ´lÂ´ kÂ´nyszereket, predikÂ´tumokat ad meg, Â´s Â´ ao e a e azokat a mintÂ´kat kell meghatÂ´roznunk, amelyek kielÂ´gÂ´ az osszes kÂ´nyszert. a a e Ä±tik Â¨ e A feladat egyszerË megoldÂ´sa lenne, hogy â€“ mint utÂ´feldolgozÂ´s â€“ a gyakori mintÂ´kat u a o a a egyesÂ´vel megvizsgÂ´lva tÂ¨rÂ¨lnÂ´nk azokat, amelyek nem elÂ´gÂ´ e a oo e e Ä±tenek minden kÂ´nyszert. Ez a mege oldÂ´s nem tÂ´ l hatÂ´kony. Jobb lenne, ha a kÂ´nyszereket minÂ´l mÂ´lyebbreâ€ tudnÂ´nk helyezni a u e e e e a â€ a gyakori mintÂ´kat kinyerË algoritmusokban. Ez bizonyos kÂ´nyszereknÂ´l megtehetË, mÂ´soknÂ´l a o e e o a a nem. NÂ´zzÂ¨ k, milyen osztÂ´lyokba sorolhatjuk a kÂ´nyszereket. e u a e TulajdonkÂ´ppen az is egy kÂ´nyszer, hogy gyakori mintÂ´kat keresÂ¨ nk. A gyakorisÂ´gra voe e a u a natkozÂ´ predikÂ´tum igaz, ha a minta gyakori, ellenkezË esetben hamis. Ez a predikÂ´tum antio a o a monoton : 5.13. deï¬nÂ´ o. Legyen (H, ) egy rÂ´szben rendezett halmaz. A p : H â†’ {igaz, hamis} preÄ±ciÂ´ e dikÂ´tum anti-monoton, amennyiben tetszËleges x âˆˆ H elem esetÂ´n, ha p(x) = igaz, akkor p(y) a o e is igazat ad minden y x elemre. Ha a fenti deï¬nÂ´ oba y x helyett x y Â´ Ä±ciÂ´ Ä±runk, akkor a monoton predikÂ´tumok deï¬nÂ´ ojÂ´t kapa Ä±ciÂ´ a juk. Egy predikÂ´tum akkor Â´s csak akkor monoton Â´s anti-monoton egyben, ha a mintatÂ´r mina e e e den elemÂ´hez igaz (vagy hamis) Â´rtÂ´ket rendel. Az ilyen predikÂ´tumot triviÂ´lis predikÂ´tumnak e e e a a a hÂ´ Ä±vjuk. 5.14. deï¬nÂ´ o. Legyen (H, ) egy rÂ´szben rendezett halmaz. A p : H â†’ {igaz, hamis} preÄ±ciÂ´ e dikÂ´tum preï¬x anti-monoton, amennyiben megadhatÂ´ a -nek egy olyan a o lineÂ´ris kiterjesztÂ´se a e amire, ha p(m) = igaz, akkor p az m minden preï¬xÂ´n is igaz. e 5.15. deï¬nÂ´ o. Legyen (H, ) egy rÂ´szben rendezett halmaz. A p : H â†’ {igaz, hamis} preÄ±ciÂ´ e dikÂ´tum preï¬x monoton, amennyiben megadhatÂ´ a -nek egy olyan a o lineÂ´ris kiterjesztÂ´se a e amely, ha p(m) = igaz, Â´s az m mintÂ´nak m preï¬xe. akkor p(m ) is igaz. e a Minden anti-monoton (monoton) predikÂ´tum egyben preï¬x anti-monoton (preï¬x monoton) is. a 5.16. deï¬nÂ´ o. A p predikÂ´tum erËsen atalakÂ´ Ä±ciÂ´ a o Â´ Ä±thatÂ´, amennyiben egyszerre preï¬x antio monoton Â´s preï¬x monoton. e Az 5.1 abrÂ´n lÂ´thatÂ´ a kÂ´nyszerek kapcsolata [133]. Â´ a a o e SejthetjÂ¨ k, hogy az anti-monoton predikÂ´tumok lesznek a legegyszerË bben kezelhetËk. Ilyen u a u o anti-monoton predikÂ´tumok pÂ´ldÂ´ul a kÂ¨vetkezËk : a e a o o

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE
triviÃ¡lis

88

antiâˆ’monoton prefix antiâˆ’monoton

monoton prefix monoton

erÃµsen Ã¡talakÃ­thatÃ³

nem Ã¡talakÃ­thatÃ³
5.1. abra. A kÂ´nyszerek (predikÂ´tumok) osztÂ´lyozÂ´sa Â´ e a a a â€“ A minta mÂ´rete ne legyen nagyobb egy adott kÂ¨ szÂ¨bnÂ´l. e u o e â€“ A mintÂ´nak legyen rÂ´sze egy rÂ¨gzÂ´ a e o Ä±tett minta. VÂ´sÂ´rlÂ´i szokÂ´sok vizsgÂ´latÂ´nÂ´l â€“ amikor a vÂ´sÂ´rlÂ´i kosarakban gyakran elËfordulÂ´ aa o a a a a aa o o o termÂ´khalmazokat keressÂ¨ k â€“ monoton kÂ´nyszer pÂ´ldÂ´ul az, hogy a termÂ´khalmazban lÂ´vË e u e e a e e o elemek proï¬tjÂ´nak osszÂ´rtÂ´ke (vagy minimuma, maximuma) legyen nagyobb egy adott konsa Â¨ e e tansnÂ´l. a Preï¬x monoton predikÂ´tum pÂ´ldÂ´ul, hogy a termÂ´khalmazban talÂ´lhatÂ´ termÂ´kek arÂ´nak a e a e a o e Â´a atlaga nagyobb-e egy rÂ¨gzÂ´ Â´ o Ä±tett konstansnÂ´l. RendezzÂ¨ k a termÂ´keket aruk szerint nÂ¨vekvË sora u e Â´ o o rendbe. Ezen rendezÂ´s szerinti lexikograï¬kus rendezÂ´s legyen a teljes rendezÂ´s. NyilvÂ´nvalÂ´, e e e a o hogy ekkor a preï¬xben talÂ´lhatÂ´ termÂ´kek arai nagyobbak, mint a preï¬xben nem szereplË a o e Â´ o termÂ´kei arai. Ez a kÂ´nyszer preï¬x monoton, hiszen a preï¬x a legolcsÂ´bb termÂ´keket nem tare Â´ e o e Â´ talmazza, Â´ atlaga nem lehet kisebb. Erdemes atgondolni, hogy ez a predikÂ´tum rÂ´adÂ´sul Ä±gy Â´ Â´ a a a erËsen atalakÂ´ o Â´ Ä±thatÂ´. o

5.2.3. TÂ¨bbszÂ¨rÂ¨s tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b o o o a a u o
Vannak olyan alkalmazÂ´sok, amelyekben a gyakorisÂ´g egyetlen, univerzÂ´lis tÂ´mogatottsÂ´gi a a a a a kÂ¨ szÂ¨b alapjÂ´n tÂ¨rtÂ´nË deï¬niÂ´lÂ´sa nem megfelelË. Ha pÂ´ldÂ´ul vÂ´sÂ´rlÂ´si szokÂ´sok elemzÂ´sÂ´re u o a o e o aa o e a aa a a ee gondolunk, akkor a nagy Â´rtÂ´kË termÂ´kekkel kapcsolatos tudÂ´s legalÂ´bb annyira fontos, mint e e u e a a a nagy mennyisÂ´gben Â´rtÂ´kesÂ´ e e e Ä±tett, de kis haszonnal jÂ´rÂ´ termÂ´kekkel kapcsolatos informÂ´ciÂ´. ao e a o KÂ´zenfekvË megoldÂ´s, hogy annyira lecsÂ¨kkentjÂ¨ k a tÂ´mogatottsÂ´gi kÂ¨ szÂ¨bÂ¨t, hogy ezek a ritka e o a o u a a u o o elemek is gyakoriak legyenek, ami azzal a veszÂ´llyel jÂ´r, hogy (ezen fontos elemek mellett) a e a mintatÂ´r nagy rÂ´sze gyakorivÂ´ vÂ´lik. TÂ¨bbszÂ¨rÂ¨s tÂ´mogatottsÂ´gi kÂ¨szÂ¨bnÂ´l a mintatÂ´r minden e e a a o o o a a u o e e elemÂ´hez egyedileg megadhatunk egy tÂ´mogatottsÂ´gi kÂ¨ szÂ¨bÂ¨t, azaz lÂ´tezik egy min supp : e a a u o o e : M â†’ N fÂ¨ ggvÂ´ny, Â´s az m akkor gyakori, ha supp(m) â‰¥ min supp(m). u e e TÂ¨bbszÂ¨rÂ¨s tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b esetÂ´n nem igaz az 5.5 tulajdonsÂ´g. HiÂ´ba nagyobb o oo a a u o e a a ugyanis egy rÂ´szminta tÂ´mogatottsÂ´ga, a rÂ´szmintÂ´hoz tartozÂ´ tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b mÂ´g nae a a e a o a a u o e gyobb lehet, Â´s Â´ a rÂ´szminta nem feltÂ´tlenÂ¨ l gyakori. e Ä±gy e e u

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

89

5.2.4. Dinamikus gyakori mintakinyerÂ´s e
Egyre nÂ´pszerË bb adatbÂ´nyÂ´szati feladat a gyakori mintÂ´k un. dinamikus kinyerÂ´se. Adott e u a a a Â´ e egy kiindulÂ´si B bemenet a hozzÂ´ tartozÂ´ gyakori mintÂ´kkal Â´s tÂ´mogatottsÂ´gokkal Â´s egy a a o a e a a e Â´ mÂ´sik B bemenet. AltalÂ´ban a B -t valami aprÂ´ mÂ´dosÂ´ assal kapjuk B-bËl. Feladat, hogy a a o o Ä±tÂ´ o minÂ´l hatÂ´konyabban talÂ´ljuk meg a B -ben gyakori mintÂ´kat, azaz minÂ´l jobban hasznÂ´ljuk fel e e a a e a a meglÂ´vË tudÂ´st (a B-ben gyakori mintÂ´kat). Gondolhatunk itt egy on-line aruhÂ´zra, ahol keze o a a Â´ a detben rendelkezÂ´sÂ¨ nkre allnak az elmÂ´ lt havi vÂ´sÂ´rlÂ´sokhoz tartozÂ´ gyakori termÂ´khalmazok, eu Â´ u aa a o e mikÂ¨zben folyamatosan Â´rkeznek az uj vÂ´sÂ´rlÂ´sok adatai. Hasznos, ha az ujonnan felbukkanÂ´ o e Â´ aa a Â´ o gyakori mintÂ´kat minÂ´l hamarabb felfedezzÂ¨ k, anÂ´lkÂ¨ l, hogy a bËvÂ´ a e u e u o Ä±tett adatbÂ´zisban oï¬€-line a mÂ´don lefuttatnÂ´nk egy gyakori mintÂ´kat kinyerË algoritmust. o a a o

5.3. Az algoritmusok jellemzËi o
Helyes vagy helyesen mËkÂ¨dË jelzËvel illetjÂ¨ k azokat az algoritmusokat, amelyek nem u o o o u hibÂ´znak, tehÂ´t csak gyakori mintÂ´kat nyernek ki Â´s azok tÂ´mogatottsÂ´gÂ´t jÂ´l hatÂ´rozzÂ´k a a a e a a a o a a meg. Teljes egy algoritmus, ha be lehet bizonyÂ´ Ä±tani, hogy az osszes gyakori mintÂ´t Â´s Â¨ a e tÂ´mogatottsÂ´gaikat meghatÂ´rozza. Helyesen mË kÂ¨dË Â´s teljes algoritmusokrÂ´l fogunk beszÂ´lni, a a a u o oe o e de szÂ´ lesz olyan algoritmusokrÂ´l is, amelyekrËl csak azt tudjuk, hogy (bizonyos feltÂ´telezÂ´sekkel o o o e e Â´lve) kicsi annak a valÂ´szÂ´ usÂ´ge, hogy nem talÂ´l meg minden gyakori mintÂ´t. e o Ä±nË e a a SzÂ´lessÂ´gi bejÂ´rÂ´st valÂ´sÂ´ e e a a o Ä±tanak meg azok az algoritmusok1 , amelyek a legkisebb mintÂ´kbÂ´l kiindulva egyre naa o FogszuvasodÂ´s ellen zÂ¨ld tea a o â€ gyobb mÂ´retË gyakori mintÂ´kat nyernek ki. Egy ilyen al- TÂ´vol-keleti felmÂ´rÂ´sek szerint e u a a e e goritmusra igaz, hogy az -elemË gyakori mintÂ´kat hama- azoknak az iskolÂ´sgyerekeknek, u a a rabb talÂ´lja meg, mint az -nÂ´l nagyobb elemË mintÂ´kat. akik napi egy csÂ´sze cukor nÂ´lkÂ¨li a e u a e e u MÂ´lysÂ´gi bejÂ´rÂ´st megvalÂ´sÂ´ o algoritmusokra ez nem igaz ; zÂ¨ld teÂ´t isznak, feleannyi ode e a a o Ä±tÂ´ o a ezek minÂ´l gyorsabban prÂ´bÂ´lnak eljutni a nem bËvÂ´ e o a o Ä±thetË vas foguk van, mint az atlagnak.â€ o Â´ mintÂ´hoz. Ha ez sikerÂ¨ l, akkor egy ujabb, nem bËvÂ´ a u Â´ o Ä±thetË ForrÂ´s : http://www.terebess. o a mintÂ´t vesznek cÂ´lba. a e hu/szorolapok/zoldtea.html A kÂ¨vetkezËkben ismertetjÂ¨ k a hÂ´rom legfontosabb o o u a gyakori mintÂ´kat kinyerË mÂ´dszert az APRIORI-t, Zaki a o o mÂ´dszerÂ´t Â´s a mintanÂ¨velË mÂ´dszert. Ennek a hÂ´rom algoritmusnak a szerepe abban all, hogy o e e o o o a Â´ szinte az osszes tÂ¨bbi algoritmus ezeknek a tovÂ´bbfejlesztÂ´se, vagy ezen algoritmusok keverÂ´ke. Â¨ o a e e JelentËsÂ´gÂ¨ ket tovÂ´bb nÂ¨veli az a tÂ´ny, hogy ezek a mÂ´dszerek megtalÂ´lhatÂ´ak akÂ´rmilyen oe u a o e o a o a tÂ´ u mintÂ´kat keresÂ¨ nk, legyenek azok elemhalmazok, sorozatok vagy grÂ´fok. Nem pontos Ä±pusÂ´ a u a algoritmusokat adunk, hanem csak egy altalÂ´nos mÂ´dszerleÂ´ ast. Egyes lÂ´pÂ´seket csak a minta Â´ a o Ä±rÂ´ e e tÂ´ anak ismeretÂ´ben lehet pontosan megadni. Ä±pusÂ´ e

5.4. Az APRIORI mÂ´dszer o
Az eredeti APRIORI algoritmust gyakori elemhalmazok kinyerÂ´sÂ´re hasznÂ´ltÂ´k, Â´s mint az ee a a e AIS algoritmus [5] tovÂ´bbfejlesztett vÂ´ltozata adtÂ´k kÂ¨zre. Rakesh Agrawal Â´s Ramakrishnan a a a o e Srikant [7] publikÂ´ltÂ´k 1993-ban, de tËlÂ¨ k fÂ¨ ggetlenÂ¨ l, szinte ugyanezt az algoritmust javasolta a a ou u u
1

A szÂ´lessÂ´gi bejÂ´rÂ´st megvalÂ´sÂ´ o algoritmusokat szintenkÂ´nt haladÂ´ (levelwise) algoritmusoknak is hÂ´ ak. e e aa o Ä±tÂ´ e o Ä±vjÂ´

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

90

Heikki Mannila, Hannu Toivonen Â´s A. Inkeri Verkamo [114]-ben. Az 5 szerzË vÂ´gÂ¨ l egyesÂ´ e o e u Ä±tette a kÂ´t Â´ ast [6]. Kis mÂ´dosÂ´ assal az algoritmust gyakori sorozatok kinyerÂ´sÂ´re is (APRIORIALL, e Ä±rÂ´ o Ä±tÂ´ ee GSP algoritmusok), sËt, alapelvÂ´t bÂ´rmely tÂ´ u gyakori minta (epizÂ´d, fa stb.) keresÂ´sÂ´nÂ´l is o e a Ä±pusÂ´ o ee e alkalmazhatjuk. Az algoritmus rendkÂ´ ul egyszerË , mÂ´gis gyors Â´s kicsi a memÂ´riaigÂ´nye. TalÂ´n emiatt a mai Ä±vÂ¨ u e e o e a napig ez az algoritmus a legelterjedtebb Â´s legismertebb gyakori mintakinyerË algoritmus. e o Az APRIORI szÂ´lessÂ´gi bejÂ´rÂ´st valÂ´sÂ´ meg. Ez azt jelenti, hogy a legkisebb mintÂ´bÂ´l kiine e aa o Ä±t a o dulva szintenkÂ´nt halad elËre a nagyobb mÂ´retË gyakori mintÂ´k meghatÂ´rozÂ´sÂ´hoz. A kÂ¨vetkezË e o e u a a aa o o szinten (iterÂ´ciÂ´ban) az eggyel nagyobb mÂ´retË mintÂ´kkal foglalkozik. a o e u a Az algoritmusban kÂ¨zponti szerepet tÂ¨ltenek be az un. jelÂ¨ltek. JelÂ¨ltnek hÂ´ o o Â´ o o Ä±vjuk egy adott iterÂ´ciÂ´ban azt a mintÂ´t, amelynek tÂ´mogatottsÂ´gÂ´t meghatÂ´rozzuk, azaz, aminek ï¬gyelmÂ¨ nket a o a a a a a u szenteljÂ¨ k. Hamis jelÂ¨lteknek hÂ´ u o Ä±vjuk azokat a jelÂ¨lteket, amelyekrËl ki fog derÂ¨ lni, hogy ritka o o u mintÂ´k, elhanyagolt mintÂ´k pedig azok a gyakori mintÂ´k, amelyeket nem vÂ´lasztunk jelÂ¨ltnek a a a a o (nem foglalkozunk velÂ¨ k ). NyilvÂ´nvalÂ´, hogy csak azokrÂ´l a mintÂ´krÂ´l tudjuk eldÂ¨nteni, hogy u a o o a o o gyakoriak-e, amelyeknek meghatÂ´rozzuk a tÂ´mogatottsÂ´gÂ´t, tehÂ´t amelyek jelÂ¨ltek valamikor. a a a a a o EzÂ´rt elvÂ´rjuk az algoritmustÂ´l, hogy minden gyakori mintÂ´t felvegyen jelÂ¨ltnek. A teljessÂ´g e a o a o e feltÂ´tele, hogy ne legyen elhanyagolt minta, a hatÂ´konysÂ´g pedig annÂ´l jobb, minÂ´l kevesebb a e e a a e hamis jelÂ¨lt. o A jelÂ¨ltek deï¬niÂ´lÂ´sÂ´nÂ´l a 5.5 tulajdonsÂ´got hasznÂ´ljuk fel, ami Â´ szÂ´lt : Gyakori minta o aa a a a a Ä±gy o â€ minden rÂ´szmintÂ´ja gyakori.â€. Az allÂ´ ast indirekten nÂ´zve elmondhatjuk, hogy egy minta biztoe a Â´ Ä±tÂ´ e san nem gyakori, ha van ritka rÂ´szmintÂ´ja ! Ennek alapjÂ´n ne legyen jelÂ¨lt az a minta, amelynek e a a o van ritka rÂ´szmintÂ´ja. Az APRIORI algoritmus ezÂ´rt Â´pÂ´ e a e e Ä±tkezik lentrËl. Egy adott iterÂ´ciÂ´ban o a o pontosan tudjuk, hogy a rÂ´szmintÂ´k gyakoriak vagy sem ! Az algoritmus onnan kapta a nevÂ´t, e a e hogy az -elemË jelÂ¨lteket a bemeneti adat -edik atolvasÂ´sÂ´nak megkezdÂ´se elËtt (a priori) u o Â´ aa e o allÂ´ elË. Â´ Ä±tja o Az algoritmus pszeudokÂ´dja a kÂ¨vetkezË abrÂ´n lÂ´thatÂ´. Kezdeti Â´rtÂ´kek beÂ´llÂ´ asa utÂ´n o o o Â´ a a o e e a Ä±tÂ´ a belÂ´pÂ¨ nk egy ciklusba. A ciklus akkor Â´r vÂ´get, ha az -elemË jelÂ¨ltek halmaza ures. A cike u e e u o Â¨ luson belÂ¨ l elËszÂ¨r a tÂ´mogatottsÂ´g meghatÂ´rozÂ´s eljÂ´rÂ´st hÂ´ u o o a a a a aa Ä±vjuk meg, amely a jelÂ¨ltek o tÂ´mogatottsÂ´gÂ´t hatÂ´rozza meg. Ha ismerjÂ¨ k a jelÂ¨ltek tÂ´mogatottsÂ´gÂ´t, akkor ki tudjuk a a a a u o a a a oÂ´ Ä± a u e u a o vÂ´lasztani belËlÂ¨ k a gyakoriakat. A jelÂ¨lt el}allÂ´tÂ´s fÂ¨ ggvÂ´ny az -elemË gyakori mintÂ´kbÂ´l a ou o + 1-elemË jelÂ¨lteket allÂ´ elË. u o Â´ Ä±t o Az APRIORI elvet adaptÂ´lÂ´ algoritmusok mind a fenti lÂ´pÂ´seket kÂ¨vetik. TermÂ´szetesen ao e e o e a kÂ¨ lÂ¨nbÂ¨zË tÂ´ u mintÂ´knÂ´l kÂ¨ lÂ¨nbÂ¨zË mÂ´don kell elvÂ´gezni a tÂ´mogatottsÂ´g-meghatÂ´rozÂ´s, u o o o Ä±pusÂ´ a a uo o o o e a a a a gyakoriak kivÂ´logatÂ´sa, jelÂ¨ltek elËallÂ´ asa lÂ´pÂ´seket. a a o oÂ´ Ä±tÂ´ e e Az algoritmus hatÂ´konysÂ´gÂ´nak egyik alapfeltÂ´tele, hogy a jelÂ¨ltek elfÂ´rjenek a memÂ´riÂ´ban. e a a e o e o a EllenkezË esetben ugyanis rengeteg idË menne el az olyan I/O mË veletekkel, amelynek sorÂ´n o o u a a jelÂ¨lteket a hÂ´ttÂ´r Â´s a memÂ´ria kÂ¨zÂ¨tt ide-oda mÂ´solgatjuk. A fenti pszeudokÂ´d az eredeti o a e e o o o a o APRIORI egyszerË sÂ´ u Ä±tett vÂ´ltozatÂ´t Â´ a a Ä±rja le. ValÂ´jÂ´ban ugyanis addig allÂ´ oa Â´ Ä±tjuk elË az -elemË o u jelÂ¨lteket, amÂ´ azok elfÂ´rnek a memÂ´riÂ´ban. Ha elfogy a memÂ´ria, akkor nÂ¨velÂ´se nÂ´lkÂ¨ l o Ä±g e o a o o e e u folytatjuk az algoritmust, majd a kÂ¨vetkezË iterÂ´ciÂ´ban ott folytatjuk a jelÂ¨ltek elËallÂ´ asÂ´t, o o a o o oÂ´ Ä±tÂ´ a ahol abbahagytuk.

5.4.1. JelÂ¨ltek elËÂ´llÂ´ asa o oa Ä±tÂ´
Az -elemË jelÂ¨ltek elËallÂ´ asÂ´nak egyszerË mÂ´dja az, hogy vesszÂ¨ k az osszes -elemË u o oÂ´ Ä±tÂ´ a u o u Â¨ u mintÂ´t, Â´s azokat vÂ´lasztjuk jelÂ¨ltnek, amelyekre teljesÂ¨ l, hogy minden rÂ´szmintÂ´juk gyakoa e a o u e a

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE Algorithm 7 Az APRIORI mÂ´dszer o Require: B : bementei adat min supp : tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b a a u o â‡0 J â‡ { az ures minta } {J : Az -elemË jelÂ¨ltek} Â¨ u o while |J | = 0 do tÂ´mogatottsÂ´g meghatÂ´rozÂ´s(B, J ) a a a a for all j âˆˆ J do if supp(j) â‰¥ min supp then GY â‡ GY âˆª {j} end if end for J +1 â‡ jelÂ¨lt el}allÂ´tÂ´s(GY ) o oÂ´ Ä± a GY â‡ GY âˆª GY â‡ +1 end while return GY : gyakori mintÂ´k a

91

ri. SzÂ¨ ksÂ´gtelen az osszes rÂ´szmintÂ´t ellenËrizni, ugyanis a tÂ´mogatottsÂ´g anti-monotonitÂ´sÂ´bÂ´l u e Â¨ e a o a a aa o kÂ¨vetkezik az, hogy ha az osszes ( âˆ’1)-elemË rÂ´szminta gyakori, akkor az osszes valÂ´di rÂ´szminta o Â¨ u e Â¨ o e is gyakori. Ez a mÂ´dszer azonban nem tÂ´ l hatÂ´kony, vagy ugy is megfogalmazhatnÂ´nk, hogy tÂ´ l sok o u e Â´ a u felesleges munkÂ´t vÂ´gez, tÂ´ l sok olyan mintÂ´t vizsgÂ´l meg, amelyek biztosan nem gyakoriak. a e u a a HÂ´ Ä±vjuk potenciÂ´lis jelÂ¨lteknek azon mintÂ´kat, amelyeket elËallÂ´ a o a oÂ´ Ä±tunk, majd ellenËrizzÂ¨ k, hogy o u rÂ´szmintÂ´ik gyakoriak-e. Ha egy potenciÂ´lis minta atesik a teszten, akkor jelÂ¨ltÂ´ vÂ´lik. e a a Â´ o e a Tudjuk, hogy ha egy minta jelÂ¨lt lesz, akkor minden ( âˆ’ 1)-elemË rÂ´szmintÂ´ja gyakori, o u e a tehÂ´t cÂ´lszerË az ( âˆ’ 1)-elemË gyakori mintÂ´kbÂ´l kiindulni. Egy egyszerË megoldÂ´s lenne, a e u u a o u a ha sorra vennÂ´nk az ( âˆ’ 1)-elemË gyakori mintÂ´k minimÂ´lis valÂ´di felsË korlÂ´tait, mint poe u a a o o a tenciÂ´lis jelÂ¨lteket. MÂ´g jobb megoldÂ´s, ha a ( âˆ’ 1)-elemË gyakori mintapÂ´roknak vesszÂ¨ k a a o e a u a u minimÂ´lis valÂ´di felsË korlÂ´tait. Ekkor ugyanis csak olyan potenciÂ´lis jelÂ¨ltet allÂ´ a o o a a o Â´ Ä±tunk elË, amelyo nek van kÂ´t ( âˆ’ 1)-elemË gyakori rÂ´szmintÂ´ja. A minimÂ´lis valÂ´di felsË korlÂ´tot egy illesztÂ´si e u e a a o o a e mËvelettel fogjuk elËallÂ´ u oÂ´ Ä±tani. A kÂ´t gyakori mintÂ´t a potenciÂ´lis jelÂ¨lt generÂ´torainak hÂ´ e a a o a Ä±vjuk. Az illesztÂ´si mË veletet a âŠ—-el fogunk jelÂ¨lni. Akkor illesztÂ¨ nk kÂ´t mintÂ´t, ha van ( âˆ’ 2)-elemË e u o u e a u kÂ¨zÂ¨s rÂ´szmintÂ´juk. Ezt a rÂ´szmintÂ´t magnak (core) fogjuk hÂ´ o o e a e a Ä±vni. Ha az elËallÂ´ as mÂ´dja olyan, hogy nem allÂ´ oÂ´ Ä±tÂ´ o Â´ Ä±thatjuk elË ugyanazt a potenciÂ´lis jelÂ¨ltet kÂ´t o a o e kÂ¨ lÂ¨nbÂ¨zË mÂ´don, akkor ezt jelÂ¨lt-elËallÂ´ ast ismÂ´tlÂ´s nÂ´lkÂ¨linek nevezzÂ¨ k. NÂ´zzÂ¨ nk egy pÂ´ldÂ´t. uo o o o o oÂ´ Ä±tÂ´ e e e u u e u e a Legyenek a mintatÂ´r elemei elemhalmazok. Akkor allÂ´ e Â´ Ä±tsuk elË kÂ´t ( âˆ’1)-elemË gyakori elemhalo e u maznak a minimÂ´lis valÂ´di korlÂ´tjÂ´t, ha metszetÂ¨ k ( âˆ’ 2)-elemË . A minimÂ´lis valÂ´di korlÂ´tok a o a a u u a o a halmaza csak egy elemet fog tartalmazni, a kÂ´t halmaz uniÂ´jÂ´t. Ez a jelÂ¨lt-elËallÂ´ as nem ismÂ´tlÂ´s e oa o oÂ´ Ä±tÂ´ e e nÂ´lkÂ¨ li, ugyanis pÂ´ldÂ´ul az ({A, B}, {A, C}) pÂ´rnak ugyanaz a legkisebb felsË korlÂ´tja, mint az e u e a a o a ({A, B}, {B, C}) pÂ´rnak. a Az ismÂ´tlÂ´s nÂ´lkÂ¨ li jelÂ¨lt-elËallÂ´ ast mindig a minta elemein Â´rtelmezett teljes rendezÂ´s fogja e e e u o oÂ´ Ä±tÂ´ e e garantÂ´lni, ami a âŠ† rendezÂ´s egy lineÂ´ris kiterjesztÂ´se lesz. A teljes rendezÂ´snek megfelelËen a e a e e o vÂ´gigmegyÂ¨ nk az ( âˆ’1)-elemË gyakori mintÂ´kon Â´s megnÂ´zzÂ¨ k, hogy mely sorban utÂ´na kÂ¨vete u u a e e u a o

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

92

kezË ( âˆ’ 1)-elemË gyakori mintÂ´val illeszthetË, illetve az illesztÂ´skÂ´nt kapott potenciÂ´lis jelÂ¨lt o u a o e e a o minden ( âˆ’ 1)-elemË rÂ´szmintÂ´ja gyakori-e. Sok esetben a ismÂ´tlÂ´s nÂ´lkÂ¨ lisÂ´gnek elÂ´gsÂ´ges u e a e e e u e e e feltÂ´tele az lesz, hogy a kÂ´t gyakori minta ( âˆ’ 2)-elemË preï¬xeik megegyezzenek. A minta e e u tÂ´ anak ismeretÂ´ben a teljessÂ´get (minden minimÂ´lis valÂ´di felsË korlÂ´tbeli elemet elËallÂ´ Ä±pusÂ´ e e a o o a oÂ´ Ä±tunk) Â´s az ismÂ´tlÂ´s nÂ´lkÂ¨ lisÂ´get kÂ¨nnyË lesz bizonyÂ´ e e e e u e o u Ä±tani. Algorithm 8 JelÂ¨ltek el}allÂ´tÂ´sa o oÂ´ Ä± a Require: GY âˆ’1 : ( âˆ’ 1)-elemË gyakori mintÂ´k u a

for all gy âˆˆ GY âˆ’1 do for all gy âˆˆ GY âˆ’1 , gy gy do if gy Â´s gy illeszthetË then e o Ë† â‡ minimÂ´lis valÂ´di fels} korlÂ´t(gy, gy ) {J : potenciÂ´lis jelÂ¨ltek halmaza} Ë† J a o o a a o Ë† Ë† âˆˆ J do for all j if minden rÂ´szhalmaz gyakori(Ë† GY âˆ’1 ) then e j, Ë† J â‡j end if end for end if end for end for return J : -elemË jelÂ¨ltek u o

5.4.2. ZÂ´rt mintÂ´k kinyerÂ´se, az APRIORI-CLOSE algoritmus a a e
A zÂ´rt mintÂ´k jelentËsÂ´gÂ´t az 5.2.1 rÂ´szben mÂ´r tÂ´rgyaltuk. Itt most kÂ´t feladat megoldÂ´sÂ´val a a oe e e a a e aa foglalkozunk. MegnÂ´zzÂ¨ k, hogy az osszes gyakori mintÂ´bÂ´l hogyan tudjuk elËallÂ´ e u Â¨ a o oÂ´ Ä±tani a zÂ´rtakat, a illetve bemutatjuk az APRIORI-CLOSE [130â€“132] algoritmust, amely mÂ´r eleve csak a zÂ´rt a a mintÂ´kat hatÂ´rozza meg. MindkÂ´t mÂ´dszerhez az alÂ´bbi Â´szrevÂ´telt hasznÂ´ljuk fel : a a e o a e e a 5.17. Â´szrevÂ´tel. Ha az m minta nem zÂ´rt, akkor van olyan m-et tartalmazÂ´ eggyel nagyobb e e a o mÂ´retË minta, amelynek tÂ´mogatottsÂ´ga megegyezik m tÂ´mogatottsÂ´gÂ´val. e u a a a a a TegyÂ¨ k fel, hogy a legnagyobb mÂ´retË gyakori minta mÂ´rete k. A GY k elemei zÂ´rtak. Egy u e u e a egyszerË algoritmus menete a kÂ¨vetkezË : u o o NÂ´zzÂ¨ k sorban GYkâˆ’1 , GYkâˆ’2 , . . . , GY0 elemeit. Ha m âˆˆ GY -hez talÂ´lunk olyan m âˆˆ GY +1 e u a elemet, amelynek tÂ´mogatottsÂ´ga megegyezik m tÂ´mogatottsÂ´gÂ´val, akkor m nem zÂ´rt. Ha a a a a a a nincs ilyen tulajdonsÂ´gÂ´ m , akkor m zÂ´rt. a u a Az APRIORI-CLOSE menete teljes mÂ´rtÂ´kben megegyezik az APRIORI algoritmus mee e netÂ´vel. Az egyetlen kÂ¨ lÂ¨nbsÂ´g, hogy az -elemË gyakori mintÂ´k meghatÂ´rozÂ´sa utÂ´n tÂ¨rli e uo e u a a a a o az ( âˆ’ 1)-elemË nem zÂ´rtakat. MiutÂ´n eldÂ¨ntÂ¨tte, hogy az -elemË m minta gyakori, megu a a o o u vizsgÂ´lja az osszes ( âˆ’1)-elemË rÂ´szmintÂ´jÂ´t m-nek. Amennyiben van olyan rÂ´szhalmaz, aminek a Â¨ u e aa e tÂ´mogatottsÂ´ga egyenlË m tÂ´mogatottsÂ´gÂ´val, akkor ez a rÂ´szminta nem zÂ´rt, ellenkezË esetben a a o a a a e a o zÂ´rt. a

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

93

5.5. Sorozat tÂ´ Ä±pusÂ´ bemenet u
A legÂ´ltalÂ´nosabb eset leÂ´ asÂ´nÂ´l nem tettÂ¨ nk semmi megkÂ¨tÂ´st a bemenet tÂ´ ara Â´s a a a Ä±rÂ´ a a u oe Ä±pusÂ´ e tÂ´mogatottsÂ´gi fÂ¨ ggvÂ´nyre vonatkozÂ´an. Az esetek tÂ¨bbsÂ´ge azonban egy speciÂ´lis csalÂ´dba a a u e o o e a a tartozik. Ennek a problÂ´macsalÂ´dnak a jellemzËje, hogy a bemenet egy vÂ´ges sorozat, Â´s a e a o e e tÂ´mogatottsÂ´got azon elemek szÂ´ma adja, amelyek valamilyen mÂ´don illeszkednek a mintÂ´ra 2 . a a a o a Az illeszkedÂ´st egy illeszkedÂ´si predikÂ´tummal adhjuk meg, melynek Â´rtelmezÂ´si tartomÂ´nya a e e a e e a mintatÂ´r. e bemenet : S = s1 , s2 , . . . , sn A tÂ´mogatottsÂ´g deï¬nÂ´ oja megkÂ¨veteli, hogy ha egy minta illeszkedik egy sorozatelemre, akkor a a Ä±ciÂ´ o minden rÂ´szmintÂ´ja is illeszkedjen. A legtÂ¨bb esetben a sorozat elemei megegyeznek a mintatÂ´r e a o e elemeivel Â´s az m minta akkor illeszkedik egy sorozatelemre, ha annak m a rÂ´szmintÂ´ja. e e a A szakirodalomban igen elterjedt a sorozatok helyett a halmazokkal leÂ´ bemenet, ahol Ä±rt minden egyes elem egyedi azonosÂ´ oval van ellÂ´tva. A jegyzetben a sorozatos leÂ´ ast fogjuk Ä±tÂ´ a Ä±rÂ´ hasznÂ´lni, akinek ez szokatlan, az tekintse azonosÂ´ oknak a sorozat elemeinek sorszÂ´mÂ´t. a Ä±tÂ´ a a Az m minta gyakorisÂ´gÂ´t (jelÂ¨lÂ´sben : f reqS (m), ami a frequency szÂ´ra utal) az m a a oe o supp tÂ´mogatottsÂ´ga Â´s az S hosszÂ´nak hÂ´nyadosÂ´val deï¬niÂ´ljuk. A gyakorisÂ´gi kÂ¨ szÂ¨bÂ¨t ( min|S| ) a a e a a a a a u o o o u e a a u o kÂ¨vetkezetesen min f req-el jelÂ¨ljÂ¨ k. Az Â´rtelmesen megvÂ´lasztott gyakorisÂ´gi kÂ¨ szÂ¨b mindig o 0 Â´s 1 kÂ¨zÂ¨tt van. Az esetek tÂ¨bbsÂ´gÂ´ben tÂ´mogatottsÂ´gi kÂ¨ szÂ¨b helyett gyakorisÂ´gi kÂ¨ szÂ¨bÂ¨t e o o o e e a a u o a u o o adnak meg. Sorozat tÂ´ u bemenet esetÂ´n merÂ¨ l fel azon elvÂ´rÂ´s az algoritmusokkal szemben, hogy ne Ä±pusÂ´ e u aa legyen Â´rzÂ´keny a bemenet homogenitÂ´sÂ´ra. IntuitÂ´ akkor homogÂ´n egy bemenet, ha nincsee e a a Ä±ve e nek olyan rÂ´szei, amelyben valamely minta gyakorisÂ´ga nagyon eltÂ´r a teljes bemenet alapjÂ´n e a e a szÂ´mÂ´ a Ä±tott gyakorisÂ´gÂ´tÂ´l. Sok alkalmazÂ´sban ez a feltÂ´tel nem all fenn, Â´ azokat az algoa ao a e Â´ Ä±gy ritmusokat kedveljÂ¨ k, amelyek hatÂ´konysÂ´ga fÂ¨ ggetlen a bemenet homogenitÂ´sÂ´tÂ´l. KÂ¨nnyË u e a u aao o u atgondolni, hogy az APRIORI algoritmus rendelkezik ezzel a tulajdonsÂ´ggal. Â´ a

5.5.1. APRIORI
Amennyiben a tÂ´mogatottsÂ´got illeszkedÂ´si predikÂ´tum alapjÂ´n deï¬niÂ´ljuk, akkor az APRIa a e a a a ORI algoritmus a bemeneti elemeken egyesÂ´vel vÂ´gigmegy Â´s nÂ¨veli azon jelÂ¨ltek szÂ´mlÂ´lÂ´jÂ´t, e e e o o a aoa amelyek illeszkednek az Â´ppen aktuÂ´lis bemeneti elemre. Azonos bemeneti elemeknÂ´l ez a e a e mË velet ugyanazt fogja csinÂ´lni ezÂ´rt cÂ´lszerË az azonos bemeneti elemeket osszegyË jteni Â´s u a e e u Â¨ u e csak egyszer meghÂ´ Ä±vni az eljÂ´rÂ´st. A bemenet azonban tÂ´ l nagy lehet, ezÂ´rt ezt gyorsÂ´ asi lÂ´pÂ´st aa u e Ä±tÂ´ e e csak akkor szokÂ´s elvÂ´gezni, amikor mÂ´r rendelkezÂ´sÂ¨ nkre allnak az egyelemË gyakori mintÂ´k. a e a eu Â´ u a Ezek alapjÂ´n tovÂ´bbi szË rÂ´seket lehet vÂ´gezni. PÂ´ldÂ´ul elemhalmaz/elemsorozat tÂ´ u bemea a ue e e a Ä±pusÂ´ neti elemeknÂ´l tÂ¨rÂ¨ljÂ¨ k a halmazbÂ´l/sorozatbÂ´l a ritka elemeket. Ez duplÂ´n hasznos, hiszen e oo u o o a csÂ¨kkentjÂ¨ k a memÂ´riafogyasztÂ´st Â´s mivel az azonos szË rt elemek szÂ´ma nagyobb lehet, mint o u o a e u a az azonos elemek szÂ´ma a tÂ´mogatottsÂ´gok meghatÂ´rozÂ´sa mÂ´g kevesebb idËbe fog telni. a a a a a e o Vannak olyan mintÂ´k, amelyeknÂ´l a illeszkedÂ´s eldÂ¨ntÂ´se drÂ´ga mË velet. PÂ´ldÂ´ul grÂ´f tÂ´ u a e e o e a u e a a Ä±pusÂ´ mintÂ´knÂ´l az illeszkedÂ´s meghatÂ´rozÂ´sÂ´hoz egy rÂ´szgrÂ´f izomorï¬a feladatot kell eldÂ¨nteni, ami a a e a aa e a o bizonyÂ´ Ä±tottan NP-teljes. Ilyen mintÂ´knÂ´l hasznos, ha minden jelÂ¨ltnÂ´l rendelkezÂ´sÂ¨ nkre allnak a a o e eu Â´
Ha csak a matematikai deï¬nÂ´ okat tekintjÂ¨k, akkor tÂ¨rekedhettÂ¨nk volna a legegyszerËbb leÂ´ asra Â´s Ä±ciÂ´ u o u u Ä±rÂ´ e hasznÂ´lhattunk volna sorozatok helyett multihalmazokat. A valÂ´sÂ´gban azonban a bemenet tÂ´nyleg sorozatok a oa e formÂ´jÂ´ban adott, Â´ nem tehetjÂ¨k fel, hogy az azonos bemeneti elemek ossze vannak vonva. aa Ä±gy u Â¨
2

