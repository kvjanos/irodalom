AdatbÂ´ nyÂ´ szati algoritmusok a a
Dr. Bodon Ferenc 2007. szeptember 9.

Copyright c 2002-2007 Dr. Bodon Ferenc Ezen dokumentum a Free Software Foundation altal kiadott GNU Free DoÂ´ cumentation license 1.2-es, vagy bÂ´ rmely azt kÂ¨ vetË verziÂ´ jÂ´ nak feltÂ´ telei alapjÂ´ n a o o oa e a mÂ´ solhatÂ´ , terjeszthetË a o o es/vagy mÂ´ dosÂ´thatÂ´ . Nincs Nem V altoztathatÂ´ Â´ o Ä± o o Szakasz, Â´ nincs CÂ´mlap-szÂ¨ veg, nincs HÂ´ tlap-szÂ¨ veg. A licenc magyar nyelË fordÂ´tÂ´ sa a Ä± o a o u Ä±a http ://hu.wikipedia.org/wiki/A GNU Szabad DokumentÂ´ciÂ´s Licenc szÂ¨vege a o o oldalon talÂ´ lhatÂ´ . a o Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.2 (http://www.gnu.org/copyleft/fdl.html) or any later version published by the Free Software Foundation ; with no Invariant Sections, no FrontCover Texts, and no Back-Cover Texts. A copy of the license is included in the section entitled â€GNU Free Documentation Licenseâ€.

1

KÂ¨ szÂ¨ netnyilvÂ´ nÂ´tÂ´ s o o a Ä±a
Â´ EzÂ´ ton szeretnÂ´ k kÂ¨ szÂ¨ netet mondani Ronyai Lajosnak, a Budapesti MË szaki es Gazu e o o u Â´ dasÂ´ gtudomÂ´ nyi Egyetem tanÂ´ rÂ´ nak az egÂ´ sz munka sorÂ´ n nyÂ´ jtott segÂ´tsÂ´ gÂ´ ert, hasznos otleteiÂ´ rt, a a aa e a u Ä± e eÂ´ Â¨ e Â´ utmutatÂ´ saiÂ´ rt, de legfË kÂ´ ppen azÂ´ rt, mert megismertetett az adatbÂ´ nyÂ´ szattal. KÂ¨ szÂ¨ nÂ¨ m Moln arÂ´ a e o e e a a o o o SÂ´ ska GÂ´ bornak es PintÂ´ r MÂ´ rtÂ´ nak, az MTA-SZTAKI dolgozÂ´ inak valÂ´ szÂ´nË sÂ´ gszÂ´ mÂ´tÂ´ ssal kapa a Â´ e a a o o Ä± u e a Ä±a csolatos tanÂ´ csaikat. a KÂ¨ szÂ¨ nÂ¨ m Buza KrisztiÂ´ nnak hasznos megjegyzÂ´ seit, otleteit, szemlÂ´ letes pÂ´ ldÂ´ it es a kidolgoo o o a e Â¨ e e a Â´ zott abrÂ´ it amelyekkel hozzÂ´ jÂ´ rul a tanulmÂ´ ny sikerÂ´ hez. Â´ a aa a e KÂ¨ lÂ¨ n kÂ¨ szÂ¨ net illeti Czibula VeronikÂ´ t a tanulmÂ´ ny tÂ¨ bbszÂ¨ ri, alapos atnÂ´ zÂ´ sÂ´ ert es a felfedeuo o o a a o o Â´ e e eÂ´ Â´ A X, emacs, Xï¬g hatÂ´ kony zett hibÂ´ k kijavÂ´tÂ´ sÂ´ ert. Marx DÂ´ niel rengeteg informÂ´ ciÂ´ val lÂ´ tott el a L TE a Ä± a aÂ´ a a o a e hasznÂ´ latÂ´ t illetË en. KÂ¨ szÂ¨ nÂ¨ m neki a fÂ´ radozÂ´ sait. a a o o o o a a Â´ Â´ Friedl KatÂ´ nak, ifjabb Benczur AndrÂ´ snak, LukÂ´ cs AndrÂ´ snak, Maricza IstvÂ´ nnak es Bea a a a a reczki TamÂ´ snak kÂ¨ szÂ¨ nÂ¨ m az ertÂ´ kes eszrevÂ´ teleit, megjegyzÂ´ seit. a o o o Â´ e Â´ e e Â´ e ErtÂ´ kes eszrevÂ´ teleik es konstruktÂ´v javaslataiÂ´ rt kÂ¨ szÂ¨ net illeti a BME diÂ´ kjait, tÂ¨ bbek kÂ¨ zÂ¨ tt Â´ e Â´ Ä± e o o a o o o (nÂ´ vsorrendben) Hajnacs ZoltÂ´ nt, Schlotter IldikÂ´ t es Varga DÂ´ nielt. e a o Â´ a

TartalomjegyzÂ´ k e

ElË szÂ´ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . o o 1. BevezetÂ´ s e 1.1. LegjelentË sebb adatbÂ´ nyÂ´ szati feladatok o a a 1.2. A tudÂ´ sfeltÂ´ rÂ´ s folyamata . . . . . . . . a aa 1.3. AdatbÂ´ nyÂ´ szat kontra statisztika . . . . a a 1.4. Sikeres alkalmazÂ´ sok . . . . . . . . . . a 1.5. SzabvÂ´ nyok . . . . . . . . . . . . . . . a 1.6. AdatbÂ´ nyÂ´ szati rendszer architektÂ´ rÂ´ ja . a a ua 1.7. AdatbÂ´ nyÂ´ szat es az etika . . . . . . . . a a Â´ 1.8. Az adatbÂ´ nyÂ´ szat feltÂ´ telei . . . . . . . a a e . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

8 10 11 13 16 18 20 21 22 22 24 24 26 26 27 27 27 28 28 28 29 29 29 30 30 31 31 31 34 35 35 35

2. Alapfogalmak, jelÂ¨ lÂ´ sek oe 2.1. Halmazok, relÂ´ ciÂ´ k, fÂ¨ ggvÂ´ nyek, sorozatok a o u e 2.2. LineÂ´ ris algebra . . . . . . . . . . . . . . . a 2.3. GrÂ´ felmÂ´ let . . . . . . . . . . . . . . . . . a e 2.4. Matematika logika . . . . . . . . . . . . . 2.5. ValÂ´ szÂ´nË sÂ´ gszÂ´ mÂ´tÂ´ s . . . . . . . . . . . . o Ä± u e a Ä±a 2.5.1. Nevezetes eloszlÂ´ sok . . . . . . . . a 2.5.2. FerdesÂ´ g es lapultsÂ´ g . . . . . . . . e Â´ a 2.5.3. Hoeffding-korlÂ´ t . . . . . . . . . . a 2.5.4. EntrÂ´ pia . . . . . . . . . . . . . . . o 2.6. Statisztika . . . . . . . . . . . . . . . . . . 2.6.1. HipotÂ´ zisvizsgÂ´ lat . . . . . . . . . e a 2.6.2. Az F-prÂ´ ba . . . . . . . . . . . . . o 2.6.3. A Ï‡2 -prÂ´ ba . . . . . . . . . . . . . o 2.6.4. FÂ¨ ggetlensÂ´ gvizsgÂ´ lat . . . . . . . u e a 2.7. Algoritmus-elmÂ´ let . . . . . . . . . . . . . e 2.8. AdatstruktÂ´ rÂ´ k . . . . . . . . . . . . . . . ua 2.8.1. SzÂ´ fÂ´ k . . . . . . . . . . . . . . . oa 2.8.2. Piros-fekete fÂ´ k . . . . . . . . . . . a 2.8.3. Hash-tÂ´ bla . . . . . . . . . . . . . a 2.9. SzÂ´ mÂ´tÂ´ gÂ´ p-architektÂ´ rÂ´ k . . . . . . . . . . a Ä±o e ua 2.9.1. TÂ¨ bbszintË memÂ´ ria, adatlokalitÂ´ s . o u o a 2

Â´ TARTALOMJEGYZEK 2.9.2. CsË vezetÂ´ kes feldolgozÂ´ s, elÂ´ gazÂ´ s-elË rejelzÂ´ s . . . . . . . . . . . . . . . . o e a a a o e 3. ElË feldolgozÂ´ s, hasonlÂ´ sÂ´ gi fuggvÂ´ nyek o a oa Â¨ e 3.1. ElË feldolgozÂ´ s . . . . . . . . . . . . o a 3.1.1. HiÂ´ nyzÂ´ ertÂ´ kek kezelÂ´ se . . . a oÂ´ e e 3.1.2. AttribÂ´ tum transzformÂ´ ciÂ´ k . u a o 3.1.3. MintavÂ´ telezÂ´ s . . . . . . . . e e 3.2. HasonlÂ´ sÂ´ gi mÂ´ rtÂ´ kek . . . . . . . . . oa e e 3.2.1. BinÂ´ ris attribÂ´ tum . . . . . . a u 3.2.2. KategÂ´ ria tÂ´pusÂ´ attribÂ´ tum . o Ä± u u 3.2.3. Sorrend tÂ´pusÂ´ attribÂ´ tum . . Ä± u u 3.2.4. Intervallum tÂ´pusÂ´ attribÂ´ tum Ä± u u 3.2.5. Vegyes attribÂ´ tumok . . . . . u 3.2.6. SpeciÂ´ lis esetek . . . . . . . . a 3.2.7. DimenziÂ´ csÂ¨ kkentÂ´ s . . . . . o o e . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

3 36 37 38 38 38 38 39 40 41 41 41 42 42 43 49 49 52 53 54 56 57 57 58 60 60 62 65 66 70 73 74 74 74 74 74 74 75 76 78 78 79 79

4. Gyakori elemhalmazok 4.1. A gyakori elemhalmaz fogalma . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4.2. Az APRIORI algoritmus . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4.2.1. JelÂ¨ ltek elË allÂ´tÂ´ sa . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . o oÂ´ Ä± a 4.2.2. JelÂ¨ ltek tÂ´ mogatottsÂ´ gÂ´ nak meghatÂ´ rozÂ´ sa . . . . . . . . . . . . . . . . . . o a a a a a 4.2.3. ZsÂ´ kutca nyesÂ´ s . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a e 4.2.4. A bemenet tÂ´ rolÂ´ sa . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a a 4.2.5. TranzakciÂ´ k szË rÂ´ se . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . o ue 4.2.6. Equisupport nyesÂ´ s . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . e 4.2.7. Borgelt-fÂ´ le tÂ´ mogatottsÂ´ g-meghatÂ´ rozÂ´ s . . . . . . . . . . . . . . . . . . . e a a a a 4.2.8. UtolsÂ´ fÂ´ zisok gyorsÂ´tÂ´ sa : APRIORI-TID es APRIORI-HYBRID algoritmusok o a Ä±a Â´ 4.2.9. FutÂ´ si idË es memÂ´ riaigÂ´ ny . . . . . . . . . . . . . . . . . . . . . . . . . . a oÂ´ o e 4.2.10. KÂ´ telemË jelÂ¨ ltek szÂ´ mÂ´ nak csÂ¨ kkentÂ´ se : a DHP algoritmus . . . . . . . . . e u o a a o e 4.3. Az ECLAT algoritmus . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4.4. Az FP- GROWTH algoritmus . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4.4.1. Az FP-growth* algoritmus . . . . . . . . . . . . . . . . . . . . . . . . . . . 4.5. TovÂ´ bbi hÂ´res algoritmusok . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a Ä± 4.5.1. A DF -APRIORI algoritmus . . . . . . . . . . . . . . . . . . . . . . . . . . 4.5.2. patricia . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4.5.3. kdci . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4.5.4. lcm . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4.5.5. MintavÂ´ telezË algoritmus elemzÂ´ se . . . . . . . . . . . . . . . . . . . . . . e o e 4.6. Elemhalmazok Galois lezÂ´ rja . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 4.6.1. A zÂ´ rt elemhalmazok fogalma . . . . . . . . . . . . . . . . . . . . . . . . . a 4.7. KÂ´ nyszerek kezelÂ´ se . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . e e 4.7.1. ExAnte . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4.8. TÂ¨ bbszÂ¨ rÂ¨ s tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ b . . . . . . . . . . . . . . . . . . . . . . . . . . . o oo a a u o 4.8.1. MSApriori algoritmus . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

Â´ TARTALOMJEGYZEK 5. Gyakori mintÂ´ k kinyerÂ´ se a e 5.1. A gyakori minta deï¬nÂ´ciÂ´ ja . . . . . . . . . . . . . . . . . . . . Ä± o 5.1.1. HatÂ´ konysÂ´ gi kÂ´ rdÂ´ sek . . . . . . . . . . . . . . . . . . e a e e 5.2. TovÂ´ bbi feladatok . . . . . . . . . . . . . . . . . . . . . . . . . a 5.2.1. Nem bË vÂ´thetË es zÂ´ rt mintÂ´ k . . . . . . . . . . . . . . o Ä± oÂ´ a a 5.2.2. KÂ´ nyszerek kezelÂ´ se . . . . . . . . . . . . . . . . . . . e e 5.2.3. TÂ¨ bbszÂ¨ rÂ¨ s tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ b . . . . . . . . . . . . o oo a a u o 5.2.4. Dinamikus gyakori mintakinyerÂ´ s . . . . . . . . . . . . e 5.3. Az algoritmusok jellemzË i . . . . . . . . . . . . . . . . . . . . o 5.4. Az APRIORI mÂ´ dszer . . . . . . . . . . . . . . . . . . . . . . o 5.4.1. JelÂ¨ ltek elË allÂ´tÂ´ sa . . . . . . . . . . . . . . . . . . . . o oÂ´ Ä± a 5.4.2. ZÂ´ rt mintÂ´ k kinyerÂ´ se, az APRIORI-CLOSE algoritmus a a e 5.5. Sorozat tÂ´pusÂ´ bemenet . . . . . . . . . . . . . . . . . . . . . . Ä± u 5.5.1. APRIORI . . . . . . . . . . . . . . . . . . . . . . . . . 5.5.2. Zaki mÂ´ dszere . . . . . . . . . . . . . . . . . . . . . . o 5.5.3. MintanÂ¨ velË algoritmusok . . . . . . . . . . . . . . . . o o 5.5.4. KÂ´ tlÂ´ pcsË s technikÂ´ k . . . . . . . . . . . . . . . . . . . e e o a 5.5.5. A zÂ´ rt mintÂ´ k tÂ¨ rÂ´ kenysÂ´ geâ€ . . . . . . . . . . . . . . a a oe e â€ 5.5.6. Dinamikus gyakori mintabÂ´ nyÂ´ szat . . . . . . . . . . . a a 6. Gyakori sorozatok, bool formulÂ´ k es epizÂ´ dok a Â´ o 6.1. Gyakori sorozatok kinyerÂ´ se . . . . . . . . . . . . . . e 6.1.1. A Gyakori Sorozat Fogalma . . . . . . . . . . 6.1.2. APRIORI . . . . . . . . . . . . . . . . . . . . 6.1.3. Elemhalmazokat tartalmazÂ´ gyakori sorozatok o 6.1.4. Sorozat tÂ´pusÂ´ minta altalÂ´ nosÂ´tÂ´ sa . . . . . . . Ä± u Â´ a Ä±a 6.2. Gyakori bool formulÂ´ k . . . . . . . . . . . . . . . . . a 6.3. Gyakori epizÂ´ dok . . . . . . . . . . . . . . . . . . . . o 6.3.1. A tÂ´ mogatottsÂ´ g deï¬nÂ´ciÂ´ ja . . . . . . . . . . a a Ä± o 6.3.2. APRIORI . . . . . . . . . . . . . . . . . . . . 7. Gyakori fÂ´ k es feszÂ´tett rÂ´ szgrÂ´ fok a Â´ Ä± e a 7.1. Az izomorï¬a problÂ´ mÂ´ ja . . . e a 7.2. A gyakori grÂ´ f fogalma . . . . a 7.3. gyakori gyÂ¨ keres fÂ´ k . . . . . o a 7.3.1. TreeMinerH . . . . . . 7.3.2. TreeMinerV . . . . . . 7.4. Gyakori rÂ´ szfÂ´ k . . . . . . . . e a 7.5. A gyakori feszÂ´tett rÂ´ szgrÂ´ fok . Ä± e a 7.5.1. Az AcGM algoritmus . 7.6. A gyakori rÂ´ szgrÂ´ fok keresÂ´ se e a e 7.6.1. Az FSG algoritmus . . 7.6.2. gSpan . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

4 81 82 83 84 84 85 86 86 87 87 88 90 90 91 92 94 96 99 99 102 102 103 103 104 108 108 109 109 110 113 113 115 115 117 118 120 120 120 122 122 124

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

Â´ TARTALOMJEGYZEK 8. AsszociÂ´ ciÂ´ s szabÂ´ lyok a o a 8.1. Az asszociÂ´ ciÂ´ s szabÂ´ ly fogalma . . . . . . . . a o a 8.2. Hierarchikus asszociÂ´ ciÂ´ s szabÂ´ lyok . . . . . . a o a 8.3. MaximÂ´ lis kÂ¨ vetkezmÂ´ nyË asszociÂ´ ciÂ´ s szabÂ´ ly a o e u a o a 8.3.1. Egzakt asszociÂ´ ciÂ´ s szabÂ´ lyok bÂ´ zisa . a o a a Â´ 8.4. ErdekessÂ´ gi mutatÂ´ k . . . . . . . . . . . . . . e o 8.5. A korrelÂ´ ciÂ´ nem jelent implikÂ´ ciÂ´ t . . . . . . a o a o

5 127 127 128 130 130 131 140

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

9. FunkcionÂ´ lis es kÂ¨ zelÂ´tË fuggË sÂ´ gek a Â´ o Ä±o Â¨ oe 142 9.1. FunkcionÂ´ lis fÂ¨ ggË sÂ´ g . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 143 a u oe 9.2. KÂ¨ zelÂ´tË fÂ¨ ggË sÂ´ g . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 143 o Ä±o u o e 9.3. TANE Algoritmus . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 144 10. OsztÂ´ lyozÂ´ s a a 10.1. BevezetÂ´ s . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . e 10.2. Az osztÂ´ lyozÂ´ s feladata . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a a 10.3. k-legkÂ¨ zelebbi szomszÂ´ d mÂ´ dszere . . . . . . . . . . . . . . . . . . . . . . . o e o 10.4. DÂ¨ ntÂ´ si szabÂ´ lyok . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . o e a 10.4.1. SzabÂ´ ly halmazok es szabÂ´ ly sorozatok . . . . . . . . . . . . . . . . a Â´ a 10.4.2. DÂ¨ ntÂ´ si tÂ´ blÂ´ zatok . . . . . . . . . . . . . . . . . . . . . . . . . . . o e a a 10.4.3. Az 1R algoritmus . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10.4.4. A Prism mÂ´ dszer . . . . . . . . . . . . . . . . . . . . . . . . . . . . o 10.5. DÂ¨ ntÂ´ si fÂ´ k . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . o e a 10.5.1. DÂ¨ ntÂ´ si fÂ´ k es dÂ¨ ntÂ´ si szabÂ´ lyok . . . . . . . . . . . . . . . . . . . . o e a Â´ o e a 10.5.2. A dÂ¨ ntÂ´ si fa elË allÂ´tÂ´ sa . . . . . . . . . . . . . . . . . . . . . . . . . o e oÂ´ Ä± a 10.5.3. Az ID3 algoritmus . . . . . . . . . . . . . . . . . . . . . . . . . . . 10.5.4. FeltÂ´ telek a csomÂ´ pontokban . . . . . . . . . . . . . . . . . . . . . . e o 10.5.5. VÂ´ gÂ´ si fÂ¨ ggvÂ´ nyek . . . . . . . . . . . . . . . . . . . . . . . . . . . a a u e 10.5.6. TovÂ´ bbfejlesztÂ´ sek . . . . . . . . . . . . . . . . . . . . . . . . . . . a e 10.5.7. SÂ´ lyozott divergenciafÂ¨ ggvÂ´ nyek alapjÂ´ n deï¬niÂ´ lt vÂ´ gÂ´ si fÂ¨ ggvÂ´ nyek u u e a a a a u e 10.5.8. DÂ¨ ntÂ´ si fÂ´ k abrÂ´ zolÂ´ sa . . . . . . . . . . . . . . . . . . . . . . . . . o e a Â´ a a 10.5.9. Hanyag dÂ¨ ntÂ´ si fÂ´ k . . . . . . . . . . . . . . . . . . . . . . . . . . . o e a 10.6. MestersÂ´ ges neurÂ´ lis hÂ´ lÂ´ zatok . . . . . . . . . . . . . . . . . . . . . . . . . e a ao 10.7. Bayesi hÂ´ lÂ´ zatok . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ao 10.8. EgyÂ´ b mÂ´ dszerek . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . e o 10.9. OsztÂ´ lyozÂ´ k kiÂ´ rtÂ´ kelÂ´ se . . . . . . . . . . . . . . . . . . . . . . . . . . . . a o e e e Â´ 10.9.1. ErtekezÂ´ s . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . e 10.9.2. Hiba mÂ´ rÂ´ se valÂ´ szÂ´nË sÂ´ gi dÂ¨ ntÂ´ si rendszerek esetÂ´ n . . . . . . . . . ee o Ä± ue o e e 11. RegressziÂ´ o 12. KlaszterezÂ´ s e 12.1. Egy lehetetlensÂ´ g-elmÂ´ let . . . . . e e 12.2. HasonlÂ´ sÂ´ g mÂ´ rtÂ´ ke, adatÂ´ brÂ´ zolÂ´ s oa e e a a a 12.3. A klaszterek jellemzË i . . . . . . o 12.4. A klaszterezÂ´ s jÂ´ sÂ´ gaâ€ . . . . . . e oa â€ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 150 150 151 152 154 156 156 157 158 159 160 162 162 163 164 166 166 168 168 168 170 171 172 173 174 175 176 177 179 180 181

Â´ TARTALOMJEGYZEK 12.4.1. Klasszikus mÂ´ rtÂ´ kek . . . . . . . . . . . . . . e e 12.4.2. Konduktancia alapÂ´ mÂ´ rtÂ´ k . . . . . . . . . . u e e 12.5. KlaszterezË algoritmusok tÂ´pusai . . . . . . . . . . . . o Ä± 12.6. ParticionÂ´ lÂ´ eljÂ´ rÂ´ sok . . . . . . . . . . . . . . . . . . ao aa 12.6.1. Forgy k-kÂ¨ zÂ´ p algoritmusa . . . . . . . . . . . o e 12.6.2. A k-medoid algoritmusok . . . . . . . . . . . 12.7. Hierarchikus eljÂ´ rÂ´ sok . . . . . . . . . . . . . . . . . aa 12.7.1. Single-, Complete-, Avegare Linkage EljÂ´ rÂ´ sok aa 12.7.2. Ward mÂ´ dszere . . . . . . . . . . . . . . . . . o 12.7.3. A BIRCH algoritmus . . . . . . . . . . . . . . 12.7.4. A CURE algoritmus . . . . . . . . . . . . . . 12.7.5. A Chameleon algoritmus . . . . . . . . . . . . 12.8. SË rË sÂ´ g-alapÂ´ mÂ´ dszerek . . . . . . . . . . . . . . . . uue u o 12.8.1. A DBSCAN algoritmus . . . . . . . . . . . . 13. IdË sorok elemzÂ´ se o e 14. SzÂ¨ vegbÂ´ nyÂ´ szat (Tikk Domonkos) o a a 14.1. Dokumentumok elË feldolgozÂ´ sa . . . . . . . . . . . . . . . . . . . . . . . . . . . o a 14.1.1. A dimenziÂ´ szÂ´ m csÂ¨ kkentÂ´ se . . . . . . . . . . . . . . . . . . . . . . . . o a o e 14.1.2. HatÂ´ konysÂ´ g mÂ´ rÂ´ se . . . . . . . . . . . . . . . . . . . . . . . . . . . . . e a ee 14.2. OsztÂ´ lyozÂ´ s . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a a 14.2.1. OsztÂ´ lyozÂ´ s strukturÂ´ latlan kategÂ´ riÂ´ k rendszerÂ´ be . . . . . . . . . . . . . a a a o a e 14.2.2. Hierarchikus osztÂ´ lyozÂ´ s . . . . . . . . . . . . . . . . . . . . . . . . . . . a a 14.3. Dokumentumok csoportosÂ´tÂ´ sa . . . . . . . . . . . . . . . . . . . . . . . . . . . . Ä±a 14.3.1. SzÂ¨ vegklaszterezÂ´ s jellemzË feladatai es problÂ´ mÂ´ i . . . . . . . . . . . . . o e o Â´ e a 14.3.2. ReprezentÂ´ ciÂ´ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a o 14.3.3. HatÂ´ konysÂ´ g mÂ´ rÂ´ se . . . . . . . . . . . . . . . . . . . . . . . . . . . . . e a ee 14.3.4. SzÂ¨ vegklaszterezË eljÂ´ rÂ´ sok . . . . . . . . . . . . . . . . . . . . . . . . . o o aa 14.3.5. DokumentumgyË jtemÂ´ nyek . . . . . . . . . . . . . . . . . . . . . . . . . u e 14.4. KivonatolÂ´ s . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 14.4.1. Az osszegzÂ´ skÂ´ szÂ´tË eljÂ´ rÂ´ sok felosztÂ´ sa . . . . . . . . . . . . . . . . . . . Â¨ e e Ä±o aa a 14.4.2. A kivonatolÂ´ s hatÂ´ konysÂ´ gÂ´ nak mÂ´ rÂ´ se . . . . . . . . . . . . . . . . . . . a e a a ee 14.4.3. MondatkivÂ´ lasztÂ´ snÂ´ l hasznÂ´ lt jellemzË k . . . . . . . . . . . . . . . . . . a a a a o 14.5. A legfontosabb kivonatolÂ´ eljÂ´ rÂ´ sok . . . . . . . . . . . . . . . . . . . . . . . . . o aa 14.5.1. A klasszikus mÂ´ dszer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . o 14.5.2. TF-IDF alapÂ´ mÂ´ dszer . . . . . . . . . . . . . . . . . . . . . . . . . . . . u o 14.5.3. CsoportosÂ´tÂ´ s alapÂ´ mÂ´ dszerek . . . . . . . . . . . . . . . . . . . . . . . . Ä±a u o 14.5.4. GrÂ´ felmÂ´ leti megkÂ¨ zelÂ´tÂ´ sek . . . . . . . . . . . . . . . . . . . . . . . . . a e o Ä±e 14.5.5. SVD hasznÂ´ lata a kivonatolÂ´ sban . . . . . . . . . . . . . . . . . . . . . . a a 14.5.6. EsettanulmÂ´ ny : bÂ¨ ngÂ´ szÂ´ s tÂ´ mogatÂ´ sa kivonatolÂ´ ssal kÂ´ zi szÂ´ mÂ´tÂ´ gÂ´ peken a o e e a a a e a Ä±o e 14.6. EgyÂ´ b szÂ¨ vegbÂ´ nyÂ´ szati feladatok . . . . . . . . . . . . . . . . . . . . . . . . . . e o a a 14.6.1. InformÂ´ ciÂ´ kinyerÂ´ s . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a o e 14.6.2. TÂ´ makÂ¨ vetÂ´ s . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . e o e 14.6.3. FogalomtÂ´ rsÂ´tÂ´ s . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a Ä±a 14.6.4. SzÂ¨ veges informÂ´ ciÂ´ k vizualizÂ´ lÂ´ sa . . . . . . . . . . . . . . . . . . . . . o a o aa . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

6 181 183 185 186 186 187 188 189 189 190 190 192 192 192 194 195 196 198 199 200 200 207 210 210 211 211 212 214 214 215 216 217 218 218 219 219 221 221 221 224 224 224 225 225

Â´ TARTALOMJEGYZEK 14.6.5. KÂ´ rdÂ´ s-megvÂ´ laszolÂ´ s . . . . . . . . . . . . . . e e a a 14.7. NyelvfeldolgozÂ´ s es szÂ¨ vegbÂ´ nyÂ´ szat . . . . . . . . . . a Â´ o a a 14.7.1. SzÂ¨ vegbÂ´ nyÂ´ szat magyarul . . . . . . . . . . . . o a a 14.8. LinkgyË jtemÂ´ ny . . . . . . . . . . . . . . . . . . . . . . u e 14.8.1. Tesztkorpuszok . . . . . . . . . . . . . . . . . . 14.8.2. Cikk- es linkgyË jtemÂ´ nyek . . . . . . . . . . . . Â´ u e 14.8.3. SzÂ¨ vegbÂ´ nyÂ´ szati szoftverek . . . . . . . . . . . o a a 14.8.4. NÂ´ hÂ´ ny magyar vonatkozÂ´ sÂ´ eredmÂ´ ny es projekt e a au e Â´ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

7 225 226 227 227 227 227 228 228 230 230 231 234 234 234 238 240 241 241 243 243 243 244 245 246 247 248 249 250

15. Webes adatbÂ´ nyÂ´ szat a a 15.1. Oldalak rangsorolÂ´ sa . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a 15.1.1. Az egyszerË Page Rank . . . . . . . . . . . . . . . . . . . . . . . . . . u 15.1.2. Az igazi Page Rank . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15.2. Webes keresÂ´ s . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . e 15.2.1. GyË jtË lapok es TekintÂ´ lyek â€“ a HITS algoritmus . . . . . . . . . . . . u o Â´ e 15.2.2. A SALSA mÂ´ dszer (Jakabfy TamÂ´ s) . . . . . . . . . . . . . . . . . . . o a 15.2.3. GyË jtË lapok, TekintÂ´ lyek es vÂ´ letlen sÂ´ tÂ´ k (Jakabfy TamÂ´ s) . . . . . . u o e Â´ e ea a 15.2.4. Automatikus forrÂ´ s elË allÂ´tÂ´ - GyË jtË lapok es TekintÂ´ lyek mÂ´ dosÂ´tÂ´ sai . a oÂ´ Ä± o u o Â´ e o Ä±a 15.2.5. GyË jtË lapok es TekintÂ´ lyek mÂ´ dszerÂ´ nek hÂ´ trÂ´ nyai . . . . . . . . . . . u o Â´ e o e a a 16. AdatbÂ´ nyÂ´ szat a gyakorlatban a a 16.1. FelhasznÂ´ lÂ´ si terÂ¨ letek . . . . . . . . . . . . . . . . . . . . . . . . . . aa u 16.1.1. Az ugyfÂ´ l eletciklusa . . . . . . . . . . . . . . . . . . . . . . . Â¨ e Â´ 16.1.2. Kereskedelem . . . . . . . . . . . . . . . . . . . . . . . . . . . 16.1.3. PÂ´ nzÂ¨ gy . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . e u 16.1.4. BiolÂ´ gia es OrvostudomÂ´ ny . . . . . . . . . . . . . . . . . . . o Â´ a 16.2. Az adatbÂ´ nyÂ´ szat bÂ¨ lcsË je : az elektronikus kereskedelem (e-commerce) a a o o 16.3. AdatbÂ´ nyÂ´ sz szoftverek . . . . . . . . . . . . . . . . . . . . . . . . . . a a 16.3.1. AdatbÂ´ nyÂ´ szati rendszerek tulajdonsÂ´ gai . . . . . . . . . . . . a a a 16.3.2. EsettanulmÂ´ nyok rÂ¨ viden . . . . . . . . . . . . . . . . . . . . . a o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

Â¨ FuggelÂ´ k e 254 FÂ¨ ggelÂ´ k A . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 254 u e

ElË szÂ´ o o

A 90-es evekben a tÂ´ rolÂ´ kapacitÂ´ sok mÂ´ retÂ´ nek igen erË teljes nÂ¨ vekedÂ´ se, valamint az arak Â´ a o a e e o o e Â´ 1 miatt az elektronikus eszkÂ¨ zÂ¨ k es adatbÂ´ zisok a hÂ´ tkÂ¨ znapi eletben is mind nagymÂ´ rtÂ´ kË csÂ¨ kkenÂ´ se e e u o e o o Â´ a e o Â´ inkÂ´ bb elterjedtek. Az egyszerË es olcsÂ´ tÂ´ rolÂ´ si lehetË sÂ´ gek a nyers, feldolgozatlan adatok tÂ¨ meges a uÂ´ o a a oe o mÂ´ retË felhalmozÂ´ sÂ´ t eredmÂ´ nyeztÂ´ k, ezek azonban a kÂ¨ zvetlen visszakeresÂ´ sen es ellenË rzÂ´ sen kÂ´vÂ¨ l e u aa e e o e Â´ o e Ä± u nem sok egyÂ´ b haszonnal jÂ´ rtak. A ritkÂ´ n lÂ´ togatott adatokbÂ´ l adat temetË kâ€ (data tombs) alakule a a a o o â€ tak ki [74], amelyek tÂ´ rolÂ´ sa haszon helyett kÂ¨ ltsÂ´ get jelentett. Ekkor mÂ´ g nem alltak rendelkezÂ´ sre a a o e e Â´ e olyan eszkÂ¨ zÂ¨ k, amivel az adatokba agyazott ertÂ´ kes informÂ´ ciÂ´ t ki tudtak nyerni. KÂ¨ vetkezÂ´ skÂ´ ppen o o Â´ Â´ e a o o e e a fontos dÂ¨ ntÂ´ sek a dÂ¨ ntÂ´ shozÂ´ k megÂ´ rzÂ´ sein alapultak, nem pedig az informÂ´ ciÂ´ -gazdag adatokon. o e o e o e e a o JÂ´ l jellemzi ezt a helyzetet John Naisbitt hÂ´res mondÂ´ sa, miszerint We are drowning in information, o Ä± a â€ but starving for knowledgeâ€ (Megfulladunk az informÂ´ ciÂ´ tÂ´ l, mikÂ¨ zben tudÂ´ sra ehezÂ¨ nk). a oo o a Â´ u Egyre tÂ¨ bb terÂ¨ leten merÂ¨ lt fel az igÂ´ ny, hogy az adathalmazokbÂ´ l a hagyomÂ´ nyosnÂ´ l arnyaltabb o u u e o a a Â´ szerkezetË informÂ´ ciÂ´ kat nyerjenek ki. A hagyomÂ´ nyos adatbÂ´ zis-kezelË rendszerek â€“ a kÂ¨ zvetlen u a o a a o o keresË kÂ´ rdÂ´ seken kÂ´vÂ¨ l, illetve az alapvetË statisztikai funkciÂ´ kon tÂ´ l (Â´ tlag, szÂ´ rÂ´ s, maximÂ´ lis es mio e e Ä± u o o u a oa a Â´ nimÂ´ lis ertÂ´ kek meghatÂ´ rozÂ´ sa) â€“ komplexebb feladatokat egyÂ´ ltalÂ´ n nem tudtak megoldani, vagy az a Â´ e a a a a eredmÂ´ ny kiszÂ´ mÂ´tÂ´ sa elfogadhatatlanul hosszÂ´ idË be telt. A szÂ¨ ksÂ´ g egy uj tudomÂ´ nyterÂ¨ letet keltett e a Ä±a u o u e Â´ a u eletre, az adatbÂ´ nyÂ´ szatot, amelynek cÂ´ lja : hasznos, lÂ´ tens informÂ´ ciÂ´ kinyerÂ´ se az adatokbÂ´ lâ€. Az Â´ a a e a a o e o â€ adatbÂ´ nyÂ´ szati algoritmusokat immÂ´ r arra terveztÂ´ k, hogy kÂ´ pesek legyenek az arnyaltabb informÂ´ ciÂ´ a a a e e Â´ a o kinyerÂ´ sÂ´ re akÂ´ r oriÂ´ si mÂ´ retË adatbÂ´ zisok esetÂ´ n is. ee a Â´ a e u a e Az adatbÂ´ nyÂ´ szat, mint onÂ´ llÂ´ tudomÂ´ nyterÂ¨ let lÂ´ tezÂ´ sÂ´ rË l az 1980-as evek vÂ´ gÂ´ tË l beszÂ´ lhetÂ¨ nk. a a Â¨ a o a u e eeo Â´ e eo e u Kezdetben a kÂ¨ lÂ¨ nbÂ¨ zË heurisztikÂ´ k, a matematikailag nem elemzett algoritmusok dominÂ´ ltak. A 90uo o o a a es evekben megjelent cikkek tÂ¨ bbsÂ´ gÂ´ t legfeljebb elhinni lehetett, de semmikÂ´ ppen sem kÂ´ tely nÂ´ lkÂ¨ l Â´ o e e e e e u meggyË zË dni az egyes Â´rÂ´ sok helytÂ´ llÂ´ sÂ´ gÂ´ rÂ´ l. Az algoritmusok futÂ´ si idejÂ´ rË l es memÂ´ riaigÂ´ nyÂ´ rË l o o Ä±a a oa ao a eo Â´ o e eo altalÂ´ ban felszÂ´nes elemzÂ´ seket es tesztelÂ´ si eredmÂ´ nyeket olvashattunk. Az igÂ´ nyes olvasÂ´ ban minÂ´ a Ä± e Â´ e e e o dig maradt egy-kÂ´ t kÂ´ rdÂ´ s, amire emlÂ´tÂ´ s szintjÂ´ n sem talÂ´ lt vÂ´ laszt. Bizonyos kÂ´ osz uralkodott, amie e e Ä±e e a a a ben lÂ´ tszÂ´ lag mindenre volt megoldÂ´ s, am ezek a megoldÂ´ sok tÂ¨ bbnyire rÂ´ szlegesek voltak, tele a a o a Â´ a o e legkÂ¨ lÂ¨ nbÂ¨ zË bb hibÂ´ kkal. uo o o a A XXI. szÂ´ zadba valÂ´ belÂ´ pÂ´ ssel a kutatÂ´ k kÂ¨ rÂ´ ben egyre nagyobb nÂ´ pszerË sÂ´ gnek kezdett a o e e o oe e ue orvendeni az adatbÂ´ nyÂ´ szat. Ennek kÂ´ t oka van. EgyrÂ´ szt a nÂ¨ vekvË versenyhelyzet miatt a piaci Â¨ a a e e o o elet szereplË inek oriÂ´ si az igÂ´ nye az adatbÂ´ zisokban megbÂ´ jÂ´ hasznos informÂ´ ciÂ´ kra. A nÂ¨ vekvË Â´ o Â´ a e a uo a o o o igÂ´ ny nÂ¨ vekvË kutatÂ´ i beruhÂ´ zÂ´ sokat indukÂ´ lt. MÂ´ srÂ´ szt, az adatbÂ´ nyÂ´ szat a maga nehÂ´ zsÂ´ gÂ´ vel, e o o o a a a a e a a e e e multi-diszciplinÂ´ ris voltÂ´ val a kutatni, gondolkodni es ujszerË problÂ´ mÂ´ kat megoldani vÂ´ gyÂ´ igÂ´ nyÂ´ t a a Â´ Â´ u e a a o e e
tÂ´ rolÂ´ kapacitÂ´ s nÂ¨ vekedÂ´ se mÂ´ g Moore jÂ´ slatÂ´ t is jÂ´ cskÂ´ n felÂ¨ lmÂ´ lja. Az utÂ´ bbi 15 ev alapjÂ´ n ugyanis a a o a o e e o a o a u u o Â´ a tÂ´ rolÂ´ kapacitÂ´ s 9 hÂ´ naponkÂ´ nt duplÂ´ zÂ´ dik meg [135] a o a o e a o
1A

8

Â´ TARTALOMJEGYZEK

9

tÂ¨ kÂ´ letesen kielÂ´ gÂ´ti. o e e Ä± Sorra szÂ¨ lettek meg a szÂ´nvonalas munkÂ´ k, elemzÂ´ sek, osszehasonlÂ´tÂ´ sok, mint tiszta irÂ´ nyvonalak u Ä± a e Â¨ Ä±a a rajzolÂ´ dtak ki a kÂ´ oszban. A megoldatlan, nyitott problÂ´ mÂ´ kra mÂ´ g mindig keressÂ¨ k a vÂ´ laszt, Â´gy o a e a e u a Ä± valÂ´ szÂ´nË leg az adatbÂ´ nyÂ´ szat diadalmenete mÂ´ g sokÂ´ ig tÂ¨ retlen marad. o Ä± u a a e a o Ez a jegyzet a jelenlegi adatbÂ´ nyÂ´ szati problÂ´ mÂ´ krÂ´ l es az azokat megoldÂ´ algoritmusokrÂ´ l szÂ´ l. a a e a o Â´ o o o A terÂ¨ letek attekintÂ´ se mellett az algoritmusok mÂ´ lyebb szintË megismerÂ´ se is a cÂ´ l. Az Â´rÂ´ s inu Â´ e e u e e Ä±a formatikus beÂ´ llÂ´tottsÂ´ gÂ´ olvasÂ´ knak kÂ´ szÂ¨ lt. FeltÂ´ telezzÂ¨ k, hogy az olvasÂ´ tisztÂ´ ban van algoritmusa Ä± a u o e u e u o a [101] es adatbÂ´ zis-elmÂ´ leti alapokkal, tovÂ´ bbÂ´ nem ismeretlen terÂ¨ let szÂ´ mÂ´ ra a valÂ´ szÂ´nË sÂ´ gszÂ´ mÂ´tÂ´ s Â´ a e a a u a a o Ä± u e a Ä±a [9, 57] es a lineÂ´ ris algebra [141] sem. Â´ a A jegyzet cÂ´ lja az, hogy az adatbÂ´ nyÂ´ szati apparÂ´ tus olyan megismerÂ´ sÂ´ t nyÂ´ jtsa, melynek e a a a ee u segÂ´tsÂ´ gÂ´ vel az olvasÂ´ sikerrel oldja meg az egyre tÂ¨ bb terÂ¨ leten felbukkanÂ´ ujabb es ujabb Ä± e e o o u o Â´ Â´ Â´ adatbÂ´ nyÂ´ szati problÂ´ mÂ´ kat. Algoritmikus adatbÂ´ nyÂ´ szatrÂ´ l Â´runk, ezÂ´ rt azon mestersÂ´ ges intelligena a e a a a o Ä± e e cia terÂ¨ letÂ´ hez tartozÂ´ eszkÂ¨ zÂ¨ k (mestersÂ´ ges neurÂ´ lis hÂ´ lÂ´ zatok, genetikus algoritmusok es fuzzy u e o o o e a ao Â´ rendszerek), amelyekrË l azt tartjÂ´ k, hogy az adatbÂ´ nyÂ´ szatban is hasznÂ´ lhatÂ´ k, kevÂ´ s hangsÂ´ lyt kapo a a a a o e u nak. A jegyzet legfrissebb vÂ´ ltozata letÂ¨ lthetË a a o o http://www.cs.bme.hu/~bodon/magyar/adatbanyaszat cÂ´men talÂ´ lhatÂ´ oldalrÂ´ l. Ä± a o o A jegyzet nem vÂ´ gleges ! Folyamatosan bË vÂ¨ l, vÂ´ ltozik. Egyes rÂ´ szek kisebb sÂ´ lyt kapnak, mÂ´ sok e o u a e u a Â¨ ommel fogadok bÂ´ rmilyen eszrevÂ´ telt, javaslatot akÂ´ r helyesÂ´rÂ´ si, viszont jobban rÂ´ szletezettek. OrÂ¨ e a Â´ e a Ä±a stilisztikai vagy tipogrÂ´ ï¬ai hibÂ´ ra vonatkozÂ´ an. Ezeket kÂ´ rnÂ´ m, hogy a a a o e e bodon@cs.bme.hu cÂ´mre kÂ¨ ldjÂ´ k. Ä± u e Az Â´rÂ´ s L TEX-ben kÂ´ szÂ¨ lt, eleinte a kile, kÂ´ sË bbiekben az emacs szÂ¨ vegszerkesztË segÂ´tsÂ´ gÂ´ vel. Ä±a A e u eo o o Ä± e e Egyes abrÂ´ k Xï¬g-el, mÂ´ sok a pst-node csomaggal lettek rajzolva. Az egÂ´ sz munkÂ´ hoz az UHU-linux Â´ a a e a operÂ´ ciÂ´ s rendszer (http://www.uhulinux.hu) nyÂ´ jtotta a stabil es biztonsÂ´ gos hÂ´ tteret. a o u Â´ a a

1. fejezet BevezetÂ´ s e
A szÂ´ mÂ´tÂ´ gÂ´ p, korunk legdicsË bb talÂ´ lmÂ´ nya, rohamlÂ´ ptekkel hÂ´ dÂ´t teret magÂ´ nak az elet minden a Ä±o e o a a e o Ä± a Â´ terÂ¨ letÂ´ n. Egy generÂ´ ciÂ´ alatt nÂ´ lkÂ¨ lÂ¨ zhetetlennÂ´ vÂ´ lt, amit szÂ¨ leink mÂ´ g el sem tudtak kÂ´ pzelni, u e a o e uo e a u e e szÂ´ munkra mÂ´ r elvÂ´ laszthatatlannÂ´ vÂ´ lt munkÂ´ nktÂ´ l es szÂ´ rakozÂ´ sunktÂ´ l egyarÂ´ nt. a a a a a a o Â´ o a o a Az Internet elterjedÂ´ sÂ´ vel mÂ´ g intenzÂ´vebben erzÂ´ kelhetË a szÂ´ mÂ´tÂ´ gÂ´ p tÂ´ rhÂ´ dÂ´tÂ´ sa. A vilÂ´ gon az ee e Ä± Â´ e o a Ä±o e e o Ä±a a egyik legnagyobb problÂ´ mÂ´ t, a tÂ´ volsÂ´ got hidalta at. Uzleti es magÂ´ ncÂ´ lÂ´ erintkezÂ´ sek vÂ´ ltak lehetË vÂ´ e a a a Â´ Â¨ Â´ a euÂ´ e a o e rÂ¨ videbb idË alatt es hatÂ´ konyabban, mint valaha. Adatok milliÂ´ it kezelik es szÂ´ llÂ´tjÂ´ k a szÂ´ mÂ´tÂ´ gÂ´ pes o o Â´ e o Â´ a Ä± a a Ä±o e rendszerek. Az informÂ´ ciÂ´ kon alapulÂ´ dÂ¨ ntÂ´ shozatal ideje lerÂ¨ vidÂ¨ lt, hiszen a hozzÂ´ fÂ´ rÂ´ s kÂ¨ nnyebbÂ´ a o o o e o u aee o e es gyorsabbÂ´ vÂ´ lt. Az uzleti elet szereplË inek elete is felgyorsult. Â´ a a Â¨ Â´ o Â´ Ma a vÂ´ llalatok lÂ´ te mÂ´ lhat az informÂ´ ciÂ´ k gyors es pontos begyË jtÂ´ sÂ´ n, elemzÂ´ sÂ´ n, a rugalmas a e u a o Â´ u ee ee fejlË dÂ´ sen, valamint az innovÂ´ ciÂ´ n. Egyre tÂ¨ bb felsË vezetË ismeri fel, hogy az Internet, az adatok o e a o o o o elektronikus tÂ´ rolÂ´ sa a vÂ´ llalat szolgÂ´ latÂ´ ba allÂ´thatÂ´ . Az adatok azonban onmagukban nem hasznoa a a a a Â´ Ä± o Â¨ sak, hanem a belË lÂ¨ k kinyerhetË , a vÂ´ llalat igÂ´ nyeihez igazodÂ´ , azt kielÂ´ gÂ´tË informÂ´ ciÂ´ kra lenne ou o a e o e Ä±o a o szÂ¨ ksÂ´ g. Ez egy ujabb szÂ¨ ksÂ´ gletet teremt : egy olyan eszkÂ¨ z irÂ´ nti igÂ´ nyt, ami kÂ´ pes arra, hogy inu e Â´ u e o a e e Â´ a formÂ´ ciÂ´ szerzÂ´ s cÂ´ ljÂ´ bÂ´ l elemezze a nyers adatokat. Ez az uj eszkÂ¨ z az adatb anyÂ´ szat. a o e e a o Â´ o AdatbÂ´ nyÂ´ szati (data mining) algoritmusokat az adatbÂ´ zisbÂ´ l tÂ¨ rtÂ´ nË tudÂ´ sfeltÂ´ rÂ´ s (knowledge a a a o o e o a aa discovery in databases) sorÂ´ n alkalmaznak. A tudÂ´ skinyerÂ´ s adatbÂ´ zisokbÂ´ l egy olyan folyamat, a a e a o melynek sorÂ´ n ervÂ´ nyes, ujszerË , lehetË leg hasznos es vÂ´ gsË soron erthetË mintÂ´ kat fedezÂ¨ nk fel az a Â´ e Â´ u o Â´ e o Â´ o a u adatokban. Ezt gyakran megtehetjÂ¨ k kÂ¨ lÂ¨ nbÂ¨ zË lekÂ´ rdezÂ´ sek eredmÂ´ nyeinek vizsgÂ´ latÂ´ val, azonban u uo o o e e e a a ez a megoldÂ´ s lassÂ´ , drÂ´ ga es nem elÂ´ g atfogÂ´ . Nem is beszÂ´ lve arrÂ´ l, hogy az emberi szubjektivitÂ´ s a u a Â´ e Â´ o e o a sokszor hibÂ´ s, tovÂ´ bbÂ´ az adatbÂ´ zisok olyan nagyok lehetnek, hogy egyes lekÂ´ rdezÂ´ sek elfogadhaa a a a e e tatlanul lassan futnak le. Jogos tehÂ´ t az igÂ´ ny, hogy a legismertebb, leggyakoribb elemzÂ´ stÂ´pusokhoz a e e Ä± speciÂ´ lis mÂ´ dszereket, algoritmusokat fejlesszenek ki, amelyek gyorsan es pontosan szolgÂ´ ltatnak a o Â´ a egy objektÂ´v kÂ´ pet az adatbÂ´ zisokban talÂ´ lhatÂ´ kincsrË lâ€. Ä± e a a o o â€ SokfÂ´ lekÂ´ ppen deï¬niÂ´ ltÂ´ k az adatbÂ´ nyÂ´ szatot. Felsorolunk nÂ´ hÂ´ nyat a legismertebbek kÂ¨ zÂ¨ l kie e a a a a e a o u emelve a kulszavakat : â€“ The nontrivial extraction of implicit, previously unknown, and potentially useful information â€ from dataâ€ (Piatetsky Shapiro) â€“ . . . the automated or convenient extraction of patterns representing knowledge implicitly stored â€ or captured in large databases, data warehouses, the Web, . . . or data streams.â€ (Han [74], xxi oldal) â€“ . . . the process of discovering patterns in data. The process must be automatic or (more usually) â€ 10

Â´ 1. FEJEZET. BEVEZETES Heurisztika Statisztika Algoritmus elm. AdatbÂ´ zis elm. a GrÂ´ felmÂ´ let a e LineÂ´ ris alg. a
? -6 -

11

GÂ´ pi tanulÂ´ s  e a

MestersÂ´ ges Intelligencia e
? 6

?

Matematika

-

AlkalmazÂ´ s  a

Â¨ Uzlet Marketing BiolÂ´ gia o TelekommunikÂ´ ciÂ´ a o CsillagÂ´ szat a

VizualizÂ´ ciÂ´ a o

AdatbÂ´ nyÂ´ szat a a 1.1. abra. Az adatbÂ´ nyÂ´ szat kialakulÂ´ sa Â´ a a a semiautomatic. The patterns discovered must be meaningful. . . â€ (Witten [180], 5. oldal) â€“ . . . ï¬nding hidden information in a database.â€ (Dunham [48], 3. oldal) â€ â€“ . . . the process of employing one or more computer learning techniques to automatically analyâ€ ze and extract knowledge from data contained within a database.â€ (Roiger, 4. oldal) Egyesek szerint az adatbÂ´ nyÂ´ szat, mint megnevezÂ´ s nÂ´ mikÂ´ pp szerencsÂ´ tlen [73] . Ha a a e e e e szÂ´ nbÂ´ nyÂ´ szatrÂ´ l beszÂ´ lÂ¨ nk, a szÂ´ n bÂ´ nyÂ´ szÂ´ sÂ´ ra gondolunk. Ezzel ellentÂ´ tben adatbÂ´ nyÂ´ szat esetÂ´ n e a a o eu e a a aa e a a e nem adatot bÂ´ nyÂ´ szunk, hanem â€” amint a pÂ´ ldÂ´ kban is lÂ´ ttuk â€” a rejtett es szÂ´ munkra hasznos tud ast a a e a a Â´ a Â´ (informÂ´ ciÂ´ t), osszefÂ¨ ggÂ´ seket keressÂ¨ k egy nagy adathalmazban ( adathegybenâ€). a o Â¨ u e u â€ Az adatbÂ´ nyÂ´ szatot az uzleti elet es a marketing keltette eletre. MÂ´ g ma is ezek az adatbÂ´ nyÂ´ szat fË a a Â¨ Â´ Â´ Â´ e a a o mozgatÂ´ rugÂ´ i. SzerencsÂ´ re az adatbÂ´ nyÂ´ szat lehetË sÂ´ geit egyre tÂ¨ bb terÂ¨ leten ismerik fel, melynek o o e a a oe o u eredmÂ´ nyekÂ´ nt az alapkutatÂ´ soknak is egy fontos eszkÂ¨ ze lett. AlkalmazzÂ´ k az orvosbiolÂ´ giÂ´ ban, e e a o a o a genetikÂ´ ban, tÂ´ vkÂ¨ zlÂ´ sben, csillagÂ´ szatban, . . . a a o e a Az adatbÂ´ nyÂ´ szat egy multi-diszciplinÂ´ ris terÂ¨ let. Az 1.1 abrÂ´ n lÂ´ thatÂ´ , hogy mely tua a a u Â´ a a o domÂ´ nyterÂ¨ letek eszkÂ¨ zeit hasznÂ´ lja az adatbÂ´ nyÂ´ szat. Az adatbÂ´ nyÂ´ szat tÂ¨ bb hangsÂ´ lyt fektet az a u o a a a a a o u algoritmusokra, mint a statisztika, es tÂ¨ bbet a modellekre, mint a gÂ´ pi tanulÂ´ s eszkÂ¨ zei (pl. neurÂ´ lis Â´ o e a o a hÂ´ lÂ´ zatok). MÂ´ ra az adatbÂ´ nyÂ´ szat akkora terÂ¨ lettÂ´ nË tte ki magÂ´ t, hogy szinte lehetetlen atlÂ´ tni maao a a a u e o a Â´ a gas szÂ´nvonalon az egÂ´ szet. Ä± e

?

1.1. LegjelentË sebb adatbÂ´ nyÂ´ szati feladatok o a a
FeltehetjÂ¨ k, hogy az adatbÂ´ zis valamilyen objektumok (Â¨ gyfelek, betegsÂ´ gek, vÂ´ sÂ´ rlÂ´ k, teleu a u e aa o kommunikÂ´ ciÂ´ s esemÂ´ nyek, . . . ) kÂ¨ lÂ¨ nbÂ¨ zË tulajdonsÂ´ gait Â´rja le. A tulajdonsÂ´ g helyett gyakran a o e uo o o a Ä± a 1 . Az adatbÂ´ nyÂ´ szat feladata a rejtett osszefÂ¨ ggÂ´ sek, kapcsohasznÂ´ ljuk majd az attribÂ´ tum szÂ´ t a u o a a Â¨ u e latok felderÂ´tÂ´ se. Az osszefÂ¨ ggÂ´ sek tÂ´pusa szerint a kÂ¨ vetkezË adatbÂ´ nyÂ´ szati alapproblÂ´ mÂ´ krÂ´ l Ä±e Â¨ u e Ä± o o a a e a o beszÂ´ lhetÂ¨ nk : e u
danak.
1A

kÂ¨ zgazdÂ´ szok a tulajdonsÂ´ g helyett ismÂ´ rvet, valamely tulajdonsÂ´ g konkrÂ´ t ertÂ´ ke helyett ismÂ´ rv vÂ´ ltozatot mono a a e a e Â´ e e a

Â´ 1. FEJEZET. BEVEZETES

12

1.2. abra. KlaszterezÂ´ s (bal oldali abra) es kÂ¨ lÂ¨ nc pontok keresÂ´ se (jobb oldali abra) Â´ e Â´ Â´ uo e Â´ Gyakori mintÂ´ k kinyerÂ´ se : Adott objektumok egy sorozata. CÂ´ lunk megtalÂ´ lni a gyakran a e e a elË fordulÂ´ (rÂ´ sz-) objektumokat. Az objektumok lehetnek elemhalmazok vagy sorozatok, eseto o e leg epizÂ´ dok (rÂ´ szben rendezÂ´ sek), grÂ´ fok stb. o e e a Â´ Attributumok kÂ¨ zÂ¨ tti kapcsolatok : Gyakran hasznos, ha az objektumokra ugy tekintÂ¨ nk, mint o o Â´ u az attribÂ´ tumok megvalÂ´ sulÂ´ saira es keressÂ¨ k az osszefÂ¨ ggÂ´ seket az attribÂ´ tumok kÂ¨ zÂ¨ tt. u o a Â´ u Â¨ u e u o o TÂ¨ bbfÂ´ le osszefÂ¨ ggÂ´ s lÂ´ tezik. Ilyenek pÂ´ ldÂ´ ul az asszociÂ´ ciÂ´ s-, korrelÂ´ ciÂ´ s szabÂ´ lyok, a funko e Â¨ u e e e a a o a o a cionÂ´ lis fÂ¨ ggË sÂ´ gek es hasonlÂ´ sÂ´ gok. Az osztalyozÂ´ s is attribÂ´ tumok kÂ¨ zÂ¨ tti osszefÂ¨ ggÂ´ sek a u oe Â´ oa a u o o Â¨ u e Â´ felfedezÂ´ sÂ´ re szolgÂ´ l. Az osztÂ´ lyozÂ´ snÂ´ l egy kitÂ¨ ntetett attribÂ´ tum ertÂ´ kÂ´ t kell megjÂ´ solnunk ee a a a a u u Â´ e e o a tÂ¨ bbi attribÂ´ tum ertÂ´ ke alapjÂ´ n. Ezt egy modell felÂ´ pÂ´tÂ´ sÂ´ vel teszi. Leggyakrabban a modell o u Â´ e a e Ä±e e egy dÂ¨ ntÂ´ si fa, de lehet if-then szabÂ´ lyok sorozata, valamilyen matematikai formula, vagy akÂ´ r o e a a egy neurÂ´ lis hÂ´ lÂ´ zat stb. is. a ao KlaszterezÂ´ s : Objektumokat elË re nem deï¬niÂ´ lt csoportokba (klaszterekbe) kell sorolnunk ugy, e o a Â´ hogy az egy csoportba tartozÂ´ objektumok hasonlÂ´ ak legyenek, mÂ´g a kÂ¨ lÂ¨ nbÂ¨ zË csoportba o o Ä± uo o o kerÂ¨ ltek kÂ¨ lÂ¨ nbÂ¨ zzenek egymÂ´ stÂ´ l. KÂ´ t pont hasonlÂ´ sÂ´ gÂ´ t egy elË re megadott (tÂ´ volsÂ´ gszerË ) u uo o a o e oa a o a a u fÂ¨ ggvÂ´ ny segÂ´tsÂ´ gÂ´ vel szokÂ´ s ertelmezni. u e Ä± e e a Â´ SorozatelemzÂ´ s : A sorozatelemzÂ´ sbe tÂ¨ bbfÂ´ le adatbÂ´ nyÂ´ szati feladat tartozik. KereshetÂ¨ nk e e o e a a u egymÂ´ shoz hasonlÂ´tÂ´ (akÂ´ r rÂ´ sz-) sorozatokat. Ezen kÂ´vÂ¨ l elemezhetjÂ¨ k a sorozat alakulÂ´ sÂ´ t, a Ä±o a e Ä± u u aa es kÂ¨ lÂ¨ nbÂ¨ zË regressziÂ´ s mÂ´ dszerekkel prÂ´ bÂ´ lhatjuk megjÂ´ solni a jÂ¨ vË beli valÂ´ szÂ´nË leg Â´ uo o o o o o a o o o o Ä± u elË fordulÂ´ esemÂ´ nyeket. o o e EltÂ´ rÂ´ selemzÂ´ s : Azokat az elemeket, amelyek nem felelnek meg az adatbÂ´ zis altalÂ´ nos jele e e a Â´ a lemzË inek, tulajdonsÂ´ gaik nagy mÂ´ rtÂ´ kben eltÂ´ r az altalÂ´ nostÂ´ l k ulÂ¨ nc pontoknak nevezzÂ¨ k. A o a e e e Â´ a o Â¨o u legtÂ¨ bb adatbÂ´ nyÂ´ szati algoritmus az ilyen kÂ¨ lÂ¨ nc pontoknak nem tulajdonÂ´t nagy jelentË sÂ´ get, o a a uo Ä± oe legtÂ¨ bbszÂ¨ r zajnak vagy kivÂ´ telnek kezeli oket. Azonban az elet egyre tÂ¨ bb terÂ¨ letÂ´ n merÂ¨ l o o e Ë Â´ o u e u fel az igÂ´ ny, hogy eppen az ilyen kÂ¨ lÂ¨ nc pontokat talÂ´ ljuk meg. EltÂ´ rÂ´ selemzÂ´ s fË bb alkale Â´ uo a ee e o mazÂ´ si terÂ¨ lete a mÂ´ solÂ´ s-, koppintÂ´ skeresÂ´ s tovÂ´ bbÂ´ a csalÂ´ sok, visszaÂ´ lÂ´ sek, vÂ´rusok, haca u a a a e a a a ee Ä± kertÂ´ madÂ´ sok kiszË rÂ´ se. a a ue Webes adatbÂ´ nyÂ´ szat : Az Interneten oriÂ´ si adattÂ¨ meg talÂ´ lhatÂ´ , Â´gy az Interneten alapulÂ´ ina a Â´ a o a o Ä± o formÂ´ ciÂ´ -kinyerË algoritmusok is az adatbÂ´ nyÂ´ szat terÂ¨ letÂ´ hez tartoznak. A jegyzetben szÂ´ a o o a a u e o lesz intelligensebb keresÂ´ srË l, oldalak rangsorolÂ´ sÂ´ rÂ´ l, illetve hasonlÂ´ tartalmÂ´ oldalak mege o aao o u talÂ´ lÂ´ sÂ´ rÂ´ l. aa ao

Â´ 1. FEJEZET. BEVEZETES

13

ElË fordulhat, hogy az adatbÂ´ nyÂ´ szati rendszer, mÂ´ g megfelelË en megvÂ´ lasztott paramÂ´ terek melo a a e o a e lett is, tÂ´ l sok szabÂ´ lyt, osszefÂ¨ ggÂ´ st tÂ´ r fel. Az egyik legnehezebb kÂ´ rdÂ´ s az, hogy ezek kÂ¨ zÂ¨ l meu a Â¨ u e a e e o u Â´ lyek az erdekesek. ErdekessÂ´ gi mutatÂ´ krÂ´ l altalÂ´ nossÂ´ gban nem sok mondhatÂ´ el, mert a kÂ¨ lÂ¨ nbÂ¨ zË Â´ e o o Â´ a a o uo o o felhasznÂ´ lÂ´ si terÂ¨ leteken mÂ´ s-mÂ´ s minta lehet hasznos. MegkÂ¨ lÂ¨ nbÂ¨ ztetÂ¨ nk szubjektÂ´v es objektÂ´v aa u a a uo o u Ä± Â´ Ä± erdekessÂ´ gi mutatÂ´ kat. Egy minta mindenkÂ´ ppen erdekes, ha meglepË , azaz eddigi tudÂ´ sunknak elÂ´ e o e Â´ o a lentmond, vagy ujszerË , azaz tudÂ´ sunkat kiegÂ´ szÂ´ti. Ugyanakkor egy informÂ´ ciÂ´ csak akkor erdekes, Â´ u a e Ä± a o Â´ ha felhasznÂ´ lhatÂ´ , azaz tudunk valamit kezdeni vele [158]. Azt, hogy egy szabÂ´ ly mennyire meglepË a o a o â€“ tÂ¨ bb-kevesebb sikerrel â€“ tudjuk formalizÂ´ lni. Az ujszerË sÂ´ grË l es a felhasznÂ´ lhatÂ´ sÂ´ grÂ´ l azonban o a Â´ ue o Â´ a oa o csak a terÂ¨ let szakÂ´ rtË je tud nyilatkozni. u e o Annak ellenÂ´ re, hogy az adatbÂ´ nyÂ´ szat egy uj terÂ¨ let, a fentiekbË l lÂ´ thatÂ´ , hogy rÂ´ gi, mÂ´ r ise a a Â´ u o a o e a mert problÂ´ mÂ´ kat is magÂ´ ba foglal. Gondoljunk itt arra, hogy klaszterezË algoritmusokat mÂ´ r a 60-as e a a o a evekben is javasoltak, vagy arra, hogy az osztÂ´ lyozÂ´ s feladatÂ´ t fÂ¨ ggvÂ´ ny approximÂ´ ciÂ´ kÂ´ nt is felfogÂ´ a a a u e a o e hatjuk, aminek irodalmÂ´ val tÂ¨ bb kÂ¨ nyvespolcot is meg lehetne tÂ¨ lteni 2 . TehÂ´ t az adatbÂ´ nyÂ´ szatban a o o o a a a gyakran nem maga a problÂ´ ma uj, hanem az adatok mÂ´ rete, tovÂ´ bbÂ´ az a kÂ¨ vetelmÂ´ ny, hogy az egyes e Â´ e a a o e algoritmusok futÂ´ si ideje olyan rÂ¨ vid legyen, hogy az eredmÂ´ nyek a gyakorlatban elfogadhatÂ´ idË n a o e o o belÂ¨ l erkezzenek. Az alkalmazÂ´ sokban nem ritkÂ´ k a giga- sË t terabÂ´ jt nagysÂ´ gÂ´ adathalmazok. A u Â´ a a o a a u [49] Â´rÂ´ sban pÂ´ ldÂ´ ul egy beszÂ´ molÂ´ t olvashatunk egy bank adatbÂ´ zisÂ´ nak elemzÂ´ sÂ´ rË l adatbÂ´ nyÂ´ szati Ä±a e a a o a a eeo a a eszkÂ¨ zÂ¨ kkel, ahol az ugyfelek szÂ´ ma elÂ´ rte a 190 milliÂ´ t az adatok mÂ´ rete pedig a 4 TB-ot. Ilyen o o Â¨ a e o e mÂ´ retek mellett mÂ´ r kvadratikus lÂ´ pÂ´ sigÂ´ nyË algoritmusokat sem engedhetÂ¨ nk meg. LÂ´ tni fogjuk, e a e e e u u a hogy a legtÂ¨ bb adatbÂ´ nyÂ´ szati algoritmus a teljes adatbÂ´ zist kevÂ´ s alkalommal olvassa vÂ´ gig. o a a a e e SkÂ´ lÂ´ zhatÂ´ (scalable) es hatÂ´ kony (efï¬cient) algoritmusokat keresÂ¨ nk, amelyek megbirkÂ´ znak aa o Â´ e u o nagy mÂ´ retË adatbÂ´ zisokkal. ElvÂ´ rjuk, hogy az adatbÂ´ zis fontosabb paramÂ´ tereinek ismeretÂ´ ben az e u a a a e e algoritmusok futÂ´ si ideje megjÂ´ solhatÂ´ legyen. Az oriÂ´ si memÂ´ riamÂ´ retek miatt a legtÂ¨ bb elema o o Â´ a o e o zendË adatbÂ´ zis â€“ megfelelË atalakÂ´tÂ´ sokkal â€“ valÂ´ szÂ´nË leg elfÂ´ r a memÂ´ riÂ´ ban, de mÂ´ gis sokszor o a o Â´ Ä±a o Ä± u e o a e azt feltÂ´ telezzÂ¨ k, hogy az adat a hÂ´ ttÂ´ rtÂ´ ron talÂ´ lhatÂ´ . e u a e a a o Az adatbÂ´ zisok mÂ´ retÂ´ nek nÂ¨ vekedÂ´ se miatt egyre fontosabbak a pÂ´ rhuzamosÂ´thatÂ´ algoritmusok a e e o e a Ä± o (lÂ´ sd pÂ´ ldÂ´ ul partÂ´ciÂ´ s algoritmus rÂ´ sz). Ezek az adatbÂ´ zist rÂ´ szekre osztjÂ´ k, majd az egyes rÂ´ szeket a e a Ä± o e a e a e kÂ¨ lÂ¨ n memÂ´ riÂ´ val es hÂ´ ttÂ´ rtÂ´ rral rendelkezË egysÂ´ gek dolgozzÂ´ k fel, es vÂ´ gÂ¨ l egy kitÂ¨ ntetett egysÂ´ g uo o a Â´ a e a o e a Â´ e u u e egyesÂ´ti a rÂ´ szeredmÂ´ nyeket. SzintÂ´ n a mÂ´ retnÂ¨ vekedÂ´ s az oka azon algoritmusok nÂ´ pszerË sÂ´ gÂ´ nek, Ä± e e e e o e e ue e amelyek futÂ´ si ideje nagy mÂ´ rtÂ´ kben csÂ¨ kkenthetË valamilyen elË zetes informÂ´ ciÂ´ k (pÂ´ ldÂ´ ul korÂ´ bbi a e e o o o a o e a a futÂ´ si eredmÂ´ nyek) ismeretÂ´ ben (lÂ´ sd asszociÂ´ ciÂ´ s szabÂ´ lyok karbantartÂ´ sa rÂ´ sz). a e e a a o a a e

1.2. A tudÂ´ sfeltÂ´ rÂ´ s folyamata a a a
A tudÂ´ skinyerÂ´ s folyamata sorÂ´ n 6-10 fÂ´ zist szokÂ´ s elkÂ¨ lÂ¨ nÂ´teni [56, 74] attÂ´ l fÂ¨ ggË en, hogy mely a e a a a uo Ä± o u o lÂ´ pÂ´ seket vonjuk ossze (tekinthetjÂ¨ k pÂ´ ldÂ´ ul az 1.3 abrÂ´ t) : e e Â¨ u e a Â´ a I. Az alkalmazÂ´ si terÂ¨ let feltÂ´ rÂ´ sa es megÂ´ rtÂ´ se, fontosabb elË zetes ismeretek begyË jtÂ´ se, es a a u aa Â´ e e o u e Â´ felhasznÂ´ lÂ´ si cÂ´ lok meghatÂ´ rozÂ´ sa. aa e a a II. CÂ´ ladatbÂ´ zis lÂ´ trehozÂ´ sa : kivÂ´ lasztani a hasznÂ´ lni kÂ´vÂ´ nt adatbÂ´ zist, (vagy annak csak egy e a e a a a Ä± a a rÂ´ szÂ´ t), amibË l a tudÂ´ st ki akarjuk nyerni. e e o a
2 Vannak olyan eredmÂ´ nyek is, amelyeket egymÂ´ stÂ´ l fÂ¨ ggetlenÂ¨ l megkaptak az adatbÂ´ nyÂ´ szat es a statisztika kutatÂ´ i is. e a o u u a a Â´ o PÂ´ ldÂ´ ul dÂ¨ ntÂ´ si fÂ´ k elË allÂ´tÂ´ sÂ´ rÂ´ l Â´rt nÂ´ gy statisztikus egy kÂ¨ zismert kÂ¨ nyvet [25]. EkÂ¨ zben egy jeles adatbÂ´ nyÂ´ sz kutatÂ´ e a o e a oÂ´ Ä± a a o Ä± e o o o a a o J. Ross Quinlan dÂ¨ ntÂ´ si fa elË allÂ´tÂ´ szoftvert kÂ´ szÂ´tett. A kÂ´ t kutatÂ´ sban sok kÂ¨ zÂ¨ s mÂ´ dszer lelhetÂ´ fel. o e oÂ´ Ä± o e Ä± e a o o o o

Â´ 1. FEJEZET. BEVEZETES
Ã©rtelmezÃ©s Ã©s Ã©rtÃ©kelÃ©s adatbÃ¡nyÃ¡szat

14

tudÃ¡s

csÃ¶kkentÃ©s Ã©s transzformÃ¡ciÃ³ mintÃ¡k tisztÃ­tÃ¡s

kivÃ¡lasztÃ¡s tisztÃ­tott adat

transzformÃ¡lt adat

forrÃ¡s adat

adat

1.3. abra. A tudÂ´ sfeltÂ´ rÂ´ s folyamata Â´ a aa III. AdattisztÂ´tÂ´ s : itt olyan alapvetË operÂ´ ciÂ´ kat ertÂ¨ nk, mint a tÂ´ ves bejegyzÂ´ sek eltÂ´ volÂ´tÂ´ sa, Ä±a o a o Â´ u e e a Ä±a hiÂ´ nyos mezË k pÂ´ tlÂ´ sa, zajok szË rÂ´ se stb. Zajon az adatba epÂ¨ lt vÂ´ letlen hibÂ´ t ertÂ¨ nk. Vannak a o o a ue Â´ u e a Â´ u zajok, amelyeket egyszË felfedezni es javÂ´tani. PÂ´ ldÂ´ ul sztring ertÂ´ k ott, ahol szÂ´ mot vÂ´ runk, u Â´ Ä± e a Â´ e a a vagy felsorolÂ´ s tÂ´pusÂ´ attribÂ´ tumnÂ´ l ervÂ´ nytelen ertÂ´ k talÂ´ lhatÂ´ . Sajnos sok esetben a hiba a Ä± u u a Â´ e Â´ e a o eszrevÂ´ tlen marad (pÂ´ ldÂ´ ul 0.53 helyett 0.35 ertÂ´ k gÂ´ pelÂ´ se). Â´ e e a Â´ e e e IV. AdatintegrÂ´ ciÂ´ : a feldolgozÂ´ s szÂ´ mÂ´ ra fontos, esetleg elosztott adatbÂ´ zisok egyesÂ´tÂ´ se. a o a a a a Ä±e Az harmadik es negyedik egyÂ¨ tt gyakran nevezik az adatok elË feldolgozÂ´ sÂ´ nak. A Â´ u o aa kÂ¨ lÂ¨ nbÂ¨ zË forrÂ´ sbÂ´ l vett adatok integrÂ´ ciÂ´ ja sorÂ´ n sok problÂ´ mÂ´ ba utkÂ¨ zhetÂ¨ nk. A kÂ¨ lÂ¨ nbÂ¨ zË uo o o a o a o a e a Â¨ o u uo o o osztÂ´ lyok kÂ¨ lÂ¨ nbÂ¨ zË mÂ´ don tÂ´ roljÂ´ k adataikat, kÂ¨ lÂ¨ nbÂ¨ zË konvenciÂ´ kat kÂ¨ vetnek, kÂ¨ lÂ¨ nbÂ¨ zË a uo o o o a a uo o o o o uo o o mÂ´ rtÂ´ kegysÂ´ geket, elsË dleges kulcsokat es elnevezÂ´ st hasznÂ´ lhatnak es kÂ¨ lÂ¨ nfÂ´ le hibÂ´ k lehete e e o Â´ e a Â´ uo e a nek jelen. Az egÂ´ sz cÂ´ get atfogÂ´ adatintegrÂ´ ciÂ´ t adattÂ´ rhÂ´ zban tÂ´ roljÂ´ k, mely egy speciÂ´ lis, az e e Â´ o a o a a a a a 3 elemzÂ´ st tÂ´ mogatÂ´ adatbÂ´ zis. e a o a
hÂ´ tkÂ¨ znapiâ€ mË kÂ¨ dÂ´ st tÂ´ mogatÂ´ operatÂ´v adatbÂ´ zis, es az adattÂ´ rhÂ´ zak kÂ¨ zÂ¨ tti kÂ¨ lÂ¨ nbsÂ´ gre egy szemlÂ´ letes pÂ´ lda e o u o e a o Ä± a Â´ a a o o uo e e e â€ az alÂ´ bbi [30]: Ha tudni szeretnÂ´ nk Kis JÂ´ nos aktuÂ´ lis szÂ´ mlaegyenlegÂ´ t, akkor ezt egy operatÂ´v adatbÂ´ zis alapjÂ´ n pontosan a e a a a e Ä± a a es gyorsan meg tudjuk hatÂ´ rozni. Egy atfogÂ´ bbâ€ kÂ´ rdÂ´ s â€” pÂ´ ldÂ´ ul: Hogyan alakultak az ugyfelek bankban elhelyezett Â´ a Â´ o e e e a Â¨ â€ â€ megtakarÂ´tÂ´ sai az elmÂ´ lt 12 hÂ´ napban?â€ â€” megvÂ´ laszolÂ´ sa egy operatÂ´v adatbÂ´ zis esetÂ´ n bonyolult lehet, es sok ideig Ä±a u o a a Ä± a e Â´ tarthat. Egy adattÂ´ rhÂ´ z az utÂ´ bbi kÂ´ rdÂ´ sre gyors vÂ´ laszt tud adni, tÂ´ mogatva ezÂ´ ltal a dÂ¨ ntÂ´ shozÂ´ kat. A vÂ´ lasz azonban a a o e e a a a o e o a nem teljesen pontos: ha dÂ´ lutÂ´ n 4-kor kÂ´ rdezzÂ¨ k le az utÂ´ bbi 12 hÂ´ napbeli megtakarÂ´tÂ´ sokat, abban mÂ´ g nem biztos, hogy e a e u o o Ä±a e benne lesz Kis JÂ´ nos aznap dÂ´ lelË tt lekÂ¨ tÂ¨ tt betÂ´ tje. Az adattÂ´ rhÂ´ z adatai tehÂ´ t nem feltÂ´ tlenÂ¨ l abszolÂ´ t frissek, nyilvÂ´ n a e o oo e a a a e u u a szÂ¨ ksÂ´ ges azonban a periodikus frissÂ´tÂ´ sÂ¨ k. AdattÂ´ rhÂ´ zak alkalmazÂ´ sakor a trendek, folyamatok elemzÂ´ se a cÂ´ l. Az, hogy u e Ä±e u a a a e e nem az aktuÂ´ lisan legfrisebb adatokkal dolgozunk, altalÂ´ ban nem okoz gondot, feltÂ´ ve, hogy a legutÂ´ bbi frissÂ´tÂ´ s ota nem a Â´ a e o Ä±e Â´ kÂ¨ vetkezett be radikÂ´ lis vÂ´ ltozÂ´ s. Ugyanakkor Kis JÂ´ nos nyilvÂ´ n nem orÂ¨ lne, ha a betÂ´ t elhelyezÂ´ se utÂ´ n este lekÂ´ rdezve o a a a a a Â¨ u e e a e
3A

Â´ 1. FEJEZET. BEVEZETES V. AdattÂ´ r csÂ¨ kkentÂ´ s : az adatbÂ´ zisbÂ´ l a cÂ´ l szempontjÂ´ bÂ´ l fontos attribÂ´ tumok kiemelÂ´ se. e o e a o e a o u e

15

VI. AdatbÂ´ nyÂ´ szati algoritmus tÂ´pusÂ´ nak kivÂ´ lasztÂ´ sa : eldÂ¨ nteni, hogy a megoldandÂ´ feladat klasza a Ä± a a a o o terezÂ´ s, vagy szabÂ´ ly-, illetve mintakeresÂ´ s, esetleg osztÂ´ lyozÂ´ s. e a e a a VII. A megfelelË adatbÂ´ nyÂ´ szati algoritmus meghatÂ´ rozÂ´ sa. ElË nyeinek, hÂ´ trÂ´ nyainak, pao a a a a o a a ramÂ´ tereinek vizsgÂ´ lata, futÂ´ si idË - es memÂ´ riaigÂ´ ny elemzÂ´ se. e a a o Â´ o e e VIII. Az algoritmus alkalmazÂ´ sa. a IX. A kinyert informÂ´ ciÂ´ ertelmezÂ´ se, esetleg visszatÂ´ rÂ´ s az elË zË lÂ´ pÂ´ sekhez tovÂ´ bbi ï¬nomÂ´tÂ´ sok a oÂ´ e ee o o e e a Ä±a cÂ´ ljÂ´ bÂ´ l. e a o X. A megszerzett tudÂ´ s megerË sÂ´tÂ´ se : osszevetÂ´ s elvÂ´ rÂ´ sokkal, elË zetes ismeretekkel. EredmÂ´ nyek a o Ä±e Â¨ e aa o e dokumentÂ´ lÂ´ sa es atadÂ´ sa a felhasznÂ´ lÂ´ nak. Egy adatbÂ´ nyÂ´ szati elemzÂ´ s eredmÂ´ nye akkor nem aa Â´ Â´ a ao a a e e â€ felel meg az elvÂ´ rÂ´ sainknakâ€, ha nem sikerÂ¨ l semmilyen uj, hasznos es termÂ´ szetesen valÂ´ s aa u Â´ Â´ e o osszefÂ¨ ggÂ´ st feltÂ´ rni. Ennek nyilvÂ´ n tÂ¨ bb oka is lehet, a kÂ¨ vetkezË kben kÂ´ t pÂ´ ldÂ´ t mutatunk Â¨ u e a a o o o e e a [30]. 1. ElË fordulhat, hogy rosszul vÂ´ lasztottuk meg az elemzÂ´ shez (adatbÂ´ nyÂ´ szathoz) hasznÂ´ lt o a e a a a algoritmust vagy ennek paramÂ´ tereit, es egy mÂ´ sik eljÂ´ rÂ´ ssal (vagy mÂ´ s paramÂ´ terekkel) e Â´ a aa a e talÂ´ lni fogunk valamilyen erdekes osszefÂ¨ ggÂ´ st. SzemlÂ´ letesen szÂ´ lva : mÂ´ s oldalrÂ´ l a Â´ Â¨ u e e o a o rÂ´ nÂ´ zve az adathegyre, lehet, hogy lÂ´ tunk rajta valami erdekeset. a e a Â´ 2. TermÂ´ szetesen az is lehetsÂ´ ges, hogy az adatok egyÂ´ ltalÂ´ n nem rejtenek semmifÂ´ le uj, a e e a a e Â´ gyakorlatban hasznosÂ´thatÂ´ osszefÂ¨ ggÂ´ st. Ekkor â€” sajnos â€” teljesen elË rË l kell kezdeni Ä± oÂ¨ u e oo a folyamatot, uj adatok gyË jtÂ´ sÂ´ vel. Â´ u ee A sikeres adatbÂ´ nyÂ´ szati projektekben az elsË 5 lÂ´ pÂ´ s teszi ki az idË - es pÂ´ nzrÂ´ fordÂ´tÂ´ sok legalÂ´ bb a a o e e o Â´ e a Ä±a a 80%-Â´ t. Ha a cÂ´ lok nem kellË kÂ´ ppen atgondoltak es a bÂ´ nyÂ´ szandÂ´ adatok nem elÂ´ g minË sÂ´ giek, a e o e Â´ Â´ a a o e oe akkor kÂ¨ nnyen elË fordulhat, hogy az adatbÂ´ nyÂ´ sz csak vaktÂ´ ban dolgozik es a kinyert informÂ´ ciÂ´ nak o o a a a Â´ a o tulajdonkÂ´ ppen semmi haszna sincs. A tudÂ´ sfeltÂ´ rÂ´ s sorÂ´ n elengedhetetlen, hogy az adatbÂ´ nyÂ´ sz es e a aa a a a Â´ az alkalmazÂ´ si terÂ¨ let szakÂ´ rtË je szorosan egyÂ¨ ttmË kÂ¨ djÂ¨ n, a projekt minden fÂ´ zisÂ´ ban ellenË rizzÂ´ k a u e o u u o o a a o e a betartandÂ´ irÂ´ nyvonalakat. NÂ´ zzÂ¨ nk erre egy pÂ´ ldÂ´ t : ha adatbÂ´ nyÂ´ szati eszkÂ¨ zÂ¨ kkel sikerÂ¨ l kimuo a e u e a a a o o u tatni, hogy X betegsÂ´ ggel gyakran egyÂ¨ ttjÂ´ r Y betegsÂ´ g is, a kutatÂ´ orvos kÂ´ pes eldÂ¨ nteni azt, hogy ez e u a e o e o valÂ´ ban Â´gy van-e : megvizsgÂ´ lhatja, hogy ugyanezen osszefÂ¨ ggÂ´ s mÂ´ s adathalmaz esetÂ´ n is fennÂ´ ll-e o Ä± a Â¨ u e a e a (esetleg direkt ebbË l a cÂ´ lbÂ´ l gyË jt adatot). Ha igen, akkor kiderÂ´theti azt, hogy az egyik betegsÂ´ g o e o u Ä± e sorÂ´ n keletkezik-e olyan kÂ´ miai anyag, vagy elszaporodott-e olyan kÂ´ rokozÂ´ , mely hozzÂ´ jÂ´ rul a a e o o aa mÂ´ sik betegsÂ´ g kialakulÂ´ sÂ´ hoz. Ezek alapjÂ´ n azt mondhatjuk, hogy az adatbÂ´ nyÂ´ sz tippeketâ€ ad a a e aa a a a â€ kutatÂ´ orvosoknak. Ezen tippekâ€ jelentË ssÂ´ gÂ´ t nem szabad alÂ´ becsÂ¨ lnÂ¨ nk : ezek ovhatjÂ´ k meg a kuo o e e a u u Â´ a â€ tatÂ´ orvost attÂ´ l, hogy â€” szemlÂ´ letesen fogalmaza â€” rossz helyen tapogatÂ´ zzonâ€. Az adatbÂ´ nyÂ´ szat o o e o a a â€ tehÂ´ t elsË sorban uj, Â´gÂ´ retes hipotÂ´ zisekkel jÂ´ rulhat hozzÂ´ a kÂ¨ zegÂ´ szsÂ´ gÂ¨ gyi kutatÂ´ sokhoz. a o Â´ Ä± e e a a o e e u a A kÂ¨ vetkezË valÂ´ s pÂ´ lda is az adatbÂ´ nyÂ´ sz es a kutatÂ´ orvos szerepÂ´ t szemlÂ´ lteti. Egy adatbÂ´ nyÂ´ sz o o o e a a Â´ o e e a a az eletmÂ´ dra es a megbetegedÂ´ sekre vonatkozÂ´ adatokat elemezve juthat arra a kÂ¨ vetkeztetÂ´ sre, Â´ o Â´ e o o e hogy a prosztatarÂ´ k osszefÂ¨ gg a szenesedÂ´ sig sÂ¨ tÂ¨ tt hÂ´ s fogyasztÂ´ sÂ´ val. Ezzel irÂ´ nyt mutatâ€ a kua Â¨ u e uo u aa a â€ tatÂ´ orvosnak, aki a hÂ´ ttÂ´ rben rejlË kÂ´ miai reakciÂ´ kat es azok biolÂ´ giai kÂ¨ vetkezmÂ´ nyeit tÂ´ rja fel. Ez o a e o e o Â´ o o e a
szÂ´ mlÂ´ jÂ´ t nem lÂ´ tnÂ´ â€ a pÂ´ nzÂ´ t, mert a periodikus frissÂ´tÂ´ s csak hetene egyszer esedÂ´ kes: az o igÂ´ nyeinek nyilvÂ´ n az a aa a a e e Ä±e e Ë e a â€ operatÂ´v adatbÂ´ zis felel meg. Ä± a

Â´ 1. FEJEZET. BEVEZETES

16

a konkrÂ´ t esetben lÂ´ nyegÂ´ ben Â´gy is tÂ¨ rtÂ´ nt : elË bb tÂ´ rtÂ´ k fel a jÂ´ l atsÂ¨ tott hÂ´ s fogyasztÂ´ sa es a prosze e e Ä± o e o a a o Â´ u u a Â´ tatarÂ´ k gyakorisÂ´ ga kÂ¨ zÂ¨ tti osszefÂ¨ ggÂ´ st, majd megtalÂ´ ltÂ´ k a hÂ´ s sÂ¨ tÂ´ skor keletkezË PhIP vegyÂ¨ letet a a o o Â¨ u e a a u ue o u es kimutattÂ´ k, hogy hatÂ´ sÂ´ ra prosztatarÂ´ k alakulhat ki [82]. Â´ a aa a Ez a jegyzet az 6. es 7. lÂ´ pÂ´ seket veszi szemÂ¨ gyre : rendelkezÂ´ sÂ¨ nkre all egy adatbÂ´ zis, tudjuk, Â´ e e u eu Â´ a milyen jellegË informÂ´ ciÂ´ ra van szÂ¨ ksÂ´ gÂ¨ nk, es az adatbÂ´ nyÂ´ sz feladata, hogy ennek megoldÂ´ sÂ´ ra u a o u e u Â´ a a aa minÂ´ l gyorsabb es pontosabb algoritmust adjon. e Â´ Â´ anosabban kÂ´ tfÂ´ le adatbÂ´ nyÂ´ szati tevÂ´ kenysÂ´ get kÂ¨ lÂ¨ nÂ´tÂ¨ nk el : AltalÂ´ e e a a e e uo Ä±u FeltÂ´ rÂ´ s : A feltÂ´ rÂ´ s sorÂ´ n az adatbÂ´ zisban talÂ´ lhatÂ´ mintÂ´ kat keressÂ¨ k meg. A mintÂ´ k legtÂ¨ bbszË r az a a aa a a a o a u a o o altalÂ´ nos trendeket/szokÂ´ sokat/jellemzË ket Â´rjÂ´ k le, de vannak olyan alkalmazÂ´ sok is (pÂ´ ldÂ´ ul Â´ a a o Ä± a a e a csalÂ´ sfelderÂ´tÂ´ s), ahol eppen az altalÂ´ nostÂ´ l eltÂ´ rË /nem vÂ´ rt mintÂ´ kat keressÂ¨ k. a Ä±e Â´ Â´ a o eo a a u ElË rejelzÂ´ s : Az elË rejelzÂ´ snÂ´ l a feltÂ´ rt mintÂ´ k alapjÂ´ n prÂ´ bÂ´ lunk kÂ¨ vetkeztetni a jÂ¨ vË re. PÂ´ ldÂ´ ul egy o e o e e a a a o a o o o e a elem ismeretlen ertÂ´ keit prÂ´ bÂ´ ljuk elË rejelezni az ismert ertÂ´ kek es a feltÂ´ rt tudÂ´ s alapjÂ´ n. Â´ e o a o Â´ e Â´ a a a NÂ´ gy fontos elvÂ´ rÂ´ sunk van a megszerzett tudÂ´ ssal kapcsolatban : (1) legyen kÂ¨ nnyen erthetË , e aa a o Â´ o (2) ervÂ´ nyes, (3) hasznos es (4) ujszerË . Az ervÂ´ nyessÂ´ g eldÂ¨ ntÂ´ se a terÂ¨ let szakÂ´ rtË je mellett az Â´ e Â´ Â´ u Â´ e e o e u e o adatbÂ´ nyÂ´ sz (esetleg statisztikus) feladata is. ElË fordulhat, hogy helyes modellt adtunk, az algorita a o mus is jÂ´ l mË kÂ¨ dÂ¨ tt, mÂ´ gis a kinyert szabÂ´ ly nem fedi a valÂ´ sÂ´ got. Bonferroni tÂ´ tele arra ï¬gyelmezo u o o e a oa e tet bennÂ¨ nket, hogy amennyiben a lehetsÂ´ ges kÂ¨ vetkeztetÂ´ sek szÂ´ ma tÂ´ l nagy, akkor egyes kÂ¨ vetu e o e a u o keztetÂ´ sek tÂ´ nyleges valÂ´ sÂ´ gtartalom nÂ´ lkÂ¨ l igaznak mutatkoznak, tisztÂ´ n statisztikai megfontolÂ´ sok e e oa e u a a alapjÂ´ n. Az egyik legjobb pÂ´ lda a valÂ´ sÂ´ gtartalom nÂ´ lkÂ¨ li szabÂ´ ly kinyerÂ´ sÂ´ re az alÂ´ bbi megtÂ¨ rtÂ´ nt a e oa e u a ee a o e eset. AmerikÂ´ ban a Dow Jones atlag becslÂ´ sÂ´ hez keresni kezdtÂ´ k azt a termÂ´ ket, amely arÂ´ nak alaa Â´ ee e e Â´a kulÂ´ sa leginkÂ´ bb hasonlÂ´tott a Dow Jones atlag alakulÂ´ sÂ´ hoz. A kapott termÂ´ k a bangladesi gyapot a a Ä± Â´ aa e volt. Az adatok illetve a kinyert informÂ´ ciÂ´ k megjelenÂ´tÂ´ sÂ´ nek mÂ´ dja legalÂ´ bb annyira fontos, mint a o Ä±e e o a az osszefÂ¨ ggÂ´ sek meghatÂ´ rozÂ´ sa. A vÂ´ gfelhasznÂ´ lÂ´ kat (akik altalÂ´ ban vezetË k) jobban megragadÂ¨ u e a a e ao Â´ a o ja egy jÂ´ l elkÂ´ szÂ´tett abra, mint kÂ¨ lÂ¨ nbÂ¨ zË matematikai struktÂ´ rÂ´ k nyers tÂ´ lalÂ´ sa. A megjelenÂ´tÂ´ s o e Ä± Â´ uo o o ua a a Ä±e tehÂ´ t fontos rÂ´ sze az adatbÂ´ nyÂ´ szatnak. Ezt jÂ´ l igazolja, hogy nagy sikert kÂ¨ nyvelnek el az olyan a e a a o o adatbÂ´ nyÂ´ szati szoftverek, amelyek adatbÂ´ nyÂ´ szati algoritmusokat nem is futtatnak, pusztÂ´ n az adaa a a a a tokat jelenÂ´tik meg intelligens mÂ´ don (hÂ´ romdimenziÂ´ s, szÂ´nes, forgathatÂ´ abrÂ´ k). EzeknÂ´ l a rendÄ± o a o Ä± oÂ´ a e szereknÂ´ l az osszefÂ¨ ggÂ´ seket, mintÂ´ zatokat, kÂ¨ zÂ¨ s tulajdonsÂ´ ggal rendelkezË csoportokat maguk a e Â¨ u e a o o a o felhasznÂ´ lÂ´ k veszik eszre. Az adatbÂ´ nyÂ´ szati szoftverekrË l rÂ´ szletesebben a 16. fejezetben olvashaao Â´ a a o e tunk.

1.3. AdatbÂ´ nyÂ´ szat kontra statisztika a a
NehÂ´ z deï¬niÂ´ lni, hogy egy feladat es annak megoldÂ´ sa mikor tartozik a statisztika es mikor az e a Â´ a Â´ adatbÂ´ nyÂ´ szat felsÂ´ gterÂ¨ lete alÂ´ . A statisztika tÂ¨ bb hangsÂ´ lyt fektet hipotÂ´ zisek vizsgÂ´ latÂ´ ra, mÂ´g a a e u a o u e a a Ä± az adatbÂ´ nyÂ´ szatban a hipotÂ´ zisek megtalÂ´ lÂ´ sÂ´ nak mÂ´ dja all a kÂ¨ zÂ´ ppontban. Az adatbÂ´ nyÂ´ szat egy a a e aa a o Â´ o e a a gyakorlatorientÂ´ lt terÂ¨ let, kevesebb sÂ´ lyt kapnak (sajnos) az elmÂ´ leti elemzÂ´ sek. Viszont kÂ¨ zponti a u u e e o kÂ´ rdÂ´ s egy algoritmus futÂ´ si ideje es memÂ´ riaigÂ´ nye. Az adatbÂ´ nyÂ´ szati algoritmusok bemutatÂ´ sa e e a Â´ o e a a a sorÂ´ n kitÂ´ rÂ¨ nk az adatstruktÂ´ rÂ´ lis es akÂ´ r implementÂ´ ciÂ´ s kÂ´ rdÂ´ sekre is. a eu ua Â´ a a o e e Sok kutatÂ´ az adatbÂ´ nyÂ´ szatot nem kÂ¨ lÂ¨ nbÂ¨ zteti meg a gÂ´ pi tanulÂ´ stÂ´ l. ElvÂ´ gre a gÂ´ pi tanulÂ´ snÂ´ l o a a uo o e a o e e a a is adatok alapjÂ´ n tanul meg egy konceptiÂ´ t a gÂ´ p. Cinikusok szerint az adatbÂ´ nyÂ´ szat nem mÂ´ s, mint a o e a a a statisztika plusz egy kis marketing. ValÂ´ ban, nincs eles hatÂ´ r kÂ¨ ztÂ¨ k. Ugy altalÂ´ ban beszÂ´ lhetÂ¨ nk adat o Â´ a o u Â´ Â´ a e u

Â´ 1. FEJEZET. BEVEZETES

17

1.4. abra. Egy jellegzetes adatbÂ´ nyÂ´ szati feladat : DNS-szekvenciÂ´ k elemzÂ´ se Â´ a a a e

elemzË tehnikÂ´ krÂ´ l. Egyes adat elemzË technikÂ´ kat inkÂ´ bb adatbÂ´ nyÂ´ szati mÂ´ dszernek mondunk, o a o o a a a a o mÂ´ sokat pedig a statisztikÂ´ hoz vagy a gÂ´ pi tanulÂ´ shoz sorolunk. a a e a A 20 szÂ´ zad mÂ´ sodik felÂ´ tË l egyre jellemzË bb a tudomÂ´ nyra, hogy bizonyos klasszikus elmÂ´ let a a eo o a e kiragad es uj kutatÂ´ si terÂ¨ letnek kiÂ´ ltjÂ´ k ki. Ugyanigy van ezzel a marketing ; ugyanazt a termÂ´ ket Â´ Â´ a u a a e egyszer csak uj, hangzatosabb nÂ´ vvel kezdik el ertÂ´ kesÂ´teni. A tudomÂ´ nyban is a kutatÂ´ si feladatokat Â´ e Â´ e Ä± a a el kell adni a pÂ´ lyÂ´ zatokat bÂ´rÂ´ lÂ´ zsË riknek es az uj nÂ´ vvel ellÂ´ tot tudomÂ´ nyterÂ¨ let uj irÂ´ nyokat sugall ; a a Ä±ao u Â´ Â´ e a a u Â´ a az uj irÂ´ nyzatok es elbeli kutatÂ´ sok pedig nagy tÂ´ mogatÂ´ st kapnak. Ez a tÂ´ ny jelentË sen hozzÂ´ jÂ´ rult Â´ a Â´ Â´ a a a e o aa az adatbÂ´ nyÂ´ szat elterjedÂ´ sÂ´ hez es az egyes adatelemzË feladatok â€adatbÂ´ nyÂ´ szatiâ€ cÂ´mkÂ´ vel valÂ´ a a ee Â´ o a a Ä± e o ellÂ´ tÂ´ sÂ´ hoz. aa a AdatbÂ´ nyÂ´ szathoz soroljuk a klaszterzÂ´ s, osztÂ´ lyozÂ´ s, asszociÂ´ ciÂ´ s szabÂ´ lykinyerÂ´ s es az a a e a a a o a e Â´ idË sorelemzÂ´ s nem klasszikus (pl. regressziÂ´ szÂ´ mÂ´tÂ´ s, simÂ´tÂ´ s) feladatait. A kÂ¨ vetkezË kben nÂ´ hÂ´ ny o e o a Ä±a Ä±a o o e a pÂ´ ldÂ´ n keresztÂ¨ l szemlÂ´ ltjÂ¨ k az adatbÂ´ nyÂ´ szat es a statisztika kÂ¨ zÂ¨ tti kÂ¨ lÂ¨ nbsÂ´ get es egyben a kÂ´ t e a u e u a a Â´ o o uo e Â´ e terÂ¨ let rokonsÂ´ gÂ´ t is [30]. u a a I. TegyÂ¨ k fel, hogy egy adatbÂ´ zisban sokmilliÂ´ ember DNS-szekvenciÂ´ it es tulajdonsÂ´ gait u a o a Â´ a tÂ´ roljuk. Egy jellegzetes statisztikai kÂ´ rdÂ´ s lehet az, hogy pÂ´ ldÂ´ ul a kÂ´ k szemË emberek a e e e a e u mekkora rÂ´ szÂ´ re jellemzË egy adott DNS-szekvencia. TermÂ´ szetesen olyan kÂ´ rdÂ´ st is feltee e o e e e hetÂ¨ nk, melynek megvÂ´ laszolÂ´ sa ennÂ´ l kiï¬nomultabb eszkÂ¨ zÂ¨ ttÂ´ rat igÂ´ nyel : ha azt szeretnÂ´ nk u a a e o o a e e tudni, van-e szigniï¬kÂ´ ns fÂ¨ ggÂ´ s egy adott DNS-szekvencia meglÂ´ te es a kÂ´ k szemâ€ tulaja u e e Â´ e â€ donsÂ´ g kÂ¨ zÂ¨ tt, statisztikai prÂ´ bÂ´ t alkalmazhatunk ennek eldÂ¨ ntÂ´ sÂ´ re. Egy adatbÂ´ nyÂ´ sz nem a o o o a o ee a a kÂ´ rdezne rÂ´ egy konkrÂ´ t szekvencia es egy konkrÂ´ t tulajdonsÂ´ g kÂ¨ zÂ¨ tti osszefÂ¨ ggÂ´ sre, hanem e a e Â´ e a o o Â¨ u e egy altalÂ´ nosabb kÂ´ rdÂ´ st tenne fel, pÂ´ ldÂ´ ul azt, hogy milyen osszefÂ¨ ggÂ´ s van a tulajdonsÂ´ gok Â´ a e e e a Â¨ u e a es szekvenciÂ´ k kÂ¨ zÂ¨ tt, melyik tulajdonsÂ´ gÂ´ rt melyik szekvencia felelË s ? Â´ a o o a e o II. Egy mÂ´ sik pÂ´ lda az adatbÂ´ nyÂ´ szat es statisztika kÂ¨ zÂ¨ tti kÂ¨ lÂ¨ nbsÂ´ gre az alÂ´ bbi : egy statisza e a a Â´ o o uo e a tikai elemzÂ´ s sorÂ´ n megvizsgÂ´ lhatjuk, hogy a nË k illetve fÂ´ rï¬ak hÂ´ ny szÂ´ zalÂ´ ka dohÂ´ nyzik, e a a o e a a e a

Â´ 1. FEJEZET. BEVEZETES

18

fogyaszt rendszeresen nagy mennyisÂ´ gben alkoholt, van-e szigniï¬kÂ´ ns eltÂ´ rÂ´ s a kÂ´ t csoport e a ee e kÂ¨ zÂ¨ tt. Egy adatbÂ´ nyÂ´ szati elemzÂ´ s sorÂ´ n itt is altalÂ´ nosabb kÂ´ rdÂ´ st tennÂ´ nk fel, pÂ´ ldÂ´ ul azt, o o a a e a Â´ a e e e e a hogy milyen jellegzetes csoportok vannak az alkoholfogyasztÂ´ sra es dohÂ´ nyzÂ´ sra nÂ´ zve ? TehÂ´ t a Â´ a a e a azt nem mondjuk meg elË re, hogy az egyik csoportba a nË k, a mÂ´ sikba pedig a fÂ´ rï¬ak tartoznak. o o a e Az adatbÂ´ nyÂ´ sz feladata, hogy ugy csoportosÂ´tsa az embereket (rekordokat), hogy a hasonlÂ´ k a a Â´ Ä± o egy csoportba, a kÂ¨ lÂ¨ nbÂ¨ zË k pedig kÂ¨ lÂ¨ nbÂ¨ zË csoportba kerÂ¨ ljenek. (Ez egy klaszterezÂ´ si feluo o o uo o o u e adat.) Az adatbÂ´ nyÂ´ szatban az ilyen feladatokat nem hosszas emberi munka es intuÂ´ciÂ´ arÂ´ n a a Â´ Ä± oÂ´a oldjuk meg, hanem tÂ¨ rekszÂ¨ nk a minÂ´ l nagyobb fokÂ´ automatizÂ´ lÂ´ sra kiï¬nomult szoftverek alo u e u aa kalmazÂ´ sÂ´ val. EredmÂ´ nykÂ´ nt kÂ¨ nnyen lehet, hogy nem a nemek szerinti csoportosÂ´tÂ´ st kapjuk, aa e e o Ä±a hanem egy olyat, melyben ugyanazon csoportokba fÂ´ rï¬ak es nË k is kerÂ¨ ltek, akik â€” egyÂ´ b e Â´ o u e 4 tulajdonsÂ´ gaik alapjÂ´ n â€” hasonlÂ´ ak. a a o III. Az elË bbi pÂ´ ldÂ´ ban termÂ´ szetesen mÂ´ s irÂ´ nyba is altalÂ´ nosÂ´thatjukâ€ a statisztikai elemzÂ´ s sorÂ´ n o e a e a a Â´ a Ä± e a â€ feltett kÂ´ rdÂ´ sÂ¨ nket : lehet, hogy arra vagyunk kÂ´vÂ´ ncsiak, hogy mi a kÂ¨ lÂ¨ nbsÂ´ g a fÂ´ rï¬ak es a e eu Ä± a uo e e Â´ nË k kÂ¨ zÂ¨ tt. IsmerjÂ¨ k tehÂ´ t a kÂ´ t csoportot, de nem tudjuk, hogy mely tulajdonsÂ´ gok vagy tuo o o u a e a lajdonsÂ´ gkombinÂ´ ciÂ´ k jellemzË ek egy-egy csoportra. Ekkor egy osztÂ´ lyozÂ´ si feladattal allunk a a o o a a Â´ szemben, a csoportokat osztÂ´ lyoknak nevezzÂ¨ k. Ezt a kÂ´ rdÂ´ st egyÂ´ bkÂ´ nt fel is tettÂ¨ k a Semmela u e e e e u weis Egyetem hallgatÂ´ inak kÂ¨ rÂ´ ben vÂ´ gzett egyik felmÂ´ rÂ´ s adatbÂ´ zisÂ´ n. Az eredmÂ´ ny az 1.5. o oe e ee a a e abrÂ´ n lÂ´ thatÂ´ . Ez egy dÂ¨ ntÂ´ si fa. A levelek az osztÂ´ lyoknak (nË k illetve fÂ´ rï¬ak) felelnek meg. A Â´ a a o o e a o e fa kÂ¨ zbÂ¨ lsË csomÂ´ pontjaiban egy-egy attribÂ´ tum (adattÂ´ blabeli oszlop) neve lÂ´ thatÂ´ . A fa egy o u o o u a a o csomÂ´ pontjÂ´ bÂ´ l kiindulÂ´ agak az adott csomÂ´ ponthoz tartozÂ´ attribÂ´ tum egy-egy lehetsÂ´ ges o a o o Â´ o o u e ertÂ´ kÂ´ nek felelnek meg. Egy dÂ¨ ntÂ´ si fa azt mutatja meg, hogy ha nem ismernÂ´ nk, hogy egy Â´ e e o e e rekord melyik osztÂ´ lyba tartozik, akkor hogyan dÂ¨ nthetnÂ´ nk ezt el. PÂ´ ldÂ´ ul a fogamzÂ´ sgÂ´ tlÂ´ t a o e e a a a o szedË hallgatÂ´ k nË k (pontosabban : azon rekordok, amelyek FOGAMZASGA attribÂ´ tuma 1â€ o o o u â€ ertÂ´ kË , a nË i hallgatÂ´ k osztÂ´ lyÂ´ ba tartoznak).5 Â´ e u o o a a

1.4. Sikeres alkalmazÂ´ sok a
Az adat bÂ´ nyÂ´ szataâ€ eredetileg statisztikusok altal hasznÂ´ lt kifejezÂ´ s, az adatok nem kellË kÂ´ ppen a a Â´ a e o e â€ megalapozott felhasznÂ´ lÂ´ sÂ´ ra, amely sorÂ´ n valaki helytelen kÂ¨ vetkeztetÂ´ st von le. Igaz ugyanis, aa a a o e hogy tetszË leges adathalmazban felfedezhetÂ¨ nk valamilyen struktÂ´ rÂ´ t, ha elÂ´ g sokÂ´ ig nÂ´ zzÂ¨ k az adao u ua e a e u tot. IsmÂ´ t utalunk a lehetsÂ´ ges kÂ¨ vetkeztetÂ´ sek nagy szÂ´ mÂ´ bÂ´ l eredË veszÂ´ lyre. A helytelen kÂ¨ vete e o e a a o o e o keztetÂ´ sre az egyik leghÂ´resebb pÂ´ lda az alÂ´ bbi : Az 50-es evekben David Rhine parapszicholÂ´ gus e Ä± e a Â´ o diÂ´ kokat vizsgÂ´ lt meg azzal a cÂ´ llal, hogy parapszicholÂ´ giai kÂ´ pessÂ´ ggel rendelkezË ket talÂ´ ljon. a a e o e e o a Minden egyes diÂ´ knak 10 lefedett kÂ´ rtya szÂ´nÂ´ t kellett megtippelne (piros vagy fekete). A kÂ´sÂ´ rlet a a Ä± e Ä±e eredmÂ´ nyekÂ´ nt bejelentette, hogy a diÂ´ kok 0,1%-a parapszicholÂ´ giai kÂ´ pessÂ´ ggel rendelkezik (a teljee e a o e e sen vÂ´ letlenszerË en tippelË k kÂ¨ zÂ¨ tt a helyesen tippelË k vÂ´ rhatÂ´ szÂ´ ma statisztikailag nagyjÂ´ bÂ´ l ennyi, e u o o o o a o a a o
hogy egy ilyen elemzÂ´ s sikeres legyen, nagyon fontos a hasonlÂ´ sÂ´ gi mÂ´ rtÂ´ k megfelelË megvÂ´ lasztÂ´ sa, valae oa e e o a a mint az elemzÂ´ sbe bevont attribÂ´ tumok (adattÂ´ bla-oszlopok) ugyesâ€ kivÂ´ lasztÂ´ sa. Ha pÂ´ ldÂ´ ul az alkoholfogyasztÂ´ sra es e u a Â¨ a a e a a Â´ â€ dohÂ´ nyzÂ´ sra vonatkozÂ´ adatok mellett tÂ´ l sokâ€ tovÂ´ bbi attribÂ´ tumot vonunk be a vizsgÂ´ latba, akkor lehet, hogy a csoa a o u a u a â€ portosÂ´tÂ´ s nem az alkoholfogyasztÂ´ sra es dohÂ´ nyzÂ´ sra vonatkozÂ´ jellegzetes csoportokat tartalmazza, hanem altalÂ´ nosâ€ Ä±a a Â´ a a o Â´ a â€ csoportokat kapunk. 5 A dÂ¨ ntÂ´ si fa epÂ´tÂ´ sekor altalÂ´ ban nem kÂ¨ vetelmÂ´ ny, hogy egy levÂ´ lbeli osszes rekord ugyanazon osztÂ´ lyba tartozzon, o e Â´ Ä±e Â´ a o e e Â¨ a elÂ´ g, ha nagy rÂ´ szÂ¨ kâ€ azonos osztÂ´ lyba tartozik. Ebben a konkrÂ´ t pÂ´ ldÂ´ ban az osszes fogamzÂ´ sgÂ´ tlÂ´ t szedË hallgatÂ´ nË e e u a e e a Â¨ a a o o o o â€ volt.
4 Ahhoz,

Â´ 1. FEJEZET. BEVEZETES

19

1.5. abra. DÂ¨ ntÂ´ si fa : nË k es fÂ´ rï¬ak kÂ¨ zÂ¨ tti kÂ¨ lÂ¨ nbsÂ´ gek a Semmelweis Egyetem hallgatÂ´ inak Â´ o e o Â´ e o o uo e o kÂ¨ rÂ´ ben vÂ´ gzett felmÂ´ rÂ´ s alapjÂ´ n. oe e ee a
1 hiszen annak valÂ´ szÂ´nË sÂ´ ge, hogy valaki mind a tÂ´z kÂ´ rtyÂ´ t eltalÂ´ lja 21 = 1024 ). Ezekkel a diÂ´ kokkal o Ä± ue Ä± a a a a 10 ujra elvÂ´ gezte a kÂ´sÂ´ rletet, am ezÂ´ ttal a diÂ´ kok eredmÂ´ nye teljesen atlagos volt. Rhine kÂ¨ vetkeztetÂ´ se Â´ e Ä±e Â´ u a e Â´ o e szerint az, aki parapszicholÂ´ giai kÂ´ pessÂ´ ggel rendelkezik es errË l nem tud, elveszti eme a kÂ´ pessÂ´ gÂ´ t o e e Â´ o e e e miutÂ´ n tudomÂ´ st szerez rÂ´ la. a a o A fenti pÂ´ lda ellenÂ´ re mÂ´ ra az adatbÂ´ nyÂ´ szat szÂ´ elvesztette jelentÂ´ sÂ´ nek negatÂ´v tartalmÂ´ t, a e e a a a o ee Ä± a szÂ´ mos sikeres alkalmazÂ´ snak kÂ¨ szÂ¨ nhetË en. A teljessÂ´ g igÂ´ nye nÂ´ lkÂ¨ l felsorolunk belË lÂ¨ k nÂ´ hÂ´ nyat. a a o o o e e e u ou e a

â€“ A bankok egyre gyakrabban alkalmaznak olyan automatikusan elË allÂ´tott dÂ¨ ntÂ´ si fÂ´ kat, ameoÂ´ Ä± o e a lyek alapjÂ´ n egy program javaslatot tesz egy hitel megÂ´tÂ´ lÂ´ sÂ´ rË l. Ezt a kÂ´ relmezË k szemÂ´ lyes, a Ä±ee eo e o e tovÂ´ bbÂ´ elË zetes hitelfelvÂ´ teli es tÂ¨ rlesztÂ´ si adatai alapjÂ´ n teszi (osztÂ´ lyozÂ´ s) [164]. Tesztek a a o e Â´ o e a a a pÂ´ ldÂ´ ul igazoltÂ´ k, hogy a hitelbÂ´rÂ´ lat minË sÂ´ ge javult az USA-ban, amikor a bankok attÂ´ rtek a e a a Ä±a oe Â´ e kÂ¨ telezË en alkalmazott, Â´rÂ´ sban rÂ¨ gzÂ´tett szabÂ´ lyok alkalmazÂ´ sÂ´ ra [164]. Ezeket a szabÂ´ lyokat o o Ä±a o Ä± a aa a pedig az adatbÂ´ nyÂ´ szat segÂ´tsÂ´ gÂ´ vel allÂ´tottÂ´ k ossze. a a Ä± e e Â´ Ä± a Â¨ â€“ A vÂ´ sÂ´ rlÂ´ i szokÂ´ sok felderÂ´tÂ´ se szupermarketekben, illetve nagy vevË kÂ¨ rrel rendelkezË aa o a Ä±e o o o aruhÂ´ zakban hasznos lehet az aruhÂ´ z termÂ´ ktÂ´ rkÂ´ pÂ´ nek kialakÂ´tÂ´ sÂ´ nÂ´ l, akciÂ´ k, eladÂ´ shelyi Â´ a Â´ a e e e e Ä±a a a o a reklÂ´ mok (Point of Sales, Point of Purchase), leÂ´ razÂ´ sok szervezÂ´ sÂ´ nÂ´ l. . . (asszociÂ´ ciÂ´ s a a a ee e a o szabÂ´ lyok). a â€“ Az ember genotÂ´pusÂ´ nak elemzÂ´ sÂ´ hez a gÂ´ nek nagy szÂ´ ma miatt szintÂ´ n adatbÂ´ nyÂ´ szati algoritÄ± a ee e a e a a musok szÂ¨ ksÂ´ gesek. Az eddigi sikeres kÂ´sÂ´ rletek cÂ´ lja olyan gÂ´ ncsoportok feltÂ´ rÂ´ sa volt, ameu e Ä±e e e aa lyek a cukorbetegsÂ´ g bizonyos vÂ´ ltozataiÂ´ rt felelË sek. A teljes emberi gÂ´ nrendszer feltÂ´ rÂ´ sÂ´ val e a e o e aaa ez a terÂ¨ let egyre fontosabb lesz. u

Â´ 1. FEJEZET. BEVEZETES

20

â€“ Az on-line aruhÂ´ zak a jÂ¨ vË ben egyre elfogadottabbak es elterjedtebbek lesznek. Mivel az onÂ´ a o o Â´ line kereskedelemben nem hasznÂ´ lhatÂ´ ak a megszokott szemÂ´ lyes marketing eszkÂ¨ zÂ¨ k a fora o e o o galom (Â´ s a proï¬t) szemÂ´ lyre szabott vÂ´ sÂ´ rlÂ´ si ajÂ´ nlatokkal nÂ¨ velhetË . Az ajÂ´ nlatokat az eddie e aa a a o o a gi vÂ´ sÂ´ rlÂ´ si adatok es a rendelkezÂ´ sre allÂ´ demogrÂ´ ï¬ai adatok elemzÂ´ se alapjÂ´ n tehetjÂ¨ k meg aa a Â´ e Â´ o a e a u (epizÂ´ dkutatÂ´ s, asszociÂ´ ciÂ´ s szabÂ´ lyok). o a a o a â€“ A csillagÂ´ szatban az egitestek oriÂ´ si szÂ´ ma miatt a hagyomÂ´ nyos klaszterezË algoritmusok mÂ´ g a Â´ Â´ a a a o e a mai szÂ´ mÂ´tÂ´ si kapacitÂ´ sok mellett sem kÂ´ pesek racionÂ´ lis idË n belÂ¨ l kÂ¨ lÂ¨ nbsÂ´ get tenni galaa Ä±a a e a o u uo e xisok, kÂ¨ zeli csillagok es mÂ´ s egi objektumok kÂ¨ zÂ¨ tt. Az ujabb, kiï¬nomultabb algoritmusok o Â´ a Â´ o o Â´ futÂ´ si ideje jÂ´ val kevesebb, ami lehetË vÂ´ teszi a klaszterezÂ´ st (klaszterezÂ´ s). a o o e e e â€“ UtazÂ´ s szervezÂ´ ssel kapcsolatos mintÂ´ k kinyerÂ´ sÂ´ vel hatÂ´ konyabban (Â´ s ennek kÂ¨ vetkeztÂ´ ben a e a ee e e o e nagyobb nyeresÂ´ ggel) megszervezhetË k a nagy kÂ¨ ltsÂ´ gfaktorÂ´ tÂ´ nyezË k, pl. szÂ´ llodai szobÂ´ k, e o o e u e o a a repÂ¨ lË jegyek leÂ´ razÂ´ sa, vagy aremelÂ´ se (epizÂ´ dkutatÂ´ s, gyakori minta). uo a a Â´ e o a â€“ A vÂ´rusÂ¨ lË programok az ismert vÂ´rusokat lenyomataik alapjÂ´ n detektÂ´ ljÂ´ k, az ismeretleneket Ä± oo Ä± a a a pedig tÂ¨ bbnyire valamilyen heurisztikus mÂ´ don prÂ´ bÂ´ ljÂ´ k kiszË rni. OsztÂ´ lyozÂ´ algoritmusok o o o a a u a o felhasznÂ´ lÂ´ sÂ´ val az ismert vÂ´rusok tulajdonsÂ´ gai alapjÂ´ n olyan modellt lehet felÂ´ llÂ´tani, ami jÂ´ l aa a Ä± a a a Ä± o leÂ´rja a vÂ´rusok tulajdonsÂ´ gait [149, 150]. A modellt sikeresen alkalmaztÂ´ k uj ismeretlen vÂ´rusok Ä± Ä± a a Â´ Ä± kiszË rÂ´ sÂ´ re (osztÂ´ lyozÂ´ s). uee a a NÂ´ hÂ´ ny sikeres esettanulmÂ´ nyrÂ´ l a 16.3.2 rÂ´ szben olvashatunk. e a a o e

1.5. SzabvÂ´ nyok a
Kezdetben sok adatbÂ´ nyÂ´ szati projektre jellemzË volt, hogy az adatbÂ´ nyÂ´ szok megkaptÂ´ k az adaa a o a a a tokat es nÂ´ mi informÂ´ ciÂ´ t az alkalmazÂ´ si terÂ¨ letrË l es cserÂ´ be vÂ´ rtÂ´ k tË lÂ¨ k a kincset erË informÂ´ ciÂ´ kat. Â´ e a o a u o Â´ e a a ou Â´o a o A szoros egyÂ¨ ttmË kÂ¨ dÂ´ s hiÂ´ nya azonban csak olyan informÂ´ ciÂ´ khoz vezetett amelyekkel az alu u o e a a o kalmazÂ´ si terÂ¨ let embererei nem sok mindent tudtak kezdeni. Az adatbÂ´ nyÂ´ szat elterjedÂ´ sÂ´ vel (Â´ s a u a a ee e a minË sÂ´ gbiztosÂ´tÂ´ si elvÂ´ rÂ´ sokkal) fellÂ´ pett az igÂ´ ny, hogy legyen egy szabvÂ´ ny, egy utmutatÂ´ az oe Ä±a aa e e a Â´ o Â´ szÂ¨ letett meg a CRISP-DM (CRoss Industry Standard adatbÂ´ nyÂ´ szati projektek lebonyolÂ´tÂ´ sÂ´ rÂ´ l. Igy u a a Ä±a ao Process for Data Mining) [34], amely adatbÂ´ nyÂ´ szati eszkÂ¨ ztË l es felhasznÂ´ lÂ´ si terÂ¨ lettË l fÂ¨ ggetlenÂ¨ l a a o o Â´ aa u o u u leÂ´rja, hogy mikÂ´ nt kellene kinÂ´ znie egy adatbÂ´ nyÂ´ szati projektnek, illetve ismerteti a kulcsfontossÂ´ gÂ´ Ä± e e a a a u lÂ´ pÂ´ seket, es a potenciÂ´ lis veszÂ´ lyeket. A CRISP-DM szerint a tudÂ´ skinyerÂ´ s az 1.6 abra szerinti e e Â´ a e a e Â´ mÂ´ don jÂ¨ n lÂ´ tre. o o e Az adatbÂ´ nyÂ´ szati folyamat szabvÂ´ nyosÂ´tÂ´ sa mellett egyre nagyobb az igÂ´ ny a folyamat egyes a a a Ä±a e lÂ´ pÂ´ seiben felmerÂ¨ lË megoldÂ´ sok, problÂ´ mÂ´ k, eszkÂ¨ zÂ¨ k szabvÂ´ nyosÂ´tÂ´ sÂ´ ra. Ezek kÂ¨ zÂ¨ l a legismere e uo a e a o o a Ä±a a o u tebbek : â€“ az XML alapÂ´ PMML (Predictive Modeling Markup Language), amely az adatbÂ´ nyÂ´ szati u a a eredmÂ´ nyek szabvÂ´ nyos leÂ´rÂ´ sÂ´ t szolgÂ´ lja, e a Ä±aa a â€“ a Microsoft analysis szerver adatbÂ´ nyÂ´ szati funkciÂ´ kkal kibË vÂ´tett szabvÂ´ nya (OLE DB for data a a o o Ä± a mining), â€“ az ISO tÂ¨ rekvÂ´ sei multimÂ´ dia es alkalmazÂ´ s speciï¬kus SQL tÂ´pusok es a hozzÂ´ tartozÂ´ eljÂ´ rÂ´ sok o e e Â´ a Ä± Â´ a o aa deï¬niÂ´ lÂ´ sÂ´ ra (SQL/MM) aa a â€“ java adat bÂ´ nyÂ´ szati API (JDMAPI) a a

Â´ 1. FEJEZET. BEVEZETES

21

1.6. abra. A tudÂ´ sfeltÂ´ rÂ´ s folyamata a CRISP-DM szerint Â´ a aa

Â´ a 1.6. AdatbÂ´ nyÂ´ szati rendszer architekturÂ´ ja a a
Egy adatbÂ´ nyÂ´ szati rendszernek kapcsolatban kell lennie az adatbÂ´ zissal, a felhasznÂ´ lÂ´ val es eseta a a ao Â´ leg valami tudÂ´ salapÂ´ rendszerrel. Ezek alapjÂ´ n egy tipikus adatbÂ´ nyÂ´ szati architektÂ´ ra az 1.7. abrÂ´ n a u a a a u Â´ a lÂ´ thatÂ´ . a o AdatbÂ´ zis, adattÂ´ rhÂ´ z vagy mÂ´ s informÂ´ ciÂ´ raktÂ´ r : Itt talÂ´ lhatÂ´ k a tÂ´ nyleges adatok, ami lehet a a a a a o a a o e egy adatbÂ´ zis, vagy adattÂ´ rhÂ´ z, akÂ´ r egy munkalap vagy bÂ´ rmilyen tÂ´ rolt informÂ´ ciÂ´ . Az adata a a a a a a o tisztÂ´tÂ´ s es integrÂ´ ciÂ´ kÂ¨ zvetlenÂ¨ l az adatokon is elvÂ´ gezhetË . Ä±a Â´ a o o u e o AdatbÂ´ zis vagy adattÂ´ rhÂ´ z szerver : A szerver felelË s a felhasznÂ´ lÂ´ altal kÂ´ rt adat kÂ´ zbesÂ´tÂ´ sÂ´ ert. a a a o aoÂ´ e e Ä± e eÂ´ TudÂ´ s bÂ´ zis : A terÂ¨ letre jellemzË , valamilyen szinten formalizÂ´ lhatÂ´ tudÂ´ s talÂ´ lhatÂ´ itt. Fontos szea a u o a o a a o repe lehet ennek a keresÂ´ si tÂ´ r szË kÂ´tÂ´ sÂ´ nÂ´ l, a kinyert mintÂ´ k erdekessÂ´ gÂ´ nek meghatÂ´ rozÂ´ sÂ´ nÂ´ l, e e u Ä±e e e a Â´ e e a aa a kÂ¨ lÂ¨ nbÂ¨ zË paramÂ´ terek es kÂ¨ szÂ¨ bszÂ´ mok meghatÂ´ rozÂ´ sÂ´ nÂ´ l. uo o o e Â´ u o a a aa a AdatbÂ´ nyÂ´ sz motor : Az adatbÂ´ nyÂ´ sz motorban futnak a kÂ¨ lÂ¨ nbÂ¨ zË adatbÂ´ nyÂ´ szati algoritmusok. a a a a uo o o a a Minta kiÂ´ rtÂ´ kelË modul : Ez a modul felelË s a kinyert minta vagy osszefÂ¨ ggÂ´ sek kiÂ´ rtÂ´ kelÂ´ sÂ´ ert a e e o o Â¨ u e e e e eÂ´ terÂ¨ letre jellemzË erdekessÂ´ gi mutatÂ´ k alapjÂ´ n. Sokszor lÂ´ tni fogjuk, hogy minÂ´ l jobban egybe u oÂ´ e o a a e tudjuk epÂ´teni az adatbÂ´ nyÂ´ szatot a minta kiÂ´ rtÂ´ kelÂ´ sÂ´ vel, annÂ´ l hatÂ´ konyabb es gyorsabb lehet Â´ Ä± a a e e ee a e Â´ a tudÂ´ sfeltÂ´ rÂ´ s. a aa

Â´ 1. FEJEZET. BEVEZETES

22

grafikus felhasznÃ¡lÃ³i felÃ¼let

minta kiÃ©rtÃ©kelÃ©s

adatbÃ¡nyÃ¡sz motor

tudÃ¡s bÃ¡zis

AdatbÃ¡zis vagy adattÃ¡rhÃ¡z szerver adattisztÃ­tÃ¡s adatintegrÃ¡ciÃ³ " szurÃ©s

adatbÃ¡zis

adatâˆ’ tÃ¡rhÃ¡z

1.7. abra. Tipikus adatbÂ´ nyÂ´ szati rendszer architektÂ´ rÂ´ ja Â´ a a ua Â¨ Graï¬kus felhasznÂ´ lÂ´ i felulet : Itt zajlik a kommunikÂ´ ciÂ´ a felhasznÂ´ lÂ´ es az adatbÂ´ nyÂ´ szati rendszer ao a o aoÂ´ a a kÂ¨ zÂ¨ tt. A felhasznÂ´ lÂ´ itt adhatja meg, hogy melyik adatbÂ´ zisban milyen jellegË osszefÂ¨ ggÂ´ seket o o ao a uÂ¨ u e keres es ezen a rÂ´ tegen keresztÂ¨ l lÂ´ thatja a vÂ´ geredmÂ´ nyt. Az osszefÂ¨ ggÂ´ sek atlÂ´ thatÂ´ , ertelmes Â´ e u a e e Â¨ u e Â´ a o Â´ tÂ´ lalÂ´ sa rendkÂ´vÂ¨ l fontos, hiszen ennek hiÂ´ nya elriaszthatja a felhasznÂ´ lÂ´ t az adatbÂ´ nyÂ´ szattÂ´ l. a a Ä± u a ao a a o

Â´ 1.7. AdatbÂ´ nyÂ´ szat es az etika a a 1.8. Az adatbÂ´ nyÂ´ szat feltÂ´ telei a a e
Tagadhatatlan, hogy a sikertelen adatbÂ´ nyÂ´ szati projektek szÂ´ ma nagy, es az adatbÂ´ nyÂ´ szat naa a a Â´ a a gyon sok esetben nem vÂ´ ltotta be a hozzÂ´ fË zÂ¨ tt remÂ´ nyeket. Ennek oka egyrÂ´ szrË l az adatbÂ´ nyÂ´ szati a a u o e e o a a szakemberhiÂ´ ny (a jÂ´ adatbÂ´ nyÂ´ szati szakember ritka, mint a fehÂ´ r hollÂ´ ), mÂ´ srÂ´ szrË l az, hogy alapa o a a e o a e o vetË feltÂ´ telek nem teljesÂ¨ ltek a projektek sorÂ´ n. A sikeres adatbÂ´ nyÂ´ szati projekt egyik legfontosabb o e u a a a feltÂ´ tele az adatbÂ´ nyÂ´ sz es a terÂ¨ let szakÂ´ rtË jÂ´ nek szoros egyÂ¨ ttmË kÂ¨ dÂ´ se. A tovÂ´ bbi feltÂ´ telek az e a a Â´ u e oe u u o e a e alÂ´ bbiak : a Nagy mennyisÂ´ gu adat : A nagy mennyisÂ´ gË adat a kinyert szabÂ´ lyok statisztikai jelentË sÂ´ gÂ´ t nÂ¨ vee Ë e u a oe e o li. MinÂ´ l nagyobb az adatmennyisÂ´ g, annÂ´ l biztosabban tudjuk kizÂ´ rni bizonyos osszefÂ¨ ggÂ´ sek e e a a Â¨ u e esetisÂ´ gÂ´ t, azaz annÂ´ l kisebb az esÂ´ lye, hogy a talÂ´ lt osszefÂ¨ ggÂ´ s csak a vÂ´ letlen eredmÂ´ nye. e e a e a Â¨ u e e e Sajnos sok adatot sokÂ´ ig tart feldolgozni, sË t az algoritmusok egy jelentË s rÂ´ sze erzÂ´ keny arra, a o o e Â´ e hogy az adatbÂ´ zis elfÂ´ r-e a memÂ´ riÂ´ ban. a e o a Â´ Sok attributum : Ha az objektumokat leÂ´rÂ´ attribÂ´ tumok szÂ´ ma kicsi, akkor hagyomÂ´ nyos Ä±o u a a

Â´ 1. FEJEZET. BEVEZETES

23

eszkÂ¨ zÂ¨ kkel (graï¬konok, egyszerË tÂ´ blÂ´ zatok, kis dimenziÂ´ s, forgathatÂ´ , szÂ´nes abrÂ´ k, . . . ) is o o u a a o o Ä± Â´ a fel tudjuk tÂ´ rni a tudÂ´ st. KevÂ´ s attribÂ´ tum esetÂ´ n a kinyerhetË tudÂ´ s sem lehet tÂ´ l sokfÂ´ le. Az a a e u e o a u e adatbÂ´ nyÂ´ szat ereje akkor mutatkozik meg, amikor az attribÂ´ tumszÂ´ m olyan nagy, hogy a haa a u a gyomÂ´ nyos mÂ´ dszereknek nincs esÂ´ lyÂ¨ k. a o e u Tiszta adat : Az adatok jÂ´ minË sÂ´ ge az adatbÂ´ nyÂ´ szat egyik alapfeltÂ´ tele. A zajok, a hibÂ´ s beo oe a a e a jegyzÂ´ sek jÂ´ esetben csak nehezÂ´tik az adatbÂ´ nyÂ´ szatot (pÂ´ ldÂ´ ul amikor ismerjÂ¨ k az adatokban e o Ä± a a e a u talÂ´ lhatÂ´ zaj, ill. bizonytalansÂ´ g fokÂ´ t), rosszabb esetben azonban hamis eredmÂ´ nyekhez vezeta o a a e nek. Az ilyen rossz minË sÂ´ gË adatokra remek pÂ´ lda hazÂ´ nk orvosi adatbÂ´ zisa (rengeteg hibÂ´ s oe u e a a a bejegyzÂ´ s, kitÂ¨ ltetlen mezË , eltÂ´ rË mÂ´ rtÂ´ kegysÂ´ g alapÂ´ bejegyzÂ´ sek, szÂ¨ veges bejegyzÂ´ sek), pee o o eo e e e u e o e dig az ezekbË l kinyert informÂ´ ciÂ´ k ertÂ´ kesek lennÂ´ nek. A â€szemÂ´ thalmazbanâ€ valÂ´ kutakodÂ´ st o a o Â´ e e e o a trÂ´ fÂ´ san GIGO-nak (garbage in, garbage out6 ) nevezik. ea TorzÂ´tatlan adat : Az adatbÂ´ nyÂ´ szat sikeressÂ´ ge mÂ´ lhat az adatok nem megfelelË kivÂ´ lasztÂ´ sÂ´ n. Ä± a a e u o a aa Ide tartozÂ´ fogalom az un. BIBO (bias in, bias out7 ), amely arra hÂ´vja fel a ï¬gyelmÂ¨ nket, o Â´ Ä± u hogy ha egy rÂ´ szsokasÂ´ g alapjÂ´ n akarunk kÂ¨ vetkeztetni az alapsokasÂ´ gra, akkor ï¬gyelembe e a a o a kell vennÂ¨ nk a rÂ´ szsokasÂ´ g kivÂ´ lasztÂ´ sÂ´ nak szempontjait, illetve az abbÂ´ l adÂ´ dÂ´ (esetleges) u e a a aa o o o torzÂ´tÂ´ sokat. PÂ´ ldÂ´ ul, ha a lakossÂ´ got az anyagi helyzet szerint akarjuk csoportokba sorolni, Ä±a e a a de csak nyugat-magyarorszÂ´ gi adatok allnak rendelkezÂ´ sÂ¨ nkre, akkor tudnunk kell, hogy a kaa Â´ eu pott eredmÂ´ ny (a csoportok leÂ´rÂ´ sa) torz lesz, hiszen a rÂ´ szsokasÂ´ g atlag eletszÂ´nvonala jobb az e Ä±a e a Â´ Â´ Ä± alapsokasÂ´ gÂ´ nÂ´ l. a e a Â¨ AlkalmazÂ´ si terulet akciÂ´ kÂ´ pessÂ´ ge : Gyakran elË fordul, hogy a tudÂ´ st csak kinyerik, de a fela o e e o a hasznÂ´ lÂ´ sa elmarad. Gyakran a felhasznÂ´ lÂ´ si terÂ¨ letek tÂ´ l merevek, vagy a vÂ´ ltoztatÂ´ s aa aa u u a a tÂ´ lsÂ´ gosan magas kÂ¨ ltsÂ´ gekkel jÂ´ rna. A legtÂ¨ bb adatbÂ´ nyÂ´ szati esettanulmÂ´ nyban a tudÂ´ s kiu a o e a o a a a a nyerÂ´ sÂ´ nek mÂ´ djÂ´ rÂ´ l esik szÂ´ , a tudÂ´ s felhasznÂ´ lÂ´ sÂ´ rÂ´ l pedig ritkÂ´ n hallunk. ee o ao o a aa ao a A befektetÂ´ s megtÂ´ rulÂ´ sÂ´ nek (Return On Investment) mÂ´ rhetË sÂ´ ge : Egy adatbÂ´ nyÂ´ szati proe e Â¨ee e oe a a jektrË l akkor allÂ´thatjuk biztosan, hogy sikeres, ha a befektetÂ´ s hatÂ´ sÂ´ t mÂ´ rni, vagy viszonylag o Â´ Ä± e aa e pontosan becsÂ¨ lni tudjuk. u A jegyzet fejezeteiben a legkevÂ´ sbÂ´ ismert, de napjainkban egyre nagyobb teret nyerË terÂ¨ leteket e e o u jÂ´ rjuk kÂ¨ rÂ¨ l : a gyakori mintÂ´ k kinyerÂ´ sÂ´ t, az attribÂ´ tumok kÂ¨ zÂ¨ tti osszefÂ¨ ggÂ´ sek meghatÂ´ rozÂ´ sÂ´ t, a a ou a ee u o o Â¨ u e a aa sorozatelemzÂ´ st, a klaszterezÂ´ st es a webes adatbÂ´ nyÂ´ szatot. Minden esetben az algoritmusok gyae e Â´ a a korlati felhasznÂ´ lÂ´ sÂ´ t pÂ´ ldÂ´ kon keresztÂ¨ l szemlÂ´ ltetjÂ¨ k ; emellett megadjuk a problÂ´ mÂ´ k formÂ´ lis deaa a e a u e u e a a ï¬nÂ´ciÂ´ it, es bemutatjuk a legismertebb, leghatÂ´ konyabb algoritmusokat is. A jegyzet tovÂ´ bbi cÂ´ lja, Ä± o Â´ e a e hogy osszefoglalja az eddig nem, vagy csak kis hatÂ´ konysÂ´ ggal megoldott problÂ´ mÂ´ kat, tovÂ´ bbÂ´ a Â¨ e a e a a a jelenlegi kutatÂ´ si terÂ¨ leteket. a u

7 torzÂ´tÂ´ s Ä±a

6 szemÂ´ t e

be, szemÂ´ t ki e be, torzÂ´tÂ´ s ki Ä±a

2. fejezet Alapfogalmak, jelÂ¨ lÂ´ sek oe
Ebben a rÂ´ szben tisztÂ´ zzuk a jegyzet sorÂ´ n hasznÂ´ lt fogalmak jelentÂ´ sÂ´ t. CÂ´ lszerË akkor atnÂ´ znÂ¨ nk e a a a ee e u Â´ e u e fejezet egyes rÂ´ szeit, amikor az olvasÂ´ s sorÂ´ n olyan rÂ´ szbe utkÂ¨ zÂ¨ nk, ami nem teljesen tiszta. e a a e Â¨ o u

2.1. Halmazok, relÂ´ ciÂ´ k, fuggvÂ´ nyek, sorozatok a o Â¨ e
A halmaz kÂ¨ lÂ¨ nbÂ¨ zË objektumok egyÂ¨ ttese, amelyeket a halmaz elemeinek hÂ´vunk. Ha x eleme uo o o u Ä± a H halmaznak, akkor azt Â´gy jelÂ¨ ljÂ¨ k : x âˆˆ H, a halmaz elemeinek szÂ´ mÂ´ t (rÂ¨ videbben elemsz amÂ´ t) Ä± o u a a o Â´ a pedig |H|-val. A jegyzetben a termÂ´ szetes szÂ´ mok halmazÂ´ t ({0,1,. . . }) N-el jelÂ¨ ljÂ¨ k, a valÂ´ s szÂ´ mok e a a o u o a halmazÂ´ t R-el, az egÂ´ sz szÂ´ mok halmazÂ´ t Z-vel, az ures halmazt (egyetlen elemet sem tartalmazÂ´ a e a a Â¨ o / halmaz) 0-val. KÂ´ t halmaz akkor egyezik meg, ha ugyanazok az elemeik. X rÂ´ szhalmaza Y -nak (X âŠ† e e âŠ† Y ), ha X minden eleme Y -nak is eleme. Ha X âŠ† Y , de X = Y , akkor X val odi rÂ´ szhalmaza Y -nak. e Â´ A valÂ´ di jelzË t gyakran fogjuk hasznÂ´ lni, es a valÂ´ di rÂ´ szhalmaz analÂ´ giÂ´ jÂ´ ra azt ertjÂ¨ k rajta, hogy o o a Â´ o e o aa Â´ u az egyenlË sÂ´ get kizÂ´ rjuk. Sajnos a superset angol szÂ´ nak nincsen altalÂ´ nosan elfogadott fordÂ´tÂ´ sa, oe a o Â´ a Ä±a pedig sokszor szeretnÂ´ nk hasznÂ´ lni. Azt fogjuk mondani, hogy Y b ovebb X -nÂ´ l, ha (X âŠ† Y ). A hale a e Ë mazmË veletek jelÂ¨ lÂ´ se es pontos jelentÂ´ sÂ¨ k : metszet : X âˆ©Y = {z : z âˆˆ X es z âˆˆ Y }, uniÂ´ : X âˆªY = {z : u oe Â´ eu Â´ o : z âˆˆ X vagy z âˆˆ Y }, kÂ¨ lÂ¨ nbsÂ´ g : X \Y = {z : z âˆˆ X es z âˆˆ Y }. uo e Â´ KÂ´ t halmaz (X , Y ) Descartes-szorzata (X Ã—Y ) az osszes olyan rendezett pÂ´ rbÂ´ l allÂ´ halmaz, amelye Â¨ a o Â´ o nek az elsË komponense (tagja) X -ben, a mÂ´ sodik Y -ban van. Az X , Y halmazokon ertelmezett bin aris o a Â´ Â´ relÂ´ ciÂ´ az X Ã—Y rÂ´ szhalmaza. Ha (x, y) eleme a Ï† relÂ´ ciÂ´ nak, akkor azt Â´gy is jelÂ¨ lhetjÂ¨ k : xÏ†y. A a o e a o Ä± o u relÂ´ ciÂ´ rÂ´ szben rendezÂ´ s (vagy parciÂ´ lis rendezÂ´ s), ha reï¬‚exÂ´v (x x), antiszimmetrikus (x y es y x a o e e a e Ä± Â´ feltÂ´ telekbË l kÂ¨ vetkezik, hogy x = y), tranzitÂ´v (x y es y z feltÂ´ telekbË l kÂ¨ vetkezik, hogy x z). e o o Ä± Â´ e o o Ha az elË zË 3 feltÂ´ telben az antiszimmetrikus helyett szimmetrikusat (x y-bË l kÂ¨ vetkezik, hogy o o e o o y x) mondunk, akkor ekvivalencia-relaciÂ´ rÂ´ l beszÂ´ lÂ¨ nk. A tovÂ´ bbiakban, tetszË leges rendezÂ´ s eu a o e Â´ oo esetÂ´ n, ha x = y es x y, akkor azt Â´gy jelÂ¨ ljÂ¨ k x y. Legyen X rÂ´ szhalmaza X . A X halmaznak e Â´ Ä± o u e y âˆˆ X egy alsÂ´ korlÂ´ tja, ha y x minden x âˆˆ X -re. Az y legnagyobb alsÂ´ korlÂ´ t, ha minden y alsÂ´ o a o a o korlÂ´ tra y a y. Az y maximÂ´ lis alsÂ´ korlÂ´ tja X -nak, ha nem lÂ´ tezik olyan y-tÂ´ l kÂ¨ lÂ¨ nbÂ¨ zË y alsÂ´ a o a e o uo o o o korlÂ´ t, amire y y . HasonlÂ´ an ertelmezhetË a felsË , legkisebb felsË , minimÂ´ lis felsË korlÂ´ t fogalmak a o Â´ o o o a o a is. A rendezÂ´ s teljes rendezÂ´ s, ha minden x = y elemre x y, y x kÂ¨ zÂ¨ l az egyik fennÂ´ ll. Az e e o u a (X , ) pÂ´ rost hÂ´ lÂ´ nak nevezzÂ¨ k, ha az X -en ertelmezett parciÂ´ lis rendezÂ´ s, es tetszË leges x, y âˆˆ X a ao u Â´ a e Â´ o elemeknek lÂ´ tezik legnagyobb alsÂ´ (jelÂ¨ lÂ´ sben : x âˆ§ y) es legkisebb felsË korlÂ´ tjuk (x âˆ¨ y). e o oe Â´ o a KÂ¨ zponti fogalom lesz a lexikograï¬kus rendezÂ´ s. NÂ´ zzÂ¨ k elË szÂ¨ r ennek a matematikai deo e e u o o ï¬nÂ´ciÂ´ jÂ´ t. Legyen X es Y kÂ´ t halmaz, amelyeken ertelmezve van egy-egy parciÂ´ lis rendezÂ´ s ( X , Y ). Ä± oa Â´ e Â´ a e 24

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

25

Azt mondjuk, hogy a (x1 , y1 ) âˆˆ X Ã—Y lexikograï¬kusan megelË zi (x2 , y2 ) âˆˆ X Ã—Y pÂ´ rt, ha x1 X x2 , o a vagy x1 = x2 es y1 Y y2 . A lexikograï¬kus rendezÂ´ st tetszË leges szÂ´ mÂ´ halmaz Descartes-szorzatÂ´ ra is Â´ e o a u a kiterjeszthetjÂ¨ k rekurzÂ´v mÂ´ don az alÂ´ bbiak alapjÂ´ n : X Ã—Y Ã—Z = X Ã—(Y Ã—Z). LÂ´ thatÂ´ , hogy a lexikou Ä± o a a a o graï¬kus rendezÂ´ st Descartes szorzatokon ertelmezzÂ¨ k, vagy mÂ´ s szÂ´ val olyan osszetett struktÂ´ rÂ´ kon, e Â´ u a o Â¨ ua amelyeknek ugyanannyi tagjuk van (n-eseknek is hÂ´vjÂ´ k ezeket). Mi ezt szeretnÂ´ nk altalÂ´ nosÂ´tani, Ä± a e Â´ a Ä± hiszen pÂ´ ldÂ´ ul szavak sorba rendezÂ´ sÂ´ nÂ´ l is elË fordulnak eltÂ´ rË hosszÂ´ sÂ´ gÂ´ szavak. Ha a rÂ¨ videbb e a ee e o eo ua u o szÂ´ megegyezik a hosszabb szÂ´ elsË felÂ´ vel (pÂ´ ldÂ´ ul komp es kompenzÂ´ l szavak), akkor megegyezÂ´ s o o o e e a Â´ a e alapjÂ´ n a rÂ¨ videbb szÂ´ elË zi meg lexikograï¬kusan a hosszabbikat. Ezek alapjÂ´ n mindenki tudja dea o o o a ï¬niÂ´ lni a lexikograï¬kus rendezÂ´ st eltÂ´ rË szÂ´ mÂ´ halmazok Descartes szorzatÂ´ ra. A legtÂ¨ bb esetben a e eo a u a o a Descartes szorzat tagjainak halmaza es a rajtuk deï¬niÂ´ lt rendezÂ´ sek megegyeznek (pl. : X = Y es Â´ a e Â´ e e e X = Y ). Ilyenre, adott rendezÂ´ s szerinti lexikograï¬kus rendezÂ´ skÂ´ nt hivatkozunk. Az X , Y halmazokon ertelmezett f binÂ´ ris relÂ´ ciÂ´ fuggvÂ´ ny, ha bÂ´ rmely x âˆˆ X esetÂ´ n pontosan Â´ a a o Â¨ e a e egy olyan y âˆˆ Y lÂ´ tezik, hogy (x, y) âˆˆ f . Ez jelÂ¨ lÂ´ sben f : X â†’ Y , es, ha (x, y) âˆˆ f , akkor y = f (x). e oe Â´ Az X halmazt a f ertelmezÂ´ si tartomÂ´ nyÂ´ nak hÂ´vjuk (vagy mÂ´ shogy : f az X -en ertelmezett), Y -t az e a a Ä± a Â´ Â´ f kÂ´ phalmazÂ´ nak, az f (X ) halmazt pedig az f ertÂ´ kkÂ´ szletÂ´ nek. Azt a fÂ¨ ggvÂ´ nyt, amely ugy kapunk, e a e u e Â´ Â´ e e hogy elË szÂ¨ r a f , majd az g fÂ¨ ggvÂ´ nyt alkalmazzuk g â—¦ f -el jelÂ¨ ljÂ¨ k. Predik atum egy fÂ¨ ggvÂ´ ny, ha o o u e o u u e Â´ az ertÂ´ kkÂ´ szlete az {igaz, hamis} halmaz. SzurjektÂ´v egy fÂ¨ ggvÂ´ ny, ha a kÂ´ phalmaza megegyezik az Â´ e e Ä± u e e Â¨ ertÂ´ kkÂ´ szletÂ´ vel, injektÂ´v (vagy mÂ´ s nÂ´ ven egy-egy ertelmË lekÂ´ pzÂ´ s), ha az ertelmezÂ´ si tartomÂ´ ny Â´ e e e Ä± a e Â´ u e e Â´ e a bÂ´ rmely kÂ´ t kÂ¨ lÂ¨ nbÂ¨ zË elemÂ´ hez kÂ¨ lÂ¨ nbÂ¨ zË ertÂ´ ket rendel es bijektÂ´v (mÂ´ skÂ´ ppen a fÂ¨ ggvÂ´ ny egy a e uo o o e uo o o Â´ e Â´ Ä± a e u e bijekciÂ´ ), ha szÂ¨ rjektÂ´v es injektÂ´v is egyben. o u Ä± Â´ Ä±
n

u e a o u u Legyen H tetszË leges halmaz. Az f : H Ã— Â· Â· Â·Ã— H â†’ H fÂ¨ ggvÂ´ nyt n vÂ´ ltozÂ´ s mË veletnek nevezzÂ¨ k. o A H halmazon ertelmezett kÂ´ tvÂ´ ltozÂ´ s mË veletet asszociatÂ´vnak nevezzÂ¨ k, ha tetszË leges a, b, c âˆˆ Â´ e a o u Ä± u o âˆˆ H esetÂ´ n (a b) c = a (b c). A (H, ) pÂ´ rt fÂ´ lcsoportnak nevezzÂ¨ k, ha a H-n ertelmezett e a e u Â´ asszociatÂ´v mË velet. A (H, ) fÂ´ lcsoport elemein a H elemeit ertjÂ¨ k. Ha a (H, ) fÂ´ lcsoport elemei Ä± u e Â´ u e kÂ¨ zÂ¨ tt lÂ´ tezik olyan e elem, amelyre e a = a e = a minden a âˆˆ H elemre, akkor e-t egysÂ´ gelemnek o o e e hÂ´vjuk es egysÂ´ gelemes fÂ´ lcsoportÂ´ l beszÂ´ lÂ¨ nk. Ha egy egysÂ´ gelemes fÂ´ lcsoportban minden elemnek Ä± Â´ e e o eu e e lÂ´ tezik inverze, akkor csoportrÂ´ l beszÂ´ lÂ¨ nk. Az a inverzÂ´ re (aâˆ’1 ) teljesÂ¨ ljÂ¨ n, hogy a aâˆ’1 = aâˆ’1 e o eu e u o Â´ a = e. A csoport Abel-csoport, ha a mË velet kommutatÂ´v (a b = b a) is. A (H, , +) hÂ´ rmas u Ä± a Â´ egy gyË rË , amennyiben (H, ) Abel csoport, (H, +) fÂ´ lcsoport es a , + mË veletek disztributÂ´vek uu e Â´ u Ä± egymÂ´ sra nÂ´ zve, azaz (a + b) c = a c + b c. A es a + mË veletek egysÂ´ gelemeit az 1 es a 0 a e Â´ u e Â´ szimbÂ´ lumok jelÂ¨ lik. Testnek hÂ´vjuk az olyan kommutatÂ´v gyË rË t, ahol az 1 = 0 es a 0-Â´ n kÂ´vÂ¨ l a H o o Ä± Ä± uu Â´ a Ä± u minden elemÂ´ nek van inverze. e A H halmaz felett ertelmezett multihalmaznak vagy zsaknak nevezzÂ¨ k azt a halmazt, amelynek Â´ u Â´ elemei olyan pÂ´ rok, amelyek elsË tagja H egy eleme, mÂ´ sodik tagja pedig egy pozitÂ´v egÂ´ sz szÂ´ m. a o a Ä± e a Egy multihalmazt szokÂ´ s ugy abrÂ´ zolni mintha olyan halmaz lenne, amely egy elemet tÂ¨ bbszË r is a Â´ Â´ a o o tartalmazhat. Ilyenkor a pÂ´ r elsË tagjÂ´ t annyiszor Â´rjuk le, amennyi a pÂ´ r mÂ´ sodik tagja. PÂ´ ldÂ´ ul a o a Ä± a a e a a {(A,1), (C,3)}-at {A, C, C, C}-vel abrÂ´ zoljuk. A multihalmaz mÂ´ retÂ´ n a pÂ´ rok mÂ´ sodik tagjainak Â´ a e e a a osszegÂ´ t, elemszÂ´ mÂ´ n pedig a pÂ´ rok szÂ´ mÂ´ t ertjÂ¨ k. Â¨ e a a a a a Â´ u Sokat fogjuk hasznÂ´ lni a sorozat fogalmÂ´ t. Legyen S egy halmaz. Az f : N â†’ S fÂ¨ ggvÂ´ nyt az S a a u e felett ertelmezett sorozatnak hÂ´vjuk. LeÂ´rÂ´ sÂ´ ra az f (0), f (1), . . . helyett a s 0 , s1 , . . . jelÂ¨ lÂ´ st fogjuk Â´ Ä± Ä±aa oe hasznÂ´ lni. VÂ´ ges sorozatok esetÂ´ ben az f ertelmezÂ´ si tartomÂ´ nya (Â´ ltalÂ´ ban az {1,2,. . . ,n}) vÂ´ ges a e e Â´ e a a a e halmaz. VÂ´ ges sorozat hossza az ertelmezÂ´ si tartomÂ´ nyÂ´ nak elemszÂ´ ma. Az S = s 1 , s2 , . . . sn , S = e Â´ e a a a a oa Â´ u Â´ = s1 , s2 , . . . sn sorozat konkatenÂ´ ciÂ´ jÂ´ n az s1 , s2 , . . . sn , s1 , s2 , . . . sn sorozatot ertjÂ¨ k, es S, S -el jelÂ¨ ljÂ¨ k. o u

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

26

2.2. LineÂ´ ris algebra a
Legyen H egy test, amelynek elemeit skalaroknak hÂ´vjuk. A H felett ertelmezett vektortÂ´ r egy Ä± Â´ e Â´ V halmaz (amelynek elemei a vektorok) es kÂ´ t binÂ´ ris operÂ´ tor (vektor osszeadÂ´ s : + es skalÂ´ rral Â´ e a a Â¨ a Â´ a valÂ´ szorzÂ´ s : Â·), amelyekre teljesÂ¨ l nÂ´ hÂ´ ny axiÂ´ ma (1. u, v, w âˆˆ V -re u + (v + w) = (u + v)+, 2. u + o a u e a o + v = v + u, stb.). A W âŠ† V halmazt altÂ´ rnek nevezzÂ¨ k, ha zÂ´ rt a vektorÂ¨ sszeadÂ´ s es skalÂ´ rszorzÂ´ s e u a o a Â´ a a mË veletekre. Adott vektorhalmazt tartalmazÂ´ alterek metszetÂ´ t a vektorhalmaz altal feszÂ´tett altÂ´ rnek u o e Ä± e Â´ nevezzÂ¨ k. Ha a halmazbÂ´ l nem tÂ´ volÂ´thatunk el elemet a feszÂ´tett altÂ´ r megvÂ´ ltoztatÂ´ sa nÂ´ lkÂ¨ l, akkor u o a Ä± Ä± e a a e u a vektorhalmazt lineÂ´ risan fÂ¨ ggetlennek hÂ´vjuk. A V altÂ´ r egy bÂ´ zisa egy olyan lineÂ´ risan fÂ¨ ggetlen a u Ä± e a a u vektorhalmaz, amelynek feszÂ´tett altere V . Ä± A hagyomÂ´ nyoknak megfelelË en az A mÂ´ trix i-edik sorÂ´ bÂ´ l kÂ´ pzett vektort A i -vel jelÂ¨ ljÂ¨ k, ||v||a o a a o e o u vel a v vektor euklideszi normÂ´ jÂ´ t ( aa a a âˆ‘i v2 ) es vT w-vel a vT , w vektorok skalÂ´ ris szorzatÂ´ t (âˆ‘i vT wi ). i i Â´

2.3. GrÂ´ felmÂ´ let a e
IrÂ´ nyÂ´tott grÂ´ f egy G = (V, E) pÂ´ r, ahol V csÂ´ csok (vagy pontok) vÂ´ ges halmaza, E pedig egy a Ä± a a u e binÂ´ ris relÂ´ ciÂ´ V -n. E elemeit eleknek nevezzÂ¨ k. Ha (u, v) âˆˆ E, akkor az u, v csÂ´ csok egymÂ´ s szoma a o u u a Â´ szÂ´ dai. IrÂ´ nyÂ´tatlan grÂ´ frÂ´ l beszÂ´ lÂ¨ nk, ha az E relÂ´ ciÂ´ szimmetrikus. A cÂ´mkÂ´ zett (vagy sÂ´ lyozott) e a Ä± a o eu a o Ä± e u grÂ´ fnÂ´ l a csÂ´ csokhoz, cÂ´mkÂ´ zett elË (vagy elsÂ´ lyozott) grÂ´ fnÂ´ l pedig az elekhez rendelÂ¨ nk cÂ´mkÂ´ ket. a a u Ä± e a a Â´ u Ä± e Â´u Â´ u A cÂ´mkÂ´ zett elË grÂ´ fot sÂ´ lyozott grÂ´ fnak hÂ´vjuk, ha a cÂ´mkÂ´ k szÂ´ mokkal kifejezhetË sÂ´ lyokat jelenÄ± e Â´u a u a Ä± Ä± e a o u tenek. A grÂ´ f mÂ´ retÂ´ n (|G|) a csÂ´ csok szÂ´ mÂ´ t ertjÂ¨ k. Egy csÂ´ cs fok an a csÂ´ csot tartalmazÂ´ eleket a e e u a a Â´ u u u o Â´ Â´ ertjÂ¨ k. IrÂ´ nyÂ´tott grÂ´ foknÂ´ l megkÂ¨ lÂ¨ nbÂ¨ ztetÂ¨ nk kifokot es befokot. A G irÂ´ nyÂ´tatlan grÂ´ f k-regul aris, Â´ u a Ä± a a uo o u Â´ a Ä± a Â´ ha minden csÂ´ cs foka pontosan k. u A G = (V , E ) grÂ´ f a G = (V, E) rÂ´ szgrÂ´ fja, ha V âŠ† V es E âŠ† E. A G = (V, E) grÂ´ f V âŠ† V altal a e a Â´ a Â´ feszÂ´tett rÂ´ szgrÂ´ fja (induced subgraph) az a G = (V , E ) grÂ´ f, ahol E = {(u, v) âˆˆ E : u, v âˆˆ V }. A Ä± e a a G1 (V1 , E1 ) izomorf a G2 (V2 , E2 ) grÂ´ ffal, jelÂ¨ lÂ´ sben G1 âˆ¼ G2 , ha lÂ´ tezik Ï† : V1 â†’ V2 bijekciÂ´ , amelyre a oe e o = (u, v) âˆˆ E1 esetÂ´ n (Ï†(u), Ï†(v)) âˆˆ E2 is fennÂ´ ll. CÂ´mkÂ´ zett grÂ´ foknÂ´ l emellett megkÂ¨ veteljÂ¨ k, hogy az u e a Ä± e a a o u csÂ´ cs cÂ´mkÂ´ je megegyezzÂ´ k a Ï†(u) cÂ´mkÂ´ jÂ´ vel minden u âˆˆ V1 -re, cÂ´mkÂ´ zett elË grÂ´ fnÂ´ l pedig az (u, v) u Ä± e e Ä± ee Ä± e Â´u a a cÂ´mkÂ´ je egyezzen meg a (Ï†(u), Ï†(v)) el cÂ´mkÂ´ jÂ´ vel. Ha G âˆ¼ G, akkor automorï¬zmusrÂ´ l beszÂ´ lÂ¨ nk. Ä± e Â´ Ä± ee o eu = A grÂ´ fok abrÂ´ zolÂ´ sÂ´ nak elterjedt mÂ´ dja a szomszÂ´ dossÂ´ gi mÂ´ trix (adjacency matrix) es a szoma Â´ a aa o e a a Â´ szÂ´ dossÂ´ g lista. Az |G| Ã— |G| mÂ´ retË A szomszÂ´ dossÂ´ gi mÂ´ trix ai j eleme 1 (Â´ lcÂ´mkÂ´ zett esetben az e a e u e a a e Ä± e el cÂ´mkÂ´ je), ha a G grÂ´ f i-edik csÂ´ csÂ´ bÂ´ l indul el a j-edik csÂ´ csba, kÂ¨ lÂ¨ nben 0. TermÂ´ szetesen a Â´ Ä± e a u a o Â´ u uo e szomszÂ´ dossÂ´ gi mÂ´ trixot a grÂ´ fon kÂ´vÂ¨ l az hatÂ´ rozza meg, hogy melyik csÂ´ csot hÂ´vjuk az elsË nek, e a a a Ä± u a u Ä± o mÂ´ sodiknak, ... A szomszÂ´ dossÂ´ gi mÂ´ trixot tehÂ´ t a grÂ´ f es az f : V â†’ {1, . . . , |V |} bijekciÂ´ adja meg. a e a a a a Â´ o HurokÂ´ l nÂ´ lkÂ¨ li, cÂ´mkÂ´ zett grÂ´ fban a szomszÂ´ dossÂ´ gi mÂ´ trix a ii eleme az i csÂ´ cs cÂ´mkÂ´ jÂ´ t tÂ´ rolja. A e e u Ä± e a e a a u Ä± ee a szomszÂ´ dossÂ´ gi lista |G| darab lista, ahol az i-edik lista tÂ´ rolja az i-edik csÂ´ cs szomszÂ´ dait. e a a u e Az u csÂ´ csot az u csÂ´ ccsal osszekÂ¨ tË k-hosszÂ´ uton csÂ´ csoknak egy olyan (vÂ´ ges) v0 , v1 , . . . , vk u u Â¨ oo uÂ´ u e sorozatÂ´ t ertjÂ¨ k, amelyre u = v0 , u = vk , es (viâˆ’1 , vi ) âˆˆ E (i = 1,2, . . . , k). Egy ut egyszerË , ha a benne a Â´ u Â´ Â´ u szereplË csÂ´ csok pÂ´ ronkÂ´ nt kÂ¨ lÂ¨ nbÂ¨ zË k. A v0 , v1 , . . . , vk ut kÂ¨ r, ha v0 = vk , es az ut legalÂ´ bb egy elt o u a e uo o o Â´ o Â´ Â´ a Â´ tartalmaz. Egy grÂ´ fot osszefÂ¨ ggË nek hÂ´vunk, ha bÂ´ rmely kÂ´ t csÂ´ csa osszekÂ¨ thetË uttal. A kÂ¨ rmenetes, a Â¨ u o Ä± a e u Â¨ o oÂ´ o irÂ´ nyÂ´tÂ´ s nÂ´ lkÂ¨ li grÂ´ fot erdË nek hÂ´vjuk. Ha az erdË osszefÂ¨ ggË , akkor pedig fanak. Az olyan fÂ´ t, amely a Ä±a e u a o Ä± oÂ¨ u o a Â´ tartalmazza egy G grÂ´ f minden csÂ´ csÂ´ t, a G feszÂ´tË fÂ´ jÂ´ nak hÂ´vjuk. a u a Ä±oaa Ä± A gyÂ¨ keres fÂ´ ban az egyik csÂ´ csnak kitÂ¨ ntetett szerepe van. Ezt a csÂ´ csot gy okÂ´ rnek nevezzÂ¨ k. o a u u u u Â¨ e A gyÂ¨ kÂ´ rbË l egy tetszË leges x csÂ´ csba vezetË (egyÂ´ rtelmË en meghatÂ´ rozott) ut altal tartalmazott o e o o u o e u a Â´ Â´ bÂ´ rmely y csÂ´ csot az x osÂ´ nek nevezÂ¨ nk. Azt is mondjuk ekkor, hogy x az y leszarmazottja. Ha x = y, a u u Ë e Â´

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

27

akkor valÂ´ di osrË l es valÂ´ di leszÂ´ rmazottrÂ´ l beszÂ´ lÂ¨ nk. Ha az uton x 1 elen keresztÂ¨ l erhetË el y-bÂ´ l, o Ë o Â´ o a o eu Â´ Â´ u Â´ o o akkor x az y gyereke es y az x szÂ¨ lË je. Ha kÂ´ t csÂ´ csnak ugyanaz a szÂ¨ lË je, akkor testvÂ´ reknek mondjuk Â´ uo e u uo e oket. Ë A G=(V, E) grÂ´ f S, V \S vÂ´ gÂ´ sÂ´ n a V halmaz kÂ´ trÂ´ szes partÂ´ciÂ´ jÂ´ t ertjÂ¨ k. Az (u, v)âˆˆE el keresztezi a a aa e e Ä± oa Â´ u Â´ az S, V \S vÂ´ gÂ´ st, ha annak egyik vÂ´ gpontja S-ben a mÂ´ sik V \S-ben van. Egy vÂ´ gÂ´ s s ulya â€“ sÂ´ lyozott a a e a a a Â´ u grÂ´ fok esetÂ´ ben â€“ megegyezik a vÂ´ gÂ´ st keresztezË elek osszsÂ´ lyÂ´ val. a e a a oÂ´ Â¨ u a

2.4. Matematika logika 2.5. ValÂ´ szÂ´nusÂ´ gszÂ´ mÂ´tÂ´ s o Ä± Ë e a Ä±a
FeltÂ´ telezzÂ¨ k, hogy az olvasÂ´ tisztÂ´ ban van a valoszÂ´nË sÂ´ gi vÂ´ ltozÂ´ , valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ ele u o a a o o Ä± ue a o Â´ Ä± ue oszlÂ´ sÂ´ nak, sË rË sÂ´ gfÂ¨ ggvÂ´ nyÂ´ nek, eloszlÂ´ sfÂ¨ ggvÂ´ nyÂ´ nek a valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ vÂ´ rhatÂ´ ertÂ´ kÂ´ nek aa uue u e e a u e e o Ä± ue a o a o Â´ e e 2 [X ] = Ïƒ2 = E[(X âˆ’Âµ)2 ]) vagy altalÂ´ nosan az n-edik centrÂ´ lis (E[X ] = Âµ = âˆ‘ xÂ· p(x)) es szÂ´ rÂ´ sÂ´ nak (D Â´ oaa Â´ a a X momentumok fogalmÂ´ val (Dn [X ] = E[(X âˆ’ Âµ)n ]), tovÂ´ bbÂ´ ismeri kÂ´ t valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ kÂ¨ zÂ¨ tti a a a e o Ä± ue a o o o Cov(X,Y ) kovarianciÂ´ t (Cov(X , Y ) = E[(X âˆ’ Âµ)(Y âˆ’ Î½)) es korrelÂ´ ciÂ´ t (Corr(X , Y ) = ÏƒX ÏƒY ). a Â´ a o

2.5.1. Nevezetes eloszlÂ´ sok a
A kÂ¨ vetkezË nevezetes eloszlÂ´ sokkal fogunk talÂ´ lkozni tanulmÂ´ nyaink sorÂ´ n. o o a a a a BinomiÂ´ lis eloszlÂ´ s a a Hipergeometrikus eloszlÂ´ s a TegyÂ¨ k fel, hogy van N kÂ¨ lÂ¨ nbÂ¨ zË elemÂ¨ nk, amelybË l R darab rossz. A hipergeometrikus eloszlÂ´ s u uo o o u o a adja meg annak az esÂ´ lyÂ´ t, hogy X darab rossz elem lesz, ha az N elembË l n darabot kiveszÂ¨ nk e e o u vÂ´ letlenszerË en. Elemi kombinatorikus uton a valÂ´ szÂ´nË sÂ´ g kiszÂ´ mÂ´thatÂ´ (0 â‰¤ X â‰¤ n) : e u Â´ o Ä± ue a Ä± o P(X , N, R, n) =
R X Nâˆ’R nâˆ’X N n

A fenti sË rË sÂ´ gfÂ¨ ggvÂ´ nnyel rendelkezË diszkrÂ´ t valÂ´ szÂ´nË sÂ´ gi eloszlÂ´ st hÂ´vjuk hipergeometrikus eluue u e o e o Ä± ue a Ä± oszlÂ´ snak. a Amennyiben n N, akkor a hipergeometrikus eloszlÂ´ st kÂ¨ zelÂ´thetjÂ¨ k az n, R/N paramÂ´ terË binoa o Ä± u e u miÂ´ lis eloszlÂ´ ssal. a a NormÂ´ lis eloszlÂ´ s a a Ï‡2 eloszlÂ´ s a Legyenek Î¾1 , Î¾2 , . . . , Î¾n egymÂ´ stÂ´ l fÂ¨ ggetlen, standard normÂ´ lis eloszlÂ´ sÂ´ valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ k. a o u a au o Ä± ue a o n 2 valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ eloszlÂ´ sÂ´ t n paramÂ´ terË Ï‡ 2 eloszlÂ´ snak (Ï‡2 ) nevezzÂ¨ k. o Ä± ue a o aa e u a u Ekkor az âˆ‘i=1 Î¾i n

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

28

2.5.2. FerdesÂ´ g es lapultsÂ´ g e Â´ a
A ferdesÂ´ g egy eloszlÂ´ s szimmetriÂ´ jÂ´ t prÂ´ bÂ´ lja megadni. Ha a ferdesÂ´ g nulla, akkor az eloszlÂ´ s e a aa o a e a szimmetrikus (pÂ´ ldÂ´ ul normÂ´ lis eloszlÂ´ soknÂ´ l), ellenkezË esetben a vÂ´ rhatÂ´ ertÂ´ ktË l balra (negatÂ´v e a a a a o a o Â´ e o Ä± ferdesÂ´ g esetÂ´ ben) vagy jobbra nyÂ´ lik elâ€. A ferdesÂ´ gnek tÂ¨ bb mutatÂ´ jÂ´ t deï¬niÂ´ ltÂ´ k ; ezek kÂ¨ zÂ¨ l a e e u e o oa a a o u â€ âˆš D3 [X] legelterjedtebb a Î³1 = (D2 [X])3/2 ), de szokÂ´ s mÂ´ g a Î²1 = Î³1 -et is haszÂ´ lni. a e a SzintÂ´ n nem az alapfogalmak kÂ¨ zÂ´ tartozik a lapultsag fogalma, ami egy eloszlÂ´ s csÂ´ csossÂ´ gÂ´ t e o e a u a a Â´ D4 [X] adja meg. A lapultsÂ´ gnak is tÂ¨ bb elfogadott deï¬nÂ´ciÂ´ ja lÂ´ tezik. Legelterjedtebb a Î² 2 = (D2 [X])2 (kurtosis a o Ä± o e proper), es a Î³2 = Î²2 âˆ’ 3 (kurtosis excess) ertÂ´ kek. A normÂ´ lis eloszlÂ´ s Î²2 lapultsÂ´ gi ertÂ´ ke hÂ´ rom, a Â´ Â´ e a a a Â´ e a normÂ´ lisnÂ´ l laposabbakÂ´ hÂ´ romnÂ´ l kisebb. A ferdesÂ´ get es a lapultsÂ´ got annak eldÂ¨ ntÂ´ sÂ´ nÂ´ l szoktÂ´ k a a e a a e Â´ a o ee e a hasznÂ´ lni, hogy egy adott minta szÂ´ rmazhat-e normÂ´ lis eloszlÂ´ sbÂ´ l. a a a a o

2.5.3. Hoeffding-korlÂ´ t a
A Hoeffding-korlÂ´ t a mintavÂ´ telzÂ´ ssel kapcsolatos allÂ´tÂ´ sok alapja. a e e Â´ Ä±a 2.1. lemma. Legyen Xi , 1 â‰¤ i â‰¤ n Âµ vÂ´ rhatÂ´ ertÂ´ kË , fÂ¨ ggetlen, azonos eloszlÂ´ sÂ´ valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ k a oÂ´ e u u au o Ä± ue a o es a â‰¤ Xi â‰¤ b minden i-re. Ekkor tetszË leges Î» > 0-ra fennÂ´ ll a kÂ¨ vetkezË egyenlË tlensÂ´ g : o a o o o e Â´ P
2 2 1 âˆ‘ Xi âˆ’ Âµ â‰¥ Î» â‰¤ 2eâˆ’2Î» n/(bâˆ’a) . n i=1

2.5.4. EntrÂ´ pia o
Legyen X egy diszkrÂ´ t valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ , amely ertÂ´ keit egy X halmazbÂ´ l veheti fel. Az l X = e o Ä± ue a o Â´ e o = âˆ’ log2 p(X ) valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ t az X entrÂ´ piasË rË sÂ´ gÂ´ nek nevezzÂ¨ k. X entrÂ´ piÂ´ jÂ´ t â€“ H(X )-et â€“ o Ä± ue a o o uue e u o aa ezen vÂ´ ltozÂ´ vÂ´ rhatÂ´ ertÂ´ kÂ´ vel deï¬niÂ´ ljuk : a o a oÂ´ e e a H(X ) = âˆ’
xâˆˆX

âˆ‘ p(x) log2 p(x).

Az entrÂ´ pia valamikÂ´ ppen a vÂ´ ltozÂ´ bizonytalansagÂ´ t fejezi ki. Ha X elemszÂ´ ma rÂ¨ gzÂ´tett es az X o e a o a o Ä± Â´ Â´ a vÂ´ ltozÂ´ csak egy ertÂ´ ket vehet fel (mert az egyik ertÂ´ k valÂ´ szÂ´nË sÂ´ ge 1), akkor H(X ) ertÂ´ ke 0 (nincs a o Â´ e Â´ e o Ä± ue Â´ e bizonytalansÂ´ g), ha pedig X eloszlÂ´ sa egyenletes eloszlÂ´ st kÂ¨ vet, akkor az entrÂ´ pia a maximumÂ´ t a a a o o a veszi fel, log2 (|X|)-t. Legyen X es Y kÂ´ t diszkrÂ´ t ertÂ´ kË valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ . Az X -nek az Y feltÂ´ tellel vett feltÂ´ teles Â´ e e Â´ e u o Ä± ue a o e e entrÂ´ piÂ´ ja : o a H(X |Y ) = âˆ’ âˆ‘ âˆ‘ p(x, y) log2 p(x|y),
yâˆˆY xâˆˆX

vagy egy kicsit atalakÂ´tva kapjuk, hogy Â´ Ä± H(X |Y ) = âˆ’
yâˆˆY

âˆ‘ p(y) âˆ‘ p(x|y) log2 p(x|y).
xâˆˆX

Be lehet bizonyÂ´tani, hogy H (X |Y ) = H (XY ) âˆ’ H (Y ), ami informÂ´ lisan ugy lehet megfogalmazni, Ä± a Â´ hogy a feltÂ´ teles entrÂ´ pia megadja, hogy mennyi bizonytalansÂ´ g marad X -ben, ha elvesszÂ¨ k az Y e o a u bizonytalansÂ´ gÂ´ t. a a A feltÂ´ teles entrÂ´ pia szÂ´ mos tulajdonsÂ´ ga kÂ¨ zÂ¨ l mi csak az alÂ´ bbit fogjuk felhasznÂ´ lni : e o a a o u a a 0 â‰¤ H(X |Y ) â‰¤ H(X ).

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

29

2.6. Statisztika
A statisztikÂ´ ban altalÂ´ ban X1 , X2 , . . . , Xn fÂ¨ ggetlen, azonos eloszlÂ´ sÂ´ valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ k vana Â´ a u au o Ä± ue a o nak megadva, amiket mintÂ´ knak nevezÂ¨ nk. Az eloszlÂ´ st nem ismerjÂ¨ k pontosan, de rendelkezÂ´ sÂ¨ nkre a u a u eu allnak megï¬gyelÂ´ sek. Â´ e Â¯ Legyenek X1 , X2 , . . . , Xn fÂ¨ ggetlen, azonos eloszlÂ´ sÂ´ valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ k. Ekkor a X = u au o Ä± ue a o X1 +X2 +Â·Â·Â·+Xn n âˆ—2 = 1 = valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ t empirikus kÂ¨ zÂ´ pnek, vagy mintaÂ´ tlagnak, a sn o Ä± ue a o oe a n nâˆ’1 âˆ‘i=1 (Xi âˆ’ 2 valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ t pedig korrigÂ´ l empirikus szorÂ´ snÂ´ gyzetnek nevezzÂ¨ k. Â¯ âˆ’ X) o Ä± ue a o a a e u âˆ—2 2 eloszlÂ´ s deï¬nÂ´ciÂ´ jÂ´ bÂ´ l kÂ¨ vetkezik, hogy az (nâˆ’1)s valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ eloszlÂ´ sa o Ä± ue a o a A Ï‡ a Ä± oa o o Ïƒ2 2 , amennyiben a sâˆ—2 Ïƒ szÂ´ rÂ´ sÂ´ , normÂ´ lis eloszlÂ´ sÂ´ valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ k korrigÂ´ l empirikus Ï‡n oau a au o Ä± ue a o a szorÂ´ snÂ´ gyzetÂ´ t jelÂ¨ li a e e o 2.2. deï¬nÂ´ciÂ´ . Legyenek X es Y kÂ´ t olyan valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ , amelyek eloszlÂ´ sa rendre Ï‡2 es Ï‡2 . Ä± o e o Ä± ue a o a Â´ m n Â´ X/n Ekkor a Z = Y /m valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ eloszlÂ´ sÂ´ t Fn,m eloszlÂ´ snak hÂ´vjuk. o Ä± ue a o aa a Ä±

2.6.1. HipotÂ´ zisvizsgÂ´ lat e a
A hipotÂ´ zisvizsgÂ´ lat feladata mindig valamilyen allÂ´tÂ´ s helyessÂ´ gÂ´ nek vizsgÂ´ lata. Ezt az allÂ´tÂ´ st e a Â´ Ä±a e e a Â´ Ä±a nullhipotÂ´ zisnek nevezzÂ¨ k, jele H0 . A nullhipotÂ´ zis altalÂ´ ban egy valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ valamely pae u e Â´ a o Ä± ue a o ramÂ´ terÂ´ re vagy a vÂ´ ltozÂ´ viselkedÂ´ sÂ´ re vonatkozÂ´ allÂ´tÂ´ s. Az allÂ´tÂ´ s igazolÂ´ sÂ´ hoz vagy elvetÂ´ sÂ´ hez e e a o ee oÂ´ Ä±a Â´ Ä±a aa ee kÂ´sÂ´ rletezgetÂ´ sek, mintÂ´ k allnak rendelkezÂ´ sÂ¨ nkre. Ha a mintÂ´ k alapjÂ´ n a nullhipotÂ´ zist elvetjÂ¨ k, holÄ±e e a Â´ eu a a e u ott az igaz, akkor elsË fajÂ´ hibÂ´ t kÂ¨ vetÂ¨ nk el. EllenkezË esetben â€“ amikor a nullhipotÂ´ zis hamis, de mi o u a o u o e elfogadjuk â€“ mÂ´ sodfajÂ´ hibÂ´ rÂ´ l beszÂ´ lÂ¨ nk. PusztÂ´ n mintÂ´ k segÂ´tsÂ´ gÂ´ vel nem tudunk teljesen biztos a u ao eu a a Ä± e e vÂ´ laszt adni. A gyakorlatban egy paramÂ´ terrel (Î±) rÂ¨ gzÂ´tik az elsË fajÂ´ hiba elkÂ¨ vetÂ´ sÂ´ nek megengea e o Ä± o u o ee dett valÂ´ szÂ´nË sÂ´ gÂ´ t. Az 1 âˆ’ Î± ertÂ´ ket a proba szintjÂ´ nek hÂ´vjuk. o Ä± ue e Â´ e e Ä± Â´ Â¨ Osszefoglalva tehÂ´ t, adott egy allÂ´tÂ´ s, egy paramÂ´ ter (Î±) es mintÂ´ k sorozata. Feladatunk, hogy a a Â´ Ä±a e Â´ a mintÂ´ k alapjÂ´ n cÂ´ foljuk vagy igazoljuk az allÂ´tÂ´ st ugy, hogy bizonyÂ´thatÂ´ an Î±-nÂ´ l kisebb legyen annak a a a Â´ Ä±a Â´ Ä± o a valÂ´ szÂ´nË sÂ´ ge, hogy az allÂ´tÂ´ s igaz, holott mi cÂ´ foljuk. A hipotÂ´ zisvizsgÂ´ latnÂ´ l a mintÂ´ k eredmÂ´ nyeit o Ä± ue Â´ Ä±a a e a a a e felhasznÂ´ lva kiszÂ´ mÂ´tunk egy un. probastatisztika ertÂ´ ket, es ezt vetjÂ¨ k ossze egy ismert eloszlÂ´ ssal. a a Ä± Â´ Â´ e Â´ u Â¨ a Â´ 1. Az Î±-nak cÂ´ lszerË kis (0.1 es 0.01 kÂ¨ zÂ¨ tti) ertÂ´ ket vÂ´ lasztani e u Â´ o o Â´ e a

2.6.2. Az F-prÂ´ ba o
Az F-prÂ´ ba arra szolgÂ´ l, hogy kÂ´ t fÂ¨ ggetlen, normÂ´ lis eloszlÂ´ sÂ´ valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ (X , Y ) o a e u a au o Ä± ue a o szÂ´ rÂ´ sÂ´ nak egyenlË sÂ´ gÂ´ t eldÂ¨ ntsÂ¨ k. oaa oe e o u H0 : ÏƒX = ÏƒY . Tudjuk, hogy X Ïƒ2 X es Â´ X potÂ´ zis fennÂ´ ll, akkor az e a
(n âˆ’1)sâˆ—2
âˆ—2 (nY âˆ’1)sY 2 ÏƒY

Ï‡2 eloszlÂ´ sÂ´ ak (nX âˆ’ 1) illetve (nY âˆ’ 1) paramÂ´ terrel. Ha a nullhiau e F= sâˆ—2 X âˆ—2 sY

1 prÂ´ bastatisztika F-eloszlÂ´ sÂ´ (nX âˆ’1, nY âˆ’1) paramÂ´ terrel. Azonban F is F-eloszlÂ´ sÂ´ (nY âˆ’1, nX âˆ’1) o au e au âˆ— = max{F,1/F} â‰¥ 1 statisztikÂ´ t szokÂ´ s hasznÂ´ lni. paramÂ´ terrel, ezÂ´ rt a gyakorlatban F e e a a a
1 Gondolkozzunk el

azon, hogy mi tÂ¨ rtÂ´ nne, ha Î±-nak nagyon kis ertÂ´ ket vÂ´ lasztanÂ´ nk! o e Â´ e a a

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

30

2.6.3. A Ï‡2 -prÂ´ ba o
A Ï‡2 prÂ´ bÂ´ k az alÂ´ bbi tÂ´ telt hasznÂ´ ljÂ´ k fel. o a a e a a 2.3. tÂ´ tel. Legyen A1 , A2 , . . . , Ar egy teljes esemÂ´ nyrendszer (r â‰¥ 3), legyen pi = P(Ai ) > 0, i = e e = 1, . . . , r. IsmÂ´ teljÂ¨ k a kÂ´sÂ´ rletet n-szer egymÂ´ stÂ´ l fÂ¨ ggetlenÂ¨ l. JelÂ¨ lje Xi az Ai esemÂ´ ny bekÂ¨ vete u Ä±e a o u u o e o kezÂ´ sÂ´ nek szÂ´ mÂ´ t. BelÂ´ thatÂ´ , hogy ekkor a ee a a a o (X j âˆ’ np j )2 âˆ‘ np j j=1 valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ eloszlÂ´ sa n â†’ âˆ esetÂ´ n Ï‡2 eloszlÂ´ shoz konvergÂ´ l. o Ä± ue a o a e râˆ’1 a a A Ï‡2 eloszlÂ´ s kvantiliseit fÂ¨ ggvÂ´ ny-tÂ´ blÂ´ zatokban megtalÂ´ lhatjuk. a u e a a a A Ï‡2 -prÂ´ ba legfontosabb alkalmazÂ´ si terÂ¨ letei az (1.) illeszkedÂ´ s-, (2.) fÂ¨ ggetlensÂ´ g- es (3.)hoo a u e u e Â´ mogenitÂ´ svizsgÂ´ lat. TÂ´ mÂ´ nkhoz a fÂ¨ ggetlensÂ´ g-vizsgÂ´ lat tartozik hozzÂ´ , Â´gy a tovÂ´ bbiakban ezt a a e a u e a a Ä± a rÂ´ szletezzÂ¨ k. A Ï‡2 prÂ´ ba irÂ´ nt erdeklË dË knek a [86] magyar nyelvË irodalmat ajÂ´ nljuk. e u o a Â´ o o u a
r

Â¨ 2.6.4. FuggetlensÂ´ gvizsgÂ´ lat e a
Legyen A1 , A2 , . . . , Ar es B1 , B2 , . . . , Bs kÂ´ t teljes esemÂ´ nyrendszer. VÂ´ gezzÂ¨ nk n kÂ´sÂ´ rletet. NullÂ´ e e e u Ä±e hipotÂ´ zisÂ¨ nk az, hogy az esemÂ´ nyrendszerek fÂ¨ ggetlenek. e u e u H0 : P(Ai , B j ) = P(Ai )P(B j ), i = 1, . . . , r j = 1, . . . , s

Ha az esemÂ´ nyek valÂ´ szÂ´nË sÂ´ gei adottak, akkor tiszta illeszkedÂ´ s vizsgÂ´ lati feladatrÂ´ l beszÂ´ lÂ¨ nk, ahol e o Ä± ue e a o eu H0 : P(Ai âˆ© B j ) = pi q j hiszen pi , q j ertÂ´ kek adottak. JelÂ¨ lje ki j az Ai âˆ© B j esemÂ´ ny bekÂ¨ vetkezÂ´ sÂ´ nek szÂ´ mÂ´ t. Ekkor ki kell Â´ e o e o ee a a szÂ´ mÂ´tanunk a a Ä± r s (k âˆ’ np q )2 ij i j Ï‡2 = âˆ‘ âˆ‘ npi q j i=1 j=1 un. prÂ´ bastatisztika ertÂ´ ket. Jobban megvizsgÂ´ lva Ï‡2 -et lÂ´ thatjuk, hogy az egy Â´ o Â´ e a a (megï¬gyelt ertÂ´ k - vÂ´ rt ertÂ´ k)2 Â´ e a Â´ e jellegË kifejezÂ´ s. Amennyiben Ï‡2 kicsi, akkor a megï¬gyelt u e âˆ‘ vÂ´ rt ertÂ´ k a Â´ e ertÂ´ kek kÂ¨ zel vannak azokhoz, amit H0 fennÂ´ llÂ´ sa esetÂ´ n vÂ´ rtunk, tehÂ´ t a nullhipotÂ´ zist elfogadjuk. Â´ e o a a e a a e Hogy pontosan mit jelent az, hogy kicsiâ€, azt a 2.3-as tÂ´ tel alapjÂ´ n Ï‡2 e a rsâˆ’1 es az Î± paramÂ´ ter Â´ e â€ 2 hatÂ´ rozza meg. TÂ´ blÂ´ zatbÂ´ l keressÂ¨ k ki, hogy a Ï‡rsâˆ’1 eloszlÂ´ s hol veszi fel az 1âˆ’Î± ertÂ´ ket. Amennyia a a o u a Â´ e 2 ertÂ´ knÂ´ l, akkor a nullhipotÂ´ zist elfogadjuk, ellenkezË esetben ben ez nagyobb a fent kiszÂ´ mÂ´tott Ï‡ Â´ e e a Ä± e o elvetjÂ¨ k. u A gyakorlatban sokkal tÂ¨ bbszÂ¨ r fordul elË az az eset, amikor az esemÂ´ nyek valÂ´ szÂ´nË sÂ´ geit nem o o o e o Ä± ue ismerjÂ¨ k. Ekkor a valÂ´ szÂ´nË sÂ´ geket az esemÂ´ nyek relatÂ´v gyakorisÂ´ gÂ´ val becsÂ¨ ljÂ¨ k meg. JelÂ¨ ljÂ¨ k az u o Ä± ue e Ä± a a u u o u Â´ o e a a Ai esemÂ´ ny gyakorisÂ´ gÂ´ t ki. -vel, tehÂ´ t ki. = âˆ‘sj=1 ki j es hasonlÂ´ an B j esemÂ´ ny gyakorisÂ´ gÂ´ t k. j -vel. Ï‡2 e a a a prÂ´ bÂ´ k sorÂ´ n az adatok szemlÂ´ ltetÂ´ sÂ´ nek gyakran hasznÂ´ lt eszkÂ¨ ze az un. kontingencia-tÂ´ blÂ´ zat. Ez o a a e ee a o Â´ a a egy tÂ¨ bbdimenziÂ´ s tÂ´ blÂ´ zat, amely cellÂ´ iban a megfelelË esemÂ´ ny bekÂ¨ vetkezÂ´ sÂ´ nek szÂ´ ma talÂ´ lhatÂ´ . o o a a a o e o ee a a o Egy ilyen 2-dimenziÂ´ s kontingencia-tÂ´ blÂ´ zatot lÂ´ thatunk a kÂ¨ vetkezË abrÂ´ n. o a a a o oÂ´ a

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK B1 k11 k21 kr1 k.1 B2 k12 k22 kr2 k.2 ... Bs k1s k2s krs k.s âˆ‘ k1. k2. kr. n

31

A1 A2 . . . Ar âˆ‘

Az Ai âˆ© B j megï¬gyelt ertÂ´ ke ki j , vÂ´ rt ertÂ´ ke H0 esetÂ´ n n Â· Â´ e a Â´ e e Ï‡2 =

ki. k. j Â· . Ezek alapjÂ´ n Ï‡2 ertÂ´ ke : a Â´ e n n

i=1 j=1

âˆ‘âˆ‘

r

s

(ki j âˆ’

ki. k. j 2 ) n ki. k. j n

Mivel a fÂ¨ ggetlensÂ´ g fennÂ´ llÂ´ sa esetÂ´ n r âˆ’ 1 darab pi -t es s âˆ’ 1 darab q j valÂ´ szÂ´nË sÂ´ get kell megu e a a e Â´ o Ä± ue becsÂ¨ lni, Â´gy a fenti H0 fennÂ´ llÂ´ sa esetÂ´ n Ï‡2 u Ä± a a e rsâˆ’1âˆ’(r+sâˆ’2) = Ï‡2 eloszlÂ´ sÂ´ . au (râˆ’1)(sâˆ’1) 2 eloszlÂ´ s kÂ¨ zelÂ´tÂ´ se csak abban az esetben pontos, ha a k ertÂ´ kek nagyok. Persze nincs pontos AÏ‡ a o Ä±e ij Â´ e szabÂ´ ly arra nÂ´ zve, hogy mennyire kell nagynak lennie. Azt szoktÂ´ k mondani, hogy a kontingencia a e a tÂ´ blÂ´ zat elemeinek 90%-a nagyobb legyen otnÂ´ l. a a Â¨ e

2.7. Algoritmus-elmÂ´ let e
Terjedelmi okok miatt csak felsorolni tudjuk azokat az algoritmusokat, amelyeket az olvasÂ´ nak o ismernie kell. Ezek pedig : lineÂ´ ris-, binÂ´ ris keresÂ´ s, mÂ´ lysÂ´ gi-, szÂ´ lessÂ´ gi bejÂ´ rÂ´ s, Kruskal algoritmua a e e e e e aa sa minimÂ´ lis sÂ´ lyÂ´ feszÂ´tË fa meghatÂ´ rozÂ´ sÂ´ hoz stb. Emellett feltÂ´ telezzÂ¨ k, hogy az olvasÂ´ tisztÂ´ ban a u u Ä±o a aa e u o a van az NP-teljessÂ´ g (vagy altalÂ´ nosabban a bonyolultsÂ´ g) elmÂ´ letÂ´ nek alapjaival. e Â´ a a e e

Â´ a 2.8. AdatstrukturÂ´ k
FeltÂ´ telezzÂ¨ k, hogy az olvasÂ´ tisztÂ´ ban van a lista (vektor) es a tÂ¨ mb fogalmÂ´ val. Az e u o a Â´ o a adatbÂ´ nyÂ´ szatban tovÂ´ bbi kÂ¨ zkedvelt adatstruktÂ´ rÂ´ i az un. sz ofa (trie), vagy mÂ´ s nÂ´ ven preï¬x-fa a a a o ua Â´ a e Â´ (preï¬x-tree), a piros-fekete fa, illetve a hash-tÂ´ bla. a

2.8.1. SzÂ´ fÂ´ k oa
A szÂ´ fÂ´ t eredetileg szÂ´ tÂ´ r szavainak tÂ´ rolÂ´ sÂ´ nÂ´ l alkalmaztÂ´ k, annak erdekÂ´ ben, hogy gyorsan el leoa oa a aa a a Â´ e hessen dÂ¨ nteni, hogy egy adott szÂ´ szerepel-e a szÂ´ tÂ´ rban [41], [61]. A szavak az abc felett ertelmezett o o oa Â´ sorozatok, Â´gy altalÂ´ nosan azt mondhatjuk, hogy egy szÂ´ fa egy adott vÂ´ ges elemhalmaz feletti soroÄ± Â´ a o e zatok tÂ´ rolÂ´ sÂ´ ra es gyors visszakeresÂ´ sÂ´ re alkalmas adatstruktÂ´ ra. A szÂ´ fa angol neve (trie, amit ugy a aa Â´ ee u o Â´ ejtÂ¨ nk, mint a try szÂ´ t) a visszakeresÂ´ s angol fordÂ´tÂ´ sÂ´ bÂ´ l szÂ´ rmazik (retrieval). A tovÂ´ bbiakban az u o e Ä±a a o a a alaphalmazt I-vel, az alaphalmaz felett ertelmezett, adott sorozatok halmazÂ´ t szÂ´ tÂ´ rnak hÂ´vjuk. A 2.1 Â´ a oa Ä± abrÂ´ n egy szÂ´ fÂ´ t lÂ´ thatunk, mely az C, FC, FB, CBP, FCAMP, FCABM sorozatokat tÂ´ rolja. Â´ a oa a a A szÂ´ fa egy (lefelÂ´ ) irÂ´ nyÂ´tott gyÂ¨ keres cÂ´mkÂ´ zett fa. Egy d-edik szintË pontbÂ´ l csak d + 1-edik o e a Ä± o Ä± e u o szintË pontba mutathat el. NÂ´ ha a hatÂ´ konysÂ´ g kedvÂ´ ert minden pontbÂ´ l a pont szÂ¨ lË jÂ´ re is mutat u Â´ e e a eÂ´ o uoe

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

32

0 1 3 A 6 8 P 10 M B 9 M 11 C F B 4

C 2 B 5 P 7

2.1. abra. PÂ´ lda szÂ´ fÂ´ ra Â´ e oa el. A gyÂ¨ keret 0. szintË nek tekintjÂ¨ k. A cÂ´mkÂ´ k az I-nek egy-egy elemei. Minden pont egy elemsoÂ´ o u u Ä± e rozatot reprezentÂ´ l, amely a gyÂ¨ kÂ´ rbË l ebbe a pontba vezetË eleken talÂ´ lhatÂ´ elemekbË l all. Akkor a o e o oÂ´ a o o Â´ tartalmazza a szÂ´ fa az S sorozatot, ha van olyan pont, amely az S-t reprezentÂ´ lja. o a Ha egy sorozatot tartalmaz egy szÂ´ fa, akkor annak tetszË leges preï¬xÂ´ t is tartalmazza. A preo o e ï¬x azonban nem biztos, hogy eleme a szÂ´ tÂ´ rnak. Ezt a problÂ´ mÂ´ t kÂ´ tfÂ´ lekÂ´ ppen lehet kikÂ¨ szÂ¨ bÂ¨ lni. oa e a e e e u o o EgyrÂ´ szrË l megkÂ¨ lÂ¨ nbÂ¨ ztetÂ¨ nk elfogado es nem elfogadÂ´ pontokat. Egy sorozatot akkor tartalmazza e o uo o u o Â´ Â´ a szÂ´ fa, ha van olyan elfogadÂ´ allapot, amely a sorozatot reprezentÂ´ lja. MÂ´ srÂ´ szrË l bevezethetÂ¨ nk egy o oÂ´ a a e o u speciÂ´ lis elemet, amit minden sorozat vÂ´ gÂ´ re illesztÂ¨ nk, tovÂ´ bbÂ´ sorozatot csak levÂ´ l reprezentÂ´ lhat. a e e u a a e a A szÂ´ fÂ´ nak kÂ´ t implementÂ´ ciÂ´ jÂ´ t kÂ¨ lÂ¨ nbÂ¨ ztetjÂ¨ k meg attÂ´ l fÂ¨ ggË en, hogy milyen technikÂ´ t alkaloa e a oa uo o u o u o a mazunk az elek tÂ´ rolÂ´ sÂ´ ra. Az un. tÂ´ blÂ´ zatos implementÂ´ ciÂ´ ban (tabular implementation) [61] minden Â´ a aa Â´ a a a o ponthoz egy rÂ¨ gzÂ´tett hosszÂ´ sÂ´ gÂ´ , mutatÂ´ kat tartalmazÂ´ vektort veszÂ¨ nk fel. Az i-edik mutatÂ´ mutat o Ä± ua u o o u o az i-edik elemhez tartozÂ´ el vÂ´ gpontjÂ´ ra. Ha a pontnak nincs ilyen cÂ´mkÂ´ jË ele, akkor a mutatÂ´ ertÂ´ ke oÂ´ e a Ä± euÂ´ oÂ´ e NULL. A vektor hossza az I elemszÂ´ mÂ´ val egyezik meg. a a A lÂ´ ncolt listÂ´ s implementÂ´ ciÂ´ ban [41] az eleket egy lÂ´ ncolt listÂ´ ban tÂ´ roljuk. A lista elemei a a a o Â´ a a a elcÂ´mke, gyermekmutatÂ´ pÂ´ rok. A lÂ´ ncolt lista kÂ¨ vetkezË elemÂ´ re mutatÂ´ mutatÂ´ kat megspÂ´ rolhatjuk, Â´ Ä± o a a o o e o o o ha egy vektort alkalmazunk, aminek hossza megegyezik a pont eleinek szÂ´ mÂ´ val, es elemei szintÂ´ n Â´ a a Â´ e cÂ´mke, mutatÂ´ pÂ´ rok. Ez azÂ´ rt is jÂ´ megoldÂ´ s, mert egy lÂ´ pÂ´ ssel tudunk tetszË leges indexË elemre Ä± o a e o a e e o u lÂ´ pni (a cÂ´mke, mutatÂ´ pÂ´ r memÂ´ riaszÂ¨ ksÂ´ gletÂ´ nek ismeretÂ´ ben), es nem kell a mutatÂ´ kon keresztÂ¨ l e Ä± o a o u e e e Â´ o u egyesÂ´ vel lÂ´ pegetnÂ¨ nk. e e u SzÂ´ fÂ´ k esetÂ´ ben a legfontosabb elemi mË velet annak eldÂ¨ ntÂ´ se, hogy egy adott pontnak vanoa e u o e e adott cÂ´mkÂ´ jË ele, es ha van, akkor ez hova mutat. TÂ´ blÂ´ zatos implementÂ´ ciÂ´ nÂ´ l ezt a feladatot Ä± eu Â´ Â´ a a a o a egy lÂ´ pÂ´ sben megoldhatjuk a megfelelË indexË elem megvizsgÂ´ lÂ´ sÂ´ val. LÂ´ ncolt listÂ´ s, illetve vÂ´ ltozÂ´ e e o u aa a a a a o hosszÂ´ sÂ´ gÂ´ vektor esetÂ´ n a megoldÂ´ s lassabb mË velet. A vektor minden pÂ´ rjÂ´ t ellenË riznÂ¨ nk kell, ua u e a u a a o u hogy a pÂ´ r cÂ´mkÂ´ je megegyezik-e az adott cÂ´mkÂ´ vel. A hatÂ´ konysÂ´ got nÂ¨ velhetjÂ¨ k, ha a pÂ´ rokat a Ä± e Ä± e e a o u a cÂ´mkÂ´ k szerint rendezve tÂ´ roljuk, es binÂ´ ris keresÂ´ st vÂ´ gzÂ¨ nk. Ä± e a Â´ a e e u Â´ Erdemes osszehasonlÂ´tanunk a kÂ´ t vektoros implementÂ´ ciÂ´ ban a pontok memÂ´ riaigÂ´ nyÂ´ t. Â¨ Ä± e a o o e e Amennyiben a mutatÂ´ k, es a cÂ´mkÂ´ k is 4 bÂ´ jtot foglalnak, akkor a tÂ´ blÂ´ zatos implementÂ´ ciÂ´ ban egy o Â´ Ä± e a a a a o pont memÂ´ riaigÂ´ nye (a vektor fejlÂ´ c memÂ´ riaigÂ´ nyÂ´ tË l eltekintve) |I| Â· 4 bÂ´ jt, a listÂ´ s implementÂ´ ciÂ´ e o e e o e eo a a a oÂ´ nÂ·2Â·4 bÂ´ nt, ahol n az adott pontbÂ´ l indulÂ´ elek szÂ´ ma, amire igaz, hogy 0 â‰¤ n â‰¤ |I|. Ha a szÂ´ fa pontjai a o oÂ´ a o

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

33

olyanok, hogy kevÂ´ s elÂ¨ k van, akkor a listÂ´ s implementÂ´ ciÂ´ nak lesz kevesebb memÂ´ riÂ´ ra szÂ¨ ksÂ´ ge, e Â´u a a o o a u e sok elnÂ´ l azonban tÂ´ blÂ´ zatos implementÂ´ ciÂ´ a jobb megoldÂ´ s. A kÂ´ t technikÂ´ t otvÂ¨ zhetjÂ¨ k akÂ´ r egy Â´ e a a a o a e a Â¨ o u a adott szÂ´ fÂ´ n belÂ¨ l is [154], [184] : ha a pont eleinek szÂ´ ma meghalad egy korlÂ´ tot (Â´ ltalÂ´ ban I/2-t), oa u Â´ a a a a akkor tÂ´ blÂ´ zatos implementÂ´ ciÂ´ t hasznÂ´ lunk, ellenkezË esetben maradunk a listÂ´ s megoldÂ´ snÂ´ l. a a a o a o a a a MegemlÂ´tÂ¨ nk kÂ´ t szÂ´ fa leszÂ´ rmazottat. Ezek a nyesett szofÂ´ k (pruned trie) es a PATRICIA fÂ´ k. Ä±u e o a Â´ a Â´a MindkÂ´ t fa abban kÂ¨ lÂ¨ nbÂ¨ zik az eredeti szÂ´ fÂ´ tÂ´ l, hogy kiiktatjÂ´ k az olyan utakat a fÂ´ bÂ´ l, amelyekben e uo o oao a a o nincsen elÂ´ gazÂ´ s. A nyesett fÂ´ nÂ´ l ezt kizÂ´ rÂ´ lag levÂ´ lhez vezetË utakkal teszik, PATRICIA fÂ´ knÂ´ l ez a a a a a ao e o a a korlÂ´ tozÂ´ s nem all fenn. a a Â´ Halmazokat tartalmazÂ´ szÂ´ fÂ´ k o oa Amennyiben a szÂ´ fa hatÂ´ kony adatstruktÂ´ ra sorozatok tÂ´ rolÂ´ sÂ´ ra, es gyors visszakeresÂ´ sÂ´ re, akkor o e u a aa Â´ ee ugyanez mondhatÂ´ el elemhalmazok esetÂ´ re is. Ha tehÂ´ t elemhalmazok adottak es az a feladat, hogy o e a Â´ gyorsan megÂ´ llapÂ´tsuk, hogy egy elemhalmaz szerepel-e a megadottak kÂ¨ zÂ¨ tt, akkor elÂ´ g deï¬niÂ´ lnunk a Ä± o o e a az elemeken egy teljes rendezÂ´ st, ami alapjÂ´ n a halmazokat sorozatokkÂ´ alakÂ´thatjuk. e a a Ä± KÂ¨ lÂ¨ nbÂ¨ zË rendezÂ´ sek kÂ¨ lÂ¨ nbÂ¨ zË sorozatokat allÂ´tanak elË , amelyek kÂ¨ lÂ¨ nbÂ¨ zË szÂ´ fÂ´ kat uo o o e uo o o Â´ Ä± o uo o o oa eredmÂ´ nyeznek. Erre mutat pÂ´ ldÂ´ t a kÂ¨ vetkezË abra, ahol kÂ´ t olyan szÂ´ fÂ´ t lÂ´ thatunk, amelyek a e e a o o Â´ e oa a AB, ABC elemhalmazokat tÂ´ roljÂ´ k. Az elsË szÂ´ fa az ABC szerint csÂ¨ kkenË sorrendet hasznÂ´ l (C a a o o o o a B A), mÂ´g a mÂ´ sodik ennek ellenkezË jÂ´ t. Ä± a oe 0 A 1 2 B C 3 1 A 3 4 B 0

C 2 A

2.2. abra. PÂ´ lda : kÂ¨ lÂ¨ nbÂ¨ zË rendezÂ´ st hasznÂ´ lÂ´ szÂ´ fÂ´ k Â´ e uo o o e ao oa Egy szÂ´ fa memÂ´ riaigÂ´ nyÂ´ t arÂ´ nyos a szÂ´ fa pontjainak szÂ´ mÂ´ val, Â´gy jogos az az igÂ´ ny, hogy azt a o o e e a o a a Ä± e teljes rendezÂ´ st vÂ´ lasszuk, amely a legkevesebb pontÂ´ , azaz minimÂ´ lis mÂ´ retË , szÂ´ fÂ´ t adja. Ez az un. e a u a e u oa Â´ minimÂ´ lis szÂ´ fa elË allÂ´tÂ´ sÂ´ nak feladata. Sajnos ez egy nehÂ´ z feladat. a o oÂ´ Ä± a a e 2.4. tÂ´ tel. A minimÂ´ lis szÂ´ fa problÂ´ ma NP-nehÂ´ z . e a o e e Eredetileg a feladatot n-esekre bizonyÂ´tottÂ´ k, de ebbË l kÂ¨ vetkezik, hogy halmazokra is ervÂ´ nyes. Ä± a o o Â´ e Legyen ugyanis az alaphalmaz I. Ekkor minden halmazt felfoghatunk, mint egy |I| hosszÂ´ binÂ´ ris u a ertÂ´ keket tartalmazÂ´ vektort. Â´ e o A fenti pÂ´ ldÂ´ t szemlÂ´ lve az embernek az az erzÂ´ se tÂ´ mad, hogy az a rendezÂ´ s adja a legkevee a e Â´ e a e sebb csÂ´ csÂ´ szÂ´ fÂ´ t, amelyeben az elemek a halmazokban valÂ´ elË fordulÂ´ sok szÂ´ mÂ´ nak arÂ´ nyÂ´ ban u u oa o o a a a a a csÂ¨ kkenË sorba vannak Rendezve. Ugyanis a gyakori elemek fognak a halmazok kapott sorozatok o o elejÂ´ re kerÂ¨ lni, es ezek az elemek, mivel gyakoriak sok sorozat elejÂ´ n lesznek megtalÂ´ lhatÂ´ k. A szÂ´ fa e u Â´ e a o o a kÂ¨ zÂ¨ s preï¬xeket csak egyszer tÂ´ rolja, Â´gy akkor lesz a szÂ´ fa mÂ´ rete vÂ´ rhatÂ´ an a legkisebb, ha minÂ´ l o o a Ä± o e a o e tÂ¨ bb sorozatnak van kÂ¨ zÂ¨ s preï¬xe. Az elË zË abra is ezt sugallta. o o o o oÂ´

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

34

Sajnos a fenti mÂ´ don kapott szÂ´ fa nem feltÂ´ tlenÂ¨ l adja a legkevesebb pontot tartalmazÂ´ szÂ´ fÂ´ t. o o e u o oa Ezt a legegyszerË bben egy ellenpÂ´ ldÂ´ val tudjuk bizonyÂ´tani. Legyenek a halmazaink a kÂ¨ vetkezË ek : u e a Ä± o o AB, AC, CZ, BCZ, Z. A Z elem gyakorisÂ´ ga 3, az X elemÂ´ 3, A-Â´ 2 es a tÂ¨ bbi elemÂ´ 1. Ha felrajzoljuk a e e Â´ o e ezen gyakorisÂ´ gok alapjÂ´ n kapott rendezÂ´ s (B > X > A > K > L > M > N, de a K, L, M, N elemek a a e egymÂ´ shoz viszonyÂ´tott sorrendje tetszË leges lehet) szerinti szÂ´ fÂ´ t, akkor a bal oldali szÂ´ fÂ´ t kapjuk. a Ä± o oa oa Ha az A es X elemek sorrendjÂ´ t felcserÂ´ ljÂ¨ k, akkor eggyel kevesebb pontot tartalmazÂ´ szÂ´ fÂ´ t kapunk Â´ e e u o oa (jobb oldal).

T

DESC

TOPT
C 3 1 A 7 3 C 7 B Z C 4 5 0 A 2 B C 6

0 1 4 C 8 B Z C 5 B 2 A 6

2.3. abra. EllenpÂ´ lda arra, hogy az elË fordulÂ´ s szerinti csÂ¨ kkenË sorrend adja a minimÂ´ lis mÂ´ retË Â´ e o a o o a e u szÂ´ fÂ´ t oa PatrÂ´cia-fÂ´ k Ä± a Egy irÂ´ nyÂ´tott utat lÂ´ ncnak hÂ´vunk, ha minden pontjÂ´ nak csak egy gyereke van. A PatrÂ´cia-fa a a Ä± a Ä± a Ä± szÂ´ fÂ´ bÂ´ l szÂ´ rmaztathatÂ´ ugy, hogy a szÂ´ fa nem bË vÂ´thetË lÂ´ ncait egy-egy ellÂ´ vonjuk ossze. Az uj el a oa o a oÂ´ o o Ä± o a Â´ e Â¨ Â´ Â´ lÂ´ nc utolsÂ´ pontjÂ´ ba mutat, cÂ´mkÂ´ je a lÂ´ nc eleinek cÂ´mkÂ´ ibË l allÂ´ sorozat. Ha a lÂ´ ncÂ¨ sszevonÂ´ st csak a o a Ä± e a Â´ Ä± e o Â´ o a o a a levÂ´ lben vÂ´ gzË dË lÂ´ ncokra hajtjuk vÂ´ gre, akkor un PatrÂ´cia* fÂ´ t kapunk. e e o o a e Â´ Ä± a Ha a szÂ´ fa sok lÂ´ ncot tartalmaz, akkor a PatrÂ´cia-fa sokkal hatÂ´ konyabb. EllenkezË esetben viszont o a Ä± e o tÂ¨ bb memÂ´ riÂ´ t hasznÂ´ l, mivel a cÂ´mkÂ´ ket vektorokban tÂ´ roljuk, ami egyetlen elem tÂ´ rolÂ´ sa esetÂ´ n nem o o a a Ä± e a a a e cÂ´ lravezetË a nagy tÂ¨ bbletkÂ¨ ltsÂ´ g miatt. e o o o e

2.8.2. Piros-fekete fÂ´ k a
A piros-fekete (RB-tree vagy symmetric binary B-trees) fÂ´ k a kiegyensÂ´ lyozott binÂ´ ris fÂ´ k (balana u a a ced binary tree) egy tÂ´pusa. Minden csÂ´ csnak szÂ´ne van, hagyomÂ´ nyosan piros vagy fekete. SpeciÂ´ lis Ä± u Ä± a a forgatÂ´ sokat hasznÂ´ lÂ´ beszÂ´ rÂ´ s mË velet biztosÂ´tja, hogy bÂ´ rmely a gyÂ¨ kÂ´ rbË l levÂ´ lbe vezetË ut hossza a ao ua u Ä± a o e o e oÂ´ ne legyen nagyobb, mint a legrÂ¨ videbb ilyen ut hosszÂ´ nak kÂ´ tszerese. Egy piros-fekete fa a kÂ¨ vetkezË o Â´ a e o o tulajdonsÂ´ gokkal rendelkezik : a I. Minden csÂ´ csnak a szÂ´ne piros vagy fekete. u Ä± II. Minden levÂ´ l szÂ´ne fekete. e Ä± III. Minden piros csÂ´ csnak mindkÂ´ t ï¬a fekete. u e IV. BÂ´ rmely kÂ´ t, azonos csÂ´ csbÂ´ l indulÂ´ , levÂ´ lig vezetË uton ugyanannyi fekete csÂ´ cs van. a e u o o e oÂ´ u A fentiekbË l kÂ¨ vetkezik, hogy bÂ´ rmely n belsË csÂ´ ccsal rendelkezË piros-fekete fa magassÂ´ ga legfelo o a o u o a jebb 2 lg(n + 1). A bizonyÂ´tÂ´ s es a fa epÂ´tÂ´ sÂ´ nek menete megtalÂ´ lhatÂ´ az irodalomban (pl. [101]). Ä±a Â´ Â´ Ä±e e a o

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

35

2.8.3. Hash-tÂ´ bla a
A hash-tÂ´ bla magyar elnevezÂ´ se hasÂ´tÂ´ -tÂ´ bla ( ), de mi ezt a szÂ´ t nem fogjuk hasznÂ´ lni. A hasha e Ä±o a o a tÂ´ bla elemek gyors elhelyezÂ´ sÂ´ re es visszakeresÂ´ sÂ´ re hasznÂ´ lt adatstruktÂ´ ra. A tÂ´ blÂ´ zatnak cellÂ´ i a ee Â´ ee a u a a a vannak, amibe elemeket helyezhetÂ¨ nk. Minden cellÂ´ nak van egy cÂ´me (vagy indexe). A hash-tÂ´ blÂ´ s u a Ä± a a tÂ´ rolÂ´ sban kÂ¨ zponti szerepet tÂ¨ lt be az elemeken ertelmezett un. hash-f uggvÂ´ ny, ami megadja az elem a a o o Â´ Â´ e Â¨ hash-Â´ rtÂ´ kÂ´ t. Egy elemet arra a cÂ´mre helyezÂ¨ nk be a hash-tÂ´ blÂ´ ban, amelyet a hash-Â´ rtÂ´ ke megad. e e e Ä± u a a e e ElË fordulhat, hogy kÂ¨ lÂ¨ nbÂ¨ zË elemekhez a hash-fÂ¨ ggvÂ´ ny ugyanazokat a hash-Â´ rtÂ´ ket rendeli. Ezt o uo o o u e e e utkÂ¨ zÂ´ snek hÂ´vjuk. A hash-tÂ´ blÂ´ krÂ´ l onmagÂ´ ban fejezeteket lehet Â´rni, ennyi bevezetË azonban elÂ´ g Ä± a a o Â¨ a Ä± o e Â¨ oe ahhoz, hogy megÂ´ rtsÂ¨ k a jegyzet tovÂ´ bbi rÂ´ szeit. e u a e

Â´ a 2.9. SzÂ´ mÂ´tÂ´ gÂ´ p-architekturÂ´ k a Ä±o e
Sok kutatÂ´ alkalmazza a kÂ¨ lsË tÂ´ ras modellt az algoritmusÂ´ nak hatÂ´ konysÂ´ gÂ´ nak vizsgÂ´ latakor. o u o a a e a a a MÂ´ ra az oriÂ´ si memÂ´ riamÂ´ reteknek kÂ¨ szÂ¨ nhetË en a legtÂ¨ bb adatbÂ´ zis elfÂ´ r a memÂ´ riÂ´ ban, valaa Â´ a o e o o o o a e o a milyen szË rt formÂ´ ban. Ilyen esetekben az elemzÂ´ shez hasznÂ´ lt modell leegyszerË sÂ¨ dik az egyu a e a uo szerË bb kÂ¨ zvetlen hozzÂ´ fÂ´ rÂ´ sË (RAM-) modellre (amely Neumann-modell [175] nÂ´ ven is ismert, u o aeeu e mivel a magyar szÂ¨ letÂ´ sË Neumann JÂ´ nos javasolta elË szÂ¨ r ezt az architektÂ´ rÂ´ t.). A programokat u eu a o o ua olyan modern processzorokon futtatjÂ´ k, amely sokkal kiï¬nomultabb a RAM-modellnÂ´ l. A modell a e tÂ´ lzott egyszerË sÂ´tÂ´ se ahhoz vezet, hogy az elemzÂ´ seknek semmi kÂ¨ ze nincs a valÂ´ sÂ´ ghoz. Az uj u u Ä±e e o oa Â´ modell uj elvÂ´ rÂ´ sokat tÂ´ maszt az algoritmusokkal szemben. EzekrË l egy kivÂ´ lÂ´ attekintÂ´ s olvashatÂ´ Â´ aa a o aoÂ´ e o a [119] tanulmÂ´ nyban. A modern processzorok legfontosabb sajÂ´ tossÂ´ ga a tÂ¨ bbszintË memÂ´ ria es a a a a o u o Â´ csË vezetÂ´ kes (pipeline-) feldolgozÂ´ s. o e a

Ë 2.9.1. TÂ¨ bbszintu memÂ´ ria, adatlokalitÂ´ s o o a
A memÂ´ ria nem egyelten nagy blokk, sokkal inkÂ´ bb kÂ¨ lÂ¨ nbÂ¨ zË mÂ´ retË , kÂ´ sleltetÂ´ sË memÂ´ riÂ´ kbÂ´ l o a uo o o e u e eu o a o allÂ´ hierarchikus rendszer. MinÂ´ l nagyobb a memÂ´ ria mÂ´ rete, annÂ´ l tÂ¨ bb idË kell a hozzÂ´ fÂ´ rÂ´ shez. Â´ o e o e a o o aee A hierarchia elemei, mÂ´ ret szerint csÂ¨ kkenË sorrendben a kÂ¨ vetkezË k : regiszterek, pÂ´ r kilobÂ´ jtos e o o o o a a elsË szintË gyorsÂ´tÂ´ tÂ´ r, pÂ´ r megabÂ´ jtos mÂ´ sodszintË gyorsÂ´tÂ´ tÂ´ r, esetleges harmadszintË gyorsÂ´tÂ´ tÂ´ r, o u Ä±oa a a a u Ä±oa u Ä±oa rendszermemÂ´ ria es merevlemez. Az adatot a rendszermemÂ´ riÂ´ bÂ´ l a mÂ´ sodszintË gyorsÂ´tÂ´ tÂ´ rba, a o Â´ o a o a u Ä±oa mÂ´ sodszintË bË l az elsË szintË gyorsÂ´tÂ´ tÂ´ rba blokkonkÂ´ nt mÂ´ solhatjuk. A blokkmÂ´ ret egy Pentium 4a u o o u Ä±oa e a e es processzor esetÂ´ n 128 bÂ´ jt. e a A blokkonkÂ´ nti feldolgozÂ´ s mÂ´ s megvilÂ´ gÂ´tÂ´ sba helyezi az algoritmusok vizsgÂ´ latÂ´ t : egyetlen bit e a a a Ä±a a a elÂ´ rÂ´ sÂ´ hez es beolvasÂ´ sÂ´ hoz egy lassÂ´ memÂ´ riÂ´ bÂ´ l ugyanannyi idË kell, mint a bitet tartalmazÂ´ teljes eee Â´ aa u o a o o o blokk elÂ´ rÂ´ sÂ´ hez es beolvasÂ´ sÂ´ hoz. MÂ´ sik adat elÂ´ rÂ´ se ugyanebben a blokkban viszont nem igÂ´ nyli eee Â´ aa a ee e Â´ rendkÂ´vÂ¨ l fontos kÂ¨ vetelmÂ´ nnyÂ´ vÂ´ lik adatlokalitÂ´ s, azaz mÂ´ r a hozzÂ´ fÂ´ rÂ´ st a lassÂ´ memÂ´ riÂ´ hoz. Igy a aee u o a Ä± u o e e a a hogy az adatok, amelyeket idË ben egymÂ´ shoz kÂ¨ zel dolgozunk fel, a memÂ´ riÂ´ ban is kÂ¨ zel legyenek o a o o a o egymÂ´ shoz. a Az adatot feldolgozÂ´ sakor be kell hozni a regiszterekbe. ElË fordulhat, hogy mÂ´ r eleve ott van, a o a mert az elË zË mË veletekhez szÂ¨ ksÂ´ g volt rÂ´ . A korlÂ´ tozott szÂ´ mÂ´ regiszterek miatt azonban sokkal o o u u e a a a u valÂ´ szÂ´nË bb, hogy az egyik gyorsÂ´tÂ´ tÂ´ rban vagy a rendszermemÂ´ riÂ´ ban helyezkedik el. SË t, az is lehet, o Ä± u Ä±oa o a o hogy a merevlemezen talÂ´ lhatÂ´ , ha az algoritmus memÂ´ riaigÂ´ nye annyira nagy, hogy lapozÂ´ sra van a o o e a szÂ¨ ksÂ´ g. Ha a mÂ´ sodszintË gyorsÂ´tÂ´ tÂ´ rban vagy a rendszermemÂ´ riÂ´ ban helyezkedik el a kÂ´vÂ´ nt adat, u e a u Ä±oa o a Ä± a akkor az adathozzÂ´ fÂ´ rÂ´ s un. cache miss-t okoz. AmÂ´g ez az adat bekerÂ¨ l a regiszterekbe, a processzor aee Â´ Ä± u

Â¨ Â´ 2. FEJEZET. ALAPFOGALMAK, JELOLESEK

36

vÂ´ grehajthat mÂ´ s mË veleteket (ezer alapmË velet, pÂ´ ldÂ´ ul osszeadÂ´ s elvÂ´ gzÂ´ sÂ´ re kÂ´ pes ez idË alatt), e a u u e a Â¨ a e ee e o ennek ellenÂ´ re a teljesÂ´tmÂ´ nye messze elmaradhat ilyenkor a maximÂ´ listÂ´ l. TehÂ´ t az adatstruktÂ´ ra, e Ä± e a o a u algoritmus pÂ´ r tervezÂ´ sekor tÂ¨ rekednÂ¨ nk kell a minÂ´ l jobb adatlokalitÂ´ sra a cache miss-ek elkerÂ¨ lÂ´ se a e o u e a ue erdekÂ´ ben. Â´ e

2.9.2. CsË vezetÂ´ kes feldolgozÂ´ s, elÂ´ gazÂ´ s-elË rejelzÂ´ s o e a a a o e
A programozÂ´ k altal hasznÂ´ lt mË veleteket a fordÂ´tÂ´ mikroutasÂ´tÂ´ sok sorozatÂ´ ra bontja. A o Â´ a u Ä±o Ä±a a mË veleteket nem kÂ¨ lÂ¨ n-kÂ¨ lÂ¨ n, egymÂ´ s utÂ´ n hajtjuk vÂ´ gre, hanem pÂ´ rhuzamosan dolgozzuk fel oket, u uo uo a a e a Ë csË vezetÂ´ k hasznÂ´ latÂ´ val. Sajnos azonban az adatfÂ¨ ggË sÂ´ g es a feltÂ´ teles ugrÂ´ sok sokat rontanak a o e a a u oe Â´ e a pÂ´ rhuzamos feldolgozÂ´ s hatÂ´ konysÂ´ gÂ´ n. AdatfÂ¨ ggË sÂ´ grË l akkor beszÂ´ lÂ¨ nk, ha egy utasÂ´tÂ´ s egy elË zË a a e a a u oe o eu Ä±a o o utasÂ´tÂ´ s eredmÂ´ nyÂ´ tË l fÂ¨ gg. ElÂ´ gazÂ´ s-elË rejelzÂ´ snÂ´ l megjÂ´ soljuk a feltÂ´ tel kimenetÂ´ t, es betÂ¨ ltjÂ¨ k a Ä±a e eo u a a o e e o e e Â´ o u csË vezetÂ´ kbe az ennek megfelelË utasÂ´tÂ´ sokat. Ha a jÂ´ slÂ´ s hamisnak bizonyul, akkor a csË vezetÂ´ ket o e o Ä±a o a o e ki kell urÂ´teni, es be kell tÂ¨ lteni a helyes utasÂ´tÂ´ sokat. Ezt a problÂ´ mÂ´ t gyakran kikÂ¨ szÂ¨ bÂ¨ lhetjÂ¨ k Â¨ Ä± Â´ o Ä±a e a u o o u kÂ¨ lÂ¨ nbÂ¨ zË technikÂ´ k alkalmazÂ´ sÂ´ val, (mint pÂ´ ldÂ´ ul kÂ´ dÂ´ trendezÂ´ ssel) amelyet automatikusan elvÂ´ gez uo o o a aa e a o a e e a fordÂ´tÂ´ . SzÂ´ mÂ´tÂ´ sigÂ´ nyes algoritmus tervezÂ´ sekor azonban nekÂ¨ nk kell ugyelnÂ¨ nk az adatfÂ¨ ggetÄ±o a Ä±a e e u Â¨ u u lensÂ´ gre es az elÂ´ gazÂ´ s-elË rejelzÂ´ sre. e Â´ a a o e A csË vezetÂ´ kes feldolgozÂ´ s lehetË vÂ´ teszi, hogy egy orajel alatt tÂ¨ bb mË veletet is elvÂ´ gezzÂ¨ nk. o e a o e Â´ o u e u A fent emlÂ´tett problÂ´ mÂ´ k miatt azonban a processzor atlagos teljesÂ´tmÂ´ nye messze nem eri el az Ä± e a Â´ Ä± e Â´ optimumot. A felesleges feltÂ´ telek ronthatjÂ´ k a hatÂ´ konysÂ´ got. Az elÂ´ gazÂ´ s-elË rejelzÂ´ s intelligens e a e a a a o e olyan szempontbÂ´ l, hogy ha egy feltÂ´ tel kimenete sohasem vÂ´ ltozik, akkor a processzor ezt ï¬gyelemo e a be veszi es a kÂ´ sË bbiekben ennek megfelelË en jÂ´ sol. Â´ a mindig igaz (vagy hamis) feltÂ´ telek nem Â´ eo o o Igy e befolyÂ´ soljÂ´ k a hatÂ´ konysÂ´ got. a a e a

3. fejezet ElË feldolgozÂ´ s, hasonlÂ´ sÂ´ gi fuggvÂ´ nyek o a oa Â¨ e
Ebben a fejezetben a legfontosabb elË feldolgozÂ´ si mË veleteket ismertetjÂ¨ k, majd rÂ´ tÂ´ rÂ¨ nk aro a u u aeu ra, hogy milyen elterjedt mÂ´ rtÂ´ kek vannak elemek kÂ¨ zÂ¨ tti hasonlÂ´ sÂ´ gra. Mindenek elË tt azt kell e e o o oa o tisztÂ´ znunk, hogy milyen tÂ´pusÂ´ attribÂ´ tumok lÂ´ teznek matematikus szemmel. a Ä± u u e JelÂ¨ ljÂ¨ k az A attribÂ´ tum kÂ´ t ertÂ´ kÂ´ t a-val es a -vel. o u u e Â´ e e Â´ I. A kategÂ´ ria tÂ´pusÂ´ (nominal) attribÂ´ tumnÂ´ l az attribÂ´ tum ertÂ´ kei kÂ¨ zÂ¨ tt csak azonossÂ´ got tuo Ä± u u a u Â´ e o o a dunk vizsgÂ´ lni. TehÂ´ t csak azt tudom mondani, hogy a = a vagy azt, hogy a = a . A kategÂ´ ria a a o tÂ´pusÂ´ attribÂ´ tum egy speciÂ´ lis esete a binaris attribÂ´ tum, ahol az attribÂ´ tum csak kÂ´ t ertÂ´ ket Ä± u u a u u e Â´ e Â´ vehet fel. A kategoria tÂ´pusÂ´ attribÂ´ tumokat az irodalom nÂ´ ha felsorol as (enumerated) vagy Ä± u u e Â´ diszkrÂ´ t tÂ´pusnak is hÂ´vja. MÂ´ sodlagos jelentÂ´ sÂ¨ k miatt a tanulmÂ´ nyban ezeket az elnevezÂ´ seket e Ä± Ä± a eu a e nem hasznÂ´ ljuk. PÂ´ ldÂ´ ul a felsorolÂ´ s tÂ´pus emlÂ´tÂ´ sÂ´ nÂ´ l a legtÂ¨ bb informatikusnak a C++, jaa e a a Ä± Ä±e e e o va, C#-beli felsorolÂ´ s tÂ´pusÂ´ vÂ´ ltozÂ´ jut eszÂ´ be, amelyek mindig egyÂ´ rtelmË megfeleltetÂ´ sben a Ä± u a o e e u e allnak egy egÂ´ sz szÂ´ mmal. Â´ e a II. A sorrend tÂ´pusÂ´ (ordinal) attribÂ´ tumoknÂ´ l az ertÂ´ keket sorba tudjuk rendezni, azaz az attÄ± u u a Â´ e ribÂ´ tum ertÂ´ ken teljes rendezÂ´ st tudunk megadni. Ha tehÂ´ t a = a , akkor mÂ´ g azt is tudjuk, hogy u Â´ e e a e a > a es a < a kÂ¨ zÂ¨ l melyik igaz. Â´ o u III. Ha az eddigiek mellett meg tudunk adni egy + fÂ¨ ggvÂ´ ny, amivel az elemek csoportot alkotnak, u e akkor intervallum tÂ´pusÂ´ (interval scale) attribÂ´ tumrÂ´ l beszÂ´ lÂ¨ nk. Ä± u u o eu IV. Ha egy intervallum tÂ´pusÂ´ attribÂ´ tumnÂ´ l meg lehet adni zÂ´ rus ertÂ´ ket, vagy pontosabban az Ä± u u a e Â´ e attribÂ´ tum elemei gyË rË t alkotnak, akkor az attribÂ´ tum arany skÂ´ lÂ´ jÂ´ (ratio scale). Az arÂ´ ny u uu u aau a Â´ skÂ´ lÂ´ jÂ´ attribÂ´ tumot gyakran fogjuk valos attribÂ´ tumnak hivni, hiszen a gyakorlati esetek aau u u Â´ tÂ¨ bbsÂ´ gÂ´ ben az arÂ´ ny skÂ´ lÂ´ jÂ´ attribÂ´ tumok megadÂ´ sÂ´ hoz valÂ´ s szÂ´ mokat hasznÂ´ lunk. Azono e e a aau u aa o a a ban ne felejtsÂ¨ k el az arÂ´ ny skÂ´ lÂ´ jÂ´ attrubÂ´ tum eredeti deï¬nÂ´ciÂ´ jÂ´ t, illetve azt, hogy az arÂ´ ny u a aau u Ä± oa a skÂ´ lÂ´ jÂ´ attribÂ´ tumok nem feltÂ´ tlenÂ¨ l valÂ´ s szÂ´ mokat tartalmaznak. aau u e u o a PÂ´ ldÂ´ ul egy ugyfeleket leÂ´rÂ´ adatbÂ´ zisban vannak binÂ´ ris (pl. : bÂ¨ ntetett elË eletË -e), kategorikus (pl. : e a Â¨ Ä±o a a u oÂ´ u vallÂ´ s, csalÂ´ di allapot) es intervallum (pl. : evszÂ´ m) tÂ´pusÂ´ attribÂ´ tumok is. a a Â´ Â´ Â´ a Ä± u u Furcsa mÂ´ d nem mindig triviÂ´ lis, hogy egy attribÂ´ tum milyen tÂ´pusÂ´ . PÂ´ ldÂ´ ul az idË jÂ´ rÂ´ s jelo a u Ä± u e a oaa lemzÂ´ sÂ´ re hasznÂ´ lt napsÂ¨tÂ´ses, borÂ´s, es}s ertÂ´ kekre mondhatjuk, hogy ez egy katergorikus attee a u e u o Â´ e ribÂ´ tum elemei. Ugyanakkor erezzÂ¨ k, hogy a borÂ´s valahol a napsÂ¨tÂ´ses es az es}s kÂ¨ zÂ¨ tt helyezu Â´ u u u e Â´ o o o kedik el, Â´gy inkÂ´ bb sorrend tÂ´pusÂ´ nak mondanÂ´ nk az attribÂ´ tumot. Ä± a Ä± u a u 37

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

38

Az intervallum tÂ´pusÂ´ attribÂ´ tumok megadÂ´ sÂ´ ra is szÂ´ mokat hasznÂ´ lunk, amelyeknÂ´ l ertelme van Ä± u u aa a a e Â´ a kÂ¨ lÂ¨ nbsÂ´ g szÂ´ mÂ´tÂ´ sÂ´ nak, de a hÂ´ nyados kÂ´ pzÂ´ snek nincs tÂ´ l sok. TulajdonkÂ´ ppen azt, hogy egy uo e a Ä±a a a e e u e attribÂ´ tum esetÂ´ ben mikor beszÂ´ lÂ¨ nk intervallum es mikor arÂ´ ny skÂ´ lÂ´ jÂ´ tÂ´pusrÂ´ l az dÂ¨ nti el, hogy u e eu Â´ a aau Ä± o o egyÂ´ rtelmË -e a zÂ´ rus pont deï¬niÂ´ lÂ´ sa. Gondoljuk meg, hogy pÂ´ ldÂ´ ul az evszÂ´ moknÂ´ l hÂ´ ny fajta nullÂ´ t e u e aa e a Â´ a a a a ismerÂ¨ nk. HasonlÂ´ a helyzet a hË mÂ´ rsÂ´ klet esetÂ´ ben (Fahrenheit kontra Celsius). u o o e e e

3.1. ElË feldolgozÂ´ s o a
3.1.1. HiÂ´ nyzÂ´ ertÂ´ kek kezelÂ´ se a oÂ´ e e
Az adatbÂ´ nyÂ´ szati algoritmusok csak olyan elemeket tudnak kezelni, amelyeknek minden atta a ribÂ´ tuma adott. A valÂ´ elet adatbÂ´ zisainÂ´ l ez nem mindig all fenn, kÂ¨ nnyen lehet, hogy bizonyos u o Â´ a a Â´ o cellÂ´ kat nem tÂ¨ ltÂ¨ tt ki az adatot begÂ´ pelË szemÂ´ ly. Ezeket a hiÂ´ nyzÂ´ cellÂ´ kat fel kell tÂ¨ lteni valamia o o e o e a o a o lyen ertÂ´ kkel. Ez lehet egy alapÂ´ rtelmezett ertÂ´ k (default value), de szokÂ´ s az atlagot, a mediÂ´ nt vagy Â´ e e Â´ e a Â´ a a maximÂ´ lis, minimÂ´ lis ertÂ´ ket vÂ´ lasztani olyan attribÂ´ tum esetÂ´ ben amikor, ezeket deï¬niÂ´ lni tudjuk a a Â´ e a u e a (pl. : intervallum tÂ´pusÂ´ ak esetÂ´ n). Ä± u e

Â´ 3.1.2. Attributum transzformÂ´ ciÂ´ k a o
NormalizÂ´ lÂ´ s aa NormalizÂ´ lÂ´ son azt ertjÂ¨ k, hogy az attribÂ´ tum elemeit egy mÂ´ sik intervallum elemeivel helyetaa Â´ u u a tesÂ´tjÂ¨ k ugy, hogy a helyettesÂ´tett ertÂ´ kek eloszlÂ´ sa megegyezzen az eredeti ertÂ´ kek eloszlÂ´ sÂ´ val. Ä± u Â´ Ä± Â´ e a Â´ e aa TegyÂ¨ k fel, hogy az A attribÂ´ tum a1 , a2 , . . . , al ertÂ´ keket vesz fel. Az a j , j = 1, . . . , l ertÂ´ k normÂ´ jÂ´ t u u Â´ e Â´ e aa o u aa e o a j -vel jelÂ¨ ljÂ¨ k. NormalizÂ´ lÂ´ sra kÂ´ t mÂ´ dszer terjedt el.
j A Min-max normalizÂ´ lÂ´ s : Itt egy sima lineÂ´ ris transzformÂ´ ciÂ´ t vÂ´ gzÂ¨ nk : a j = maxA âˆ’minA , ahol minA aa a a o e u (maxA ) jelÂ¨ li az A attribÂ´ tum legkisebb (legnagyobb) ertÂ´ kÂ´ t. Minden elem a [0,1] intervallumo u Â´ e e ba fog esni.

a âˆ’min

âˆ’Â¯ Â¯ Standard normalizÂ´ lÂ´ s (z-score normalization) : ai = aiÏƒAA , ahol A az A attribÂ´ tum atlaga, ÏƒA pedig aa u Â´

a szÂ´ rÂ´ sa. A hagyomÂ´ nyos szÂ´ rÂ´ s ( oa a oa ( âˆ‘i=1 l i hatÂ´ sÂ´ t. aa
l

|a âˆ’a| Â¯

Â¯ âˆ‘l (ai âˆ’A)2 i=1 ) helyett az abszolÂ´ t szÂ´ rÂ´ st is hasznÂ´ lni szoktÂ´ k u oa a a l

). Ennek elË nye, hogy csÂ¨ kkenti az atlagtÂ´ l tÂ´ vol esË pontok (kÂ¨ lÂ¨ ncÂ¨ k, outlier-ek) o o Â´ o a o uo o

3.1.3. MintavÂ´ telezÂ´ s e e
Az adatbÂ´ nyÂ´ szati algoritmusok altalÂ´ ban erË forrÂ´ s-igÂ´ nyesek. Ha a bemeneti adathalmaznak a a Â´ a o a e csak egy kis szeletÂ´ t, kis mintÂ´ jÂ´ t dolgozzuk fel, akkor hamarabb kapunk eredmÂ´ nyt. A mintavÂ´ telezÂ´ s e aa e e e kÂ¨ vetkezmÂ´ nye, hogy az Â´gy kapott eredmÂ´ ny nem biztos, hogy pontos, azaz lehet, hogy nem azt az o e Ä± e eredmÂ´ nyt kapjuk, mint amikor a teljes adathalmazt dolgozzuk fel. Vannak esetek, amikor a pontos e eredmÂ´ nynÂ´ l fontosabb a gyors adatfeldolgozÂ´ s. Ilyen esetekben nagyon hasznos egy olyan mine e a tamÂ´ ret meghatÂ´ rozÂ´ sa, aminÂ´ l az algoritmus gyors, de a hibÂ´ zÂ´ s valÂ´ szÂ´nË sÂ´ ge kicsi. e a a e a a o Ä± ue A hiba mÂ´ rtÂ´ kÂ´ rË l csak abban az esetben tudunk bË vebben nyilatkozni, ha tudjuk, milyen jellegË e e eo o u osszefÂ¨ ggÂ´ sÂ´ ket nyerÂ¨ nk ki. Most azt a speciÂ´ lis esetet nÂ´ zzÂ¨ k meg, amikor elemek elË fordulÂ´ sÂ´ nak Â¨ u ee u a e u o aa

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

39

valÂ´ szÂ´nË sÂ´ gÂ´ t akarjuk kÂ¨ zelÂ´teni a relatÂ´v gyakorisÂ´ gukkal. Gyakori mintÂ´ k, asszociÂ´ ciÂ´ s szabÂ´ lyok, o Ä± ue e o Ä± Ä± a a a o a Ï‡2 alapÂ´ fÂ¨ ggetlensÂ´ gvizsgÂ´ latnÂ´ l ez az eset all fenn. u u e a a Â´ TegyÂ¨ k fel, hogy elemek halmazÂ´ bÂ´ l egy tetszË leges x elem elË fordulÂ´ sÂ´ nak valÂ´ szÂ´nË sÂ´ ge p x es u a o o o aa o Ä± ue Â´ az elemekbË l visszatevÂ´ ses mintavÂ´ telezÂ´ ssel m mintÂ´ t veszÂ¨ nk. A mintavÂ´ telezÂ´ s hibÂ´ zik, amennyio e e e a u e e a ben x relatÂ´v gyakorisÂ´ ga eltÂ´ r px -tË l, pontosabban a mintavÂ´ telezÂ´ s hibÂ´ ja : Ä± a e o e e a hiba(m) = p rel. gyakorisÂ´ g(x) âˆ’ px â‰¥ Îµ . a JelÂ¨ lje Xi azt a valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ t, ami 1, ha x-et vÂ´ lasztottuk egy i-edik hÂ´ zÂ´ snÂ´ l, kÂ¨ lÂ¨ nben 0, es o o Ä± ue a o a u a a uo Â´ legyen Y = âˆ‘m Xi . Mivel a hÂ´ zÂ´ sok egymÂ´ stÂ´ l fÂ¨ ggetlenek, az Y eloszlÂ´ sa m, p x paramÂ´ terË binÂ´ ris u a a o u a e u a i=1 eloszlÂ´ st kÂ¨ vet. Ezt felhasznÂ´ lva : a o a hiba(m) = p Y âˆ’ px â‰¥ Îµ m = p Y âˆ’ m Â· px â‰¥ m Â· Îµ = p Y âˆ’E Y â‰¥ mÂ·Îµ = p Y â‰¥ m Â· (E[X ] + Îµ) + p Y â‰¤ m Â· (E[X ] âˆ’ Îµ) A mÂ´ sodik egyenlË sÂ´ gnÂ´ l kihasznÂ´ ltuk, hogy a binomiÂ´ lis eloszlÂ´ s vÂ´ rhatÂ´ ertÂ´ ke m Â· p x . A bia oe e a a a a oÂ´ e nomiÂ´ lis eloszlÂ´ s vÂ´ rhatÂ´ ertÂ´ kÂ´ tË l valÂ´ eltÂ´ rÂ´ s valÂ´ szÂ´nË sÂ´ gÂ´ re tÂ¨ bb ismert korlÂ´ t is lÂ´ tezik [159]. a a a o Â´ e eo o ee o Ä± ue e o a e Az 1-es fÂ¨ ggelÂ´ kben elolvashatjuk a Csernov-korlÂ´ t egy altalÂ´ nos formÂ´ jÂ´ nak bizonyÂ´tÂ´ sÂ´ t, itt csak a u e a Â´ a aa Ä±a a vÂ´ geredmÂ´ nyt adjuk meg, ami : e e p Y â‰¥ m Â· (E[X ] + Îµ) â‰¤ eâˆ’2Îµ es Â´ amibË l megkapjuk, hogy : o hiba(m) â‰¤ 2 Â· eâˆ’2Îµ mâ‰¥ 2 1 ln 2 2Îµ Î´ p Y â‰¤ m Â· (E[X ] âˆ’ Îµ) â‰¤ eâˆ’2Îµ
2m 2m

2m

Amennyiben a hibakorlÂ´ tot Î´-val jelÂ¨ lÂ¨ m, akkor az alÂ´ bbinak kell igaznak lennie : a oo a

Ha pÂ´ ldÂ´ ul azt szeretnÂ´ nk, hogy a mintavÂ´ telezÂ´ s sorÂ´ n tetszË leges elem minta, â€“ illetve e a e e e a o elË fordulÂ´ sÂ´ nak valÂ´ szÂ´nË sÂ´ ge â€“ 0.01-nÂ´ l nagyobb eltÂ´ rÂ´ s valÂ´ szÂ´nË sÂ´ ge kisebb legyen 1%-nÂ´ l, o aa o Ä± ue a ee o Ä± ue a akkor a minta mÂ´ rete legalÂ´ bb 27000 kell, hogy legyen. A 3.1 tÂ´ blÂ´ zatban adott eltÂ´ rÂ´ s- es e a a a ee Â´ valÂ´ szÂ´nË sÂ´ gkorlÂ´ tokhoz tartozÂ´ minimÂ´ lis mintamÂ´ ret talÂ´ lhatÂ´ . o Ä± ue a o a e a o

3.2. HasonlÂ´ sÂ´ gi mÂ´ rtÂ´ kek oa e e
Az adatbÂ´ nyÂ´ szatban gyakran szÂ¨ ksÂ´ gÂ¨ nk lesz arra, hogy attribÂ´ tumokkal leÂ´rt elemek kÂ¨ zÂ¨ tt haa a u e u u Ä± o o sonlÂ´ sÂ´ got deï¬niÂ´ ljunk. TermÂ´ szetesen elvÂ´ rjuk, hogy ha minÂ´ l inkÂ´ bb tÂ¨ bb azonos ertÂ´ k szerepel oa a e a e a o Â´ e

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK Îµ 0.01 0.01 0.01 0.001 0.001 0.001 Î´ 0.01 0.001 0.0001 0.01 0.001 0.0001 |M| 27000 38000 50000 2700000 3800000 5000000

40

3.1. tÂ´ blÂ´ zat. A minimÂ´ lis minta mÂ´ rete rÂ¨ gzÂ´tett Îµ, Î´ mellett a a a e o Ä±

az attribÂ´ tumaik kÂ¨ zÂ¨ tt annÂ´ l hasonlÂ´ bbak legyenek az elemek. A gyakorlatban hasonlÂ´ sÂ´ gi mÂ´ rtÂ´ k u o o a o oa e e helyett kÂ¨ lÂ¨ nbÂ¨ zË sÂ´ gi mÂ´ rtÂ´ kkel dolgozunk, amely a hasonlÂ´ sÂ´ g inverze (minÂ´ l hasonlÂ´ bbak, annÂ´ l uo o o e e e oa e o a kevÂ´ sbÂ´ kÂ¨ lÂ¨ nbÂ¨ zË k). ElvÂ´ rjuk, hogy kÂ´ t elem kÂ¨ lÂ¨ nbÂ¨ zË sÂ´ gÂ´ t (d(x, y)) ki lehessen fejezni egy poe e uo o o a e uo o o e e zitÂ´v valÂ´ s szÂ´ mmal, tovÂ´ bbÂ´ egy elem onmagÂ´ tÂ´ l ne kÂ¨ lÂ¨ nbÂ¨ zzÂ¨ n, szimmetrikus legyen (d(x, y) = Ä± o a a a Â¨ ao uo o o =d(y, x)), es teljesÂ¨ ljÂ¨ n a hÂ´ romszÂ¨ g egyenlË tlensÂ´ g (d(x, y)â‰¤d(x, z)+d(y, z)). TehÂ´ t a kÂ¨ lÂ¨ nbÂ¨ zË sÂ´ g Â´ u o a o o e a uo o o e metrika legyen. KÂ´ t elem kÂ¨ lÂ¨ nbÂ¨ zË sÂ´ ge helyett gyakran mondunk majd kÂ´ t elem t avolsÂ´ gÂ´ t. e uo o o e e a a Â´ A kÂ¨ vetkezË kben sorra vesszÂ¨ k, hogyan deï¬niÂ´ ljuk a tÂ´ volsÂ´ got kÂ¨ lÂ¨ nbÂ¨ zË tÂ´pusÂ´ attribÂ´ tumok o o u a a a uo o o Ä± u u Â´ a esetÂ´ ben, es azt, hogy mikÂ´ nt lehet egyes attribÂ´ tumok fontossÂ´ gÂ´ t (sÂ´ lyÂ´ t) megnÂ¨ velni. AltalÂ´ nosan e Â´ e u a a u a o igaz az, hogy ha az attribÂ´ tum elemein teljes rendezÂ´ st tudunk deï¬niÂ´ lni (sorrend, intervallum, arÂ´ nyu e a a skÂ´ lÂ´ zott), akkor tetszË leges a1 â‰¤ a2 â‰¤ a3 ertÂ´ kek esetÂ´ n d(a1 , a3 ) â‰¥ max{d(a1 , a2 ), d(a2, a3 )}. aa o Â´ e e

Â´ 3.2.1. BinÂ´ ris attributum a
Egy binÂ´ ris attribÂ´ tum olyan kategÂ´ ria tÂ´pusÂ´ attribÂ´ tum, amely kÂ´ t ertÂ´ ket vehet fel (pl. : 0 es 1). a u o Ä± u u e Â´ e Â´ Hogyan hatÂ´ rozzuk meg x es y elemek hasonlÂ´ sÂ´ gÂ´ t, ha azok m darab binÂ´ ris attribÂ´ tummal vannak a Â´ oa a a u leÂ´rva ? KÂ´ szÂ´tsÂ¨ k el a kÂ¨ vetkezË osszefoglalÂ´ tÂ´ blÂ´ zatot. Ä± e Ä± u o oÂ¨ o a a 1 0 âˆ‘ 1 q s q+s 0 r t r+t âˆ‘ q+r s+t m

PÂ´ ldÂ´ ul az 1-es sor 0-s oszlopÂ´ hoz tartozÂ´ ertÂ´ k azt jelenti, hogy r darab olyan attribÂ´ tum van, amelyek e a a oÂ´ e u az x elemnÂ´ l 1-et, y-nÂ´ l 0-Â´ t vesznek fel. e a a Ez alapjÂ´ n deï¬niÂ´ lhatjuk az un. invariÂ´ ns es variÂ´ ns hasonlÂ´ sÂ´ got. Az invariÂ´ ns hasonlÂ´ sÂ´ got a a Â´ a Â´ a oa a oa olyan esemÂ´ nyeknÂ´ l hasznÂ´ ljuk, amikor a binÂ´ ris attribÂ´ tum kÂ´ t ertÂ´ ke ugyanolyan fontos (szime e a a u e Â´ e metrikus attribÂ´ tum), tehÂ´ t mindegy, hogy melyiket kÂ´ doljuk 0-val, illetve 1-essel. Ilyen attribÂ´ tum u a o u pÂ´ ldÂ´ ul egy ember neme. AzÂ´ rt kapta ez a hasonlÂ´ sÂ´ g az invariÂ´ ns jelzË t, mert nem vÂ´ ltozik az ertÂ´ ke, e a e oa a o a Â´ e ha valaki mÂ´ shogy kÂ´ dolja az attribÂ´ tumokat (tehÂ´ t kÂ´ dolÂ´ s invariÂ´ ns). A legegyszerË bb invariÂ´ ns a o u a o a a u a hasonlÂ´ sÂ´ g az eltÂ´ rË attribÂ´ tumok relatÂ´v szÂ´ ma : oa eo u Ä± a d(x, y) = r+s . m

Aszimmetrikus attribÂ´ tum esetÂ´ ben a kÂ´ t lehetsÂ´ ges ertÂ´ k nem egyenrangÂ´ . Ilyen attribÂ´ tum lehet u e e e Â´ e u u pÂ´ ldÂ´ ul egy orvosi vizsgÂ´ lat eredmÂ´ nye. Nagyobb sÂ´ lya van annak a tÂ´ nynek, hogy valaki fertË zÂ¨ tt e a a e u e o o

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

41

beteg, mint annak, hogy nem az. A konvenciÂ´ knak megfelelË en 1-essel kÂ´ doljuk a lÂ´ nyeges (Â´ ltalÂ´ ban o o o e a a ritka) kimenetet. A legegyszerË bb variÂ´ ns hasonlÂ´ sÂ´ gi mÂ´ rtÂ´ k a Jaccard-koefï¬ciens komplementere : u a oa e e d(x, y) = 1 âˆ’ q r+s = , m âˆ’t m âˆ’t

ahol nem tulajdonÂ´tunk jelentË sÂ´ get a nem jelentË s kimenetek egyezÂ´ sÂ´ nek. Ä± oe o ee Amennyiben szimmetrikus es aszimmetrikus ertÂ´ kek is szerepelnek a binÂ´ ris attribÂ´ tumok kÂ¨ zÂ¨ tt, Â´ Â´ e a u o o akkor azokat vegyes attribÂ´ tumkÂ´ nt kell kezelni (lÂ´ sd a 3.2.5-os rÂ´ szt). u e a e

Â´ Â´ 3.2.2. KategÂ´ ria tÂ´pusu attributum o Ä±
Â´ a AltalÂ´ nos esetben a kategÂ´ ria tÂ´pusÂ´ attribÂ´ tum nem csak kettË , hanem vÂ´ ges sok kÂ¨ lÂ¨ nbÂ¨ zË o Ä± u u o e uo o o ertÂ´ ket vehet fel. Ilyen attribÂ´ tum pÂ´ ldÂ´ ul az ember szeme szÂ´ne, csalÂ´ di allapota, vallÂ´ sa stb. A legÂ´ e u e a Ä± a Â´ a egyszerË bb hasonlÂ´ sÂ´ g a nemegyezÂ´ sek relatÂ´v szÂ´ ma : u oa e Ä± a d(x, y) = u , m

ahol m a kategÂ´ ria tÂ´pusÂ´ attribÂ´ tumok szÂ´ ma, u pedig azt adja meg, hogy ezek kÂ¨ zÂ¨ l mennyi nem o Ä± u u a o u egyezett. TermÂ´ szetesen a kategÂ´ ria tÂ´pusÂ´ attribÂ´ tumok sem feltÂ´ tlenÂ¨ l szimmetrikusak, mert lehet, e o Ä± u u e u hogy az alapÂ´ rtelmezett ertÂ´ kek egyezÂ´ se nem igazÂ´ n fontos. A Jaccard-koefï¬ciens komplementerÂ´ t e Â´ e e a e kategÂ´ ria tÂ´pusÂ´ attribÂ´ tumokra is felÂ´rhatjuk. o Ä± u u Ä±

Â´ Â´ 3.2.3. Sorrend tÂ´pusu attributum Ä±
Sorrend tÂ´pusÂ´ attribÂ´ tum pÂ´ ldÂ´ ul az iskolai vÂ´ gzettsÂ´ g : 8 altalÂ´ nos, befejezett kÂ¨ zÂ´ piskola, Ä± u u e a e e Â´ a o e erettsÂ´ gi, fË iskolai diploma, egyetemi diploma, doktori cÂ´m. Vannak arÂ´ ny skÂ´ lÂ´ jÂ´ attribÂ´ tumok, ameÂ´ e o Ä± a aau u lyeket inkÂ´ bb sorrend tÂ´pusÂ´ attribÂ´ tumnak kezelÂ¨ nk. PÂ´ ldÂ´ ul a Forma 1-es versenyeken sem az egyes a Ä± u u u e a kÂ¨ rÂ¨ k futÂ´ si ideje szÂ´ mÂ´t, hanem az, hogy ki lett az elsË , mÂ´ sodik ... oo a a Ä± o a A sorrend tÂ´pusÂ´ attribÂ´ tumokat altalÂ´ ban egÂ´ sz szÂ´ mokkal helyettesÂ´tik â€“ tipikusan 1 es M kÂ¨ zÂ¨ tti Ä± u u Â´ a e a Ä± Â´ o o egÂ´ sz szÂ´ mokkal. Ha tÂ¨ bb sorrend tÂ´pusÂ´ attribÂ´ tumunk van, amelyek a fontos allapotok szÂ´ mÂ´ ban e a o Ä± u u Â´ a a xâˆ’1 eltÂ´ rnek, akkor cÂ´ lszerË mindegyiket a [0,1] intervallumba kÂ´ pezni a Mâˆ’1 mË velettel. Â´ mindegyik e e u e u Igy egyenlË sÂ´ llyal szerepel majd a vÂ´ gsË hasonlÂ´ sÂ´ gi mÂ´ rtÂ´ kben. EzutÂ´ n alkalmazhatjuk valamelyik o u e o oa e e a intervallum tÂ´pusÂ´ hasonlÂ´ sÂ´ got. Ä± u oa

Â´ Â´ 3.2.4. Intervallum tÂ´pusu attributum Ä±
Az intervallum tÂ´pusÂ´ attribÂ´ tumokat altalÂ´ ban valÂ´ s szÂ´ mok Â´rjÂ´ k le. Ilyen attribÂ´ tumra pÂ´ lda Ä± u u Â´ a o a Ä± a u e egy ember sÂ´ lya, magassÂ´ ga, egy orszÂ´ g eves atlaghË mÂ´ rsÂ´ klete stb. TekinthetÂ¨ nk ugy egy elemu a a Â´ Â´ o e e u Â´ re, mint egy pontra az m-dimenziÂ´ s vektortÂ´ rben. Az elemek kÂ¨ zÂ¨ tti kÂ¨ lÂ¨ nbÂ¨ zË sÂ´ get a vektoraik o e o o uo o o e kÂ¨ lÂ¨ nbsÂ´ gÂ´ nek normÂ´ jÂ´ val (hosszÂ´ val) deï¬niÂ´ ljuk (d(x, y) = ||x âˆ’ y||). LegtermÂ´ szetesebb talÂ´ n az uo e e aa a a e a Euklideszi-norma, de alkalmazhatjuk a Manhattan-normÂ´ t is. MindkÂ´ t mÂ´ rtÂ´ k a Minkowski-norma a e e e speciÂ´ lis esete. a Euklideszi-norma : L2 (z) = |z1 |2 + |z2 |2 + Â· Â· Â·+ |zm |2

Manhattan-norma : L1 (z) = |z1 | + |z2 | + Â· Â· Â· + |zm |

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK Minkowski-norma : L p (z) = (|z1 | p + |z2 | p + Â· Â· Â· + |zm | p )1/p
i

42

A p = âˆ esetÂ´ n kÂ´ t vektor tÂ´ volsÂ´ ga megegyezik a koordinÂ´ tÂ´ inak a legnagyobb eltÂ´ rÂ´ sÂ´ vel e e a a aa eee (Lâˆ (z) = max{|zi |}).

HabÂ´ r az elemek leÂ´rÂ´ sÂ´ ban mÂ´ r csak szÂ´ mok szerepelnek, a hÂ´ ttÂ´ rben megbÂ´ jÂ´ a Ä±aa a a a e uo mÂ´ rtÂ´ kegysÂ´ geknek nagy szerepÂ¨ k van. Gondoljuk meg, ha mÂ´ ter helyett millimÂ´ terben szÂ´ molunk, e e e u e e a akkor sokkal nagyobb ertÂ´ kek fognak szerepelni az elemek leÂ´rÂ´ sÂ´ ban, es Â´gy a kÂ¨ lÂ¨ nbsÂ´ gek is Â´ e Ä±aa Â´ Ä± uo e megnË nek. A nagy ertÂ´ kkÂ´ szletË attribÂ´ tumoknak nagyobb hatÂ´ suk van a hasonlÂ´ sÂ´ g ertÂ´ kÂ´ re, mint o Â´ e e u u a oa Â´ e e a kis ertÂ´ kkÂ´ szletË eknek. Jogos tehÂ´ t az egyes attribÂ´ tumok normalizÂ´ lÂ´ sa, azaz transzformÂ´ ljuk oket Â´ e e u a u aa a Ë pl. a [0,1] intervallumba, majd ezen transzformÂ´ lt attribÂ´ tumok alapjÂ´ n szÂ´ mÂ´tsuk a tÂ´ volsÂ´ gokat a u a a Ä± a a (3.1.2 rÂ´ sz). e Gyakran elË fordul, hogy a kÂ¨ lÂ¨ nbÂ¨ zË sÂ´ g megÂ´ llapÂ´tÂ´ sÂ´ nÂ´ l bizonyos attribÂ´ tumokra nagyobb sÂ´ lyt o uo o o e a Ä±a a a u u szeretnÂ´ nk helyezni. PÂ´ ldÂ´ ul kÂ´ t ember osszehasonlÂ´tÂ´ sÂ´ nÂ´ l a hajszÂ´nnek nagyobb szerepe van, mint e e a e Â¨ Ä±a a a Ä± annak, hogy melyik lÂ´ bujja a legnagyobb. Ha ï¬gyelembe vesszÂ¨ k az attribÂ´ tumok sÂ´ lyait, akkor a u u u pÂ´ ldÂ´ ul az Euklideszi-tÂ´ volsÂ´ g Â´gy mÂ´ dosul : e a a a Ä± o d(x, y) = w1 |x1 âˆ’ y1 |2 + w2 |x2 âˆ’ y2 |2 + Â· Â· Â· + wm |xm âˆ’ ym |2 ,

ahol wi -vel jelÂ¨ ltÂ¨ k i-edik attribÂ´ tum sÂ´ lyÂ´ t es legyen âˆ‘m wi = 1. o u u u a Â´ i=1 ElË fordulhat, hogy olyan attribÂ´ tummal van dolgunk, amely ertÂ´ keit nemlineÂ´ ris lÂ´ ptÂ´ kben o u Â´ e a e e abrÂ´ zoljuk (nemlineÂ´ ris nÂ¨ vekedÂ´ sË attribÂ´ tumnak szokÂ´ s hÂ´vni ezeket). PÂ´ ldÂ´ ul a baktÂ´ rium poÂ´ a a o eu u a Ä± e a e pulÂ´ ciÂ´ k nÂ¨ vekedÂ´ sÂ´ t vagy algoritmusok futÂ´ si idejÂ´ t exponenciÂ´ lis skÂ´ lÂ´ n erdemes abrÂ´ zolni. Az a o o ee a e a aa Â´ Â´ a ilyen attribÂ´ tumoknÂ´ l nem cÂ´ lszerË kÂ¨ zvetlenÂ¨ l intervallum alapÂ´ hasonlÂ´ sÂ´ got alkalmazni, mert ez u a e u o u u oa oriÂ´ si kÂ¨ lÂ¨ nbÂ¨ zË sÂ´ geket eredmÂ´ nyez azokon a helyeken, ahol kis kÂ¨ lÂ¨ nbÂ¨ zË sÂ´ get vÂ´ runk. Â´ a uo o o e e uo o o e a KÂ´ t megkÂ¨ zelÂ´tÂ´ s kÂ¨ zÂ¨ tt szokÂ´ s vÂ´ lasztani. EgyrÂ´ szt hasznÂ´ lhatjuk az intervallum alapÂ´ hae o Ä±e o o a a e a u sonlÂ´ sÂ´ got, de nem az attribÂ´ tum eredeti ertÂ´ kÂ´ n, hanem annak logaritmusÂ´ n. MÂ´ srÂ´ szt diszkreoa u Â´ e e a a e tizÂ´ lhatjuk az ertÂ´ keket, es vehetjÂ¨ k csak a sorrendet a hasonlÂ´ sÂ´ g alapjÂ´ ul. a Â´ e Â´ u oa a

Â´ 3.2.5. Vegyes attributumok
Az elË zË rÂ´ szekben azt tekintettÂ¨ k at, hogyan deï¬niÂ´ ljuk a hasonlÂ´ sÂ´ got kÂ´ t elem kÂ¨ zÂ¨ tt adott o o e u Â´ a oa e o o tÂ´pusÂ´ attribÂ´ tumok esetÂ´ n. Mit tegyÂ¨ nk akkor, ha egy objektum leÂ´rÂ´ sÂ´ nÂ´ l vegyesen adottak a Ä± u u e u Ä±aa a kÂ¨ lÂ¨ nbÂ¨ zË tÂ´pusÂ´ â€“ intervallum, binÂ´ ris, kategÂ´ ria stb. â€“ attribÂ´ tumok ? CsoportosÂ´tsuk az egyes attuo o o Ä± u a o u Ä± ribÂ´ tumokat tÂ´pusuk szerint, es hatÂ´ rozzuk meg a kÂ´ t elem hasonlÂ´ sÂ´ gÂ´ t minden csoportra nÂ´ zve. A u Ä± Â´ a e oa a e kapott hasonlÂ´ sÂ´ gokat kÂ´ pezzÂ¨ k a [0,1] intervallumba. Minden attribÂ´ tumnak feleltessÂ¨ nk meg egy oa e u u u dimenziÂ´ t a tÂ´ rben, Â´gy kÂ´ t elem hasonlÂ´ sÂ´ gÂ´ hoz hozzÂ´ rendelhetÂ¨ nk egy vektort a vektortÂ´ rben. A o e Ä± e oa a a u e hasonlÂ´ sÂ´ g ertÂ´ kÂ´ t feleltessÂ¨ k meg a vektor hosszÂ´ nak. oa Â´ e e u a Ennek a megkÂ¨ zelÂ´tÂ´ snek a hÂ´ trÂ´ nya, hogy ha pÂ´ ldÂ´ ul egyetlen kategÂ´ ria tÂ´pusÂ´ attribÂ´ tum van, o Ä±e a a e a o Ä± u u akkor az ugyanolyan sÂ´ llyal fog szerepelni, mint akÂ´ r tÂ´z binÂ´ ris attribÂ´ tum osszesen. CÂ´ lszerË ezÂ´ rt u a Ä± a u Â¨ e u e az egyes attribÂ´ tumtÂ´pusok altal szolgÂ´ ltatott ertÂ´ keket sÂ´ lyozni a hozzÂ´ juk tartozÂ´ attribÂ´ tumok u Ä± Â´ a Â´ e u a o u szÂ´ mÂ´ val. a a

3.2.6. SpeciÂ´ lis esetek a
Egyre tÂ¨ bb olyan alkalmazÂ´ s kerÂ¨ l elË , ahol a fent deï¬niÂ´ lt altalÂ´ nos hasonlÂ´ sÂ´ gok nem ragadjÂ´ k o a u o a Â´ a oa a meg jÂ´ l kÂ´ t elem kÂ¨ lÂ¨ nbÂ¨ zË sÂ´ gÂ´ t. A teljessÂ´ g igÂ´ nye nÂ´ lkÂ¨ l bemutatunk kÂ´ t olyan esetet, amikor o e uo o o e e e e e u e speciÂ´ lis tÂ´ volsÂ´ gfÂ¨ ggvÂ´ nyre van szÂ¨ ksÂ´ g. a a a u e u e

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK Elemsorozatok hasonlÂ´ sÂ´ ga oa

43

Elemsorozaton egy vÂ´ ges halmazbÂ´ l vett elemek sorozatÂ´ t ertjÂ¨ k. PÂ´ ldÂ´ ul a magyar nyelven e o a Â´ u e a ertelmezett szavak elemsorozatok. NÂ´ zzÂ¨ k a S= abcde sorozatot. LegtÂ¨ bben azt mondanÂ´ nk, hogy a Â´ e u o a bcdxye sorozat jobban hasonlÂ´t S-re, mint az xxxddd sorozat. Nem ezt kapnÂ´ nk, ha a pozÂ´ciÂ´ kban Ä± a Ä± o megegyezË elemek relatÂ´v szÂ´ mÂ´ val deï¬niÂ´ lnÂ´ nk a hasonlÂ´ sÂ´ got. o Ä± a a a a oa Egy elterjedt mÂ´ rtÂ´ k az elemsorozatok hasonlÂ´ sÂ´ gÂ´ ra az un. szerkesztÂ´ si tÂ´ volsÂ´ g. KÂ´ t sorozatnak e e oa a Â´ e a a e kicsi a szerkesztÂ´ si tÂ´ volsÂ´ ga, ha az egyik sorozatbÂ´ l kevÂ´ s elem tÂ¨ rlÂ´ sÂ´ vel ill. beszÂ´ rÂ´ sÂ´ val megkape a a o e o ee uaa hatjuk a mÂ´ sikat. Pontosabban, kÂ´ t sorozat szerkesztÂ´ si tÂ´ volsÂ´ ga adja meg, hogy legkevesebb hÂ´ ny a e e a a a beszÂ´ rÂ´ s es tÂ¨ rlÂ´ s mË velettel kaphatjuk meg az egyik sorozatbÂ´ l a mÂ´ sikat. A szerkesztÂ´ si tÂ´ volsÂ´ g ua Â´ o e u o a e a a alapjÂ´ n csoportosÂ´thatunk dokumentumokat, weboldalakat, DNS sorozatokat, vagy kereshetÂ¨ nk ila Ä± u legÂ´ lis mÂ´ solatokat. a a Â´ BezÂ´ rt szÂ¨ g alapu hasonlÂ´ sÂ´ g a o oa Vannak alkalmazÂ´ sok, ahol nem a vektorok kÂ¨ lÂ¨ nbsÂ´ gÂ´ nek a hossza a lÂ´ nyeges, hanem a vektorok a uo e e e altal bezÂ´ rt szÂ¨ g. PÂ´ ldÂ´ ul dokumentumok hasonlÂ´ sÂ´ gÂ´ val kapcsolatban szÂ´ mos okfejtÂ´ st olvashatunk, Â´ a o e a oa a a e hogy miÂ´ rt jobb szÂ¨ gekkel dolgozni, mint a tÂ´ volsÂ´ gokkal. EmlÂ´ keztetË ul a koszinusz-mÂ´ rtÂ´ k pontos e o a a e oÂ¨ e e kÂ´ plete : e xT y d(x, y) = arccos . ||x|| Â· ||y||

3.2.7. DimenziÂ´ csÂ¨ kkentÂ´ s o o e
Az adatbÂ´ nyÂ´ szati alkalmazÂ´ sokban az adathalmaz mÂ´ rete altalÂ´ ban nagy. FelmerÂ¨ l a kÂ´ rdÂ´ s, hogy a a a e Â´ a u e e lehet-e ezt a nagy adathalmaz egy kisebb mÂ´ retË vel helyettesÂ´teni ugy, hogy a kisebb adathalmaz e u Ä± Â´ valamilyen szempont szerint hË en reprezentÂ´ lja a nagy adathalmazt. TermÂ´ szetesen az adatbÂ´ nyÂ´ szati u a e a a feladattÂ´ l fÂ¨ gg az, hogy mit jelent pontosan a hË reprezentÂ´ ciÂ´ . o u u a o Ebben a rÂ´ szben dimenziÂ´ -csÂ¨ kkentÂ´ srË l lesz szÂ´ , melynek sorÂ´ n az objektumok sok atte o o e o o a ribÂ´ tummal valÂ´ leÂ´rÂ´ sÂ´ t szeretnÂ´ nk helyettesÂ´teni kevesebb attribÂ´ tumot hasznÂ´ lÂ´ leÂ´rÂ´ ssal. Hau o Ä±aa e Ä± u ao Ä±a sonlÂ´ sÂ´ gtartÂ´ dimenziÂ´ -csÂ¨ kkentÂ´ srË l fogunk beszÂ´ lni, ami azt jelenti, hogy tudunk adni egy olyan oa o o o e o e hasonlÂ´ sÂ´ gi deï¬nÂ´ciÂ´ t az uj leÂ´rÂ´ sban, ami jÂ´ becslÂ´ se az eredeti hasonlÂ´ sÂ´ gnak. oa Ä± o Â´ Ä±a o e oa n m M k M

Az eredeti adathalmazt reprezentÂ´ lÂ´ adathalmazt az m Ã— n-es M mÂ´ trixszal jellemezzÂ¨ k, az uj ao a u Â´ leÂ´rÂ´ st pedig az m Ã— k-s M mÂ´ trixszal. Az n nagyon nagy lehet (az interneten egyÂ¨ tt elË fordulÂ´ Ä±a a u o o 9 kÂ¨ rÂ¨ li volt az ertÂ´ ke), ami azt jelenti, hogy az adatbÂ´ zis nem biztos, szÂ´ pÂ´ rok keresÂ´ sÂ´ nÂ´ l pÂ´ ldÂ´ ul 10 o u o a ee e e a Â´ e a hogy elfÂ´ r a memÂ´ riÂ´ ban. Ezt a problÂ´ mÂ´ t szeretnÂ´ nk megkerÂ¨ lni azzal, hogy az M-et az M mÂ´ trixszal e o a e a e u a helyettesÂ´tjÂ¨ k ugy, hogy k n annyira, hogy M elfÂ´ rjen a memÂ´ riÂ´ ban. EzÂ´ ltal lehetË vÂ´ vÂ´ lik olyan alÄ± u Â´ e o a a o e a goritmusok futtatÂ´ sa, amelyek feltÂ´ telezik, hogy az adatokat leÂ´rÂ´ mÂ´ trix a gyors elÂ´ rÂ´ sË memÂ´ riÂ´ ban a e Ä±o a eeu o a talÂ´ lhatÂ´ . a o

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

44

KÂ´ t speciÂ´ lis feladatot tÂ´ rgyalunk. Az elsË ben az attribÂ´ tumok valÂ´ s szÂ´ mok es kÂ´ t objektum e a a o u o a Â´ e kÂ¨ lÂ¨ nbÂ¨ zË sÂ´ gÂ´ n (hasonlÂ´ sÂ´ g inverze) az Euklideszi tÂ´ volsÂ´ gukat ertjÂ¨ k. A mÂ´ sodik esetben az attuo o o e e oa a a Â´ u a ribÂ´ tumok csak binÂ´ risak lehetnek, es kÂ´ t objektum hasonlÂ´ sÂ´ gÂ´ t a Jaccard-koefï¬ciens (lÂ´ sd 3.2.1 u a Â´ e oa a a rÂ´ sz) adja meg. e SzingulÂ´ ris felbontÂ´ s a a A szingulÂ´ ris felbontÂ´ s az elmÂ´ leti szempontbÂ´ l egyik legtÂ¨ bbet vizsgÂ´ lt, klasszikus lineÂ´ ris ala a e o o a a gebrai eszkÂ¨ zÂ¨ ket hasznÂ´ lÂ´ dimenziÂ´ -csÂ¨ kkentÂ´ si eljÂ´ rÂ´ s. Ennek alkalmazÂ´ sa utÂ´ n nyert M mÂ´ trix o o ao o o e aa a a a soraibÂ´ l jÂ´ l kÂ¨ zelÂ´thetË az euklideszi tÂ´ volsÂ´ g, illetve az attribÂ´ tumok vektoraibÂ´ l szÂ´ mÂ´tott skalÂ´ ris o o o Ä± o a a u o a Ä± a szorzattal mÂ´ rt hasonlÂ´ sÂ´ g. UtÂ´ bbi megegyezik a koszinusz mÂ´ rtÂ´ kkel, ha a mÂ´ trix sorai normÂ´ ltak. e oa o e e a a Ebben a szakaszban nÂ´ hÂ´ ny jelÂ¨ lÂ´ s es alapvetË fogalom utÂ´ n deï¬niÂ´ ljuk a szingulÂ´ ris felbontÂ´ st, e a oe Â´ o a a a a igazoljuk a felbontÂ´ s lÂ´ tezÂ´ sÂ´ t, majd megmutatjuk, hogy mikÂ´ nt hasznÂ´ lhatÂ´ a felbontÂ´ s dimenziÂ´ a e ee e a o a o csÂ¨ kkentÂ´ sre. MegjegyezzÂ¨ k, hogy a szakasz nem mutat a gyakorlatban numerikus szempontbÂ´ l jÂ´ l o e u o o alkalmazhatÂ´ mÂ´ dszert a felbontÂ´ s kiszÂ´ mÂ´tÂ´ sÂ´ ra. Kisebb adathalmaz esetÂ´ n altalÂ´ nos lineÂ´ ris algebrai o o a a Ä±a a e Â´ a a programcsomag (Matlab, Octave, Maple) hasznÂ´ lata javasolt, mÂ´g nagyobb adatbÂ´ zisoknÂ´ l az adatok a Ä± a a sajÂ´ tossÂ´ gÂ´ t kihasznÂ´ lÂ´ szingulÂ´ ris felbontÂ´ program (SVDPack) hasznÂ´ lata ajÂ´ nlott. a a a ao a o a a Egy U âˆˆ RnÃ—n mÂ´ trixot ortogonÂ´ lisnak nevezÂ¨ nk, ha oszlopai ortogonÂ´ lis rendszert alkotnak, a a u a azaz U T U = In , ahol In az nÃ—n mÂ´ retË egysÂ´ gmÂ´ trixot, es U T az U transzponÂ´ ltjÂ´ t jelÂ¨ li. MÂ´ skÂ´ ppen e u e a Â´ a a o a e âˆ’1 inverzÂ´ re U âˆ’1 = U T teljesÂ¨ l. MÂ´ trix ortogonalitÂ´ sÂ´ nak szemlÂ´ letes mondva U invertÂ´ lhatÂ´ es U a oÂ´ e u a aa e tÂ´ rgyalÂ´ sÂ´ hoz szÂ¨ ksÂ´ gÂ¨ nk lesz a vektorok hosszÂ´ nak altalÂ´ nosÂ´tÂ´ sÂ´ ra, a norma fogalmÂ´ ra. Egy v âˆˆ R n a aa u e u a Â´ a Ä±a a a vektor v 2 -vel jelÂ¨ lt 2-normÂ´ jÂ´ t a v o aa
2 2 2

=

oe a u a o âˆ‘i v2 egyenlË sÂ´ ggel deï¬niÂ´ ljuk. EgyszerË en lÂ´ thatÂ´ , i

hogy v M
F

2 Frobenius-norma, amelynek deï¬nÂ´ciÂ´ ja M F = âˆ‘m âˆ‘n Mi, j . Ä± o i=1 j=1 VisszatÂ´ rve az ortogonalitÂ´ s szemlÂ´ letes jelentÂ´ sÂ´ re, egy ortogonÂ´ lis mÂ´ trix altal reprezentÂ´ lt e a e ee a a Â´ a lineÂ´ ris transzformÂ´ ciÂ´ ra ugy gondolhatunk, mint egy forgatÂ´ sra, amely a vektorok hosszÂ´ t nem a a o Â´ a a vÂ´ ltoztatja. A szemlÂ´ let alapja, hogy tetszË leges U âˆˆ RnÃ—n ortogonÂ´ lis mÂ´ trix es x âˆˆ Rn vektor esetÂ´ n a e o a a Â´ e

= vT v teljesÂ¨ l. A 2-norma altalÂ´ nosÂ´tÂ´ sa a tetszË leges M âˆˆ RmÃ—n mÂ´ trix esetÂ´ n ertelmezett u Â´ a Ä±a o a e Â´

Ux

2

= x

2

teljesÂ¨ l. Az azonossÂ´ g az alÂ´ bbi elemi lÂ´ pÂ´ sekbË l kÂ¨ vetkezik : U x 2 = (U x)T (U x) = xT (U T U )x = u a a e e o o 2 T x = x 2 . HasonlÂ´ an belÂ´ thatÂ´ , hogy tetszË leges X âˆˆ R mÃ—n mÂ´ trix esetÂ´ n es U âˆˆ RmÃ—m illetve o a o o a e Â´ =x 2 nÃ—n ortogonÂ´ lis mÂ´ trixok esetÂ´ n igaz, hogy V âˆˆR a a e U XV T
F

= X

F

.

A rÂ¨ vid bevezetË utÂ´ n rÂ´ tÂ´ rÂ¨ nk a szingulÂ´ ris felbontÂ´ s deï¬nÂ´ciÂ´ jÂ´ ra. Egy nem szÂ¨ ksÂ´ gszerË en o o a aeu a a Ä± oa u e u mÃ—n mÂ´ trix szingulÂ´ ris ertÂ´ k felbontÂ´ sÂ´ n (singular value decomposition, SVD) az nÂ´ gyzetes M âˆˆ R e a a Â´ e aa olyan M = U Î£V T szorzattÂ´ bontÂ´ st ertjÂ¨ k, ahol U âˆˆ RmÃ—m , V âˆˆ RnÃ—n ortogonÂ´ lis mÂ´ trixok, tovÂ´ bbÂ´ a Î£ mÂ´ trix M-mel a a Â´ u a a a a a â—¦ -ban lefele elhelyezkedË Ïƒ â‰¥ Ïƒ â‰¥ . . . â‰¥ Ïƒ > 0 pozitÂ´v megegyezË mÂ´ retË es a bal felsË sarokbÂ´ l 45 o e uÂ´ o o o 1 Ä± 2 r szÂ´ mokat csupa 0 kÂ¨ vet es a tÂ¨ bbi elem szintÂ´ n 0. A Ïƒi szÂ´ mokat szingulÂ´ ris ertÂ´ keknek nevezzÂ¨ k, es a o Â´ o e a a Â´ e u Â´ a Ïƒi = 0 vÂ´ lasztÂ´ ssal terjesztjÂ¨ k ki az i > r esetre. A felbontÂ´ sbÂ´ l lÂ´ thatÂ´ , hogy rang(M) = rang(Î£) = r. a a u a o a o Az U es a V oszlopait bal-, illetve jobboldali szingularis vektoroknak mondjuk. A jelÂ¨ lÂ´ sek attekintÂ´ se Â´ oe Â´ e Â´ a 3.1. abrÂ´ n lÂ´ thatÂ´ . Â´ a a o

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

45

Î£mÃ—n UmÃ—m

| MmÃ—n = ï£­ u1 |

ï£«

ï£¶ ï£¬ ï£¬ | ï£¬ ï£¬ . . . um ï£¸ Â· ï£¬ ï£¬ | ï£¬ ï£­

ï£«

Ïƒ1

..

. Ïƒr 0 ..

ï£¶ . 0

ï£· ï£« ï£¶ ï£· â€” vT â€” ï£· 1 ï£· ï£· ï£¬ . . ï£· Â· ï£­ ï£¸ . ï£· T â€” ï£· â€” vn ï£¸

T VnÃ—n

3.1. abra. A szingulÂ´ ris felbontÂ´ s sematikus vÂ´ zlata. Â´ a a a 3.1. tÂ´ tel. TetszË leges M âˆˆ RmÃ—n mÂ´ trixnak lÂ´ tezik szingulÂ´ ris ertÂ´ k felbontÂ´ sa, azaz lÂ´ teznek U âˆˆ e o a e a Â´ e a e mÃ—m , V âˆˆ RnÃ—n ortogonÂ´ lis mÂ´ trixok, melyekkel âˆˆR a a M = U Î£V T , ahol Î£ âˆˆ RmÃ—n , Î£= Î£+ 0 0 0 ,

tovÂ´ bbÂ´ Î£+ egy rÃ—r mÂ´ retË diagonÂ´ lis mÂ´ trix, amelynek fË atlÂ´ jÂ´ ban a Ïƒ1 â‰¥ Ïƒ2 â‰¥ . . . â‰¥ Ïƒr > 0 szÂ´ mok a a e u a a oÂ´ o a a helyezkednek el sorrendben. BizonyÂ´tÂ´ s: Az M T M mÂ´ trix szimmetrikus, ezÂ´ rt ortogonÂ´ lis transzformÂ´ ciÂ´ val diagonalizÂ´ lhatÂ´ es Ä±a a e a a o a oÂ´ sajÂ´ tÂ´ rtÂ´ kei valÂ´ sak. TovÂ´ bbÂ´ pozitÂ´v szemideï¬nit, mert tetszË leges xâˆˆR nÃ—n vektor esetÂ´ n xT M T Mx= ae e o a a Ä± o e e ae e Ä± ae e = (Mx)T (Mx) = Mx 2 â‰¥ 0, ezÂ´ rt a sajÂ´ tÂ´ rtÂ´ kek nem negatÂ´vak. A sajÂ´ tÂ´ rtÂ´ kek legyenek Ïƒ 2 â‰¥ Ïƒ2 â‰¥ 2 1 2 o a o a a o â‰¥ . . . â‰¥ Ïƒ2 > 0. Az ezekhez tartozÂ´ sajÂ´ tvektorokbÂ´ l alkotott ortogonÂ´ lis mÂ´ trixot jelÂ¨ lje V , ekkor r V T M T MV = Î£+ 2 0 0 0 .

A mÂ´ trixot kÂ´ t rÂ´ szre osztva V = (Vr V2 ), ahol Vr âˆˆ RnÃ—r a pozitÂ´v sajÂ´ tÂ´ rtÂ´ khez tartozÂ´ sajÂ´ tvektorokat a e e Ä± ae e o a tartalmazza. Vagyis VrT M T MVr = Î£+ 2 . VezessÂ¨ k be az u jelÂ¨ lÂ´ st, ekkor oe Ur = MVr Î£+ âˆ’1 M = Ur Î£+VrT .

Az Ur vektorai ortogonÂ´ lis vektorrendszert alkotnak, ezt tetszË legesen kiegÂ´ szÂ´tve U = (Ur U2 ) ortoa o e Ä± gonÂ´ lis mÂ´ trixszÂ´ a a a Î£+ 0 VT. M =U 0 0

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

46

Most megmutatjuk, hogy szingulÂ´ ris felbontÂ´ s segÂ´tsÂ´ gÂ´ vel hogyan lehet dimenziÂ´ -csÂ¨ kkentÂ´ st a a Ä± e e o o e vÂ´ grehajtani. EmlÂ´ keztetÂ¨ nk rÂ´ , hogy az M mÂ´ trix n-dimenziÂ´ s sorvektorai objektumokat jellemeze e u a a o nek. DimenziÂ´ -csÂ¨ kkentÂ´ skor az n attribÂ´ tumot szeretnÂ´ nk k < n dimenziÂ´ jÂ´ vektorokkal jellemezni o o e u e ou ugy, hogy kÂ¨ zben az objektumok euklideszi tÂ´ volsÂ´ ga vagy skalÂ´ ris szorzattal mÂ´ rt hasonlÂ´ sÂ´ ga csak Â´ o a a a e oa kis mÂ´ rtÂ´ kben vÂ´ ltozzon. A mÂ´ trixszorzÂ´ s elemi tulajdonsÂ´ ga, hogy a szingulÂ´ ris felbontÂ´ s az alÂ´ bbi e e a a a a a a a formÂ´ ban is Â´rhatÂ´ . a Ä± o M = U Î£V T = âˆ‘ Ïƒi ui vT , i
i=1 r

ahol ui vT a bal- illetve a jobboldali szingulÂ´ ris vektorokbÂ´ l kÂ´ pzett diÂ´ dszorzat, azaz egy oszlop- es a o e a Â´ i egy sorvektor szorzatakÂ´ nt felÂ´rt mÃ—n mÂ´ retË 1-rangÂ´ mÂ´ trix. LÂ´ thatÂ´ , hogy az u i vT diÂ´ dok monoton e Ä± e u u a a o a i csÂ¨ kkenË Ïƒi sÂ´ llyal szerepelnek az osszegben. Innen adÂ´ dik az otlet, hogy k < r esetÂ´ n csak az elsË k o o u Â¨ o Â¨ e o legnagyobb sÂ´ lyÂ´ diÂ´ d osszegÂ´ vel kÂ¨ zelÂ´tsÂ¨ k az M mÂ´ trixot. Azaz u u a Â¨ e o Ä± u a Mk = âˆ‘ Ïƒi ui vT = Uk Î£kVkT , i
i=1 k

ahol Uk = (u1 u2 . . . uk ) es Vk = (v1 v2 . . . vk ), valamit Î£k egy kÃ—k mÂ´ retË diagonÂ´ lis mÂ´ trix, melynek Â´ e u a a fË atlÂ´ jÂ´ ban a Ïƒ1 , Ïƒ2 , . . . , Ïƒk ertÂ´ kek vannak. KÂ¨ nnyen lÂ´ thatÂ´ , hogy Mk sorai egy k-dimenziÂ´ s altÂ´ rben oÂ´ o a Â´ e o a o o e helyezkednek el, hiszen rang(Mk ) = rang(Î£k ) = k. Sokkal mÂ´ lyebb eredmÂ´ ny a kÂ¨ vetkezË , melynek e e o o bizonyÂ´tÂ´ sÂ´ t mellË zzÂ¨ k. Ä±a a o u 3.2. tÂ´ tel. Legyen M egy legalÂ´ bb k rangÂ´ mÂ´ trix es legyen Mk a fenti mÂ´ don szÂ´ mÂ´tott kÂ¨ zelÂ´tÂ´ se. Ha e a u a o a Ä± o Ä±e Â´ a kÂ¨ zelÂ´tÂ´ s hibÂ´ jÂ´ t Frobenius-normÂ´ val mÂ´ rjÂ¨ k, akkor a k-rangÂ´ mÂ´ trixok kÂ¨ zÂ¨ l az Mk mÂ´ trix a lehetË o Ä±e aa a e u u a ou a o legjobban kÂ¨ zelÂ´ti M-et, azaz o Ä± M âˆ’ Mk
F

=

N: rang(N)=k

min

M âˆ’N

F

.

TovÂ´ bbÂ´ a kÂ¨ zelÂ´tÂ´ s hibÂ´ ja a Ïƒi szingulÂ´ ris ertÂ´ kekkel kifejezhetË : a a o Ä±e a a Â´ e o M âˆ’ Mk =

F

i=k+1

âˆ‘

r

Ïƒ2 . i

Az Mk mÂ´ trix sorai az M-Â´ hez hasonlÂ´ an n mÂ´ retË ek, de most mÂ´ r egy k-dimenziÂ´ s altÂ´ rnek az a e o e u a o e T sorai, es az Â´ elemei. Ennek az altÂ´ rnek egy bÂ´ zisÂ´ t alkotjÂ´ k a Vk e a a a M = Uk Î£k mÂ´ trix k-dimenziÂ´ s sorvektorai e bÂ´ zisban fejezik ki az Mk sorait. TehÂ´ t a dimenziÂ´ -csÂ¨ kkentÂ´ s a o a a o o e eredmÂ´ nye, hogy az M mÂ´ trix n-dimenziÂ´ s sorait a vetÂ´tÂ´ s utÂ´ n az M mÂ´ trix k-dimenziÂ´ s soraival e a o Ä±e a a o kÂ¨ zelÂ´tjÂ¨ k. A VkT sorainak ortogonalitÂ´ sÂ´ bÂ´ l kÂ¨ nnyen belÂ´ thatÂ´ , hogy az M k , illetve az M soraibÂ´ l o Ä± u aa o o a o o szÂ´ mÂ´tott euklideszi tÂ´ volsÂ´ gok es skalÂ´ ris szorzatok is megegyeznek. TehÂ´ t a kÂ¨ zelÂ´tÂ´ s alatt torzÂ´tÂ´ s a Ä± a a Â´ a a o Ä±e Ä±a kizÂ´ rÂ´ lag az M-bË l Mk -ba tÂ¨ rtÂ´ nË vetÂ´tÂ´ s sorÂ´ n tÂ¨ rtÂ´ nik, melynek mÂ´ rtÂ´ ke a 3.2. tÂ´ tel alapjÂ´ n felÂ¨ lrË l ao o o e o Ä±e a o e e e e a u o becsÂ¨ lhetË . u o

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK Â´ Minhash alapu lenyomat

47

A kÂ¨ vetkezË kben az adathalmaz sok oszlopot es mÂ´ g tÂ¨ bb sort tartalmaz. CÂ´ lunk a sorok o o Â´ e o e szÂ´ mÂ´ nak csÂ¨ kkentÂ´ se. A feladatot a kÂ¨ vetkezË abra szemlÂ´ lteti. a a o e o oÂ´ e n

m

M

M k Az M mÂ´ trix binÂ´ ris es kÂ´ t oszlop (vektor) hasonlÂ´ sÂ´ gÂ´ t a Jaccard-koefï¬ciens adja meg. Kicsit a a Â´ e oa a erthetetlenebb mÂ´ don felÂ´rva a Jaccard ertÂ´ ket : Â´ o Ä± Â´ e di, j = mi (m j )T , ||mi ||2 + ||m j ||2 âˆ’ mi (m j )T

hiszen az mi (m j )T binÂ´ ris vektorok esetÂ´ ben az azonos pozÂ´ciÂ´ kban lÂ´ vË 1-esek szÂ´ mÂ´ t adja meg, a e Ä± o e o a a ||mi ||2 pedig a vektor egyeseinek szÂ´ mÂ´ t. FeltÂ´ telezzÂ¨ k, hogy a binÂ´ ris vektorok ritkÂ´ k azaz, ha r-el a a e u a a jelÂ¨ ljÂ¨ k a sorokban az 1-esek atlagos szÂ´ mÂ´ t, akkor r n. o u Â´ a a Az M mÂ´ trixot az M lenyomatmÂ´ trixÂ´ nak fogjuk hÂ´vni. A lenyomatmÂ´ trixnak nem kell binÂ´ risnak a a a Ä± a a lennie, de azt termÂ´ szetesen most is elvÂ´ rjuk, hogy a memÂ´ riaigÂ´ nye jÂ´ val kevesebb legyen, mint e a o e o az M memÂ´ riaigÂ´ nye. TovÂ´ bbi kikÂ¨ tÂ´ s, hogy az adatok sorfolytonosan vannak tÂ´ rolva, azaz elË szÂ¨ r o e a oe a o o kiolvashatjuk az elsË sort, majd a mÂ´ sodikat, es Â´gy tovÂ´ bb. o a Â´ Ä± a Ez a helyzet all fel hasonlÂ´ weboldalak kiszË rÂ´ sÂ´ nÂ´ l, koppintÂ´ sok, kalÂ´ zmÂ´ solatok felderÂ´tÂ´ sÂ´ nÂ´ l, Â´ o uee e a o a Ä±e e e hasonlÂ´ tulajdonsÂ´ gÂ´ felhasznÂ´ lÂ´ k keresÂ´ sÂ´ nÂ´ l stb. TovÂ´ bbÂ´ ezt a mÂ´ dszert alkalmazhatjuk, amikor o a u ao ee e a a o hasonlÂ´ eladÂ´ sÂ´ termÂ´ kpÂ´ rokat keresÂ¨ nk. Amennyiben a termÂ´ keket kis tÂ´ telben ertÂ´ kesÂ´tik, akkor az o au e a u e e Â´ e Ä± asszociÂ´ ciÂ´ s szabÂ´ lyokat kinyerË technikÂ´ k (lÂ´ sd 8 fejezet) nem alkalmazhatÂ´ ak. a o a o a a o Gondolkozzunk el azon, hogy mË kÂ¨ dik-e az alÂ´ bbi algoritmus. VÂ´ lasszunk ki nÂ´ hÂ´ ny sort u o a a e a vÂ´ letlenszerË en es tekintsÂ¨ k ezeket lenyomatoknak. KÂ´ t lenyomat hasonlÂ´ sÂ´ gÂ´ nak vÂ´ rhatÂ´ ertÂ´ ke e u Â´ u e oa a a o Â´ e meg fog egyezni az oszlopaik hasonlÂ´ sÂ´ gÂ´ val. Ez alapjÂ´ n azt mondhatnÂ´ nk, hogy a sorok egy oa a a a vÂ´ letlenszerË en vÂ´ lasztott halmaza jÂ´ lenyomat. e u a o A fentiek ellenÂ´ re ez az egyszerË mÂ´ dszer nagyon rossz eredmÂ´ nyt adna. Ennek oka az, hogy a e u o e mÂ´ trixunk nagyon ritka (r a n), tehÂ´ t egy oszlopban a legtÂ¨ bb elem 0, Â´gy nagy valÂ´ szÂ´nË sÂ´ ggel a a o Ä± o Ä± ue legtÂ¨ bb lenyomat is csupa 0 elembË l allna. o o Â´ A minhash alapÂ´ lenyomat egy elemÂ´ t a kÂ¨ vetkezË kÂ´ ppen allÂ´tjuk elË . VÂ´ letlenszerË en peru e o o e Â´ Ä± o e u mutÂ´ ljuk meg az sorokat, majd vÂ´ lasszuk az j-edik oszlopok hash ertÂ´ kÂ´ nek (h) azt a legkisebb sora a Â´ e e indexet, ahol 1-es szerepel a j-edik oszlopban. A vÂ´ letlen permutÂ´ ciÂ´ termÂ´ szetesen csak elmÂ´ leti e a o e e megkÂ¨ zelÂ´tÂ´ s, diszken talÂ´ lhatÂ´ nagy adatbÂ´ zis esetÂ´ n tÂ´ l lassÂ´ mË velet. Ehelyett sorsoljunk ki mino Ä±e a o a e u u u den sorhoz egy vÂ´ letlen hash ertÂ´ ket. Amennyiben feltehetjÂ¨ k, hogy a mÂ´ trix sorainak szÂ´ ma 2 16 -nÂ´ l e Â´ e u a a a

Ë Â´ Â´ Â´ Â¨ Â´ 3. FEJEZET. ELOFELDOLGOZAS, HASONLOSAGI FUGGVENYEK

48

kisebb, akkor a szÂ¨ letÂ´ snapi paradoxon1 alapjÂ´ n vÂ´ lasszunk 32 bit szÂ´ lessÂ´ gË egyenletes eloszlÂ´ sÂ´ u e a a e e u au vÂ´ letlen szÂ´ mot. Az algoritmus tÂ´ nyleges implementÂ´ lÂ´ sa sorÂ´ n tehÂ´ t egyesÂ´ vel olvassuk az sorokat, e a e aa a a e vÂ´ letlen szÂ´ mot generÂ´ lunk, es minden oszlopnak folyamatosan frissÂ´tjÂ¨ k azt a vÂ´ ltozÂ´ jÂ´ t, ami mege a a Â´ Ä± u a oa adja a legkisebb, 1-est tartalmazÂ´ sorindexet. o Mivel egy lenyomatnak k darab eleme van, ezÂ´ rt minden oszlophoz k darab vÂ´ letlen szÂ´ mot e e a allÂ´tunk elË , es k darab hash ertÂ´ ket tÂ´ rolÂ´ vÂ´ ltozÂ´ t tartunk karban. VegyÂ¨ k eszre, hogy a lenyomat Â´ Ä± o Â´ Â´ e a o a o u Â´ elË allÂ´tÂ´ shoz egyszer megyÂ¨ nk vÂ´ gig a mÂ´ trixon. oÂ´ Ä± a u e a KÂ´ t lenyomat hasonlÂ´ sÂ´ gÂ´ t a pÂ´ ronkÂ´ nt egyezË lenyomatok szÂ´ mÂ´ nak k-hoz vett arÂ´ nya adja meg, e oa a a e o a a a azaz |{ : Mi, = M j, }| di j = , k ahol Mi, az M mÂ´ trix i-edik oszlopÂ´ nak -edik elemÂ´ t jelÂ¨ li. a a e o Be fogjuk bizonyÂ´tani, hogy di j jÂ´ becslÂ´ se di j -nek abban az ertelemben, hogy ha i es j oszloÄ± o e Â´ Â´ pok nagyon hasonlÂ´ k, akkor azok lenyomatai is nagy valÂ´ szÂ´nË sÂ´ ggel hasonlÂ´ k. Ehhez a kÂ¨ vetkezË o o Ä± ue o o o eszrevÂ´ telt hasznÂ´ ljuk fel. Â´ e a Â´ 3.3. eszrevÂ´ tel. TetszË leges (i, j) oszloppÂ´ rra igaz, hogy e o a P[Mi, = M j, ] = di j . BizonyÂ´tÂ´ s: Csak akkor lehet a kÂ´ t lenyomat azonos, ha a legalÂ´ bb az egyik oszlopban az 1-est tarÄ±a e a talmazÂ´ indexek kÂ¨ zÂ¨ l olyan sor kapta a legkisebb vÂ´ letlen szÂ´ mot, amelynÂ´ l mindkÂ´ t oszlopban 1-es o o u e a e e szerepel. Ennek valÂ´ szÂ´nË sÂ´ ge eppen di j , amennyiben a permutÂ´ ciÂ´ egyenletesen szÂ´ rja szÂ´ t az egyeo Ä± ue Â´ a o o e seket. Â´ Es most a hasonlÂ´ sÂ´ g megË rzÂ´ sÂ´ vel kapcsolatos allÂ´tÂ´ s : oa o ee Â´ Ä±a
Î´/2 a 3.4. tÂ´ tel. Legyenek 0 < Î´ < 1, es Îµ > 0 valÂ´ s szÂ´ mok. Amennyiben k > âˆ’ ln2Îµ2 , akkor Î´-nÂ´ l kisebb a e o a Â´ valÂ´ szÂ´nË sÂ´ ge annak, hogy a lenyomat es az eredeti hasonlÂ´ sÂ´ g kÂ¨ lÂ¨ nbsÂ´ ge Îµ-nÂ´ l nagyobb. o Ä± ue o a uo e a Â´

amibË l adÂ´ dik, hogy o o

BizonyÂ´tÂ´ s: TekintsÂ¨ k az i, j oszlopokat. Deï¬niÂ´ ljuk Xl valÂ´ szÂ´nË sÂ´ gi vÂ´ ltozÂ´ t, ami 1 Mi, = M j, Ä±a u a o Ä± ue a o esetÂ´ n, kÂ¨ lÂ¨ nben 0. Legyen Y = X1 + . . . + Xk . e uo Xl binomiÂ´ lis eloszlÂ´ sÂ´ es az elË zË ekben kimondott eszrevÂ´ tel miatt E[Xl ] = p = P(Mi, = M j, ) = a a uÂ´ o o Â´ e = di j . A lenyomatok hasonlÂ´ sÂ´ gÂ´ nak deï¬nÂ´ciÂ´ jÂ´ bÂ´ l adÂ´ dik, hogy di j = Y . Â´ oa a Ä± oa o o k Irjuk fel Y -re 2.5.3 -es tÂ´ telÂ´ t : e e 2 P |Y âˆ’ E[Y ]| > kÎµ â‰¤ 2eâˆ’2Îµ k P |di j âˆ’ di j | > Îµ â‰¤ 2eâˆ’2Îµ
1A
2k

szÂ¨ letÂ´ snap paradoxonnal kapcsolatos kÂ´ rdÂ´ s a kÂ¨ vetkezË : Mekkora a valÂ´ szÂ´nË sÂ´ ge annak az esemÂ´ nynek, u e e e o o o Ä± ue e â€ hogy emberek egy vÂ´ letlenszerË en vÂ´ lasztott r fË s csoportjÂ´ ban van legalÂ´ bb kÂ´ t szemÂ´ ly, akik egy napon unneplik a e u a o a a e e Â¨ (365)Â·r! âˆ’r2 r szÂ¨ letÂ´ snapjukat?â€. Elemi kombinatorikus uton a vÂ´ lasz meghatÂ´ rozhatÂ´ : p r = 1 âˆ’ 365r â‰ˆ 1 âˆ’ exp 3Â·365 . A feladat u e Â´ a a o kÂ¨ vetkezmÂ´ nye az az allÂ´tÂ´ s, miszerint 2n elemnek 22n elemË halmazbÂ´ l kell egyenletes eloszlÂ´ s szerint vÂ´ letlenszerË en o e Â´ Ä±a u o a e u egyesÂ´ vel kulcsot sorsolni, hogy kicsi (exp(âˆ’3) < 0.05) legyen annak valÂ´ szÂ´nË sÂ´ ge, hogy kÂ´ t elem ugyanazt a kulcsot e o Ä± ue e kapja.

4. fejezet Gyakori elemhalmazok
A gyakori elemhalmazok kinyerÂ´ se az adatbÂ´ nyÂ´ szat eltulajdonÂ´thatatlan terÂ¨ lete. A feladat e a a Ä± u vÂ´ sÂ´ rlÂ´ i szokÂ´ sok kinyerÂ´ sÂ´ nÂ´ l merÂ¨ lt fel rÂ´ szfeladatkÂ´ nt. A nagy proï¬tot elsË sorban a gyakran egyÂ¨ tt aa o a ee e u e e o u vÂ´ sÂ´ rolt termÂ´ kek, termÂ´ khalmazok jelentik, Â´gy ezek kinyerÂ´ se jelentette az elsË lÂ´ pÂ´ st a feladat megaa e e Ä± e o e e oldÂ´ sÂ´ nÂ´ l. aa a Egyes alkalmazÂ´ sokban a gyakori rÂ´ szstruktÂ´ rÂ´ k, gyakori mintÂ´ k meghatÂ´ rzÂ´ sÂ´ nÂ´ l elemhalmazok a e ua a a aa a helyett sorozatok, gyÂ¨ keres fÂ´ k, cÂ´mkÂ´ zett grÂ´ fok vagy bool-formulÂ´ kat kerestek. A kÂ¨ vetkezË feo a Ä± e a a o o jezetben bemutatjuk a gyakori mintÂ´ k bÂ´ nyÂ´ szatÂ´ nak absztrakt modelljÂ´ t, majd egyesÂ´ vel vesszÂ¨ k a a a a a e e u kÂ¨ lÂ¨ nbÂ¨ zË tÂ´pusÂ´ mintÂ´ kat es megvizsgÂ´ ljuk, hogy milyen technikÂ´ k alkalmazhatÂ´ k. uo o o Ä± u a Â´ a a o A gyakori elemhalmazok bÂ´ nyÂ´ szata nagyon nÂ´ pszerË kutatÂ´ si terÂ¨ let. A publikÂ´ lt algoritmusoka a e u a u a kal kÂ¨ nyveket lehetne megtÂ¨ lteni. Ebben a jegyzetben csak a leghÂ´resebb algoritmusokat es otleteket o o Ä± Â´ Â¨ ismertetjÂ¨ k. u

4.1. A gyakori elemhalmaz fogalma
Legyen I = {i1 , i2 , . . . , im } elemek halmaza es T = t1 , . . . , tn az I hatvÂ´ nyhalmaza feÂ´ a lett ertelmezett sorozat, azaz t j âŠ† I . A T sorozatot bemeneti sorozatnak hÂ´vjuk, amelynek Â´ Ä± t j elemei a tranzakciÂ´ k. Az I âŠ† I elemhalmaz tÂ´ mogatottsÂ´ ga (jelÂ¨ lÂ´ sben supp(I)) mego a a oe egyezik azon tranzakciÂ´ k szÂ´ mÂ´ val, amelyeknek rÂ´ szhalmaza az I. Az I gyakori, amennyiben o a a e tÂ´ mogatottsÂ´ ga nem kisebb egy elË re megadott konstansnÂ´ l, amelyet hagyomÂ´ nyosan min suppa a o a a pal jelÂ¨ lÂ¨ nk, es tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ bnek hÂ´vunk. A gyakori elemhalmazok keresÂ´ se sorÂ´ n ou Â´ a a u o Ä± e a adott egy I elemhalmaz, T bemeneti sorozat, min supp tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ b, feladatunk mega a u o hatÂ´ rozni a gyakori elemhalmazokat es azok tÂ´ mogatottsÂ´ gÂ´ t. Az egyszerË sÂ´ g kedvÂ´ ert a halmazt a Â´ a a a ue eÂ´ jelÂ¨ lË kapcsos zÂ´ rÂ´ jeleket (sË t az elemek hatÂ´ rolÂ´ vesszË t) gyakran elhagyjuk, tehÂ´ t pÂ´ ldÂ´ ul az oo ao o a o o a e a {A, C, D}, {B, C, E}, {A, B, C, E}, {B, E}, {A, B, C, E} sorozatot ACD, BCE, ABCE, BE, ABCE formÂ´ ban Â´rjuk. a Ä± Az altalÂ´ nossÂ´ g megsÂ´ rtÂ´ se nÂ´ lkÂ¨ l feltehetjÂ¨ k, hogy az I elemein tudunk egy rendezÂ´ st deï¬niÂ´ lni, Â´ a a e e e u u e a es a mintÂ´ k illetve a tranzakciÂ´ k elemeit minden esetben nagysÂ´ g szerint nÂ¨ vË sorrendben tÂ´ roljuk. Â´ a o a o o a Ezen rendezÂ´ s szerinti lexikograï¬kusan tudjuk rendezni az azonos mÂ´ retË halmazokat. e e u A keresÂ´ si teret ugy kÂ´ pzelhetjÂ¨ k el, mint egy irÂ´ nyÂ´tott grÂ´ fot, amelynek csÂ´ csai az elemhalmae Â´ e u a Ä± a u zok, es az I1 -bË l el indul I2 -be, amennyiben I1 âŠ‚ I2 , es |I1 | + 1 = |I2 |. A keresÂ´ si tÂ´ r bejÂ´ rÂ´ sÂ´ n mindig Â´ o Â´ Â´ e e aaa ezen grÂ´ f egy rÂ´ szÂ´ nek bejÂ´ rÂ´ sÂ´ t fogjuk erteni. TehÂ´ t pÂ´ ldÂ´ ul a keresÂ´ si tÂ´ r szÂ´ lessÂ´ gi bejÂ´ rÂ´ sa ezen a e e aaa Â´ a e a e e e e aa grÂ´ f szÂ´ lessÂ´ gi bejÂ´ rÂ´ sÂ´ t jelenti. a e e aaa 49

4. FEJEZET. GYAKORI ELEMHALMAZOK

50

Elterjedt, hogy a tÂ´ mogatottsÂ´ g helyett gyakorisagot, a tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ b helyett gyakorisagi a a a a u o Â´ Â´ kÂ¨ szÂ¨ bÂ¨ t hasznÂ´ lnak, melyeket f req(I)-vel, illetve min freq-kel jelÂ¨ lnek. Az I elemhalmaz gyakou o o a o risÂ´ gÂ´ n a supp(I)/|T | hÂ´ nyadost ertjÂ¨ k. a a a Â´ u A gyakorlatban elË fordulÂ´ adatbÂ´ zisokban nem ritka, hogy az elemek szÂ´ ma 10 5 âˆ’ 106 , a tranzo o a a akciÂ´ kÂ´ pedig 109 âˆ’ 1010 . ElmÂ´ letileg mÂ´ r az eredmÂ´ ny kiÂ´rÂ´ sa is az I elemszÂ´ mÂ´ ban exponenciÂ´ lis o e e a e Ä±a a a a lehet, hiszen elË fordulhat, hogy I minden rÂ´ szhalmaza gyakori. A gyakorlatban a maximÂ´ lis mÂ´ retË o e a e u gyakori elemhalmaz mÂ´ rete |I |-nÂ´ l jÂ´ val kisebb (legfeljebb 20-30). Ezen kÂ´vÂ¨ l minden tranzakciÂ´ vie e o Ä± u o szonylag kicsi, azaz |t j | |I |. A keresÂ´ si tÂ´ r tehÂ´ t nagy, ami azt jelenti, hogy az egyszerË nyers erË e e a u o mÂ´ dszerek (hatÂ´ rozzuk meg minden elemhalmaz tÂ´ mogatottsÂ´ gÂ´ t, majd vÂ´ logassuk ki a gyakoriakat) o a a a a a elfogadhatatlanul lassan futnÂ´ nak. a A kÂ´ sË bbiekben gyakran hasznÂ´ ljuk majd tranzakciÂ´ k esetÂ´ n a szË rtâ€ jelzË t. Egy tranzakciÂ´ szË rt eo a o e u o o u â€ tranzakciÂ´ jÂ´ t ugy kaphatjuk meg, ha tÂ¨ rÂ¨ ljÂ¨ k belË le a ritka elemeket. A szË rt tranzakciÂ´ k minden inoa Â´ oo u o u o formÂ´ ciÂ´ t tartalmaznak a gyakori elemhalmazok kinyerÂ´ sÂ´ hez, ezÂ´ rt a legtÂ¨ bb algoritmus elsË lÂ´ pÂ´ se a o ee e o o e e a gyakori elemek meghatÂ´ rozÂ´ sa, majd a szË rt tranzakciÂ´ k elË allÂ´tÂ´ sa. EzutÂ´ n az eredeti adatbÂ´ zist a a u o oÂ´ Ä± a a a nem hasznÂ´ ljÂ´ k tÂ¨ bbÂ´ . a a o e A bemenetet illetË en hÂ´ rom adattÂ´ rolÂ´ si mÂ´ dot szoktak elkÂ¨ lÂ¨ nÂ´teni. Horizont alis adatbÂ´ zisrÂ´ l o a a a o uo Ä± a o Â´ beszÂ´ lÂ¨ nk, ha a tranzakciÂ´ kat azonosÂ´tÂ´ val lÂ´ tjuk el, es minden azonosÂ´tÂ´ hoz tÂ´ roljuk a tranzakciÂ´ ban eu o Ä±o a Â´ Ä±o a o talÂ´ lhatÂ´ elemeket. VertikÂ´ lis adatbÂ´ zisnÂ´ l minden elemhez tÂ´ roljuk az elemet tartalmazÂ´ tranzaka o a a a a o ciÂ´ k azonosÂ´tÂ´ it (sorszÂ´ mÂ´ t). A vertikÂ´ lis tÂ´ rolÂ´ s nagy elË nye, hogy gyorsan megkaphatjuk egy elemo Ä±o a a a a a o halmaz fedÂ´ sÂ´ t (az elemekhez tartozÂ´ kosarak metszetÂ´ t kell kÂ´ pezni), amibË l kÂ¨ zvetlen adÂ´ dik a ee o e e o o o tÂ´ mogatottsÂ´ g. Mind a horizontÂ´ lis, mind a vertikÂ´ lis abrÂ´ zolÂ´ si mÂ´ dnÂ´ l hasznÂ´ lhatunk az elemek a a a a Â´ a a o a a vagy tranzakciÂ´ k felsorolÂ´ sa helyett rÂ¨ gzÂ´tett szÂ´ lessÂ´ gË bitvektorokat. Az i-edik elem (tranzakciÂ´ ) o a o Ä± e e u o meglÂ´ tÂ´ t az i-edik pozÂ´ciÂ´ ban szereplË 1-es jelzi. ee Ä± o o tranzakciÂ´ o 1 2 elemhalmaz C A,B,C elem A B C tranzakciÂ´ halmaz o 2 2 1,2 tranzakciÂ´ o 1 2 2 2 elem C A B C

4.1. tÂ´ blÂ´ zat. HorizontÂ´ lis-, vertikÂ´ lis- es relÂ´ ciÂ´ s tÂ´ rolÂ´ si mÂ´ d a a a a Â´ a o a a o Tudjuk, hogy egy tranzakciÂ´ ban vÂ´ ltozÂ´ szÂ´ mÂ´ elem lehet (Â´ s fordÂ´tva : egy elem vÂ´ ltozÂ´ szÂ´ mÂ´ o a o a u e Ä± a o a u tranzakciÂ´ ban szerepelhet). A legtÂ¨ bb mai adatbÂ´ zis relaciÂ´ s tÂ´ blÂ´ k formÂ´ jÂ´ ban van elmentve, ameo o a aa Â´ o a a lyekben csak rÂ¨ gzÂ´tett szÂ´ mÂ´ attribÂ´ tum szerepelhet. A valÂ´ sÂ´ gban ezÂ´ rt a tranzakciÂ´ k kÂ´ t atto Ä± a u u oa e o e ribÂ´ tummal rendelkezË relÂ´ ciÂ´ s tÂ´ bla formÂ´ jÂ´ ban talÂ´ lhatÂ´ k, ahol az elsË attribÂ´ tum a tranzakciÂ´ t, u o a o a aa a o o u o a mÂ´ sodik pedig az elemet adja meg (pontosabban a tranzakciÂ´ k es az elemek azonosÂ´tÂ´ it). A hÂ´ rom a o Â´ Ä±o a tÂ´ rolÂ´ si mÂ´ dszerre mutatnak pÂ´ ldÂ´ t a 4.1 tÂ´ blÂ´ zatok. a a o e a a a Â´ a A bemenetet elemhalmazok sorozatakÂ´ nt deï¬niÂ´ ltuk. AbrÂ´ zoljuk ezt, mint G = (I, T, R) e a irÂ´ nyÂ´tatlan, pÂ´ ros grÂ´ f, vagy mint B binÂ´ ris mÂ´ trix. Ha a t tranzakciÂ´ tartalmazza az i elemet, aka Ä± a a a a o kor es csak akkor az (i, t) eleme R-nek. Vagy mÂ´ trix esetÂ´ n a t sorÂ´ nak i eleme 1 (kÂ¨ lÂ¨ nben 0). A Â´ a e a uo ACD, BCE, ABCE, BE, ABCE bemenethez tartozÂ´ grÂ´ f es binÂ´ ris mÂ´ trix a 4.1, o a Â´ a a 4.2 abrÂ´ n lÂ´ thatÂ´ . Â´ a a o A bemeneti adatot szoktÂ´ k a sË rË (dense) illetve a ritka (sparse) jelzË vel illetni, amellyel a a uu o binÂ´ ris mÂ´ trixban talÂ´ lhatÂ´ 1-esek szÂ´ mÂ´ ra utalnak. VÂ´ sÂ´ rlÂ´ i kosarakat abrÂ´ zolÂ´ mÂ´ trix tipikusan rita a a o a a aa o Â´ a o a

4. FEJEZET. GYAKORI ELEMHALMAZOK 1 2 3 4 5 A B 1 1 1 1 1 1 1 C 1 1 1 1 D 1 E 1 1 1 1

51

A

B

C

D

E

1 2 3 4 5

4.1. abra. GrÂ´ fos abrÂ´ zolÂ´ si mÂ´ d Â´ a Â´ a a o

4.2. abra. BinÂ´ ris mÂ´ trixos abrÂ´ zolÂ´ si mÂ´ d Â´ a a Â´ a a o

ka, ugyanis a kosarakban altalÂ´ ban jÂ´ val kevesebb termÂ´ k van (50-100), mint az osszes termÂ´ k szÂ´ ma Â´ a o e Â¨ e a (10 000-100 000). A tranzakciÂ´ k szÂ´ ma altalÂ´ ban nagy, de a mai tÂ´ rolÂ´ kapacitÂ´ sok mellett, mÂ´ g egÂ´ szen nagy o a Â´ a a o a e e adatbÂ´ zisok is elfÂ´ rnek a memÂ´ riÂ´ ban. Gondoljuk meg pÂ´ ldÂ´ ul, hogy egy 10 7 tranzakciÂ´ t tartalmazÂ´ a e o a e a o o adatbÂ´ zis csak 120 MB helyet kÂ´vÂ´ n, amennyiben a tranzakciÂ´ k atlagos mÂ´ rete 6 elem. LegtÂ¨ bbszÂ¨ r a Ä± a o Â´ e o o tehÂ´ t alkalmazhatÂ´ k azok az algoritmusok, amelyek feltÂ´ telezik, hogy a bemenet (vagy a szË rt tranza o e u akciÂ´ k) elfÂ´ rnek a memÂ´ riÂ´ ban. o e o a MielË tt bemutatjuk az APRIORI mÂ´ dszer elemhalmazok esetÂ´ n, gondolkozzunk el azon, vajon o o e mË kÂ¨ dne-e az alÂ´ bbi egyszerË algoritmus a gyakorlatban. Olvassuk be a hÂ´ ttÂ´ rtÂ´ rolÂ´ bÂ´ l az adatbÂ´ zis u o a u a e a o o a elsË blokkjÂ´ t, es vizsgÂ´ ljuk meg az elsË tranzakciÂ´ t. Ennek a t 1 tranzakciÂ´ nak az osszes rÂ´ szhalmazÂ´ t o a Â´ a o o o Â¨ e a tÂ´ roljuk el a memÂ´ riÂ´ ban es mindegyikhez rendeljÂ¨ nk egy szÂ´ mlÂ´ lÂ´ t 1 kezdeti ertÂ´ kkel. Az I elema o a Â´ u a ao Â´ e halmazhoz rendelt szÂ´ mlÂ´ lÂ´ fogja tÂ´ rolni I tÂ´ mogatottsÂ´ gÂ´ t. Az elsË tranzakciÂ´ feldolgozÂ´ sa utÂ´ n a ao a a a a o o a a vizsgÂ´ ljuk meg sorban a tÂ¨ bbit : a ti tranzakciÂ´ minden rÂ´ szelemhalmazÂ´ nak szÂ´ mlÂ´ lÂ´ jÂ´ t nÂ¨ veljÂ¨ k a o o e a a aoa o u eggyel, vagy vegyÂ¨ k fel a memÂ´ riÂ´ ba egy uj szÂ´ mlÂ´ lÂ´ val, amennyiben az eddig feldolgozott tranzaku o a Â´ a ao ciÂ´ ban mÂ´ g nem fordult elË . Az adatbÂ´ zis teljes vÂ´ gigolvasÂ´ sa utÂ´ n az osszes â€“ valahol elË fordulÂ´ â€“ o e o a e a a Â¨ o o elemhalmaz tÂ´ mogatottsÂ´ ga rendelkezÂ´ sÂ¨ nkre all, amibË l kÂ¨ nnyen megkaphatjuk a gyakoriakat. a a eu Â´ o o LÂ´ thatÂ´ , hogy ennÂ´ l az egyszerË algoritmusnÂ´ l IO szempontjÂ´ bÂ´ l gyorsabbat nem lehet a o e u a a o talÂ´ lni, mert az adatbÂ´ zis egyszeri vÂ´ gigolvasÂ´ sa mindenkÂ´ ppen szÂ¨ ksÂ´ ges a tÂ´ mogatottsÂ´ g mega a e a e u e a a hatÂ´ rozÂ´ sÂ´ hoz es ennÂ´ l az algoritmusnÂ´ l elÂ´ g is. A gyakorlatban mÂ´ gsem hasznÂ´ ljÂ´ k ezt a gyors es a aa Â´ e a e e a a Â´ egyszerË algoritmust ? Ennek oka, hogy az eletben elË fordulÂ´ adatbÂ´ zisokban nem ritka, hogy valau Â´ o o a melyik tranzakciÂ´ sok elemet tartalmaz. Egy atlagos szupermarketben mindennapos, hogy valaki 60 o Â´ kÂ¨ lÂ¨ nbÂ¨ zË elemet vÂ´ sÂ´ rol. Ekkor csak a szÂ´ mlÂ´ lÂ´ k mintegy 16 ezer TB-ot foglalnÂ´ nak a memÂ´ riÂ´ bÂ´ l, uo o o aa a ao a o a o amennyiben a szÂ´ mlÂ´ lÂ´ k 4 byte-osak. A szÂ´ mlÂ´ lÂ´ kat mindenkÂ´ ppen a memÂ´ riÂ´ ban szeretnÂ´ nk tartaa ao a ao e o a e ni, hogy elkerÂ¨ ljÂ¨ k a folyamatos swappelÂ´ st, hiszen egy uj tranzakciÂ´ vizsgÂ´ latÂ´ nÂ´ l nem tudjuk elË re, u u e Â´ o a a a o hogy melyik szÂ´ mlÂ´ lÂ´ t kell nÂ¨ velni. a ao o Abban az esetben, ha biztosan tudjuk, hogy a tranzakciÂ´ k egyike sem tartalmaz sok elemet, vagy o az adatbÂ´ zis binÂ´ ris ertÂ´ keket tartalmazÂ´ mÂ´ trix formÂ´ jÂ´ ban adott, ahol az oszlopok (attribÂ´ tumok) a a Â´ e o a aa u szÂ´ ma kicsi, akkor a fenti algoritmus hatÂ´ konyan hasznÂ´ lhatÂ´ . a e a o A fenti algoritmus kis mÂ´ dosÂ´tÂ´ sÂ´ t javasoltÂ´ k [11]-ban. EgyrÂ´ szt csak olyan elemhalmazokat o Ä±a a a e vizsgÂ´ ltak, amelyek mÂ´ rete nem halad meg egy elË re megadott korlÂ´ tot, mÂ´ srÂ´ szrË l a vizsgÂ´ lt elema e o a a e o a halmazokat es szÂ´ mlÂ´ lÂ´ ikat â€“ a gyors visszakeresÂ´ s erdekÂ´ ben â€“ szÂ´ fÂ´ ban tÂ´ roltÂ´ k. A mÂ´ dszernek kÂ´ t Â´ a ao e Â´ e oa a a o e sÂ´ lyos hÂ´ trÂ´ nya van : nem teljes (az algoritmus nem talÂ´ lja meg azokat az elemhalmazokat, amelyek u a a a mÂ´ rete nagyobb az elË re megadott kÂ¨ szÂ¨ bnÂ´ l), tovÂ´ bbÂ´ tÂ´ lsÂ´ gosan nagy a memÂ´ riaigÂ´ nye (sok lehet e o u o e a a u a o e a hamis jelÂ¨ lt). o Amennyiben az adatbÂ´ zisunk kicsi, akkor mÂ´ g a fenti egyszerË algoritmusokat sem kell mega e u programoznunk, mert egy teljesen szabvÂ´ nyos adatbÂ´ zis-lekÂ´ rdezË nyelv segÂ´tsÂ´ gÂ´ vel megkaphatjuk a a e o Ä± e e a gyakori elemhalmazokat. Az alÂ´ bbi SQL parancs a gyakori elempÂ´ rokat adja eredmÂ´ nyÂ¨ l. a a e u

4. FEJEZET. GYAKORI ELEMHALMAZOK

52

SELECT I.elem,J.elem, COUNT(I.tranzakciÂ´) o FROM tranzakciÂ´k I, tranzakciÂ´k J o o WHERE I.tranzakciÂ´=J.tranzakciÂ´ AND I.elem<J.elem o o GROUP BY I.elem, J.elem HAVING COUNT(I.tranzakciÂ´) >= min_supp o

4.3. abra. SQL utasÂ´tÂ´ s gyakori elempÂ´ rok kinyerÂ´ sÂ´ hez Â´ Ä±a a ee LÂ´ tnunk kell, hogy a fenti parancs az osszekapcsolÂ´ s (FROM mezË ben kÂ´ t tÂ´ bla) mË velet miatt a Â¨ a o e a u nem fog mË kÂ¨ dni, ha az adatbÂ´ zis mÂ´ rete tÂ´ l nagy. u o a e u A kÂ¨ vetkezË kben bemutatjuk a hÂ´ rom leghÂ´resebb gyakori elemhalmazokat kinyerË (GYEK) alo o a Ä± o goritmust. MindhÂ´ rman az ures mintÂ´ bÂ´ l indulnak ki. Az algoritmusok egy adott fÂ´ zisÂ´ ban jel oltnek a Â¨ a o a a Â¨ hÂ´vjuk azokat az elemhalmazokat, amelyek tÂ´ mogatottsÂ´ gÂ´ t meg akarjuk hatÂ´ rozni. Az algoritmus Ä± a a a a akkor teljes, ha minden gyakori elemhalmazt megtalÂ´ l es helyes, ha csak a gyakoriakat talÂ´ lja meg. a Â´ a MindhÂ´ rom algoritmus hÂ´ rom lÂ´ pÂ´ st ismÂ´ tel. ElË szÂ¨ r jelÂ¨ lteket allÂ´tanak elË , majd meghatÂ´ rozzÂ´ k a a e e e o o o Â´ Ä± o a a a jelÂ¨ ltek tÂ´ mogatottsÂ´ gÂ´ t, vÂ´ gÂ¨ l kivÂ´ logatjÂ´ k a jelÂ¨ ltek kÂ¨ zÂ¨ l a gyakoriakat. TermÂ´ szetesen az egyes o a a a e u a a o o u e algoritmusok kÂ¨ lÂ¨ nbÂ¨ zË mÂ´ don jÂ´ rjÂ´ k be a keresÂ´ si teret (az osszes lehetsÂ´ ges elemhalmazt), allÂ´tjÂ´ k uo o o o a a e Â¨ e Â´ Ä± a elË a jelÂ¨ lteket, es kÂ¨ lÂ¨ nbÂ¨ zË mÂ´ don hatÂ´ rozzÂ´ k meg a tÂ´ mogatottsÂ´ gokat. o o Â´ uo o o o a a a a Az altalÂ´ nossÂ´ g megsÂ´ rtÂ´ se nÂ´ lkÂ¨ l feltehetjÂ¨ k, hogy az I elemein tudunk deï¬niÂ´ lni egy teljes renÂ´ a a e e e u u a dezÂ´ st, es a jelÂ¨ ltek, illetve a tranzakciÂ´ k elemeit ezen rendezÂ´ s szerint tÂ´ roljuk. MÂ´ s szÂ´ val az eleme Â´ o o e a a o halmazokat sorozatokkÂ´ alakÂ´tjuk. Egy sorozat -elemË preï¬xÂ´ n a sorozat elsË elemÂ´ bË l kÂ´ pzett a Ä± u e o e o e rÂ´ szsorozatÂ´ t ertjÂ¨ k. A pÂ´ ldÂ´ kban majd, amennyiben a rendezÂ´ sre nem tÂ´ rÂ¨ nk ki kÂ¨ lÂ¨ n, az abÂ´ cÂ´ szee a Â´ u e a e eu uo Â´ e e rinti sorrendet hasznÂ´ ljuk. A GYEK algoritmusok altalÂ´ ban erzÂ´ kenyek a hasznÂ´ lt rendezÂ´ sre. EzÂ´ rt a Â´ a Â´ e a e e minden algoritmusnÂ´ l megvizsgÂ´ ljuk, hogy milyen rendezÂ´ st cÂ´ lszerË hasznÂ´ lni annak erdekÂ´ ben, a a e e u a Â´ e hogy a futÂ´ si idË , vagy a memÂ´ riaszÂ¨ ksÂ´ glet a lehetË legkisebb legyen. a o o u e o A jelÂ¨ lt-elË allÂ´tÂ´ s ismÂ´ tlÂ´ s nÂ´ lkÂ¨ li, amennyiben nem allÂ´tja elË ugyanazt a jelÂ¨ ltet tÂ¨ bbfÂ´ le mÂ´ don. o oÂ´ Ä± a e e e u Â´ Ä± o o o e o Ez a hatÂ´ konysÂ´ g miatt fontos, ugyanis ismÂ´ tlÂ´ ses jelÂ¨ lt-elË allÂ´tÂ´ s esetÂ´ ben minden jelÂ¨ lt elË allÂ´tÂ´ sa e a e e o oÂ´ Ä± a e o oÂ´ Ä± a utÂ´ n ellenË rizni kellene, hogy nem allÂ´tottuk-e elË mÂ´ r korÂ´ bban. Ha ezt nem tesszÂ¨ k, akkor felesa o Â´ Ä± o a a u legesen kÂ¨ tÂ¨ nk le erË forrÂ´ sokat a tÂ´ mogatottsÂ´ g ismÂ´ telt meghatÂ´ rozÂ´ sÂ´ nÂ´ l. MindhÂ´ rom ismertetett ou o a a a e a aa a a algoritmusban a jelÂ¨ ltek elË allÂ´tÂ´ sa ismÂ´ tlÂ´ s nÂ´ lkÂ¨ li lesz, amit a rendezÂ´ ssel tudunk garantÂ´ lni. o oÂ´ Ä± a e e e u e a Az algoritmusok pszeudokÂ´ djaiban GY -vel jelÂ¨ ljÂ¨ k a gyakori elemhalmazok halmazÂ´ t, J-vel o o u a jelÂ¨ ltekÂ´ t es j.szÂ´ mlÂ´ lÂ´ -val a j jelÂ¨ lt szÂ´ mlÂ´ lÂ´ jÂ´ t. Az olvashatÂ´ bb kÂ´ dok erdekÂ´ ben feltesszÂ¨ k, hogy o e Â´ a ao o a aoa o o Â´ e u minden szÂ´ mlÂ´ lÂ´ kezdeti ertÂ´ ke nulla, es az olyan halmazok, amelyeknek nem adunk kezdeti ertÂ´ ket a ao Â´ e Â´ Â´ e (pÂ´ ldÂ´ ul GY ), nem tartalmaznak kezdetben egyetlen elemet sem. e a

4.2. Az APRIORI algoritmus
Az A PRIORI algoritmus az egyik legelsË GYEK algoritmus. SzÂ´ lessÂ´ gi bejÂ´ rÂ´ st valÂ´ sÂ´t meg, ami o e e aa oÄ± azt jelenti, hogy a legkisebb mintÂ´ bÂ´ l (ami az ures halmaz) kiindulva szintenkÂ´ nt halad elË re a naa o Â¨ e o gyobb mÂ´ retË gyakori elemhalmazok meghatÂ´ rozÂ´ sÂ´ hoz. A kÂ¨ vetkezË szinten (iterÂ´ ciÂ´ ban) az eggyel e u a aa o o a o nagyobb mÂ´ retË elemhalmazokkal foglalkozik. Az iterÂ´ ciÂ´ k szÂ´ ma legfeljebb eggyel tÂ¨ bb, mint a e u a o a o legnagyobb gyakori elemhalmaz mÂ´ rete. e A jelÂ¨ ltek deï¬niÂ´ lÂ´ sÂ´ nÂ´ l a kÂ¨ vetkezË egyszerË tÂ´ nyt hasznÂ´ lja fel : Gyakori elemhalmaz minden o aa a a o o u e a

4. FEJEZET. GYAKORI ELEMHALMAZOK

53

rÂ´ szhalmaza gyakori. Az allÂ´tÂ´ st indirekten nÂ´ zve elmondhatjuk, hogy egy elemhalmaz biztosan nem e Â´ Ä±a e gyakori, ha van ritka rÂ´ szhalmaza. Ennek alapjÂ´ n ne legyen jelÂ¨ lt azon elemhalmaz, amelynek van e a o ritka rÂ´ szhalmaza. Az A PRIORI algoritmus ezÂ´ rt epÂ´tkezik lentrË l. Egy adott iterÂ´ ciÂ´ ban csak olyan e e Â´ Ä± o a o jelÂ¨ ltet veszÂ¨ nk fel, amelynek osszes valÂ´ di rÂ´ szhalmazÂ´ rÂ´ l tudjuk, hogy gyakori. Az algoritmus ono u Â¨ o e ao nan kapta a nevÂ´ t, hogy az -elemË jelÂ¨ lteket a bemeneti sorozat -edik atolvasÂ´ sÂ´ nak megkezdÂ´ se e u o Â´ aa e elË tt (a priori) allÂ´tja elË . Az -elemË jelÂ¨ ltek halmazÂ´ t J -lel, az -elemË gyakori elemhalmazokat o Â´ Ä± o u o a u pedig GY -lel jelÂ¨ ljÂ¨ k. o u Algorithm 1 Apriori Require: T : tranzakciÂ´ k sorozata, o min supp : tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ b, a a u o â†0 / J â† {0} while |J | = 0 do for all t âˆˆ T do for all j âˆˆ J , j âŠ† t do j.szÂ´ mlÂ´ lÂ´ â† j.szÂ´ mlÂ´ lÂ´ +1 a ao a ao end for end for for all j âˆˆ J do if j.szÂ´ mlÂ´ lÂ´ â‰¥ min supp then a ao GY â† GY âˆª { j} end if end for GY â† GY âˆª GY Â¨ ËÂ´ I Â´ J +1 â† J EL OLT- EL O ALLÂ´T AS (GY ) â† +1 end while return GY A kezdeti ertÂ´ kek beÂ´ llÂ´tÂ´ sa utÂ´ n egy ciklus kÂ¨ vetkezik, amely akkor er vÂ´ get, ha nincsen egyetÂ´ e a Ä±a a o Â´ e len -elemË jelÂ¨ lt sem. A cikluson belÂ¨ l elË szÂ¨ r meghatÂ´ rozzuk a jelÂ¨ ltek tÂ´ mogatottsÂ´ gÂ´ t. Ehhez u o u o o a o a a a egyesÂ´ vel vesszÂ¨ k a tranzakciÂ´ kat, es azon jelÂ¨ ltek szÂ´ mlÂ´ lÂ´ jÂ´ t nÂ¨ veljÂ¨ k eggyel, amelyeket tare u o Â´ o a aoa o u talmaz a vizsgÂ´ lt tranzakciÂ´ . Ha rendelkezÂ´ sre allnak a tÂ´ mogatottsÂ´ gok, akkor a jelÂ¨ ltek kÂ¨ zÂ¨ l a o e Â´ a a o o u kivÂ´ logathatjuk a gyakoriakat. a

4.2.1. JelÂ¨ ltek elË allÂ´tÂ´ sa o oÂ´ Ä± a
Â¨ ËÂ´ I Â´ u A J EL OLT- EL O ALLÂ´T AS fÂ¨ ggvÂ´ ny az -elemË gyakori elemhalmazokbÂ´ l ( + 1)-elemË jelÂ¨ lteket e u o u o allÂ´t elË . Azok es csak azok az elemhalmazok lesznek jelÂ¨ ltek, amelyek minden rÂ´ szhalmaza gyakori. Â´ Ä± o Â´ o e A jelÂ¨ ltek elË allÂ´tÂ´ sa sorÂ´ n olyan -elemË , gyakori I1 , I2 elemhalmaz pÂ´ rokat keresÂ¨ nk, amelyekre o oÂ´ Ä± a a u a u igaz, hogy â€“ I1 lexikograï¬kusan megelË zi I2 -t, o â€“ I1 -bË l a legnagyobb elem tÂ¨ rlÂ´ sÂ´ vel ugyanazt az elemhalmazt kapjuk, mintha az I2 -bË l o o ee o tÂ¨ rÂ¨ lnÂ´ nk a legnagyobb elemet. oo e

4. FEJEZET. GYAKORI ELEMHALMAZOK

54

Ha a feltÂ´ teleknek megfelelË pÂ´ rt talÂ´ lunk, akkor kÂ´ pezzÂ¨ k a pÂ´ r uniÂ´ jÂ´ t, majd ellenË rizzÂ¨ k, hogy e o a a e u a oa o u a kapott elemhalmaznak minden valÂ´ di rÂ´ szhalmaza gyakori-e. A tÂ´ mogatottsÂ´ g anti-monotonitÂ´ sa o e a a a miatt szÂ¨ ksÂ´ gtelen az osszes valÂ´ di rÂ´ szhalmazt megvizsgÂ´ lni ; ha mind az + 1 darab -elemË u e Â¨ o e a u rÂ´ szhalmaz gyakori, akkor az osszes valÂ´ di rÂ´ szhalmaz is gyakori. Az I1 , I2 halmazokat a jelÂ¨ lt gee Â¨ o e o nerÂ´ torainak szokÂ´ s hÂ´vni. a a Ä± 4.1. pÂ´ lda. Legyenek a 3-elemË gyakori elemhalmazok a kÂ¨ vetkezË k : GY3 = {ABC, ABD, e u o o ACD, ACE, BCD}. Az ABC es ABD elemhalmazok megfelelnek a feltÂ´ telnek, ezÂ´ rt kÂ´ pezzÂ¨ k az e e e u Â´ uniÂ´ jukat. Mivel ABCD minden hÂ´ romelemË rÂ´ szhalmaza a GY3 -nak is eleme, az ABCD jelÂ¨ lt lesz. o a u e o Az ACD, ACE pÂ´ r is megfelel a kÂ´ t feltÂ´ telnek, de uniÂ´ juknak van olyan rÂ´ szhalmaza (ADE), amely a e e o e nem gyakori. Az A PRIORI a kÂ¨ vetkezË iterÂ´ ciÂ´ ban tehÂ´ t mÂ´ r csak egyetlen jelÂ¨ lt tÂ´ mogatottsÂ´ gÂ´ t o o a o a a o a a a hatÂ´ rozza meg. a A fenti mÂ´ dszer csak akkor alkalmazhatÂ´ , ha > 0. Az egyelemË jelÂ¨ ltek elË allÂ´tÂ´ sa egyszerË : o o u o oÂ´ Ä± a u minden egyelemË halmaz jelÂ¨ lt, amennyiben az ures elemhalmaz gyakori (|T | â‰¥ min supp). Ez osszu o Â¨ Â¨ hangban all azzal, hogy akkor lehet egy elemhalmaz jelÂ¨ lt, ha minden rÂ´ szhalmaza gyakori. Â´ o e

4.2.2. JelÂ¨ ltek tÂ´ mogatottsÂ´ gÂ´ nak meghatÂ´ rozÂ´ sa o a a a a a
A jelÂ¨ ltek elË fordulÂ´ sait ossze kell szÂ´ molni. Ehhez egyesÂ´ vel vizsgÂ´ ljuk a kosarakat, es azon o o a Â¨ a e a Â´ jelÂ¨ ltek szÂ´ mlÂ´ lÂ´ it nÂ¨ veljÂ¨ k eggyel, amelyeket tartalmaz a kosÂ´ r. o a ao o u a Â´ Ë o 1- es 2-elemu jelÂ¨ ltek tÂ´ mogatottsÂ´ ga a a KÂ¨ nnyË dolgunk van, amennyiben a jelÂ¨ ltek mÂ´ rete 1 vagy 2. A feladatot megoldhatjuk egy olyan o u o e lista, illetve fÂ´ ltÂ¨ mb segÂ´tsÂ´ gÂ´ vel, amelyekben a szÂ´ mlÂ´ lÂ´ kat tÂ´ roljuk. Az elemek tÂ´ mogatottsÂ´ gÂ´ nak e o Ä± e e a ao a a a a meghatÂ´ rozÂ´ sÂ´ nÂ´ l a lista j-edik eleme tÂ´ rolja a j-edik elem szÂ´ mlÂ´ lÂ´ jÂ´ t. A tranzakciÂ´ k fela aa a a a aoa o dolgozÂ´ sÂ´ nÂ´ l vÂ´ gigmegyÂ¨ nk a tranzakciÂ´ elemein es nÂ¨ veljÂ¨ k a megfelelË cellÂ´ kban talÂ´ lhatÂ´ aa a e u o Â´ o u o a a o szÂ´ mlÂ´ lÂ´ kat. a ao Az elsË vÂ´ gigolvasÂ´ s utÂ´ n kivÂ´ logathatjuk a gyakori elemeket. A tovÂ´ bbiakban mÂ´ r csak o e a a a a a ezekkel az elemekkel dolgozunk, Â´gy uj sorszÂ´ mokat adhatunk nekik a [1..|GY1 |] intervallumbÂ´ l Ä± Â´ a o (emlÂ´ keztetË ul GY j -vel jelÂ¨ ljÂ¨ k a j-elemË gyakori mintÂ´ kat). Az l es k-adik elemekbË l allÂ´ pÂ´ r e oÂ¨ o u u a Â´ o Â´ o a tÂ´ mogatottsÂ´ gÂ´ t a tÂ¨ mb l-edik sorÂ´ nak k âˆ’ l-adik eleme tÂ´ rolja (az altalÂ´ nossÂ´ g megsÂ´ rtÂ´ se nÂ´ lkÂ¨ l a a a o a a Â´ a a e e e u feltehetjÂ¨ k, hogy l < k). u Ha egy szÂ´ mlÂ´ lÂ´ 4 byte-ot foglal, akkor a tÂ¨ mb helyigÂ´ nye nagyjÂ´ bÂ´ l 4 Â· |GY1 | byte. Azon a ao o e a o 2 elempÂ´ rokhoz tartozÂ´ tÂ¨ mbelem ertÂ´ ke, amelyek sosem fordulnak elË egyÂ¨ tt, 0 lesz. Helyet taa o o Â´ e o u karÂ´thatunk meg, hogy ha csak akkor vesszÂ¨ k fel egy jelÂ¨ ltpÂ´ r szÂ´ mlÂ´ lÂ´ jÂ´ t, ha a pÂ´ rt legalÂ´ bb egy Ä± u o a a aoa a a tranzakciÂ´ tartalmazza [125]. A pÂ´ rok tÂ´ mogatottsÂ´ gÂ´ nak meghatÂ´ rozÂ´ sa kevesebb memÂ´ riÂ´ t fog o a a a a a a o a igÂ´ nyelni, de ezzel egyÂ¨ tt lassabb is lesz. e u Nagyobb elemhalmazok tÂ´ mogatottsÂ´ ga a a VizsgÂ´ ljuk meg rÂ´ szletesebben az 5. sort. Adott egy tranzakciÂ´ es -mÂ´ retË jelÂ¨ ltek egy halmaza. a e oÂ´ e u o Feladatunk meghatÂ´ rozni azon jelÂ¨ lteket, amelyek a tranzakciÂ´ rÂ´ szhalmazai. Megoldhatjuk ezt egya o o e szerË en ugy, hogy a jelÂ¨ lteket egyesÂ´ vel vesszÂ¨ k, es eldÂ¨ ntjÂ¨ k, hogy tartalmazza-e oket a tranzakciÂ´ . u Â´ o e u Â´ o u Ë o Rendezett halmazban rendezett rÂ´ szhalmaz keresÂ´ se elemi feladat. e e

4. FEJEZET. GYAKORI ELEMHALMAZOK 1 2 3 1 2 . . . . . 1 2 3 N-1 N supp( j)=vector[ j] |GY1 | âˆ’ 2 |GY1 | âˆ’ 1 supp({l, k})=tÂ¨ mb[l][k-l] o . . . ... ... |GY1 | âˆ’ 1

55

4.4. abra. AdatstruktÂ´ rÂ´ k az 1- es 2-elemË jelÂ¨ ltek tÂ´ mogatottsÂ´ gÂ´ nak meghatÂ´ rozÂ´ sÂ´ hoz. Â´ ua Â´ u o a a a a aa VegyÂ¨ nk fel kÂ´ t mutatÂ´ t, amelyek a kosÂ´ r, illetve u e o a a jelÂ¨ lt elemein fognak vÂ´ gighaladni. Kezdetben muo e kosÂ´ rmutatÂ´ a o tasson mindkÂ´ t mutatÂ´ az elemhalmazok elsË elemeire. e o o ? Amennyiben a kÂ´ t mutatÂ´ altal mutatott elemek mege o Â´ kosÂ´ r : A B C D E F G I a egyeznek, akkor lÂ´ ptessÂ¨ k mindkÂ´ t mutatÂ´ t a kÂ¨ vetkezË e u e o o o elemre. Ha a tranzakciÂ´ ban talÂ´ lhatÂ´ elem kisebb soro a o jelÂ¨ lt : B E G o szÂ´ mÂ´ , akkor csak a kosÂ´ r mutatÂ´ jÂ´ t lÂ´ ptessÂ¨ k, ellenkezË a u a oa e u o 6 esetben pedig alljunk meg ; ekkor a kosÂ´ r biztosan nem Â´ a tartalmazza a jelÂ¨ ltet. Ha a jelÂ¨ lt utolsÂ´ eleme is mego o o jelÂ¨ ltmutatÂ´ o o egyezik a kosÂ´ r valamelyik elemÂ´ vel, akkor a kosÂ´ r tara e a talmazza a jelÂ¨ ltet. o Ennek az egyszerË mÂ´ dszernek a hÂ´ trÂ´ nya, hogy sok jelÂ¨ lt esetÂ´ n lassÂ´ , hiszen annyiszor kell a u o a a o e u tranzakciÂ´ elemein vÂ´ gighaladni, amennyi a jelÂ¨ ltek szÂ´ ma. A gyorsabb mË kÂ¨ dÂ´ s erdekÂ´ ben a jelÂ¨ lteo e o a u o e Â´ e o ket szÂ´ fÂ´ ban vagy hash-fÂ´ ban (hash-tree) cÂ´ lszerË tÂ´ rolni. A szÂ´ fÂ´ t szokÂ´ s preï¬x-fÂ´ nak vagy lexikooa a e u a oa a a graï¬kus fÂ´ nak is hÂ´vni [3]. Az eredeti APRIORI implementÂ´ ciÂ´ ban hash-fÂ´ t alkalmaztak, azonban a Ä± a o a tesztek bizonyÂ´tjÂ´ k, hogy a szÂ´ fa gyorsabb mË kÂ¨ dÂ´ st eredmÂ´ nyez, mint a hash-fa. A hash-fa szÂ´ fÂ´ val Ä± a o u o e e oa valÂ´ helyettesÂ´tÂ´ sÂ´ rË l mÂ´ r a [122]-ban Â´rtak, ahol a szÂ´ fÂ´ t alkalmazÂ´ APRIORI algoritmust SEARo Ä±e eo a Ä± oa o nek neveztÂ´ k el. A tovÂ´ bbiakban a szÂ´ fÂ´ ban valÂ´ keresÂ´ st ismertetjÂ¨ k (a szÂ´ fÂ´ k felÂ´ pÂ´tÂ´ sÂ´ rË l a 2.8.1 e a oa o e u oa e Ä±e eo rÂ´ szben mÂ´ r szÂ´ ltunk). e a o A szÂ´ fa eleinek cÂ´mkÂ´ i elemek lesznek. Minden csÂ´ cs egy elemhalmazt reprezentÂ´ l, amelynek o Â´ Ä± e u a elemei a gyÂ¨ kÂ´ rbË l a csÂ´ csig vezetË ut eleinek cÂ´mkÂ´ ivel egyeznek meg. FeltehetjÂ¨ k, hogy az egy o e o u o Â´ Â´ Ä± e u csÂ´ csbÂ´ l indulÂ´ elek, tovÂ´ bbÂ´ az egy uton talÂ´ lhatÂ´ elek cÂ´mkÂ´ k szerint rendezve vannak (pl. legnau o oÂ´ a a Â´ a oÂ´ Ä± e gyobb elem az elsË helyen). A jelÂ¨ ltek szÂ´ mlÂ´ lÂ´ it a jelÂ¨ ltet reprezentÂ´ lÂ´ levÂ´ lhez rendeljÂ¨ k. A 4.5. o o a ao o ao e u abrÂ´ n egy szÂ´ fÂ´ t lÂ´ thatunk. Â´ a oa a A t tranzakciÂ´ ban az -elemË jelÂ¨ lteket ugy talÂ´ ljuk meg, hogy a jelÂ¨ lteket leÂ´rÂ´ fa gyÂ¨ kerÂ´ bË l o u o Â´ a o Ä±o o e o kiindulva, rekurzÂ´v mÂ´ don bejÂ´ runk bizonyos rÂ´ szfÂ´ kat. Ha egy d szintË belsË csÂ´ cshoz a tranzakciÂ´ Ä± o a e a u o u o j-edik elemÂ´ n keresztÂ¨ l jutunk, akkor azon elein keresztÂ¨ l lÂ´ pÂ¨ nk eggyel mÂ´ lyebb szintre, amelyeke u Â´ u e u e nek cÂ´mkÂ´ je megegyezik a tranzakciÂ´ j -edik elemÂ´ vel, ahol j < j â‰¤ |t|âˆ’ +d (ugyanis âˆ’d elemre Ä± e o e mÂ´ g szÂ¨ ksÂ´ g van ahhoz, hogy levÂ´ lbe erjÂ¨ nk). Ha ily mÂ´ don eljutunk egy szintË csÂ´ cshoz, az azt e u e e Â´ u o u u jelenti, hogy a csÂ´ cs altal reprezentÂ´ lt elemhalmazt tartalmazza t, Â´gy ennek a levÂ´ lnek a szÂ´ mlÂ´ lÂ´ jÂ´ t u Â´ a Ä± e a aoa kell nÂ¨ velnÂ¨ nk eggyel. o u A szÂ´ fÂ´ t preï¬x fÂ´ nak is szoktÂ´ k hÂ´vni, ami arra utal, hogy a kÂ¨ zÂ¨ s preï¬xeket csak egyszer tÂ´ rolja. oa a a Ä± o o a EttË l lesz gyorsabb a szÂ´ fÂ´ s tÂ´ mogatottsÂ´ g-meghatÂ´ rozÂ´ s a naiv mÂ´ dszernÂ´ l. A kÂ¨ zÂ¨ s preï¬xeket o oa a a a a o e o o

4. FEJEZET. GYAKORI ELEMHALMAZOK

56

A B C D C D

B

C D

4.5. abra. Az ABC, ABD, ACD, BCD jelÂ¨ lteket tÂ´ rolÂ´ szÂ´ fa. Â´ o a o o osszevonjuk, es csak egyszer foglalkozunk velÂ¨ k. Â¨ Â´ u A szÂ´ fa nagy elË nye a gyors tÂ´ mogatottsÂ´ g-meghatÂ´ rozÂ´ s mellett, hogy a jelÂ¨ lt-elË allÂ´tÂ´ st is o o a a a a o oÂ´ Ä± a tÂ´ mogatja. Tudjuk, hogy kÂ´ t gyakori elemhalmaz akkor lesz generÂ´ tor, ha a legnagyobb sorszÂ´ mÂ´ a e a a u elemÂ¨ k elhagyÂ´ sÂ´ val ugyanazt az elemhalmazt kapjuk, vagy mÂ´ s szavakkal, a kÂ´ t gyakori elemu aa a e halmaz âˆ’ 1 hosszÂ´ preï¬xei megegyeznek. A tÂ´ mogatottsÂ´ g-meghatÂ´ rozÂ´ sÂ´ ban hasznÂ´ lt szÂ´ fÂ´ t felu a a a aa a oa hasznÂ´ lhatjuk a kÂ¨ vetkezË iterÂ´ ciÂ´ s lÂ´ pÂ´ s jelÂ¨ ltjeinek az elË allÂ´tÂ´ sÂ´ ra, hiszen a szÂ´ fa tÂ´ rolja a jelÂ¨ lta o o a o e e o oÂ´ Ä± a a o a o elË allÂ´tÂ´ shoz szÂ¨ ksÂ´ ges gyakori elemhalmazokat. oÂ´ Ä± a u e Az egÂ´ sz algoritmus alatt tehÂ´ t egyetlen szÂ´ fÂ´ t tartunk karban, amely az algoritmus kezdetekor e a oa csak egy csÂ´ csbÂ´ l all (ez reprezentÂ´ lja az ures halmazt). A tÂ´ mogatottsÂ´ g-meghatÂ´ rozÂ´ s utÂ´ n tÂ¨ rÂ¨ ljÂ¨ k u o Â´ a Â¨ a a a a a oo u azon leveleket, amelyek szÂ´ mlÂ´ lÂ´ ja kisebb min supp-nÂ´ l. Az iterÂ´ ciÂ´ s lÂ´ pÂ´ s vÂ´ gÂ´ re kialakulÂ´ szÂ´ fa a ao a a o e e e e o o alapjÂ´ n elË allÂ´tjuk a jelÂ¨ lteket, amely sorÂ´ n a szÂ´ fa uj, eggyel mÂ´ lyebb szinten lÂ´ vË levelekkel bË vÂ¨ l. a oÂ´ Ä± o a o Â´ e e o o u A jelÂ¨ lt-elË allÂ´tÂ´ s sorÂ´ n arra is lehetË sÂ´ gÂ¨ nk van, hogy az elË zË iterÂ´ ciÂ´ ban gyakorinak talÂ´ lt elemo oÂ´ Ä± a a oe u o o a o a halmazokat es azok szÂ´ mlÂ´ lÂ´ it kiÂ´rjuk (a kimenetre vagy a hÂ´ ttÂ´ rtÂ´ rolÂ´ ra). Â´ a ao Ä± a e a o A 2.8.1 rÂ´ szben mÂ´ r volt arrÂ´ l szÂ´ , hogy az elemeken deï¬niÂ´ lt rendezÂ´ s milyen hatÂ´ ssal van a szÂ´ fa e a o o a e a o alakjÂ´ ra. Tapasztalatok alapjÂ´ n gyakorisÂ´ g szerint csÂ¨ kkenË rendezÂ´ s kisebb szÂ´ fÂ´ t eredmÂ´ nyez, mint a a a o o e oa e a gyakorisÂ´ g szerint nÂ¨ vekvË rendezÂ´ s, vagy mÂ´ s vÂ´ letlenszerË en megvÂ´ lasztott rendezÂ´ sek. Ennek a o o e a e u a e ellenÂ´ re olyan szÂ´ fÂ´ t cÂ´ lszerË alkalmazni, amelyben az elemeken ertelmezett rendezÂ´ s a gyakorisÂ´ g e oa e u Â´ e a szerint nÂ¨ vekvË sorrendnek felel meg. Ennek ugyanis kÂ´ t elË nye van. EgyrÂ´ szrË l a szÂ´ fa pontjai o o e o e o o kisebbek lesznek (kevesebb el indul ki belË lÂ¨ k), de ami mÂ´ g fontosabb, hogy a ritka elemek lesznek Â´ ou e kÂ¨ zel a gyÂ¨ kÂ´ rhez. A ritka elemekkel kevesebb kosÂ´ rbeli elem fog egyezni, ezÂ´ ltal a szÂ´ fa kisebb o o e a a o rÂ´ szÂ´ t jÂ´ rjuk be a tÂ´ mogatott jelÂ¨ ltek meghatÂ´ rozÂ´ sa sorÂ´ n. e e a a o a a a A szÂ´ fa hatÂ´ kony megvalÂ´ sÂ´tÂ´ sÂ´ nak rÂ´ szleteit es tovÂ´ bbi gyorsÂ´tÂ´ si otleteket a [20, 23, 58] o e o Ä±a a e Â´ a Ä±a Â¨ Â´rÂ´ sokban talÂ´ lhatunk. Egy â€“ kutatÂ´ si cÂ´ lokra szabadon felhasznÂ´ lhatÂ´ â€“ szÂ´ fa alapÂ´ APRIORI impÄ±a a a e a o o u lementÂ´ ciÂ´ letÂ¨ lthetË a a o o o http ://www.cs.bme.hu/~bodon/en/apriori oldalrÂ´ l. o

4.2.3. ZsÂ´ kutca nyesÂ´ s a e
SzÂ¨ ksÂ´ gtelen tÂ´ rolni azon csÂ´ csokat, amelyekbË l az osszes elÂ´ rhetË levelet tÂ¨ rÂ¨ ltÂ¨ k. Ezek ugyanis u e a u o Â¨ e o oo u lassÂ´tjÂ´ k a tÂ´ mogatottsÂ´ gok meghatÂ´ rozÂ´ sÂ´ t (mikÂ¨ zben szerepet nem jÂ´ tszanak benne) es feleslegesen Ä± a a a a aa o a Â´ foglaljÂ´ k a memÂ´ riÂ´ t. a o a

4. FEJEZET. GYAKORI ELEMHALMAZOK Â¨ FOLYT KOV.

57

4.2.4. A bemenet tÂ´ rolÂ´ sa a a
Amikor megvizsgÂ´ lunk egy kosarat annak erdekÂ´ ben, hogy eldÂ¨ ntsÂ¨ k mely jelÂ¨ lteket tartalmazza, a Â´ e o u o akkor az operÂ´ ciÂ´ s rendszer a hÂ´ ttÂ´ rtÂ´ rolÂ´ bÂ´ l bemÂ´ solja a tranzakciÂ´ t a memÂ´ riÂ´ ba. Ha van elÂ´ g hely a o a e a o o a o o a e a memÂ´ riÂ´ ban, akkor a tranzakciÂ´ ott is marad, es amikor ismÂ´ t szÂ¨ ksÂ´ g van rÂ´ , nem kell lassÂ´ IO o a o Â´ e u e a u mË veletet vÂ´ geznÂ¨ nk. A bemenetet tehÂ´ t szÂ¨ ksÂ´ gtelen explicit eltÂ´ rolnunk a memÂ´ riÂ´ ban, hiszen az u e u a u e a o a operÂ´ ciÂ´ s rendszer ezt megteszi helyettÂ¨ nk. SË t, ha a program eltÂ´ rolja a bemeneti adatot (pÂ´ ldÂ´ ul egy a o u o a e a listÂ´ ban), akkor a valÂ´ sÂ´ gban duplÂ´ n lesz eltÂ´ rolva. a oa a a A bemenet tÂ´ rolÂ´ sÂ´ nak vannak elË nyei is. PÂ´ ldÂ´ ul osszegyË jthetjÂ¨ k az azonos tranzakciÂ´ kat a aa o e a Â¨ u u o es ahelyett, hogy tÂ¨ bbszÂ¨ r hajtanÂ´ nk vÂ´ gre ugyanazon a tranzakciÂ´ n a tÂ´ mogatott jelÂ¨ ltek megÂ´ o o a e o a o hatÂ´ rozÂ´ sÂ´ t, ezt egyszer tesszÂ¨ k meg. SzÂ¨ ksÂ´ gtelen az eredeti tranzakciÂ´ kat tÂ´ rolni. Az elsË a aa u u e o a o vÂ´ gigolvasÂ´ s utÂ´ n rendelkezÂ´ sre allnak a gyakori elemek. A ritka elemek ugysem jÂ´ tszanak szeree a a e Â´ Â´ a pet, ezÂ´ rt elÂ´ g a tranzakciÂ´ knak csak a gyakori elemeit tÂ´ rolni. Ennek tovÂ´ bbi elË nye, hogy sokkal e e o a a o tÂ¨ bb azonos ,,szË rtâ€ tranzakciÂ´ lehet, ezÂ´ ltal tovÂ´ bb csÂ¨ kken a tÂ´ mogatott jelÂ¨ lteket keresË eljÂ´ rÂ´ s o u o a a o a o o aa meghÂ´vÂ´ sÂ´ nak szÂ´ ma. RÂ´ adÂ´ sul az -edik vÂ´ gigolvasÂ´ s sorÂ´ n tÂ¨ rÂ¨ lhetjÂ¨ k azokat a szË rt tranzakciÂ´ kat, Ä± aa a a a e a a oo u u o amelyek nem tartalmaznak egyetlen -elemË jelÂ¨ ltet sem. u o A szË rt tranzakciÂ´ kat cÂ´ lszerË olyan adatstruktÂ´ rÂ´ ban tÂ´ rolni, amit gyorsan fel lehet epÂ´teni (azu o e u ua a Â´ Ä± az gyorsan tudjuk beszÂ´ rni a szË rt tranzakciÂ´ kat) es gyorsan vÂ´ gig tudunk menni a beszÂ´ rt elemeu u o Â´ e u ken. Alkalmazhatunk erre a cÂ´ lra egy szÂ´ fÂ´ t, de tesztek azt mutatjÂ´ k, hogy egy piros-fekete fa (kie oa a egyensÂ´ lyozott binÂ´ ris fa), amelynek csÂ´ csaiban egy-egy szË rt tranzakciÂ´ talÂ´ lhatÂ´ , mÂ´ g jobb megu a u u o a o e oldÂ´ s, mert jÂ´ val kisebb a memÂ´ riaigÂ´ nye. a o o e

Ë e 4.2.5. TranzakciÂ´ k szurÂ´ se o
A feldolgozÂ´ s sorÂ´ n a tranzakciÂ´ kat mÂ´ dosÂ´thatjuk/tÂ¨ rÂ¨ lhetjÂ¨ k annak erdekÂ´ ben, hogy az Apriori a a o o Ä± oo u Â´ e mÂ´ g hatÂ´ konyabb legyen. A tranzakciÂ´ szË rÂ´ se alatt a tranzakciÂ´ olyan elemeinek tÂ¨ rlÂ´ sÂ´ t ertjÂ¨ k, e e o ue o o ee Â´ u amelyek nem jÂ´ tszanak szerepet az algoritmus kimenetÂ´ nek elË allÂ´tÂ´ sÂ´ ban. A nem fontos elemek a e oÂ´ Ä± a a lassÂ´tjÂ´ k az algoritmust, gondoljunk itt a tÂ´ mogatottsÂ´ g meghatÂ´ rozÂ´ sÂ´ nak mÂ´ djÂ´ ra. A szÂ´ fa egy belsË Ä± a a a a aa o a o o csomÂ´ pontjÂ´ nÂ´ l meg kell hatÂ´ roznunk a kÂ¨ zÂ¨ s elemeket az elek cÂ´mkÂ´ inek es a tranzakciÂ´ elemeinek o a a a o o Â´ Ä± e Â´ o halmazÂ´ ban. MinÂ´ l tÂ¨ bb elem van a tranzakciÂ´ ban, annÂ´ l tovÂ´ bb tart ez a mË velet. a e o o a a u SzË rÂ´ snek tekinthetjÂ¨ k az elsË iterÂ´ ciÂ´ utÂ´ n vÂ´ grehajtott lÂ´ pÂ´ st : ue u o a o a e e e Ë oÂ¨ 1. szurË otlet. Minden tranzakciÂ´ bÂ´ l tÂ¨ rÂ¨ ljÂ¨ k a ritka elemeket. o o oo u EgyszerË szË rË otletek a kÂ¨ vetkezË k : u uoÂ¨ o o Ë oÂ¨ 2. szurË otlet. Az -edik iterÂ´ ciÂ´ ban a tranzakciÂ´ feldolgozÂ´ sa utÂ´ n tÂ¨ rÂ¨ ljÂ¨ k a t tranzakciÂ´ t, a o o a a oo u o amennyiben t elemeinek szÂ´ ma nem nagyobb, mint . NyilvÂ´ n valÂ´ , hogy ez a tranzakciÂ´ nem tara a o o talmaz olyan elemhalmazt, amely a kÂ´ sË bbi iterÂ´ ciÂ´ ban lesz jelÂ¨ lt. eo a o o Ë oÂ¨ 3. szurË otlet. TÂ¨ rÂ¨ ljÂ¨ k a tranzakciÂ´ t, amennyiben nem tartalmaz jelÂ¨ ltet. oo u o o Ennek az otletnek a javÂ´tott vÂ´ ltozata : Â¨ Ä± a Ë oÂ¨ 4. szurË otlet. TÂ¨ rÂ¨ ljÂ¨ k a tranzakciÂ´ azon elemeit, amelyek nem elemei egyetlen olyan jeloltnek sem, oo u o Â¨ amelyet tartalmaz a tranzakciÂ´ . o

4. FEJEZET. GYAKORI ELEMHALMAZOK

58

Amennyiben az Â´gy keletkezett tranzakciÂ´ mÂ´ rete , akkor tÂ¨ rÂ¨ ljÂ¨ k teljesen a tranzakciÂ´ t. PÂ´ ldÂ´ ul, ha a Ä± o e oo u o e a hÂ´ romelemË jelÂ¨ ltek halmaza {ABC, ABD, BCD, FGH} es t = ABCDH, akkor a H elemet tÂ¨ rÂ¨ lhetjÂ¨ k a u o Â´ oo u a tranzakciÂ´ bÂ´ l. t = ABCGH esetÂ´ ben a teljes tranzakciÂ´ t tÂ¨ rÂ¨ ljÂ¨ k. o o e o oo u Az elË zË szË rË otletet tovÂ´ bb szigorÂ´thatjuk. Mi kell ahhoz, hogy egy elem eleme legyen majd egy o o u oÂ¨ a Ä± olyan +1-elemË j jelÂ¨ ltnek a kÂ¨ vetkezË iterÂ´ ciÂ´ ban, amelyet tartalmaz az aktuÂ´ lis jelÂ¨ lt. SzÂ¨ ksÂ´ ges u o o o a o a o u e feltÂ´ tel, hogy a j minden -elemË rÂ´ szhalmazÂ´ t tartalmazza a tranzakciÂ´ . A j egy eleme pontosan e u e a o darab rÂ´ szhalmaznak az eleme. Ez alapjÂ´ n : e a Ë oÂ¨ 5. szurË otlet. TÂ¨ rÂ¨ ljÂ¨ k a tranzakciÂ´ azon elemeit, amelyek nem elemei darab olyan jeloltnek, ameoo u o Â¨ lyet tartalmaz a tranzakciÂ´ . o TermÂ´ szetesen most is igaz, hogy ez utÂ´ n a szË rÂ´ s utÂ´ n alkalmazzuk az mÂ´ sodik szË rË otletet, ha ez e a ue a a uoÂ¨ lehetsÂ´ ges. A fenti pÂ´ ldÂ´ ban a t = ABCFGH tranzakciÂ´ t ez a szË rÂ´ s teljes egÂ´ szÂ´ ben tÂ¨ rli. e e a o ue e e o

4.2.6. Equisupport nyesÂ´ s e
Az egyenlË tÂ´ mogatottsÂ´ gÂ´ elemhalmazok alapjÂ´ n tÂ¨ rtÂ´ nË , un. equisupport nyesÂ´ s talÂ´ n a legelo a a u a o e o Â´ e a terjedtebb trÂ¨ kk a gyakori elemhalmazok kinyerÂ´ sÂ´ nek meggyorsÂ´tÂ´ sÂ´ ra. A nyesÂ´ s az 4.2 tulajdonsÂ´ g u ee Ä±a a e a egy kÂ¨ vetkezmÂ´ nyÂ´ t hasznÂ´ lja ki. A tÂ´ mogatottsÂ´ g meghatÂ´ rozÂ´ sÂ´ nÂ´ l kihagyhatjuk azokat a halmao e e a a a a aa a zokat, amelyeknek van olyan -elemË valÂ´ di rÂ´ szhalmazuk, amelyek tÂ´ mogatottsÂ´ ga egyenlË egy u o e a a o ( -1)-elemË rÂ´ szhalmazukÂ´ val. u e e 4.2. tulajdonsÂ´ g. Legyen X âŠ‚ Y âŠ† I. Ha supp(X ) = supp(Y ), akkor supp(X âˆª Z) = supp(Y âˆª Z) a teljesÂ¨ l minden Z âŠ† I-re. u Ez az allÂ´tÂ´ s minden Z âŠ† I elemhalmazra igaz, de nekÂ¨ nk elÂ´ g lesz csak a Z âŠ† I \ Y halmazokra Â´ Ä±a u e koncentrÂ´ lnunk. a Az equisupport nyesÂ´ s es a zÂ´ rt elemhalmazok kÂ¨ zÂ¨ tti osszefÂ¨ ggÂ´ s egyÂ´ rtelmË . Az X elemhale Â´ a o o Â¨ u e e u maz nem zÂ´ rt, es lezÂ´ rtja Y , amennyiben X âŠ‚ Y , supp(X ) = supp(Y ), tovÂ´ bbÂ´ nem lÂ´ tezik olyan a Â´ a a a e elemhalmaz, amelynek Y valÂ´ di rÂ´ szhalmaza, es tÂ´ mogatottsÂ´ ga megegyezik Y tÂ´ mogatottsÂ´ gÂ´ val. o e Â´ a a a a a Egy X elemhalmaz akkor, es csak akkor lehet egy egzakt (100% bizonyossÂ´ gÂ´ ) asszociÂ´ ciÂ´ s szabÂ´ ly Â´ a u a o a feltÂ´ tel rÂ´ sze, ha X nem zÂ´ rt elemhalmaz. Az X elemhalmaz kulcs minta [14], ha nincs vele egyenlË e e a o tÂ´ mogatottsÂ´ gÂ´ valÂ´ di rÂ´ szhalmaza. a a u o e Ha az Y jelÂ¨ ltnek a tÂ´ mogatottsÂ´ ga megegyezik az X -el jelÂ¨ lt preï¬xe tÂ´ mogatottsÂ´ gÂ´ val, akkor o a a o a a a felesleges az Y -t tartalmazÂ´ Y âˆª Z halmazokat mint uj jelÂ¨ lteket elË allÂ´tani, a 4.2 tulajdonsÂ´ g alapjÂ´ n o Â´ o oÂ´ Ä± a a ezek tÂ´ mogatottsÂ´ ga X âˆª Z rÂ´ szhalmazukbÂ´ l kÂ¨ zvetlenÂ¨ l szÂ´ mÂ´thatÂ´ [67]. a a e o o u a Ä± o Az alulrÂ´ l epÂ´tkezË algoritmusoknÂ´ l (Apriori, Eclat, Fp-growth, stb.) a preï¬xek tÂ´ mogatottsÂ´ ga o Â´ Ä± o a a a mindig elÂ´ rhetË , Â´gy a preï¬x equisupportnyesÂ´ st (az X az Y preï¬xe es |X |+1=|Y |) bÂ´ rmikor alkalmaze o Ä± e Â´ a hatjuk. A preï¬x equisupport nyesÂ´ s a kÂ¨ vetkezË kÂ´ ppen mË kÂ¨ dik : miutÂ´ n kiszÂ´ moltuk a P elemhale o o e u o a a maz gyerekeinek tÂ´ mogatottsÂ´ gÂ´ t, a ritka elemek elhagyÂ´ sÂ´ nÂ´ l ellenË rizzÂ¨ k, hogy a tÂ´ mogatottsÂ´ guk a a a aa a o u a a egyenlË -e a szÂ¨ lË tÂ´ mogatottsÂ´ gÂ´ val, azaz supp(P)-vel. Az ezt teljesÂ´tË elemeket nem kell ï¬gyelembe o uo a a a Ä±o vennÂ¨ nk mint generÂ´ torokat a kÂ¨ vetkezË jelÂ¨ lt-elË allÂ´tÂ´ s sorÂ´ n. Ezen jelÂ¨ lteket tÂ¨ rÂ¨ ljÂ¨ k es az utolsÂ´ u a o o o oÂ´ Ä± a a o oo u Â´ o elemeiket egy halmazban tÂ´ roljuk el, amit equisupport halmaznak hÂ´vunk es P-hez rendeljÂ¨ k. VegyÂ¨ k a Ä± Â´ u u eszre, hogy az elemhalmazhÂ´ lÂ´ preï¬x bejÂ´ rÂ´ snak kÂ¨ szÂ¨ nhetË en a jelÂ¨ lt-elË allÂ´tÂ´ s sorÂ´ n az X \Y z Â´ ao aa o o o o oÂ´ Ä± a a minden z âˆˆ Z, ahol az elemhalmaz bejÂ´ rÂ´ sÂ´ nÂ´ l hasznÂ´ lt rendezÂ´ s. aaa a a e Amikor az kiÂ´rjuk az GY gyakori elemhalmazt, vele egyÂ¨ tt kiÂ´rjuk minden E âŠ† E halmazokkal Ä± u Ä± vett uniÂ´ jÂ´ t is, ahol E a GY preï¬xeinek equisuporthalmazainak uniÂ´ ja. oa o

4. FEJEZET. GYAKORI ELEMHALMAZOK

59

4.3. pÂ´ lda. Legyenek a kÂ´ telemË , A preï¬xË gyakori elemhalmazok a kÂ¨ vetkezË k : {AB, AC, AD} es e e u u o o Â´ supp(A) = supp(AB) = supp(AC) = 4 tovÂ´ bbÂ´ supp(AD) = 3. A tÂ¨ bbi A preï¬xË jelÂ¨ lt elË allÂ´tÂ´ sÂ´ hoz a a o u o oÂ´ Ä± a a egyedÂ¨ l az AD elemhalmazt kell ï¬gyelembe vennÂ¨ nk. Azonban egy jelÂ¨ lt lÂ´ trehozÂ´ sÂ´ hoz mind az apriu u o e aa ori, az ECLAT- es az FP-growth algoritmusnÂ´ l legalÂ´ bb kÂ´ t elemhalmaz szÂ¨ ksÂ´ ges, Â´gy itt vÂ´ get is er a a e u e Ä± e Â´ Â´ az A preï¬xË halmazok feldolgozÂ´ sa. Az AD es A elemhalmazok kiÂ´rÂ´ sakor BC minden rÂ´ szhalmazÂ´ t u a Ä±a e a Â´ is hozzÂ´ juk kell venni, Â´gy vÂ´ gÂ¨ l az AD, ABD, ACD, ABCD, valamint az A, AB, AC, ABC halmazok a Ä± e u kerÂ¨ lnek kiÂ´rÂ´ sra ; az elË bbiek tÂ´ mogatottsÂ´ ga 3, utÂ´ bbiakÂ´ 4 lesz. u Ä±a o a a o e Ha az adatbÂ´ zis csak zÂ´ rt elemhalmazokat tartalmaz, akkor nem tudjuk ezt a nyesÂ´ st alkalmazni, a a e a tÂ´ mogatottsÂ´ gok egyenlË sÂ´ gÂ´ nek vizsgÂ´ lata viszont lelassÂ´tja az algoritmust. A tapasztalat azona a oe e a Ä± ban azt mutatja, hogy az ellenË rzÂ´ s gyors (pÂ´ ldÂ´ ul az Apriori algoritmusnÂ´ l nem kell ujra bejÂ´ rni a o e e a a Â´ a szÂ´ fÂ´ t), es nem okoz cache miss-t. A kevÂ´ s nemzÂ´ rt elemhalmazt tartalmazÂ´ adatbÂ´ zisoknÂ´ l elenyÂ´ szË oa Â´ e a o a a e o a futÂ´ siidË nÂ¨ vekedÂ´ se. Az equisupport nyesÂ´ s ezÂ´ rt biztonsÂ´ gos gyorsÂ´tÂ´ si trÂ¨ kknek tekinthetË . a o o e e e a Ä±a u o A fenti leÂ´rÂ´ sban nem hasznÂ´ ltuk ki az Apriori algoritmus sajÂ´ tossÂ´ gait csak azt, hogy az algoritÄ±a a a a mus alulrÂ´ l epÂ´tkezË es az elemhalmaz bejÂ´ rÂ´ s sorÂ´ n deï¬niÂ´ lva van egy rendezÂ´ s es Â´gy a preï¬x is. o Ä± oÂ´ aa a a e Â´ Ä± A tovÂ´ bbiakban jobban a rÂ´ szletekben mÂ´ lyedÂ¨ nk es megnÂ´ zzÂ¨ k, hogy mit kell tennÂ¨ nk az Apriori a e e u Â´ e u u algoritmusban, ha a preï¬x equisupport nyesÂ´ st kÂ´vÂ´ njuk alkalmazni. e Ä± a Az Apriori algoritmus szÂ´ fÂ´ s megkÂ¨ zelÂ´tÂ´ se esetÂ´ n minden csÂ´ cshoz egy listÂ´ t kell hozzÂ´ vennÂ¨ nk, oa o Ä±e e u a a u mely az equisupport halmaz elemeit tartalmazza. A ritkÂ´ nak bizonyulÂ´ jelÂ¨ ltek eltÂ´ volÂ´tÂ´ sakor ela o o a Ä±a lenË rizzÂ¨ k, hogy a levÂ´ l tÂ´ mogatottsÂ´ ga megegyezik-e preï¬xÂ´ nek tÂ´ mogatottsÂ´ gÂ´ val. Ha igen, a leo u e a a e a a a velet tÂ¨ rÂ¨ lhetjÂ¨ k a szÂ´ fÂ´ bÂ´ l, es az ele cÂ´mkÂ´ jÂ´ t hozzÂ´Â´rjuk a szÂ¨ lË equisupport halmazÂ´ hoz. Minden i oo u oa o Â´ Â´ Ä± ee aÄ± uo a elem egy equisupport halmazban tekinthetË egy i cÂ´mkÂ´ jË hurokÂ´ lnek. A hurokÂ´ leket nem kell ï¬gyeo Ä± eu e e lembe venni a tÂ´ mogatottsÂ´ g meghatÂ´ rozÂ´ sakor, de a jelÂ¨ lt-elË allÂ´tÂ´ snÂ´ l igen. a a a a o oÂ´ Ä± a a 4.4. pÂ´ lda. Legyenek AB, AC, BC a gyakori pÂ´ rok. supp(AB) = supp(A) = supp(AC) es supp(B) = e a Â´ =supp(BC)=supp(BD). A 4.6 abra a szÂ´ fa ritka jelÂ¨ ltek eltÂ´ volÂ´tÂ´ sa utÂ´ ni allapotÂ´ t mutatja. VegyÂ¨ k o o a Ä±a a Â´ a u Â´ eszre, hogy ha a hurokÂ´ leket ï¬gyelmen kÂ´vÂ¨ l hagytuk volna a jelÂ¨ ltgenerÂ´ lÂ´ s sorÂ´ n, akkor az ABC e Ä± u o aa a Â´ elemhalmazt nem allÂ´tottuk volna elË mint jelÂ¨ lt, holott minden rÂ´ szhalmaza gyakori. o o e Â´ Ä±

B A B C C,D

4.6. abra. PÂ´ lda : equisupport levelek eltÂ´ volÂ´tÂ´ sa Â´ e a Ä±a Ez a pÂ´ lda az equisupport nyesÂ´ s es a zsÂ´ kutcanyesÂ´ s kÂ¨ zti osszefÂ¨ ggÂ´ sre is felhÂ´vja a ï¬gyele e Â´ a e o Â¨ u e Ä± met. LÂ´ ttuk, hogy a B csomÂ´ pont nem vezet 2 mÂ´ lysÂ´ gË levÂ´ lbe, Â´gy a zsÂ´ kutcanyesÂ´ s tÂ¨ rÂ¨ lte a o e e u e Ä± a e oo Â´ volna ezt a csÂ´ csot, es nem lett volna jelÂ¨ lt az ABC elemhalmaz. Ujra kell ertelmeznÂ¨ nk a u Â´ o Â´ u csomÂ´ pontok mÂ´ lysÂ´ gÂ´ t a zsÂ´ kutcanyesÂ´ snÂ´ l azÂ´ rt, hogy ne tÂ¨ rÂ¨ ljÂ¨ n olyan leveleket, amikre szÂ¨ ksÂ´ g o e e e a e e e oo o u e lehet a jelÂ¨ lt-elË allÂ´tÂ´ s sorÂ´ n. Az X elemhalmaz tÂ´ mogatottsÂ´ ga megegyezik az X olyan bË vÂ´tÂ´ sÂ´ nek o oÂ´ Ä± a a a a o Ä±e e tÂ´ mogatottsÂ´ gÂ´ val, ahol a hozzÂ´ adott elem az X valamely preï¬xÂ´ hez tartozÂ´ equisupport halmaz egy a a a a e o

4. FEJEZET. GYAKORI ELEMHALMAZOK

60

eleme. Â´ amikor ï¬gyelembe vesszÂ¨ k az X csomÂ´ pont mÂ´ lysÂ´ gÂ´ t a zsÂ´ kutcanyesÂ´ s sorÂ´ n, hozzÂ´ Igy u o e e e a e a a kell adnunk X aktuÂ´ lis mÂ´ lysÂ´ gÂ´ hez a gyÂ¨ kÂ´ rbË l az X -be vezetË pontok equisupport halmazainak a e e e o e o o osszmÂ´ retÂ´ t. PÂ´ ldÂ´ ul a 4.6 abrÂ´ n lÂ´ thatÂ´ szÂ´ fÂ´ n a B mÂ´ lysÂ´ ge 1 helyett 3. Â¨ e e e a Â´ a a o oa e e

4.2.7. Borgelt-fÂ´ le tÂ´ mogatottsÂ´ g-meghatÂ´ rozÂ´ s e a a a a
Ha a tranzakciÂ´ kat szÂ´ fÂ´ ban vagy PatrÂ´cia-fÂ´ ban tÂ´ roljuk, akkor egy mÂ´ sik technikÂ´ t is o oa Ä± a a a a hasznÂ´ lhatunk a tÂ´ mogatottsÂ´ gok meghatÂ´ rozÂ´ sÂ´ ra [22, 23]. Ezt a mÂ´ dszert alkalmazza Christian Bora a a a aa o gelt a vilÂ´ ghÂ´rË Apriori implementÂ´ ciÂ´ ja utolsÂ´ vÂ´ ltozataiban. a Ä±u a o o a Az a megï¬gyelÂ´ s all az otlet mÂ¨ gÂ¨ tt, hogy kÂ´ t tranzakciÂ´ a kÂ¨ zÂ¨ s preï¬xig ugyanazt a programe Â´ Â¨ o o e o o o futÂ´ st eredmÂ´ nyezi a tÂ´ mogatottsÂ´ g meghatÂ´ rozÂ´ sakat (ugyanazt a szÂ´ farÂ´ szt jÂ´ rjuk be). Ha szÂ´ fÂ´ ban a e a a a a o e a oa tÂ´ roljuk a tranzakciÂ´ kat, akkor rendelkezÂ´ sre all minden szÂ¨ ksÂ´ ges informÂ´ ciÂ´ a kÂ¨ zÂ¨ s preï¬xekrË l. a o e Â´ u e a o o o o MegoldhatÂ´ , hogy ugyanazokat a preï¬xeket csak egyszer dolgozzuk fel, es ne annyiszor, ahÂ´ nyszor o Â´ a elË fordulnak. o A tranzakciÂ´ fÂ´ ba minden csomÂ´ ponthoz egy szÂ´ mlÂ´ lÂ´ t rendelÂ¨ nk. Az I elemhalmaz szÂ´ mlÂ´ lÂ´ ja oa o a ao u a ao azoknak a tranzakciÂ´ knak a szÂ´ mÂ´ t tÂ´ rolja, amelyek preï¬xe I. EbbË l a szempontbÂ´ l ez a megoldÂ´ s o a a a o o a eltÂ´ r a bemenet tÂ´ rolÂ´ sÂ´ nÂ´ l bemutatott (lÂ´ sd 4.2.4-es rÂ´ sz) szÂ´ fa alapÂ´ megoldÂ´ stÂ´ l (Â´ s inkÂ´ bb egy e a aa a a e o u a o e a olyan FP-fÂ´ ra hasonlÂ´t, amelybË l elhagytuk a keresztÂ´ leket es a fejlÂ´ c tÂ´ blÂ´ t). A tranzakciÂ´ szÂ´ fÂ´ nÂ´ l a Ä± o e Â´ e a a o oa a es a jelÂ¨ lt szÂ´ fÂ´ nÂ´ l hasznÂ´ lt rendezÂ´ snek meg kell egyeznie. Ez hÂ´ trÂ´ ny, mivel az egyes szÂ´ fÂ´ khoz Â´ o oa a a e a a oa mÂ´ s-mÂ´ s rendezÂ´ s lenne optimÂ´ lis. a a e a Sajnos a [22]-ben nincsen rÂ´ szletesen kidolgozva az algoritmus, de vÂ´ lhetË en a kÂ¨ vetkezË kÂ´ pp e e o o o e mË kÂ¨ dik : PÂ´ rhuzamosan bejÂ´ rjuk a jelÂ¨ lt- es a tranzakciÂ´ szÂ´ fÂ´ t duplÂ´ n rekurzÂ´v mÂ´ don. KÂ´ t mutatÂ´ t u o a a o Â´ o oa a Ä± o e o hasznÂ´ lunk, melyek kezdetben az egyes gyÂ¨ kerekre mutatnak. EzutÂ´ n vÂ´ gigmegyÂ¨ nk mindkÂ´ t csÂ´ cs a o a e u e u elein. Ha a tranzakciÂ´ szÂ´ fa aktuÂ´ lis cÂ´mkÂ´ je kisebb vagy egyenlË a mÂ´ sik cÂ´mkÂ´ nÂ´ l, akkor rekurzÂ´van Â´ o o a Ä± e o a Ä± e e Ä± tovÂ´ bblÂ´ pÂ¨ nk a tranzakciÂ´ szÂ´ fÂ´ ban a gyerekcsomÂ´ pontra (az szÂ´ fa aktuÂ´ lis csomÂ´ pontmutatÂ´ ja nem a e u o oa o o a o o vÂ´ ltozik). Amennyiben a kÂ´ t cÂ´mke egyenlË , a rekurziÂ´ t azokkal a gyerekekkel folytatjuk, amelyekre a e Ä± o o a mutatÂ´ k altal mutatott elek mutatnak. A 2 pszeudÂ´ -kÂ´ d a Borgelt-fÂ´ le tÂ´ mogatottsÂ´ g-meghatÂ´ rozÂ´ s o Â´ Â´ o o e a a a a egy tovÂ´ bb optimalizÂ´ lt vÂ´ ltozatÂ´ t adja meg. a a a a A fenti megoldÂ´ snak hÂ´ trÂ´ nya, hogy sok olyan utat jÂ´ r be a jelÂ¨ lt szÂ´ fÂ´ ban, amelyet az eredeti a a a a o oa tÂ´ mogatottsÂ´ g meghatÂ´ rozÂ´ mÂ´ dszer nem tenne, mert nem vezet levÂ´ lbe. A mÂ´ dszer nem veszi ï¬a a a o o e o gyelembe, hogy a tranzakciÂ´ nak csak egy rÂ´ szÂ´ t kell kiÂ´ rtÂ´ kelnÂ¨ nk. Megoldhatjuk a problÂ´ mÂ´ t, ha o e e e e u e a hozzÂ´ rendelÂ¨ nk egy szÂ´ mlÂ´ lÂ´ t a tranzakciÂ´ szÂ´ fa minden pontjÂ´ hoz. A szÂ´ mlÂ´ lÂ´ adja meg a pontbÂ´ l a u a ao o o a a ao o kiindulÂ´ leghosszabb ut hosszÂ´ t. A tÂ´ mogatottsÂ´ g meghatÂ´ rozÂ´ sa sorÂ´ n nem vesszÂ¨ k ï¬gyelembe o Â´ a a a a a a u azokat a csomÂ´ pontokat, melyek szÂ´ mlÂ´ lÂ´ ja kisebb, mint âˆ’ 1, ahol azon lÂ´ pÂ´ sek szÂ´ mÂ´ t adja, o a ao e e a a amelyeket meg kell mÂ´ g tenni a jelÂ¨ ltszÂ´ fa aktuÂ´ lis pontjÂ´ bÂ´ l, hogy levÂ´ lbe jussunk. Az algoritmus e o o a a o e gyorsÂ´thatÂ´ , ha a tranzakciÂ´ szË rÂ´ sÂ´ nek otletÂ´ t (lÂ´ sd 4.2.5-Â¨ s rÂ´ sz) is alkalmazzuk. TovÂ´ bbi rÂ´ szletek Ä± o o uee Â¨ e a o e a e tudhatunk meg a [22] tanulmÂ´ nybÂ´ l. a o

Â´ 4.2.8. UtolsÂ´ fÂ´ zisok gyorsÂ´tÂ´ sa : APRIORI-TID es APRIORI-HYBRID algorito a Ä±a musok
Az APRIORI-TID [7] a SETM [78] algoritmus tovÂ´ bbfejlesztett vÂ´ ltozata. FË bb kÂ¨ lÂ¨ nbsÂ´ g az a a o uo e APRIORI-hoz kÂ´ pest, hogy a tÂ´ mogatottsÂ´ g meghatÂ´ rozÂ´ sÂ´ nÂ´ l nem a kosarakat hasznÂ´ lja, hanem egy e a a a aa a a segÂ´ dtÂ´ blÂ´ t. Az -edik lÂ´ pÂ´ sben rendelkezÂ´ sÂ¨ nkre allÂ´ segÂ´ dtÂ´ bla tÂ´ rolja a tranzakciÂ´ k azonosÂ´tÂ´ it e a a e e eu Â´ o e a a o Ä±o es az egyes tranzakciÂ´ kban talÂ´ lhatÂ´ -elemË jelÂ¨ lteket. Kis -eknÂ´ l ez a segÂ´ dtÂ´ bla jÂ´ val nagyobb Â´ o a o u o e e a o

4. FEJEZET. GYAKORI ELEMHALMAZOK Algorithm 2 BORGELT SUPPCOUNT Require: nc : a szÂ´ fa aktuÂ´ lis csomÂ´ pontja, o a o nt : a tranzakciÂ´ fa aktuÂ´ lis csomÂ´ pontja, o a o : az nc -bË l levÂ´ lbe vezetË ut hossza, o e oÂ´ i : az nc legkisebb olyan elÂ´ nek indexe, amely cÂ´mkÂ´ je nagyobb, mint az nt -be vezetË el cÂ´mkÂ´ je Â´e Ä± e oÂ´ Ä± e if = 0 then nc .szÂ´ mlÂ´ lÂ´ â† nc .szÂ´ mlÂ´ lÂ´ + nt .szÂ´ mlÂ´ lÂ´ a ao a ao a ao else for j = 0 to nt .Â´ lszÂ´ m âˆ’ 1 do e a while i < nc .Â´ lszÂ´ m AND nc .Â´ l[i].cÂ´mke < nt .Â´ l[j].cÂ´mke do e a e Ä± e Ä± i â† i+1 end while if i < nc .Â´ lszÂ´ m AND nc .Â´ l[i].cÂ´mke â‰¥ nt .Â´ l[j].cÂ´mke then e a e Ä± e Ä± e BORGELT SUPPCOUNT(nc , nt .Â´ l[j].gyermek, , i) if nc .Â´ l[i].cÂ´mke = nt .Â´ l[j].cÂ´mke then e Ä± e Ä± BORGELT SUPPCOUNT(nc .Â´ l[i].gyermek, nt .Â´ l[j].gyermek, âˆ’ 1, 0) e e i â† i+1 end if else break end if end for end if

61

lehet, mint az eredeti adatbÂ´ zis, de nagy -eknÂ´ l gyorsabb tÂ´ mogatottsÂ´ g-meghatÂ´ rozÂ´ st vÂ´ rhatunk. A a e a a a a a kÂ´ telemË jelÂ¨ ltekhez tartozÂ´ segÂ´ dtÂ´ blÂ´ t a bemeneti adatbÂ´ l es a gyakori elembË l allÂ´tjuk elË , a 2-nÂ´ l e u o o e a a o Â´ o Â´ Ä± o e nagyobb mÂ´ retË jelÂ¨ ltekhez tartozÂ´ segÂ´ dtÂ´ blÂ´ t az elË zË segÂ´ dtÂ´ blÂ´ bÂ´ l es az utoljÂ´ ra meghatÂ´ rozott e u o o e a a o o e a a o Â´ a a gyakori elemekbË l kapjuk. TermÂ´ szetesen uj segÂ´ dtÂ´ bla elË allÂ´tÂ´ sa utÂ´ n a rÂ´ git tÂ¨ rÂ¨ lhetjÂ¨ k, hiszen arra o e Â´ e a oÂ´ Ä± a a e oo u tÂ¨ bbÂ´ nem lesz szÂ¨ ksÂ´ g. o e u e A jobb oldali abra mutatja, hogy egy Â´ pÂ´ ldaadatbÂ´ zisban mennyi idË alatt talÂ´ ltÂ´ k meg a e a o a a IdË (sec) o kÂ¨ lÂ¨ nbÂ¨ zË mÂ´ retË gyakori elemhalmazokat az APRIORI uo o o e u 6 illetve az APRIORI-TID algoritmusok. LÂ´ thatÂ´ , hogy a o a kezdeti fÂ´ zisokban (1, 2, 3-elemË gyakori elemhal- 14 a u mazok megtalÂ´ lÂ´ sÂ´ ban) az APRIORI gyorsabb, mÂ´g a aa a Ä± kÂ´ sË bbiekben tÂ¨ bb nagysÂ´ grenddel az APRIORI-TID. 12 eo o a APRIORI A kÂ´ t mÂ´ dszer otvÂ¨ zÂ´ se az un. APRIORI-HIBRID [7] e o Â¨ o e Â´ APRIORI-TID algoritmus, amely a kezdeti lÂ´ pÂ´ sekben az APRIORI-t a 10 e e kÂ´ sË bbiekben az APRIORI-TID-et hasznÂ´ lja. eo a 8 Nagy kÂ´ rdÂ´ s az APRIORI-HIBRID algoritmussal e e kapcsolatban, hogy hol vÂ´ ltsunk at az egyik algoritmusrÂ´ l a Â´ o 6 a mÂ´ sikra. A szerzË k azt a heurisztikÂ´ t javasoltÂ´ k, hogy a o a a S  S a vÂ´ ltÂ´ s abban az esetben tÂ¨ rtÂ´ njen, ha a jelÂ¨ ltek szÂ´ ma a a o e o a 4  Shhh csÂ¨ kken es a segÂ´ dtÂ´ bla mÂ´ rete el fog fÂ´ rni a memÂ´ riÂ´ ban. o Â´ e a e e o a hh ` h `  ` 2  A segÂ´ dtÂ´ bla mÂ´ rete ugyanis a jelÂ¨ ltek szÂ´ mÂ´ tÂ´ l fÂ¨ gg, Â´gy e a e o a ao u Ä± @ 0
@ @ -

1

2

3

5 6 4 jelÂ¨ ltmÂ´ ret o e

7

4. FEJEZET. GYAKORI ELEMHALMAZOK

62

ha a kÂ¨ vetkezË iterÂ´ ciÂ´ ban elÂ´ g a memÂ´ ria akkor kÂ´ sË bb o o a o e o eo is elÂ´ g lesz. e Ez az ervelÂ´ s azonban helytelen [66]. Gondoljunk Â´ e csak egy olyan adatbÂ´ zisra, amelyben van egy 20 elemË a u gyakori halmaz es 1000 darab, pÂ´ ronkÂ´ nt diszjunkt, ot elemË gyakori elemhalmaz. A hÂ´ rom elemË Â´ a e Â¨ u a u 5 20 5 20 a e u e jelÂ¨ ltek szÂ´ ma 3 + 1000 3 = 11140 a nÂ´ gy elemË ekÂ´ pedig 4 + 1000 4 = 9845 tehÂ´ t keo a vesebb. Az APRIORI-HIBRID atvÂ´ ltana APRIORI-TID-re, ugyanakkor a jelÂ¨ ltek szÂ´ ma exponenÂ´ a o a ciÂ´ lisan nÂ¨ vekedni kezdene, es az algoritmus kifutna a memÂ´ riÂ´ bÂ´ l. Nem ismeretes olyan heurisztika, a o Â´ o a o amely elegendË szÂ´ mÂ´ teszthalmazon bizonyÂ´totta volna hatÂ´ konysÂ´ gÂ´ t. o a u Ä± e a a

4.2.9. FutÂ´ si idË es memÂ´ riaigÂ´ ny a oÂ´ o e
A GYEK feladat megadÂ´ sakor elmondtuk, hogy mÂ´ r az eredmÂ´ ny kiÂ´rÂ´ sa â€“ ami a futÂ´ si idË nek a a a e Ä±a a o rÂ´ sze â€“ az |I|-ben exponenciÂ´ lis lehet. A memÂ´ riaigÂ´ nyrË l is hasonlÂ´ mondhatÂ´ el. Az ( + 1)-elemË e a o e o o o u |I| jelÂ¨ ltek elË allÂ´tÂ´ sÂ´ hoz szÂ¨ ksÂ´ gÂ¨ nk van az osszes -elemË jelÂ¨ ltre, amelyek szÂ´ ma akÂ´ r |I|/2 is lehet. o oÂ´ Ä± a a u e u Â¨ u o a a Ezek a felsË korlÂ´ tok elesek is, hiszen min supp = 0-nÂ´ l minden elemhalmaz gyakori. o a Â´ a Az algoritmus indÂ´tÂ´ sa elË tt tehÂ´ t nem sokat tudunk mondani a futÂ´ si idË rË l. A futÂ´ s sorÂ´ n, azonÄ±a o a a oo a a ban egyre tÂ¨ bb informÂ´ ciÂ´ t gyË jtÂ¨ nk, Â´gy felmerÂ¨ l a kÂ´ rdÂ´ s, hogy ezt fel tudjuk-e hasznÂ´ lni az algorito a o u u Ä± u e e a mus maradÂ´ k futÂ´ si idejÂ´ nek jÂ´ slÂ´ sÂ´ ra. PÂ´ ldÂ´ ul, ha a gyakori elemek szÂ´ ma nÂ´ gy, akkor tudjuk, hogy e a e o aa e a a e a legnagyobb gyakori elemhalmaz mÂ´ rete legfeljebb nÂ´ gy (azaz mÂ´ g legfeljebb hÂ´ romszor olvassuk e e e a 4 4 4 vÂ´ gig az adatbÂ´ zist), az osszes jelÂ¨ lt maximÂ´ lis szÂ´ ma pedig 2 + 3 + 4 = 11. A kÂ¨ vetkezË kben e a Â¨ o a a o o megvizsgÂ´ ljuk, hogy mit tudunk elmondani a jelÂ¨ ltek szÂ´ mÂ´ rÂ´ l es a maximÂ´ lis jelÂ¨ ltek mÂ´ retÂ´ rË l, ha a o a ao Â´ a o e eo adottak az -elemË gyakori elemhalmazok (GY ). u A kÂ¨ vetkezË rÂ´ sz fontos fogalma a kanonikus reprezentÂ´ ciÂ´ lesz. o o e a o 4.5. lemma. Adott n es pozitÂ´v egÂ´ szek esetÂ´ ben a kÂ¨ vetkezË felÂ´rÂ´ s egyÂ´ rtelmË : Ä± e e o o Ä±a e u Â´ n= ahol r â‰¥ 1, m > m
âˆ’1

m

+

m âˆ’1 mr +Â· Â· Â·+ , âˆ’1 r

> Â· Â· Â· > mr es m j â‰¥ j minden j = r, r + 1, . . . , szÂ´ mra. a Â´

Ezt a reprezentÂ´ ciÂ´ t hÂ´vjÂ´ k -kanonikus reprezentaciÂ´ nak. MeghatÂ´ rozÂ´ sa nagyon egyszerË : m -nek a o Ä± a a a u Â´ o m âˆ’1 m âˆ’1 +1 m m +1 m ki kell elÂ´ gÂ´tenie a e Ä± â‰¤n< feltÂ´ telt, m âˆ’1 -nek a âˆ’1 â‰¤ n âˆ’ e < feltÂ´ telt, es e Â´ âˆ’1 m âˆ’1 m mr âˆ’ âˆ’1 âˆ’ Â· Â· Â·âˆ’ r nulla nem lesz. Â´gy tovÂ´ bb, amÂ´g n âˆ’ Ä± a Ä± Legyen I = {i1 , i2 , . . . , im } elemek halmaza es GY egy olyan I feletti halmazcsalÂ´ d1 , amelynek Â´ a minden eleme -elemË . Az -nÂ´ l nagyobb mÂ´ retË I âŠ† I halmaz fedi a GY -et, ha I minden -elemË u e e u u rÂ´ szhalmaza eleme GY -nek. Az osszes lehetsÂ´ ges ( + p)-mÂ´ retË GY -et fedË halmazokbÂ´ l alkotott e Â¨ e e u o o halmazcsalÂ´ dot J +p (GY )-lel jelÂ¨ ljÂ¨ k. Nem vÂ´ letlen, hogy ezt a halmazt ugyanÂ´ gy jelÂ¨ ltÂ¨ k, mint az a o u e u o u A PRIORI algoritmus jelÂ¨ ltjeit, ugyanis az ( + p)-mÂ´ retË jelÂ¨ ltek ezen halmazcsalÂ´ dnak az elemei, es o e u o a Â´ ha az algoritmus sorÂ´ n minden jelÂ¨ lt gyakori, akkor az ( + p)-mÂ´ retË jelÂ¨ ltek halmaza megegyezik a o e u o J +p (GY )-lel. A kÂ¨ vetkezË tÂ´ tel megadja, hogy adott GY esetÂ´ n legfeljebb mennyi lehet a J +p (GY ) elemeinek o o e e szÂ´ ma. a
1A

H-t az I feletti halmazcsalÂ´ dnak nevezzÂ¨ k, amennyiben H âŠ† 2I . a u

4. FEJEZET. GYAKORI ELEMHALMAZOK 4.6. tÂ´ tel. Ha e |GY | = -kanonikus reprezentÂ´ ciÂ´ , akkor a o |J +p (GY )| â‰¤ m + +p

63

m

+

m âˆ’1 mr +Â· Â· Â·+ âˆ’1 r m âˆ’1 ms + Â· Â· Â·+ , âˆ’1+ p s+ p

ahol s a legkisebb olyan egÂ´ sz, amelyre ms < s + p. Ha nincs ilyen egÂ´ sz szÂ´ m, akkor s = r âˆ’ 1. e e a A fenti tÂ´ tel a Kruskalâ€“Katona tÂ´ tel kÂ¨ vetkezmÂ´ nye, ezÂ´ rt a tÂ´ telben szereplË felsË korlÂ´ tot a e e o e e e o o a +p tovÂ´ bbiakban KK (|GY |)-el jelÂ¨ ljÂ¨ k. a o u 4.7. tÂ´ tel. A 4.6. tÂ´ telben szereplË felsË korlÂ´ t eles, azaz adott n, , p szÂ´ mokhoz mindig lÂ´ tezik GY , e e o o a Â´ a e +p amelyre |GY | = n, es |J +p (GY )| = KK (|GY |). Â´ A kanonikus reprezentÂ´ ciÂ´ segÂ´tsÂ´ gÂ´ vel egyszerË eles felsË becslÂ´ st tudunk adni a legnagyobb jelÂ¨ lt a o Ä± e e uÂ´ o e o m +1 , ami azt jelenti, hogy nem lÂ´ tezhet e mÂ´ retÂ´ re (jelÂ¨ lÂ´ sben maxsize(GY )) is. Tudjuk, hogy |GY |< e e oe olyan jelÂ¨ lt, amelynek mÂ´ rete nagyobb m -nÂ´ l. o e e 4.8. kÂ¨ vetkezmÂ´ ny. Amennyiben a |GY | szÂ´ mnak az -kanonikus reprezentÂ´ ciÂ´ jÂ´ ban szereplË elsË o e a a oa o o tag m , akkor maxsize(GY ) â‰¤ m . Az m szÂ´ mot a tovÂ´ bbiakban Âµ (|GY |)-el jelÂ¨ ljÂ¨ k. Ez az ertÂ´ k azt is megmondja, hogy mekkora a a o u Â´ e jelÂ¨ ltmÂ´ retnÂ´ l vÂ´ lik nullÂ´ vÂ´ a felsË korlÂ´ t, azaz : o e e a a a o a 4.9. kÂ¨ vetkezmÂ´ ny. Âµ (|GY |) = + min{p|KK o e
+p

(|GY |) = 0} âˆ’ 1

A maradÂ´ k futÂ´ si idË jÂ´ slÂ´ sÂ´ ra a kÂ¨ vetkezË allÂ´tÂ´ s nyÂ´ jt segÂ´tsÂ´ get. e a o o aa o oÂ´ Ä±a u Ä± e 4.10. kÂ¨ vetkezmÂ´ ny. Az osszes lehetsÂ´ ges -nÂ´ l nagyobb mÂ´ retË jelÂ¨ lt szÂ´ ma legfeljebb o e e e e u o a Â¨ KK
osszes Â¨

(|GY |) =

Âµ (|GY |) p=1

âˆ‘

KK

+p

(|GY |).

A fenti korlÂ´ tok szÂ´ pek es egyszerË ek, mivel csak kÂ´ t paramÂ´ tert hasznÂ´ lnak : az aktuÂ´ lis mÂ´ retet a e Â´ u e e a a e es az -elemË gyakori elemhalmazok szÂ´ mÂ´ t (|GY |). EnnÂ´ l jÂ´ val tÂ¨ bbet tudunk. Nem csak a gyaÂ´ u a a e o o kori elemhalmazok szÂ´ mÂ´ t ismerjÂ¨ k, hanem mÂ´ r pontosan meghatÂ´ roztuk oket magukat is ! Az uj a a u a a Ë Â´ informÂ´ ciÂ´ segÂ´tsÂ´ gÂ´ vel szÂ´ mos esetben jobb felsË korlÂ´ tot adhatunk. PÂ´ ldÂ´ ul, ha a GY -ben csak a o Ä± e e a o a e a pÂ´ ronkÂ´ nt diszjunkt elemhalmazok vannak, akkor nem allÂ´tunk elË jelÂ¨ lteket. A 4.6. tÂ´ telben szea e Â´ Ä± o o e replË felsË korlÂ´ t azonban jÂ´ val nagyobb lehet nullÂ´ nÂ´ l. A kÂ¨ vetkezË kben bemutatjuk, hogyan lehet o o a o a a o o a meglÂ´ vË felsË korlÂ´ tot az mÂ´ retË gyakori elemhalmazok strukt urÂ´ jÂ´ ra rekurzÂ´van alkalmazni. e o o a e u Ä± Â´ aa Ehhez feltesszÂ¨ k, hogy egy teljes rendezÂ´ st tudunk deï¬niÂ´ lni az I elemein, ami alapjÂ´ n tetszË leges u e a a o elemhalmaznak meg tudjuk hatÂ´ rozni a legkisebb elemÂ´ t. VezessÂ¨ k be a kÂ¨ vetkezË kÂ´ t jelÂ¨ lÂ´ st : a e u o o e oe GY i = {I âˆ’ {i}|I âˆˆ GY , i = min I}, A GY i halmazt ugy kapjuk GY -bË l, hogy vesszÂ¨ k azon halmazokat, amelyek legkisebb eleme i, majd Â´ o u tÂ¨ rÂ¨ ljÂ¨ k ezekbË l az i elemet. oo u o

4. FEJEZET. GYAKORI ELEMHALMAZOK Ezek utÂ´ n deï¬niÂ´ lhatjuk a kÂ¨ vetkezË rekurzÂ´v fÂ¨ ggvÂ´ nyt tetszË leges p > 0-ra : a a o o Ä± u e o KK âˆ—,p (GY )=
|GY | p+1

64

, ha = 1
+p

min{KK

(|GY

|), âˆ‘iâˆˆI KK âˆ—âˆ’1,p (GY i )}
+p

, ha > 1.

A deï¬nÂ´ciÂ´ bÂ´ l kÂ¨ vetkezi, hogy KK âˆ—,p (GY ) â‰¤ KK Ä± o o o 4.11. tÂ´ tel. |J +p (GY )| â‰¤ KK âˆ—,p (GY ). e

(|GY |), tovÂ´ bbÂ´ a a

BizonyÂ´tÂ´ s: A bizonyÂ´tÂ´ s teljes indukciÂ´ n alapul, az = 1 eset triviÂ´ lis. TulajdonkÂ´ ppen csak az kell Ä±a Ä±a o a e belÂ´ tni, hogy a |J +p (GY )| â‰¤ âˆ‘ KK âˆ—âˆ’1,p (GY i )
iâˆˆI

Az egyszerË sÂ´ g kedvÂ´ ert vezessÂ¨ k be a kÂ¨ vetkezË jelÂ¨ lÂ´ st : H âˆªi = {I âˆª{i}|I âˆˆ H}, ahol H egy I feletti ue eÂ´ u o o oe j / halmazcsalÂ´ d. VegyÂ¨ k eszre, hogy GY = âˆ‘iâˆˆI GY i âˆªi es GY i âˆ©GY = 0 minden i = j elempÂ´ rra. Azaz a u Â´ Â´ a a GY halmazcsalÂ´ d egy partÂ´ciÂ´ jÂ´ t kÂ´ peztÂ¨ k. a Ä± oa e u Amennyiben I âˆˆ J +p (GY ), es I-nek legkisebb eleme i, akkor I \{i} âˆˆ J âˆ’1+p (GY i ), hiszen I \{i} Â´ minden ( âˆ’ 1)-elemË rÂ´ szhalmaza GY i -beli. EbbË l kÂ¨ vetkezik, hogy u e o o J +p (GY ) âŠ†
iâˆˆI

[

J âˆ’1+p (GY i ) âˆª i.
âˆ’1+p (GY i) âˆª i

AbbÂ´ l, hogy az GY i halmazcsalÂ´ dok pÂ´ ronkÂ´ nt diszjunktak kÂ¨ vetkezik, hogy J o a a e o pÂ´ ronkÂ´ nt diszjunkt halmazcsalÂ´ dok. EbbË l kÂ¨ vetkezik az allÂ´tÂ´ s, hiszen : a e a o o Â´ Ä±a |J +p (GY )| â‰¤ |
iâˆˆI

is

= âˆ‘ |J âˆ’1+p (GY i ) âˆª i| = âˆ‘ |J âˆ’1+p (GY i )| â‰¤ âˆ‘ KK âˆ—âˆ’1,p (GY i ),
iâˆˆI iâˆˆI iâˆˆI

[

J âˆ’1+p (GY i ) âˆª i|

ahol az utolsÂ´ egyenlË tlensÂ´ gnÂ´ l az indukciÂ´ s feltevÂ´ st hasznÂ´ ltuk. o o e e o e a

A pÂ´ ronkÂ´ nt diszjunkt halmazok esete jÂ´ pÂ´ lda arra, hogy a minimum kifejezÂ´ sben szereplË a e o e e o mÂ´ sodik tag kisebb lehet az elsË nÂ´ l. ElË fordulhat azonban az ellenkezË eset is. PÂ´ ldÂ´ ul legyen GY2 = a o e o o e a 3 a oÂ¨ ={AB, AC}. KÂ¨ nnyË ellenË rizni, hogy KK2 (|GY2 |)=0, ugyanakkor a mÂ´ sodik tagban szereplË osszeg o u o 1-et ad. Nem tudhatjuk, hogy melyik ertÂ´ k a kisebb, Â´gy jogos a kÂ´ t ertÂ´ k minimumÂ´ t venni. Â´ e Ä± e Â´ e a JavÂ´thatjuk a legnagyobb jelÂ¨ lt mÂ´ retÂ´ re, illetve az osszes jelÂ¨ lt szÂ´ mÂ´ ra vonatkozÂ´ felsË Ä± o e e Â¨ o a a o o korlÂ´ tokon is. Legyen Âµâˆ— (GY ) = + min{p|KK âˆ—+p (GY ) = 0} âˆ’ 1 es a Â´
âˆ— KKosszes (GY Â¨ Âµâˆ— (GY )

)=

p=1

âˆ‘

KK âˆ—+p (GY ).

4. FEJEZET. GYAKORI ELEMHALMAZOK 4.12. kÂ¨ vetkezmÂ´ ny. maxsize(GY ) â‰¤ Âµâˆ— (GY ) â‰¤ Âµ (|GY |). o e

65

âˆ— 4.13. kÂ¨ vetkezmÂ´ ny. Az osszes lehetsÂ´ ges -nÂ´ l nagyobb mÂ´ retË jelÂ¨ lt szÂ´ ma legfeljebb KKosszes o e e e e u o a Â¨ Â¨ Â¨ âˆ— âˆ—(GY ) lehet, es KKosszes (GY ) â‰¤ KK osszes (|GY |). Â´ Â¨ âˆ— A KK âˆ— ertÂ´ k fÂ¨ gg a rendezÂ´ stË l. PÂ´ ldÂ´ ul a KK2,1 ({AB, AC}) ertÂ´ ke 1, amennyiben a rendezÂ´ s Â´ e u e o e a Â´ e e szerinti legkisebb elem A, es 0 bÂ´ rmely mÂ´ s esetben. ElmÂ´ letileg meghatÂ´ rozhatjuk az osszes renÂ´ a a e a Â¨ dezÂ´ s szerinti felsË korlÂ´ tot, es kivÂ´ laszthatjuk azt, amelyik a legkisebb ertÂ´ ket adja. Ez a megoldÂ´ s e o a Â´ a Â´ e a azonban tÂ´ l sok idË be telne. A szÂ´ fa altal hasznÂ´ lt rendezÂ´ s szerinti felsË korlÂ´ tot viszonylag kÂ¨ nnyen u o o Â´ a e o a o meghatÂ´ rozhatjuk. Ehhez azt kell lÂ´ tnunk, hogy a gyÂ¨ kÂ´ r i cÂ´mkÂ´ jË elÂ´ hez tartozÂ´ rÂ´ szfa levelei repa a o e Ä± euÂ´e o e rezentÂ´ ljÂ´ k a GY i elemeit. A szÂ´ fa egyetlen bejÂ´ rÂ´ sÂ´ val egy egyszerË rekurzÂ´v mÂ´ dszer segÂ´tsÂ´ gÂ´ vel a a o aaa u Ä± o Ä± e e âˆ’d+p minden csÂ´ cshoz kiszÂ´ mÂ´thatjuk a KK âˆ—âˆ’d,p (GY Iâˆ’d ) es KK âˆ’d (|GY Iâˆ’d |) ertÂ´ keket, ahol d a csÂ´ cs u a Ä± Â´ Â´ e u I mÂ´ lysÂ´ gÂ´ t jelÂ¨ li, GY âˆ’d pedig az adott csÂ´ cshoz tartozÂ´ rÂ´ szfa altal reprezentÂ´ lt elemhalmazokat. A e e e o u o e Â´ a gyÂ¨ kÂ´ rhez kiszÂ´ mÂ´tott kÂ´ t ertÂ´ k adja meg a KK es KK âˆ— korlÂ´ tokat. o e a Ä± e Â´ e Â´ a Ha a maradÂ´ k futÂ´ si idË becslÂ´ sÂ´ re kÂ´vÂ´ njuk hasznÂ´ lni a fenti felsË korlÂ´ tot, akkor tudnunk kell, e a o ee Ä± a a o a hogy a jelÂ¨ ltek tÂ´ mogatottsÂ´ gÂ´ nak meghatÂ´ rozÂ´ sa fÂ¨ gg az A PRIORI algoritmusban felhasznÂ´ lt adato a a a a a u a struktÂ´ rÂ´ tÂ´ l. SzÂ´ fa esetÂ´ ben pÂ´ ldÂ´ ul egy jelÂ¨ lt elË fordulÂ´ sÂ´ nak meghatÂ´ rozÂ´ sÂ´ hoz el kell jutnunk a uao o e e a o o aa a aa jelÂ¨ ltet reprezentÂ´ lÂ´ levÂ´ lhez, ami a jelÂ¨ lt mÂ´ retÂ´ vel arÂ´ nyos lÂ´ pÂ´ sszÂ´ mÂ´ mË veletet igÂ´ nyel. A mao ao e o e e a e e a u u e âˆ— (GY ) ertÂ´ keket sÂ´ lyozni kell ( + p)-vel. radÂ´ k futÂ´ si idË pontosabb felsË becslÂ´ sÂ´ hez a KK +p e a o o ee Â´ e u

Ë o 4.2.10. KÂ´ telemu jelÂ¨ ltek szÂ´ mÂ´ nak csÂ¨ kkentÂ´ se : a DHP algoritmus e a a o e
Ha pusztÂ´ n matematikai szemmel nÂ´ zzÂ¨ k a gyakori elemhalmazokat, akkor elmondhatjuk, hogy a e u azok szÂ´ ma exponenciÂ´ lisan nË het (pontosabban a k- elemË ek szÂ´ ma m lehet, ahol m az elemek a a o u a k szÂ´ ma). AkÂ´ r a teljes elemhalmaz is lehet gyakori, ami azt jelentenÂ´ , hogy az APRIORI algoritmus a a e ennek mind a 2m rÂ´ szhalmazÂ´ t megtalÂ´ lnÂ´ , ami az elemek szÂ´ mÂ´ val exponenciÂ´ lisan nÂ¨ vekvË futÂ´ si e a a a a a a o o a idË t es tÂ´ rolÂ´ si igÂ´ nyt jelentene. o Â´ a a e Nem kÂ´vÂ´ nunk magunknak feldolgozhatatlan adatmennyisÂ´ geket elË allÂ´tani, ezÂ´ rt a Ä± a e oÂ´ Ä± e tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ bÂ¨ t ugy szokÂ´ s beÂ´ llÂ´tani, hogy a maximÂ´ lis mÂ´ retË gyakori elemhalmaz a a u o o Â´ a a Ä± a e u ne legyen 10-15-nÂ´ l nagyobb. A gyakorlat azt mutatja, hogy az ertelmes beÂ´ llÂ´tÂ´ sok mellett a e Â´ a Ä±a kÂ´ telemË (ritkÂ´ n a hÂ´ rom-, nÂ´ gyelemË ) jelÂ¨ ltek szÂ´ ma lesz a legnagyobb, es ahogyan nË az e u a a e u o a Â´ o elemhalmazok mÂ´ rete, ugy csÂ¨ kken az ilyen mÂ´ retË gyakori elemhalmazok szÂ´ ma. e Â´ o e u a A fenti abra jÂ´ l mutatja, hogy mind az APRIORI, mind az APRIORI-TID algoritmusok a gyaÂ´ o kori elempÂ´ rok megtalÂ´ lÂ´ sÂ´ val tÂ¨ ltik a legtÂ¨ bb idË t. TÂ¨ bb kÂ¨ lÂ¨ nbÂ¨ zË adatbÂ´ zisra lefuttatott tesza aa a o o o o uo o o a tek is hasonlÂ´ karakterisztikÂ´ t mutattak. Ennek oka az, hogy altalÂ´ ban a gyakori elemek szÂ´ ma o a Â´ a a |Gy1 | nagy, es gyakori elempÂ´ rok szÂ´ ma az elmÂ´ leti maximumnÂ´ l ( 2 ) jÂ´ val kevesebb. Â´ a kÂ´ telemË Â´ a a e a o Igy e u jelÂ¨ ltek rengetegen, a hÂ´ rom elemË ek pedig kevesen vannak. A gyakori elemek nagy szÂ´ ma mio a u a att sok hamis kÂ´ telemË jelÂ¨ lt all elË . A DHP algoritmus cÂ´ lja, hogy csÂ¨ kkentse a hamis jelÂ¨ ltek e u o Â´ o e o o szÂ´ mÂ´ t. A technikÂ´ jÂ´ t bÂ´ rmilyen nagysÂ´ gÂ´ hamis jelÂ¨ ltek kizÂ´ rÂ´ sÂ´ ra alkalmazhatjuk, a legnagyobb a a aa a a u o aaa sebessÂ´ gnÂ¨ vekedÂ´ st vÂ´ rhatÂ´ an a kÂ´ telemË eknÂ´ l hozza. SË t nagyobb elemszÂ´ mÂ´ jelÂ¨ lteknÂ´ l a hamis e o e a o e u e o a u o e jelÂ¨ ltek kizÂ´ rÂ´ sÂ´ ra fordÂ´tott erË forrÂ´ sok egyÂ´ ltalÂ´ n nem biztos, hogy megtÂ´ rÂ¨ lnek. o aaa Ä± o a a a eu Mi tÂ¨ rtÂ´ nik az adatbÂ´ zis elsË vÂ´ gigolvasÂ´ sa sorÂ´ n az APRIORI algoritmusnÂ´ l ? OsszeszÂ´ moljuk o e a o e a a a Â¨ a az egyes elemek elË fordulÂ´ sait (kezdetben minden elem jelÂ¨ lt). PÂ´ ldÂ´ ul tÂ´zezer jelÂ¨ lt esetÂ´ n 10000 Â· 4 o a o e a Ä± o e byte-t fogyasztunk el a memÂ´ riÂ´ bÂ´ l (ha feltesszÂ¨ k, hogy egy elem sem talÂ´ lhatÂ´ meg tÂ¨ bb mint 2 32 â‰ˆ o a o u a o o â‰ˆ 4.2 milliÂ´ rd tranzakciÂ´ ban). A mai memÂ´ riÂ´ k mÂ´ rete mellett ez nem tÂ´ l sok, Â´gy felmerÂ¨ l a kÂ´ rdÂ´ s, a o o a e u Ä± u e e hogy a szabad memÂ´ riÂ´ t fel tudnÂ´ nk-e hasznÂ´ lni ujabb hamis jelÂ¨ ltek kizÂ´ rÂ´ sÂ´ ra. o a a a Â´ o aaa

4. FEJEZET. GYAKORI ELEMHALMAZOK

66

Â¨ A DHP (Direct Hashing and Pruning) algoritmus [127] az APRIORI tovÂ´ bbfejlesztÂ´ se. Otlete a e az, hogy mikÂ¨ zben az elemek elË fordulÂ´ sÂ´ t szÂ´ moljuk, gyË jtsÂ¨ nk informÂ´ ciÂ´ t az elempÂ´ rokrÂ´ l is. o o aa a u u a o a o ElË fordulhat, hogy ezen informÂ´ ciÂ´ hamis kÂ´ telemË jelÂ¨ lteket szË rhetÂ¨ nk ki, es nem veszÂ¨ nk fel a o a o e u o u u Â´ u jelÂ¨ ltek kÂ¨ zÂ´ , annak ellenÂ´ re, hogy mindkÂ´ t elemÂ¨ k gyakori. KÂ´ szÂ´tsÂ¨ nk hÂ´ t egy hash-tÂ´ blÂ´ t, es hasho o e e e u e Ä± u a a a Â´ eljÂ¨ k bele az osszes elempÂ´ rt, ami elË fordul valamely tranzakciÂ´ ban. Egy elempÂ´ r hash-elÂ´ sÂ´ nÂ´ l u Â¨ a o o a ee e nÂ¨ veljÂ¨ k annak a vÂ¨ dÂ¨ rnek a szÂ´ mlÂ´ lÂ´ jÂ´ t, amibe hash-eltÂ¨ k. Ugyanabba a vÂ¨ dÂ¨ rbe termÂ´ szetesen o u o o a aoa u o o e tÂ¨ bb kÂ¨ lÂ¨ nbÂ¨ zË elempÂ´ rt is hash-elhetÂ¨ nk. Magukat a vÂ¨ drÂ¨ ket ne tÂ´ roljuk a memÂ´ riÂ´ ban : elÂ´ g a o uo o o a u o o a o a e szÂ´ mlÂ´ lÂ´ kat tartalmazÂ´ vektort felvennÂ¨ nk. A vektor i-edik eleme fogja megadni az i hash-Â´ rtÂ´ kkel a ao o u e e rendelkezË vÂ¨ dÂ¨ r szÂ´ mlÂ´ lÂ´ jÂ´ t. KÂ¨ nnyen lÂ´ thatÂ´ , hogy az i-edik szÂ´ mlÂ´ lÂ´ ertÂ´ ke meg fog egyezni azon o o o a aoa o a o a aoÂ´ e elempÂ´ rok tÂ´ mogatottsÂ´ gÂ´ nak osszegÂ´ vel, amelyek hash-Â´ rtÂ´ ke i. Azaz egy elempÂ´ r nem lehet gyaa a a a Â¨ e e e a kori, ha azt olyan vÂ¨ dÂ¨ rbe hash-eltÂ¨ k, amelynek szÂ´ mlÂ´ lÂ´ ja kisebb min supp-nÂ´ l. o o u a ao a Ezek szerint egy elempÂ´ r az adatbÂ´ zis elsË vÂ´ gigolvasÂ´ sa utÂ´ n akkor lesz jelÂ¨ lt, ha egyrÂ´ szt a a o e a a o e mindkÂ´ t eleme gyakori, mÂ´ srÂ´ szt gyakori vÂ¨ dÂ¨ rbe hash-eltÂ¨ k. Az adatbÂ´ zis vÂ´ gigolvasÂ´ sa utÂ´ n nincs e a e o o u a e a a Â´ szÂ¨ ksÂ´ gÂ¨ nk a vÂ¨ drÂ¨ k szÂ´ mlÂ´ lÂ´ ira, csak arra az informÂ´ ciÂ´ ra, hogy melyik vÂ¨ dÂ¨ r gyakori. Eppen ezÂ´ rt u e u o o a ao a o o o e helyettesÂ´tsÂ¨ k a hash-tÂ´ blÂ´ t egy bittÂ´ rkÂ´ ppel, aminek i-edik pozÂ´ciÂ´ jÂ´ ban 1-es all, ha az i-edik vÂ¨ dÂ¨ r Ä± u a a e e Ä± oa Â´ o o gyakori, es 0, ha nem. EbbË l a bittÂ´ rkÂ´ pbË l, tovÂ´ bbÂ´ a gyakori -elemË elemhalmazokbÂ´ l mÂ´ r elË Â´ o e e o a a u o a o tudjuk allÂ´tani az ( + 1)-elemË jelÂ¨ lteket. Â´ Ä± u o MinÂ´ l nagyobb a hash-tÂ´ bla, annÂ´ l kevesebb az utkÂ¨ zÂ´ s, es annÂ´ l kevesebb az esÂ´ lye, hogy egy e a a Â¨ o e Â´ a e ritka elemhalmaz azonos vÂ¨ dÂ¨ rbe kerÂ¨ l egy gyakorival (vagy sok ritka egy vÂ¨ dÂ¨ rbe kerÂ¨ l, aminek o o u o o u kÂ¨ vetkeztÂ´ ben a vÂ¨ dÂ¨ r gyakori lesz), tehÂ´ t annÂ´ l kevesebb hamis jelÂ¨ lt lesz. A hash-tÂ´ bla azonban nem o e o o a a o a lehet tÂ´ l nagy, hiszen a hash-tÂ´ blÂ´ nak, a jelÂ¨ ltek es azok szÂ´ mlÂ´ lÂ´ inak el kell fÂ´ rniÂ¨ k a memÂ´ riÂ´ ban. u a a o Â´ a ao e u o a A 4.7 abra a DHP algoritmus mË kÂ¨ dÂ´ sÂ´ nek elsË fÂ´ zisÂ´ ra mutat pÂ´ ldÂ´ t (minimÂ´ lis tÂ´ mogatottsÂ´ gi Â´ u o ee o a a e a a a a Â´ kÂ¨ szÂ¨ bnek 0,5-Â¨ t adtunk meg). Erdemes osszehasonlÂ´tanunk a DHP altal elË allÂ´tott kÂ´ telemË jelÂ¨ lteu o o Â¨ Ä± Â´ oÂ´ Ä± e u o ket az APRIORI algoritmus altal lÂ´ trehozott jelÂ¨ ltekkel. MÂ´g a DHP csak 4 jelÂ¨ ltet (amelyek kÂ¨ zÂ¨ tt Â´ e o Ä± o o o egy hamis jelÂ¨ lt sincs), addig az APRIORI algoritmus 6-ot allÂ´t elË . o Â´ Ä± o Abban az esetben is hasznÂ´ ljÂ´ k a DHP otletÂ´ t, amikor a gyakori elemek szÂ´ ma olyan nagy, hogy a a Â¨ e a a kÂ´ telemË jelÂ¨ ltek nem fÂ´ rnek el a memÂ´ riÂ´ ban. Ekkor az adatbÂ´ zis elsË vÂ´ gigolvasÂ´ sa utÂ´ n nem e u o e o a a o e a a allÂ´tjuk elË a kÂ´ telemË jelÂ¨ lteket, hanem inkÂ´ bb ujra vÂ´ gigolvassuk az adatbÂ´ zist es egy mÂ´ sik hash Â´ Ä± o e u o a Â´ e a Â´ a fÂ¨ ggvÂ´ nyt alkalmazÂ´ hash tÂ´ blÂ´ t kÂ´ szÂ´tÂ¨ nk. Mivel a gyakori elemeket ismerjÂ¨ k, ezÂ´ rt elÂ´ g a gyakou e o a a e Ä±u u e e ri elemekbË l allÂ´ pÂ´ rokat hash-elni. Az uj hash tÂ´ blÂ´ val ujabb hamis jelÂ¨ lteket szË rhetÂ¨ nk ki. Egy o Â´ o a Â´ a a Â´ o u u elempÂ´ r abban az esetben lesz jelÂ¨ lt, ha a mÂ´ sodik hash-elÂ´ snÂ´ l is gyakori vÂ¨ dÂ¨ rbe kerÂ¨ lt. a o a e e o o u

4.3. Az ECLAT algoritmus
Az E CLAT az ures mintÂ´ bÂ´ l indulva egy rekurzÂ´v, mÂ´ lysÂ´ gi jellegË bejÂ´ rÂ´ st valÂ´ sÂ´t meg. A rekurziÂ´ Â¨ a o Ä± e e u aa oÄ± o mÂ´ lysÂ´ ge legfeljebb eggyel tÂ¨ bb, mint a legnagyobb gyakori elemhalmaz mÂ´ rete. Az A PRIORI-val e e o e szemben mindig egyetlen jelÂ¨ ltet allÂ´t elË , majd ennek azonnal meghatÂ´ rozza a tÂ´ mogatottsÂ´ gÂ´ t. Az o Â´ Ä± o a a a a ( + 1)-elemË , P preï¬xË jelÂ¨ lteket, ahol |P| = âˆ’ 1 az -elemË , P preï¬xË gyakori elemhalmazokbÂ´ l u u o u u o allÂ´tja elË egyszerË pÂ´ ronkÂ´ nti uniÂ´ kÂ´ pzÂ´ ssel. Â´ Ä± o u a e o e e Az algoritmus kÂ¨ zponti fogalma az un. TID-halmaz. Egy elemhalmaz TID-halmaz anak (Trano Â´ Â´ saction IDentiï¬er) elemei azon bemeneti sorozatok azonosÂ´tÂ´ i (sorszÂ´ mai), amelyek tartalmazzÂ´ k Ä±o a a az adott elemhalmazt. MÂ´ s szÂ´ val egy TID-halmaz a vertikÂ´ lis adatbÂ´ zis egy megfelelË sora. a o a a o PÂ´ ldÂ´ ul AD, AC, ABCD, B, AD, ABD, D bemenet esetÂ´ n az {A, C} elemhalmaz TID-halmaza {1,2}, e a e amennyiben egy tranzakciÂ´ azonosÂ´tÂ´ ja megegyezik a bemeneti sorozatban elfoglalt helyÂ´ vel, es a o Ä±o e Â´ helyek szÂ´ mozÂ´ sÂ´ t nullÂ´ tÂ´ l kezdjÂ¨ k. a aa ao u

4. FEJEZET. GYAKORI ELEMHALMAZOK AdatbÂ´ zis a k id elemek 100 A C D 200 B C E 300 A B C E 400 B E Elemek sorszÂ´ mai a Elem sorszÂ´ m a A 1 B 2 C 3 D 4 E 5 GY1 elem halmaz tÂ´ mogatottsÂ´ g a a {A} 2 {B} 3 {C} 3 {E} 3

67

H1 hash-tÂ´ bla h(i1 ,i2 )=(10 Â· sorszÂ´ m(i1 )+ sorszÂ´ m(i2)) mod 7 a a a elempÂ´ rok: a szÂ´ mlÂ´ lÂ´ : a ao hash-Â´ rtÂ´ k: e e {C,E} {A,D} {A,E} {B,C} 3 1 2 0 0 1 2 3 J2 JelÂ¨ ltek o {A,C} {B,C} {B,E} {C,E} {B,E} {A,B} 3 1 4 5 {A,C} {C,D} 3 6

4.7. abra. PÂ´ lda DHP algoritmusra Â´ e

A TID-halmaz kÂ´ t fontos tulajdonsÂ´ ggal bÂ´r : e a Ä± I. Az I elemhalmaz TID-halmazÂ´ nak mÂ´ rete megadja az I tÂ´ mogatottsÂ´ gÂ´ t. a e a a a II. Egy jelÂ¨ lt TID-halmazÂ´ t megkaphatjuk a generÂ´ torainak TID-halmazaibÂ´ l egy egyszerË meto a a o u szetkÂ´ pzÂ´ ssel. e e Az E CLAT pszeudokÂ´ dja az alÂ´ bbi. o a ElË szÂ¨ r meghatÂ´ rozzuk a gyakori elemeket, majd felÂ´ pÂ´tjÂ¨ k a gyakori elemek TID-halmazait. A o o a e Ä± u kÂ´ sË bbiekben nem hasznÂ´ ljuk a bemenetet, csak a TID-halmazokat. Az algoritmus lÂ´ nyege a E CLATeo a e Â´ D rekurziÂ´ s eljÂ´ rÂ´ s. JelÂ¨ ljÂ¨ k a P preï¬xË , P-nÂ´ l eggyel nagyobb mÂ´ retË gyakori elemhalmazokbÂ´ l SEG E o aa o u u e e u o / alkotott halmazcsalÂ´ dot GY P -vel. NyilvÂ´ nvalÂ´ , hogy GY 0 = GY1 . a a o Az E CLAT jelÂ¨ lt-elË allÂ´tÂ´ sa megegyezik az A PRIORI jelÂ¨ lt-elË allÂ´tÂ´ sÂ´ val, azzal a kÂ¨ lÂ¨ nbsÂ´ ggel, o oÂ´ Ä± a o oÂ´ Ä± a a uo e hogy nem ellenË rizzÂ¨ k az uniÂ´ kÂ´ pzÂ´ ssel kapott halmaznak minden rÂ´ szhalmazÂ´ ra, hogy gyakorio u o e e e a e (a mÂ´ lysÂ´ gi bejÂ´ rÂ´ s miatt ez az informÂ´ ciÂ´ nem is all rendelkezÂ´ sÂ¨ nkre). LÂ´ thatÂ´ , hogy az E C e e aa a o Â´ eu a o

4. FEJEZET. GYAKORI ELEMHALMAZOK Algorithm 3 E CLAT Require: T : tranzakciÂ´ k sorozata, o min supp : tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ b, a a u o for all t âˆˆ T do for all i âˆˆ t do J1 â† J1 âˆª {i} i.szÂ´ mlÂ´ lÂ´ â† i.szÂ´ mlÂ´ lÂ´ + 1 a ao a ao end for end for for all j âˆˆ J1 do if j.szÂ´ mlÂ´ lÂ´ â‰¥ min supp then a ao GY1 â† GY1 âˆª { j} end if end for for i â† 1 to |T | do for all j âˆˆ ti âˆ© GY1 do j.T ID â† j.T ID âˆª {i} end for end for Â´ / return GY1 âˆª E CLAT- SEG E D (GY1 , 0, min supp)

68

Algorithm 4 E CLAT Require: P : preï¬x elemhalmaz. GY P : P preï¬xË , P-nÂ´ l eggyel nagyobb mÂ´ retË gyakori elemhalmazokbÂ´ l alkotott halmazcsalÂ´ dot u e e u o a P -vel, GY a a u o min supp : tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ b, for all gy âˆˆ GY P do for all gy âˆˆ GY P , gy gy do j â† gy âˆª gy j.T ID â† gy.T ID âˆ© gy .T ID if | j.T ID| â‰¥ min supp then GY gy â† GY gy âˆª { j} end if end for if |GY gy | â‰¥ 2 then Â´ GY â† GY âˆª GY gy âˆª E CLAT- SEG E D(GY gy , gy, min supp) else GY â† GY âˆª GY gy end if end for return GY abban is kÂ¨ lÂ¨ nbÂ¨ zik az A PRIORI-tÂ´ l, hogy egy jelÂ¨ lt elË allÂ´tÂ´ sa utÂ´ n azonnal meghatÂ´ rozza a uo o o o oÂ´ Ä± a a a tÂ´ mogatottsÂ´ gÂ´ t, mielË tt ujabb jelÂ¨ ltet allÂ´tana elË . NÂ´ zzÂ¨ nk egy pÂ´ ldÂ´ t a keresÂ´ si tÂ´ r bejÂ´ rÂ´ sÂ´ ra. a a a o Â´ o Â´ Ä± o e u e a e e aaa
LAT

4. FEJEZET. GYAKORI ELEMHALMAZOK

69

4.14. pÂ´ lda. Legyen T = ACDE, ACG, AFGM, DM es min supp = 2. ElsË lÂ´ pÂ´ sben meghatÂ´ rozzuk e o e e a Â´ / 0 . EzutÂ´ n elË allÂ´tjuk es azonnal meg is a gyakori elemeket : A, C, D, G, M, ami nem mas, mint GY a oÂ´ Ä± Â´ Â´ hatÂ´ rozzuk az (A, C), (A, D), (A, G), (A, M) pÂ´ rok uniÂ´ jÂ´ t. Ezek kÂ¨ zÂ¨ l csak az AC, AG halmazok a a oa ou gyakoriak. A kÂ¨ vetkezË rekurziÂ´ s lÂ´ pÂ´ sben ennek a kÂ´ t halmaznak vesszÂ¨ k az uniÂ´ jÂ´ t, allÂ´tjuk elË a o o o e e e u oa Â´ Ä± o TID-halmazÂ´ t, amely alapjÂ´ n kiderÂ¨ l, hogy az ACG ritka, es a rekurziÂ´ ezen aga vÂ´ get er. EzutÂ´ n a C a a u o e a Â´ Â´ Â´ elemnek vesszÂ¨ k az uniÂ´ jÂ´ t a sorban utÂ´ na kÂ¨ vetkezË elemekkel egyesÂ´ vel es Â´gy tovÂ´ bb. u oa a o o e Â´ Ä± a LÂ´ tnunk kell, hogy az E CLAT legalÂ´ bb annyi jelÂ¨ ltet allÂ´t elË , mint az A PRIORI. A mÂ´ lysÂ´ gi a a o Â´ Ä± o e e bejÂ´ rÂ´ s miatt ugyanis egy jelÂ¨ lt elË allÂ´tÂ´ sÂ´ nÂ´ l nem all rendelkezÂ´ sÂ¨ nkre az osszes rÂ´ szhalmaz. Az aa o oÂ´ Ä± a a a Â´ eu Â¨ e elË zË pÂ´ lda esetÂ´ ben pÂ´ ldÂ´ ul az {A,C,G} tÂ´ mogatottsÂ´ gÂ´ t hamarabb vizsgÂ´ lja, mint a {C,G} halo o e e e a a a a a mazÂ´ t, holott ez utÂ´ bbi akÂ´ r ritka is lehet. Ebben a tekintetben tehÂ´ t az E CLAT rosszabb az A PRIORIe o a a nÂ´ l, ugyanis tÂ¨ bb lesz a ritka jelÂ¨ lt. a o o Az E CLAT igazi ereje a jelÂ¨ ltek tÂ´ mogatottsÂ´ gÂ´ nak meghatÂ´ rozÂ´ sÂ´ ban van. A jelÂ¨ ltek TIDo a a a a aa o halmazainak elË allÂ´tÂ´ sa egy rendkÂ´vÂ¨ l egyszerË es nagyon gyors mË velet lesz. Emellett ahogy haoÂ´ Ä± a Ä± u u Â´ u ladunk egyre mÂ´ lyebbre a mÂ´ lysÂ´ gi bejÂ´ rÂ´ s sorÂ´ n, ugy csÂ¨ kken a TID-halmazok mÂ´ rete, es ezzel a e e e aa a Â´ o e Â´ tÂ´ mogatottsÂ´ g meghatÂ´ rozÂ´ sÂ´ nak ideje is. Ezzel szemben az A PRIORI-nÂ´ l ahogy haladunk az egyre a a a aa a nagyobb mÂ´ retË jelÂ¨ ltek felÂ´ , ugy nË a szÂ´ fa mÂ´ lysÂ´ ge, es lesz egyre lassabb minden egyes jelÂ¨ lt e u o e Â´ o o e e Â´ o tÂ´ mogatottsÂ´ gÂ´ nak meghatÂ´ rozÂ´ sa. a a a a a A keresÂ´ si tÂ´ r bejÂ´ rÂ´ sa fÂ¨ gg a preï¬x deï¬nÂ´ciÂ´ jÂ´ tÂ´ l, amit az elemeken deï¬niÂ´ lt rendezÂ´ s hatÂ´ roz e e aa u Ä± oao a e a meg. Melyek lesznek azok a jelÂ¨ ltek, amelyek az A PRIORI-ban nem lennÂ´ nek jelÂ¨ ltek (tehÂ´ t bizo e o a tosan ritkÂ´ k), illetve vÂ´ rhatÂ´ an melyik az a rendezÂ´ s, amely a legkevesebb ilyen tulajdonsÂ´ gÂ´ hala a o e a u mazt adja ? Ha egy elemhalmaz jelÂ¨ lt az E CLAT algoritmusban, de az A PRIORI-ban nem, akkor van o olyan rÂ´ szhalmaza, amely ritka. Amennyiben feltÂ´ telezzÂ¨ k, hogy az elemek fÂ¨ ggetlenek, akkor azon e e u u rÂ´ szhalmaz elË fordulÂ´ sÂ´ nak lesz legkisebb a valÂ´ szÂ´nË sÂ´ ge (Â´ s ezzel egyÂ¨ tt az esÂ´ lye annak, hogy e o aa o Ä± ue e u e ritka), amely a leggyakoribb elemet nem tartalmazza. A jelÂ¨ lt preï¬xe generÂ´ tor, tehÂ´ t gyakori, Â´gy o a a Ä± akkor lesz a legnagyobb esÂ´ lye annak, hogy minden rÂ´ szhalmaz gyakori, ha a preï¬x a leggyakoribb e e elemet nem tartalmazza. Az E CLAT algoritmusnÂ´ l a legkevesebb ritka jelÂ¨ ltet es Â´gy a legjobb futÂ´ si a o Â´ Ä± a idË t tehÂ´ t a gyakorisÂ´ g szerint csÂ¨ kkenË rendezÂ´ stË l vÂ´ rhatjuk. o a a o o e o a 4.15. pÂ´ lda. Ennek a gondolatmenetnek az illusztralÂ´ sÂ´ ra nÂ´ zzÂ¨ k a kÂ¨ vetkezË pÂ´ ldÂ´ t. Legyenek gyae e u o o e a Â´aa kori halmazok a kÂ¨ vetkezË k : A, B, C, D, AB, AC, BC, AD, ABC, tovÂ´ bbÂ´ supp(A) supp(B) o o a a supp(C) supp(D). Amennyiben az E CLAT algoritmus a gyakoris ag szerint nÂ¨ vekvË sorrendet o o Â´ hasznÂ´ lja, akkor az elË allÂ´tÂ´ s sorrendjÂ´ ben a kÂ¨ vetkezË halmazok lesznek jelÂ¨ ltek : A, B, C, D, AB, a oÂ´ Ä± a e o o o AC, AD, ABC, ABD, ACD, BC, BD, CD. Ugyanez gyakorisag szerint csÂ¨ kkenË sorrendnÂ´ l D, C, B, o o e Â´ A, DC, DB, DA, CB, CA, CBA, BA. Az utÂ´ bbi esetben tehÂ´ t nÂ´ gy ritka jelÂ¨ lt helyett (ABD, ACD, BD, o a e o CD) csak kettË lesz (CD, BD). MegjegyezzÂ¨ k, hogy ez a kÂ´ t elemhalmaz az A PRIORI esetÂ´ ben is jelÂ¨ lt o u e e o lesz. A gyakorisÂ´ g szerint csÂ¨ kkenË esetben egyszer allÂ´tunk elË olyan hÂ´ romelemË jelÂ¨ ltet, amelynek a o o o a u o Â´ Ä± van olyan kÂ´ telemË rÂ´ szhalmaza, amelyet nem vizsgÂ´ ltunk. Ez a jelÂ¨ lt a CBA es a nem megvizsgÂ´ lt e u e a o a Â´ rÂ´ szhalmaz a BA. Mivel a rÂ´ szhalmaz eppen a leggyakoribb elemeket tÂ´ rolja, ezÂ´ rt van nagy esÂ´ lye e e a e e Â´ annak, hogy gyakori (fË leg ha hozzÂ´ vesszÂ¨ k, hogy a jelÂ¨ lt kÂ´ t generÂ´ tora, CB es CA is gyakori). o a u o e a Â´ JavÂ´thatunk az algoritmus hatÂ´ konysÂ´ gÂ´ n, ha nem a jelÂ¨ ltek TID-listÂ´ it tÂ´ roljuk, hanem a jelÂ¨ lt Ä± e a a o a a o es preï¬xe TID-listÂ´ jÂ´ nak kÂ¨ lÂ¨ nbsÂ´ gÂ´ t. A preï¬x tÂ´ mogatottsÂ´ gÂ´ bÂ´ l es a TID listÂ´ k kÂ¨ lÂ¨ nbsÂ´ gÂ´ bË l a Â´ aa uo e e a a a o Â´ a uo e e o tÂ´ mogatottsÂ´ g egyÂ´ rtelmË en megadhatÂ´ . A kÂ¨ lÂ¨ nbsÂ´ gi listÂ´ k akÂ´ r nagyobbak is lehetnek az eredeti a a e u o uo e a a TID-listÂ´ knÂ´ l (pÂ´ ldÂ´ ul, ha a I tÂ´ mogatottsÂ´ ga kicsi, de a preï¬xÂ´ nek tÂ´ mogatottsÂ´ ga nagy), Â´gy a lega a e a a a e a a Ä± jobb megoldÂ´ st a kÂ´ t technika otvÂ¨ zÂ´ se adhatja (pÂ´ ldÂ´ ul 4-nÂ´ l kisebb elemszÂ´ mnÂ´ l TID lista, utÂ´ na a e Â¨ o e e a e a a a

4. FEJEZET. GYAKORI ELEMHALMAZOK

70

kÂ¨ lÂ¨ nbsÂ´ gi listÂ´ k) [187]. A kÂ¨ lÂ¨ nbsÂ´ gi listÂ´ t hasznÂ´ lÂ´ algoritmusok nagy fÂ¨ lÂ´ nnyel verik a tÂ¨ bbi aluo e a uo e a ao oe o goritmust, amennyiben a bemenet sË rË , es nagy mÂ´ retË gyakori mintÂ´ k is vannak. uu Â´ e u a

4.4. Az FP- GROWTH algoritmus
Az FP- GROWTH algoritmus[75] 2 egy mÂ´ lysÂ´ gi jellegË , rekurzÂ´v algoritmus, a keresÂ´ si tÂ´ r e e u Ä± e e bejÂ´ rÂ´ sa tekintetÂ´ ben megegyezik az E CLAT-tal. A tÂ´ mogatottsÂ´ gok meghatÂ´ rozÂ´ sÂ´ t az egyelemË aa e a a a aa u gyakori halmazok meghatÂ´ rozÂ´ sÂ´ val, majd a bemenet sz urÂ´ sÂ´ vel es vetÂ´tÂ´ sÂ´ vel valÂ´ sÂ´tja meg rea aa Â´ Ä±e e oÄ± Ë ee kurzÂ´v mÂ´ don. A bemenet szË rÂ´ se azt jelenti, hogy az egyes tranzakciÂ´ kbÂ´ l tÂ¨ rÂ¨ ljÂ¨ k a bennÂ¨ k Ä± o ue o o oo u u elË fordulÂ´ ritka elemeket. A T elemhalmaz P elemhalmazra vetÂ´tÂ´ sÂ´ t (jelÂ¨ lÂ´ sben T |P) pedig o o Ä±e e oe ugy kapjuk, hogy vesszÂ¨ k a P-t tartalmazÂ´ tranzakciÂ´ kat, majd tÂ¨ rÂ¨ ljÂ¨ k belË lÂ¨ k a P-t. PÂ´ ldÂ´ ul Â´ u o o oo u ou e a ACD, BCE, ABCE, BE, ABCE |B = CE, ACE, E, ACE . Az algoritmus pszeudokÂ´ dja a kÂ¨ veto o kezË kben olvashatÂ´ . o o Algorithm 5 FP- GROWTH Require: T : tranzakciÂ´ k sorozata, o min supp : tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ b, a a u o Â´ / FP- GROWTH - SEG E D ( T , min supp, 0) A segÂ´ deljÂ´ rÂ´ s harmadik paramÂ´ tere (P) egy preï¬x elemhalmaz, az elsË paramÂ´ ter pedig az eredeti e aa e o e / bemenet P-re vetÂ´tÂ´ se. Az eredeti bemenet 0-ra vetÂ´tÂ´ se megegyezik onmagÂ´ val. Ä±e Ä±e Â¨ a Egy rekurziÂ´ s lÂ´ pÂ´ s hÂ´ rom fË lÂ´ pÂ´ sbË l all. ElË szÂ¨ r meghatÂ´ rozzuk azon elemek tÂ´ mogatottsÂ´ gÂ´ t, o e e a o e e o Â´ o o a a a a amelyek elË fordulnak valamelyik tranzakciÂ´ ban (1â€“4. sorok). EzekbË l kivÂ´ lasztjuk a gyakoriakat (5â€“ o o o a 7. sorok). EzutÂ´ n minden gy gyakori elemet egyesÂ´ vel veszÂ¨ nk (9. sor). MeghatÂ´ rozzuk a gy-hez a e u a tartozÂ´ vetÂ´tett bemenetet, majd meghÂ´vjuk az algoritmust rekurzÂ´van a T |gy bemenetre. TÂ¨ rÂ¨ lnÂ¨ nk o Ä± Ä± Ä± oo u âˆ— -beli tranzakciÂ´ k elemei kÂ¨ zÂ¨ l (13. sor) annak erdekÂ´ ben, hogy egy jelÂ¨ ltet csak kell a gy elemet a T o o u Â´ e o egyszer allÂ´tsunk elË . Â´ Ä± o A jelÂ¨ ltek elË allÂ´tÂ´ sÂ´ nak tekintetÂ´ ben az FP- GROWTH algoritmus a legegyszerË bb. Ha az I elemo oÂ´ Ä± a a e u halmaz gyakori, akkor a kÂ¨ vetkezË rekurziÂ´ s szinten azon I âˆª j halmazok lesznek a jelÂ¨ ltek, ahol j o o o o az I-re vetÂ´tett bemenetben elË fordulÂ´ elem es I âˆª j nem volt jelÂ¨ lt korÂ´ bban. TulajdonkÂ´ ppen az FPÄ± o o Â´ o a e GROWTH a nagy elemszÂ´ mÂ´ jelÂ¨ ltek tÂ´ mogatottsÂ´ gÂ´ nak meghatÂ´ rozÂ´ sÂ´ t visszavezeti hÂ´ rom egyszerË a u o a a a a aa a u mË veletre : egyelemË gyakori elemhalmazok kivÂ´ logatÂ´ sa, szË rÂ´ s es vetÂ´tett bemenet elË allÂ´tÂ´ sa. u u a a ue Â´ Ä± oÂ´ Ä± a A 9. sorban egyesÂ´ vel vesszÂ¨ k a gyakori elemeket. Ezt valamilyen rendezÂ´ s szerint kell tennÂ¨ nk e u e u es ez a rendezÂ´ s hatÂ´ rozza meg, hogy milyen sorban jÂ´ rjuk be a keresÂ´ si teret, milyen vetÂ´tett bemeÂ´ e a a e Ä± neteket allÂ´tunk elË es mely elemhalmazok lesznek a hamis jelÂ¨ ltek. Az E CLAT-nÂ´ l elmondottak itt is Â´ Ä± oÂ´ o a elnek ; vÂ´ rhatÂ´ an abban az esetben lesz a hamis jelÂ¨ ltek szÂ´ ma minimÂ´ lis, amennyiben a preï¬xben a Â´ a o o a a legritkÂ´ bb elemek vannak, azaz a 9. sorban gyakorisÂ´ g szerint nÂ¨ vekvË sorban vesszÂ¨ k az elemeket. a a o o u Az FP- GROWTH algoritmus szerves rÂ´ sze az FP-fa, amelyben a szË rt bemenetet tÂ´ roljuk. Az FPe u a fa segÂ´tsÂ´ gÂ´ vel kÂ¨ nnyen elË allÂ´thatjuk a vetÂ´tett bemeneteket, azokban kÂ¨ nnyen meghatÂ´ rozhatjuk az Ä± e e o oÂ´ Ä± Ä± o a elemek tÂ´ mogatottsÂ´ gÂ´ t, amibË l elË allÂ´thatjuk a vetÂ´tett, majd szË rt bemenetet. Ezt a vetÂ´tett es szË rt a a a o oÂ´ Ä± Ä± u Ä± Â´ u bemenetet szintÂ´ n egy FP-fÂ´ ban tÂ´ roljuk, amelyet vetÂ´tett FP-fÂ´ nak hÂ´vunk. e a a Ä± a Ä±
FP a Frequent Pattern rÂ¨ vidÂ´tÂ´ se, ami miatt az algoritmust mintanovelË algoritmusnak is hÂ´vjÂ´ k. Ez az elnevezÂ´ s o Ä±e Ä± a e Â¨ o azonban fÂ´ lrevezetË , ugyanis szinte az osszes GYEK algoritmus mintanÂ¨ velË abban az ertelemben, hogy egy uj jelÂ¨ lt a e o Â¨ o o Â´ Â´ o generÂ´ torainak egyelemË bË vÂ´tÂ´ se, vagy mÂ´ s szÂ´ val nÂ¨ velÂ´ se. Az FP- GROWTH sajÂ´ tsÂ´ ga nem a jelÂ¨ ltek elË allÂ´tÂ´ sa, hanem a u o Ä±e a o o e a a o oÂ´ Ä± a a jelÂ¨ ltek tÂ´ mogatottsÂ´ g-meghatÂ´ rozÂ´ sÂ´ nak mÂ´ dja. o a a a aa o
2 Az

4. FEJEZET. GYAKORI ELEMHALMAZOK Algorithm 6 FP- GROWTH-segÂ´ d e Require: T : vetÂ´tett bemenet, Ä± min supp : tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ b, a a u o P : preï¬x elemhalmaz, for all t âˆˆ T do for all i âˆˆ t do J1 â† {i} i.szÂ´ mlÂ´ lÂ´ â† i.szÂ´ mlÂ´ lÂ´ + 1 a ao a ao end for end for for all j âˆˆ J1 do if j.szÂ´ mlÂ´ lÂ´ â‰¥ min supp then a ao GY1 â† GY1 âˆª { j} end if end for Ë Â´ T âˆ— â† SZ UR E S (T, GY1 ) for all gy âˆˆ GY1 do T âˆ— |gy â† VETÂ´T E S (T âˆ— , gy) I Â´ end for GY â† GY âˆª {P âˆª {gy}} FP- GROWTH (T âˆ— |gy,min supp, P âˆª {gy}) Â¨ Â´ T âˆ— â† T ORL E S (T âˆ— , gy) return GY

71

Az FP-fa egy keresztÂ´ lekkel es egy fejlÂ´ c tÂ´ blÂ´ val kibË vÂ´tett szÂ´ fa. Az elek cÂ´mkÂ´ i gyakori elee Â´ e a a o Ä± o Â´ Ä± e mek. Az egyszerË bb leÂ´rÂ´ s kedvÂ´ ert egy (nemgyÂ¨ kÂ´ r) csÂ´ cs cÂ´mkÂ´ jÂ´ n a csÂ´ csba mutatÂ´ el cÂ´mkÂ´ jÂ´ t u Ä±a eÂ´ o e u Ä± ee u oÂ´ Ä± ee ertjÂ¨ k. Minden csÂ´ cs egy elemhalmazt reprezentÂ´ l, amelynek elemei a gyÂ¨ kÂ´ rbË l a csÂ´ csig vezetË ut Â´ u u a o e o u oÂ´ csÂ´ csainak cÂ´mkÂ´ ivel egyeznek meg. Minden csÂ´ cshoz egy szÂ´ mlÂ´ lÂ´ t rendelÂ¨ nk. Ez a szÂ´ mlÂ´ lÂ´ adja u Ä± e u a ao u a ao meg, hogy a csÂ´ cs altal reprezentÂ´ lt halmaz mennyi bemeneti (vagy vetÂ´tett) elemhalmaznak a preï¬u Â´ a Ä± xe. Az azonos cÂ´mkÂ´ jË csÂ´ csok lÂ´ ncolt listaszerË en ossze vannak kÂ¨ tve keresztirÂ´ nyÂ´ elekkel. A lÂ´ nc Ä± eu u a u Â¨ o a uÂ´ a legelsË elemÂ´ re mutat a fejlÂ´ ctÂ´ blÂ´ nak az adott elemÂ´ hez tartozÂ´ mutatÂ´ ja. o e e a a e o o 4.16. pÂ´ lda. TegyÂ¨ k fel, hogy bemenetkÂ´ nt a ACDFMQ, ABCFMO, BFO, BCKSQ, ACFMQ, CS, e u e DFJ, FHI sorozat van adva, es min supp = 3. A gyakori elemek : A, B, C, F, M, Q, amelyek Â´ tÂ´ mogatottsÂ´ ga rendre 3, 3, 5, 6, 3, 3. Ekkor a szurt bemenetet ( ACFMQ, ABCFM, BF, BCQ, a a Ë ACFMQ, C, F, F ) reprezentÂ´ lÂ´ FP-fa, amely gyakorisÂ´ g szerint csÂ¨ kkenË sorrendet (Q M ao a o o B A C F) hasznÂ´ l, a 4.8. abrÂ´ n lÂ´ thatÂ´ a o Â´ a a Egy FP-fÂ´ t hasonlÂ´ mÂ´ don epÂ´tÂ¨ nk fel, mint egy szÂ´ fÂ´ t. KÂ¨ lÂ¨ nbsÂ´ g, hogy egy I elemhalmaz a o o Â´ Ä±u oa uo e beszÂ´ rÂ´ sÂ´ nÂ´ l nem csak az I-t reprezentÂ´ lÂ´ levÂ´ lnek a szÂ´ mlÂ´ lÂ´ jÂ´ t nÂ¨ veljÂ¨ k eggyel, hanem minden uaa a ao e a aoa o u olyan csÂ´ csÂ´ t, amelyet erintÂ¨ nk a beszÂ´ rÂ´ s sorÂ´ n (hiszen ezen csÂ´ csokat reprezentÂ´ lÂ´ halmazok az I u e Â´ u ua a u ao preï¬xei). A keresztirÂ´ nyÂ´ eleket es a fejlÂ´ ctÂ´ blÂ´ t is egyszerË en megkaphatjuk. Legyen a fejlÂ´ ctÂ´ bla a uÂ´ Â´ e a a u e a mutatÂ´ inak kezdeti ertÂ´ ke NIL. Amikor beszÂ´ runk egy uj, i cÂ´mkÂ´ jË csÂ´ csot, akkor kÂ´ t dolgot kell o Â´ e u Â´ Ä± eu u e tennÂ¨ nk. Az uj csÂ´ cs keresztÂ´ l mutatÂ´ ja felveszi a fejlÂ´ ctÂ´ bla i-hez tartozÂ´ bejegyzÂ´ sÂ´ t, majd ezt u Â´ u e o e a o ee a bejegyzÂ´ st az uj csÂ´ cs cÂ´mÂ´ re cserÂ´ ljÂ¨ k. Ezzel tulajdonkÂ´ ppen olyan lÂ´ ncot kÂ´ szÂ´tÂ¨ nk, amelyben a e Â´ u Ä± e e u e a e Ä±u csÂ´ csok a beszÂ´ rÂ´ si idejÂ¨ k szerint csÂ¨ kkenË en vannak rendezve (az elË szÂ¨ r beszÂ´ rt elem van leghÂ´ tul) u ua u o o o o u a es a lista a fejlÂ´ ctÂ´ blÂ´ ban kezdË dik. Â´ e a a o

4. FEJEZET. GYAKORI ELEMHALMAZOK
elem
F C A B M A Q 3 M 2 Q 2 M 1 B 1 Q 1 3 C 6 B 1

72
8 F C 2 B 1

mutatÃ³

4.8. abra. Az ACFMQ, ABCFM, BF, BCQ, ACFMQ, C, F, F szË rt bemenetet tÂ´ rolÂ´ FP-fa. Â´ u a o A fejlÂ´ c mutatÂ´ kbÂ´ l kiindulva es a keresztÂ´ leket kÂ¨ vetve megkaphatjuk a vetÂ´tett bemenetet es e o o Â´ e o Ä± Â´ meghatÂ´ rozhatjuk a vetÂ´tett bemenetben gyakori elemeket. Az adott tranzakciÂ´ k elË fordulÂ´ sa mega Ä± o o a egyezik a keresztÂ´ lek altal mutatott pontok szÂ´ mlÂ´ lÂ´ jÂ´ val. Ezek alapjÂ´ n a vetÂ´tett bemenetet szË rhetjÂ¨ k e Â´ a aoa a Ä± u u es belË le egy ujabb FP-fÂ´ t epÂ´thetÂ¨ nk fel. Ezt a fÂ´ t vetÂ´tett FP-fÂ´ nak hÂ´vunk. A kÂ¨ vetkezË abrÂ´ n az M Â´ o Â´ a Â´ Ä± u a Ä± a Ä± o oÂ´ a elemhez tartozÂ´ vetÂ´tett es szË rt bemenet FP-fÂ´ jÂ´ t lÂ´ thatjuk. o Ä± Â´ u aa a
elem F C A 3 A 3 C 3 mutatÃ³ F 3

4.9. abra. pÂ´ lda : vetÂ´tett FP-fa Â´ e Ä± Az FP-fa mÂ´ rete â€“ hasonlÂ´ an a szÂ´ fa mÂ´ retÂ´ hez â€“ fÂ¨ gg az elemeken deï¬niÂ´ lt rendezÂ´ stË l. Az e o o e e u a e o FP- GROWTH algoritmus akkor lesz hatÂ´ kony, ha a fa elfÂ´ r a memÂ´ riÂ´ ban, ezÂ´ rt fontos lenne azt a rene e o a e dezÂ´ st hasznÂ´ lni, ami vÂ´ rhatÂ´ an a legkisebb fÂ´ t eredmÂ´ nyezi. Az A PRIORI esetÂ´ ben mÂ´ r elmondtuk, e a a o a e e a hogy az a heurisztika, amely az elemek gyakorisÂ´ g szerint csÂ¨ kkenË rendezÂ´ sÂ´ t hasznÂ´ lja, altalÂ´ ban a o o ee a Â´ a kis mÂ´ retË fÂ´ t eredmÂ´ nyez. e u a e EgyszerË lesz a vetÂ´tett bemenetet elË allÂ´tÂ´ sa es a szË rt bemenetbË l egy elem tÂ¨ rlÂ´ se, amennyiben u Ä± oÂ´ Ä± a Â´ u o o e a legritkÂ´ bb gyakori elemet (gyr ) vesszÂ¨ k elË szÂ¨ r. Ez osszhangban all azzal, hogy a pszeudokÂ´ d 9. a u o o Â¨ Â´ o sorÂ´ ban az elemeket gyakorisÂ´ g szerint nÂ¨ vekvË sorrendben vesszÂ¨ k. A gy r csak levÂ´ l cÂ´mkÂ´ je lehet. a a o o u e Ä± e Mivel a fÂ´ bÂ´ l tÂ¨ rÂ¨ lni fogjuk a gyr cÂ´mkÂ´ jË csÂ´ csokat a rekurziÂ´ s mË velet utÂ´ n (13. sor), a kÂ¨ vetkezË a o oo Ä± eu u o u a o o elem is csak levÂ´ l cÂ´mkÂ´ je lesz. e Ä± e

4. FEJEZET. GYAKORI ELEMHALMAZOK

73

NÂ´ zzÂ¨ k most meg, hogy amennyiben a szË rt bemenet egy FP-fÂ´ ban van tÂ´ rolva, akkor hogyan e u u a a kaphatjuk meg a gyr elemre vett vetÂ´tÂ´ sben az elemek tÂ´ mogatottsÂ´ gÂ´ t. A fejlÂ´ ctÂ´ bla gy r elemÂ´ hez Ä±e a a a e a e tartozÂ´ mutatÂ´ bÂ´ l kiindulva a keresztÂ´ lek alkotta lÂ´ ncban pontosan azok a csÂ´ csok vannak, amelyek o o o e a u gyr -t tartalmazÂ´ bemeneti elemet reprezentÂ´ lnak. Az egyes elemhalmazok elË fordulÂ´ sÂ´ t a gy r cÂ´mkÂ´ jË o a o aa Ä± eu csÂ´ csokhoz rendelt szÂ´ mlÂ´ lÂ´ adja meg, az elemeiket pedig a gyÂ¨ kÂ´ rig felsÂ´ tÂ´ lva kaphatjuk. A lista u a ao o e ea utolsÂ´ csÂ´ csÂ´ nak feldolgozÂ´ sa utÂ´ n rendelkezÂ´ sÂ¨ nkre allnak a gy r elemhez tartozÂ´ vetÂ´tett bemeneto u a a a eu Â´ o Ä± ben valahol elË fordulÂ´ elemek tÂ´ mogatottsÂ´ gai, amely alapjÂ´ n kivÂ´ logathatjuk a vetÂ´tett bemenetben o o a a a a Ä± gyakori elemeket. Ugyanilyen bejÂ´ rÂ´ ssal kaphatjuk meg a vetÂ´tett, majd szË rt bemenetet tartalmazÂ´ FP-fÂ´ t. A aa Ä± u o a fejlÂ´ ctÂ´ blÂ´ bÂ´ l kiindulva vÂ´ gigmegyÂ¨ nk a lÂ´ ncolt lista elemein. A csÂ´ cs altal reprezentÂ´ lt eleme a a o e u a u Â´ a halmazbÂ´ l tÂ¨ rÂ¨ ljÂ¨ k a ritka elemeket, majd a kapott elemhalmazt beszÂ´ rjuk az uj FP-fÂ´ ba. A kis o oo u u Â´ a memÂ´ riaigÂ´ ny erdekÂ´ ben a gyakorisÂ´ g szerint csÂ¨ kkenË sorrendet hasznÂ´ ljuk. Ezt a sorrendet a o e Â´ e a o o a vetÂ´tett bemenet alapjÂ´ n allÂ´tjuk fel (lÂ´ vÂ´ n az uj fa a vetÂ´tett es szË rt bemenetet fogja tÂ´ rolni), ami Ä± a Â´ Ä± e e Â´ Ä± Â´ u a kÂ¨ lÂ¨ nbÂ¨ zhet az eredeti FP-fÂ´ ban alkalmazott rendezÂ´ stË l. uo o a e o 4.17. pÂ´ lda. Folytassuk az elË zË pÂ´ ldÂ´ t es allÂ´tsuk elË a legritkÂ´ bb gyakori elemhez (Q) tartozÂ´ vetÂ´tett e oo e a Â´ Â´ Ä± o a o Ä± es szË rt bemenetet. A fejlÂ´ ctÂ´ bla Q elemÂ´ hez tartozÂ´ mutatÂ´ bÂ´ l kiindulva mindÂ¨ ssze kÂ´ t csÂ´ csot u e a e o o o o e u Â´ lÂ´ togatunk meg, ami azt jelenti, hogy a vetÂ´tett bemenet kÂ´ t kÂ¨ lÂ¨ nbÂ¨ zË elemhalmazt tartalmaz : az a Ä± e uo o o FCAM-et kÂ´ tszer, a CB-t egyszer. Ez alapjÂ´ n a vetÂ´tett bemenetben egyetlen gyakori elem van, C. Ez a e a Ä± rekurziÂ´ s ag nem folytatÂ´ dik, hanem visszatÂ´ r a QC gyakori elemhalmazzal. Az FP-fÂ´ bÂ´ l tÂ¨ rÂ¨ lhetjÂ¨ k o Â´ o e a o oo u a fejlÂ´ ctÂ´ bla Q bejegyzÂ´ sÂ´ hez tartozÂ´ mutatÂ´ bÂ´ l, keresztirÂ´ nyÂ´ elek segÂ´tsÂ´ gÂ´ vel elÂ´ rhetË csÂ´ csokat. e a ee o o o a uÂ´ Ä± e e e o u A kÂ¨ vetkezË vizsgÂ´ lt elem az M. Az M vetÂ´tett bemenetÂ´ ben hÂ´ rom gyakori elem van, es a vetÂ´tett szË rt o o a Ä± e a Ä± u Â´ bemenet az FCA elemhalmazt tartalmazza hÂ´ romszor. Ezt a vetÂ´tett, szË rt bemenetet egy egyetlen a Ä± u utbÂ´ l allÂ´ FP-fa fogja reprezentÂ´ lni. A tÂ¨ bbi FP-fa ugyanilyen egyszerË en megkaphatÂ´ . a o u o Â´ o Â´ o HatÂ´ konysÂ´ gi szempontbÂ´ l rendkÂ´vÂ¨ l fontos, hogy a rekurziÂ´ t ne folytassuk, ha a vizsgÂ´ lt FPe a o Ä± u o a fa egyetlen utbÂ´ l all. A rekurziÂ´ helyett kÂ´ pezzÂ¨ k inkÂ´ bb az ut altal reprezentÂ´ lt elemhalmaz minÂ´ o Â´ o e u a Â´ Â´ a den rÂ´ szhalmazÂ´ t. A rÂ´ szhalmaz tÂ´ mogatottsÂ´ gÂ´ t annak a csÂ´ csnak a szÂ´ mlÂ´ lÂ´ ja adja meg, amely a e a e a a a u a ao legmÂ´ lyebben van a rÂ´ szhalmazt meghatÂ´ rozÂ´ csÂ´ csok kÂ¨ zÂ¨ tt. e e a o u o o

4.4.1. Az FP-growth* algoritmus
2003 novemberÂ´ ben megszerveztÂ´ k az elsË gyakori elemhalmaz-kinyerË algoritmusok versenyÂ´ t e e o o e [68]. BÂ´ rki benevezhetett egy altala kÂ´ szÂ´tett programot. Ezeket kÂ¨ zpontilag teszteltÂ´ k kÂ¨ lÂ¨ nbÂ¨ zË a Â´ e Ä± o e uo o o adatbÂ´ zisokon, kÂ¨ lÂ¨ nbÂ¨ zË tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ bÂ¨ kkel. Nem volt olyan implementÂ´ ciÂ´ , amely mina uo o o a a u o o a o den esetben a legjobban szerepelt, de ki lehet emelni nÂ´ hÂ´ ny olyat, amelyek szinte mindig az elsË k e a o kÂ¨ zÂ¨ tt vÂ´ geztek. A szervezË k vÂ´ gÂ¨ l annak adtÂ´ k a fË dÂ´jat (egy sÂ¨ rt es egy pelenkÂ´ t !), aki az FPo o e o e u a o Ä± o Â´ a growth* algoritmust [70] kÂ¨ ldte be. u Az FP-growth* algoritmus az FP-growth mÂ´ dosÂ´tÂ´ sa. ElË nye, hogy gyorsabban allÂ´tja elË a vetÂ´tett o Ä±a o Â´ Ä± o Ä± fÂ´ t, amiÂ´ rt viszont memÂ´ riÂ´ val ï¬zet. NÂ´ zzÂ¨ k meg, hogy pontosan mi tÂ¨ rtÂ´ nik egy rekurziÂ´ s lÂ´ pÂ´ sben. a e o a e u o e o e e ElË szÂ¨ r ellenË rizzÂ¨ k, hogy a fa egyetlen utbÂ´ l all-e. Ha nem, akkor a legritkÂ´ bb elembË l kiindulva o o o u Â´ o Â´ a o elË allÂ´tjuk a vetÂ´tett fÂ´ kat, es rekurzÂ´van meghÂ´vjuk az algoritmust. A vetÂ´tett fÂ´ ban elsË lÂ´ pÂ´ skÂ´ nt oÂ´ Ä± Ä± a Â´ Ä± Ä± Ä± a o e e e meg kell hatÂ´ rozni a vetÂ´tett bemenetben szereplË elemek tÂ´ mogatottsÂ´ gÂ´ t, mÂ´ sodik lÂ´ pÂ´ skÂ´ nt pedig a Ä± o a a a a e e e elË allÂ´tjuk a vetÂ´tett FP-fÂ´ t. Ez tulajdonkÂ´ ppen az aktuÂ´ lis fa adott elemhez tartozÂ´ againak kÂ´ tszeri oÂ´ Ä± Ä± a e a oÂ´ e bejÂ´ rÂ´ sÂ´ t jelenti. Az elsË bejÂ´ rÂ´ st lehet meggyorsÂ´tani egy segÂ´ dtÂ¨ mb hasznÂ´ latÂ´ val. aaa o aa Ä± e o a a

4. FEJEZET. GYAKORI ELEMHALMAZOK

74

Az FP-fa epÂ´tÂ´ sÂ´ nÂ´ l tÂ¨ ltsÂ¨ nk fel egy, kezdetben 0 ertÂ´ keket tartalmazÂ´ tÂ¨ mbÂ¨ t is. Amikor Â´ Ä±e e e o u Â´ e o o o beszÂ´ runk egy t (akÂ´ r vetÂ´tett) tranzakciÂ´ t az (akÂ´ r vetÂ´tett) FP-fÂ´ ba, nÂ¨ veljÂ¨ k eggyel a tÂ¨ mb (i, j)u a Ä± o a Ä± a o u o edik cellÂ´ jÂ´ t, amennyiben az i es j elemei t-nek. A fa felÂ´ pÂ´tÂ´ se utÂ´ n rendelkezÂ´ sÂ¨ nkre all egy tÂ¨ mb, aa Â´ e Ä±e a eu Â´ o ami tartalmazza az elempÂ´ rok elË fordulÂ´ sÂ´ t. Ha ezek utÂ´ n egy vetÂ´tett fÂ´ t akarunk kÂ´ szÂ´teni, akkor a o aa a Ä± a e Ä± szÂ¨ ksÂ´ gtelen idË t tÂ¨ ltenÂ¨ nk az elsË lÂ´ pÂ´ ssel, hiszen a tÂ¨ mb megfelelË sorÂ´ bÂ´ l kÂ¨ zvetlen megkaphatu e o o u o e e o o a o o Â¨ juk a tÂ´ mogatottsÂ´ gokat. OsszessÂ´ gÂ´ ben az elsË lÂ´ pÂ´ s gyorsabb (nem kell a fÂ´ ban bolyonganunk, csak a a e e o e e a a tÂ¨ mb elemeit kiolvasni), a mÂ´ sodik lassabb (a tÂ¨ mbÂ¨ t is fel kell tÂ¨ lteni), a memÂ´ riafogyasztÂ´ s pedig o a o o o o a nagyobb (a tÂ¨ mb mÂ´ retÂ´ vel). o e e

4.5. TovÂ´ bbi hÂ´res algoritmusok a Ä±
A hÂ´ rom oriÂ´ s (APRIORI, eclat, FP-growth) mellett lÂ´ teznek olyan kevÂ´ sbÂ´ ismert algoritmua Â´ a e e e sok is, amelyek nagyon hatÂ´ konyan tudjÂ´ k megtalÂ´ lni a gyakori elemhalmazokat. Ezeket ismertetjÂ¨ k e a a u ebben a rÂ´ szben. e

4.5.1. A DF -APRIORI algoritmus
A DF -APRIORI [134] mÂ´ lysÂ´ gi bejÂ´ rÂ´ st (Depth-First search) valÂ´ sÂ´t meg. HelytelenÂ¨ l illettÂ´ k a e e aa oÄ± u e szerzË k az APRIORI jelzË vel, hiszen az APRIORI mÂ´ dszer lÂ´ nyegÂ´ t a jelÂ¨ ltek elË allÂ´tÂ´ sÂ´ nak mÂ´ dja o o o e e o oÂ´ Ä± a a o adja : csak az legyen jelÂ¨ lt, amirË l tudjuk, hogy minden rÂ´ szmintÂ´ ja gyakori. Ez nem all fenn ennÂ´ l az o o e a Â´ e algoritmusnÂ´ l ! a PszeudokÂ´ dja azonban teljesen megegyezik az APRIORI mÂ´ dszerÂ´ vel, egyedÂ¨ l a jelÂ¨ lt-elË allÂ´tÂ´ s o o e u o oÂ´ Ä± a mÂ´ dja mÂ´ s. ElsË lÂ´ pÂ´ sben meghatÂ´ rozza a gyakori elemeket. RendezzÂ¨ k ezeket tÂ´ mogatottsÂ´ gaik o a o e e a u a a alapjÂ´ n csÂ¨ kkenË sorba es jelÂ¨ ljÂ¨ k ezeket i1 , i2 , . . . , im -el. Az algoritmus ezutÂ´ n pontosan mâˆ’1 lÂ´ pÂ´ st a o o Â´ o u a e e hajt vÂ´ gre, ahol minden lÂ´ pÂ´ s jelÂ¨ lt-elË allÂ´tÂ´ s, tÂ´ mogatottsÂ´ g meghatÂ´ roz es a ritka elemek tÂ¨ rlÂ´ sÂ´ bË l e e e o oÂ´ Ä± a a a a Â´ o ee o all. Ha az l-edik lÂ´ pÂ´ sig bezÂ´ rÂ´ an (1â‰¤l<m) a megtalÂ´ lt gyakori elemhalmazokat gy 1 , gy2 , . . . betÂ¨ kkel Â´ e e ao a u jelÂ¨ ljÂ¨ k, akkor az l + 1-edik szint jelÂ¨ ltjei az imâˆ’l âˆª gy1 , imâˆ’l âˆª gy2 , . . . elemhalmazok lesznek. Kiino u o dulÂ´ st az im elem adja. a Amennyiben a gyakori elemhalmazokat szÂ´ fÂ´ ban tÂ´ roljuk, akkor a jelÂ¨ lt-elË allÂ´tÂ´ s pofonegyszerË oa a o oÂ´ Ä± a u es villÂ´ mgyors. Nem kell mÂ´ st tennÂ¨ nk csak felvennÂ¨ nk egy uj gyÂ¨ keret, amibË l egy i mâˆ’l cÂ´mkÂ´ jË elen Â´ a a u u Â´ o o Ä± euÂ´ keresztÂ¨ l lehet eljutni a rÂ´ gi gyÂ¨ kÂ´ rhez. LÂ´ tnunk kell, hogy ez az algoritmus jÂ´ val tÂ¨ bb hamis jelÂ¨ ltet u e o e a o o o fog lÂ´ trehozni, mint az APRIORI. Nem ellenË rizzÂ¨ k, hogy gyakori-e a jelÂ¨ ltek osszes rÂ´ szhalmaza, e o u o Â¨ e hiszen ez az informÂ´ ciÂ´ nem all rendelkezÂ´ sÂ¨ nkre. a o Â´ eu

4.5.2. patricia 4.5.3. kdci 4.5.4. lcm 4.5.5. MintavÂ´ telezË algoritmus elemzÂ´ se e o e
Az egyszerË mintavÂ´ telezË algoritmust bemutattuk az 5.5.4 rÂ´ szben. Itt azt vizsgÂ´ ljuk, hogy meku e o e a kora mintÂ´ t cÂ´ lszerË venni annak erdekÂ´ ben, hogy az algoritmus minden gyakori elemhalmazt mega e u Â´ e talÂ´ ljon. a

4. FEJEZET. GYAKORI ELEMHALMAZOK MintavÂ´ tel nagysÂ´ ga e a

75

MintavÂ´ telezÂ´ sen alapulÂ´ eljÂ´ rÂ´ soknÂ´ l a minta mÂ´ rete kÂ¨ zponti kÂ´ rdÂ´ s. Ha a minta tÂ´ l kicsi, ake e o aa a e o e e u kor a mintÂ´ bÂ´ l nyert informÂ´ ciÂ´ tÂ´ vol allhat a teljes adatbÂ´ zisban talÂ´ lhatÂ´ globÂ´ lis helyzettË lâ€. Mivel a o a o a Â´ a a o a o â€ fÂ¨ lÂ¨ slegesen nagy minta lassÂ´ algoritmusokat eredmÂ´ nyez, ezÂ´ rt fontos egy kicsi, de mÂ´ r pontos kÂ´ pet oo u e e a e adÂ´ mintamÂ´ ret meghatÂ´ rozÂ´ sa. A 3.1.3 rÂ´ szben megadtuk, hogy mekkora mintÂ´ t kell vÂ´ lasztani, o e a a e a a ha azt akarjuk, hogy a relatÂ´v gyakorisÂ´ gok megegyezzenek az elË fordulÂ´ sok valÂ´ szÂ´nË sÂ´ gÂ´ vel. Ä± a o a o Ä± ue e HasznÂ´ ljuk most is a A 3.1.3 rÂ´ szben bevezetett elnevezÂ´ seket es jelÂ¨ lÂ´ seket. a e e Â´ oe NÂ´ zzÂ¨ k, hogy mennyivel kell csÂ¨ kkenteni a gyakorisÂ´ gi kÂ¨ szÂ¨ bÂ¨ t (min f req ) ahhoz, hogy kicsi e u o a u o o legyen annak valÂ´ szÂ´nË sÂ´ ge, hogy tetszË leges gyakori elem mintÂ´ hoz tartozÂ´ gyakorisÂ´ ga kisebb a o Ä± ue o a o a csÂ¨ kkentett kÂ¨ szÂ¨ bnÂ´ l, tehÂ´ t : o u o e a p(gyakorisÂ´ g(x, m) < min f req ) = p a egy adott kÂ¨ szÂ¨ bnÂ´ l (Î´ ) kisebb kell legyen es tudjuk, hogy u o e Â´ p > min f req A fenti egyenletre alkalmazva a Hoeffding-korlÂ´ tot azt kapjuk, hogy a p p p Y < min f req = m Y < min f req m

Y âˆ’ p < min f req âˆ’ p < m

Y âˆ’ p < min f req âˆ’ min f req m â‰¤ eâˆ’2(min freqâ€™-min freq)
2m

tehÂ´ t ahhoz, hogy a hibÂ´ zÂ´ s valÂ´ szÂ´nË sÂ´ ge kisebb legyen Î´ -nÂ´ l teljesÂ¨ lnie kell, hogy a a a o Ä± ue e u min f req < min f req âˆ’ 1 1 ln 2m Î´

A 4.2 tÂ´ blÂ´ zat azt mutatja, hogy rÂ¨ gzÂ´tett hibakorlÂ´ t mellett (Î´ = 0.001) adott mintamÂ´ rethez mennyi a a o Ä± a e legyen a csÂ¨ kkentett kÂ¨ szÂ¨ b. o u o

4.6. Elemhalmazok Galois lezÂ´ rja a
Egy minta zÂ´ rt, ha nincs vele egyezË tÂ´ mogatottsÂ´ gÂ´ bË vebb minta. EsetÂ¨ nkben ez azt jelenti, a o a a u o u hogy ha egy elemhalmaz nem zÂ´ rt, akkor pontosan azokban a bemeneti elemekben fordul elË , amea o lyekben a lezÂ´ rtja. Ha pÂ´ ldÂ´ ul az A elem lezÂ´ rtja az AB halmaz, akkor tudjuk, hogy az A halmaz soha a e a a nem fordul elË a bemeneti elemekben a B elem nÂ´ lkÂ¨ l. o e u Ebben a rÂ´ szben a lezÂ´ rt tovÂ´ bbi tulajdonsÂ´ gait fogjuk megismerni. AzÂ´ rt illetjÂ¨ k a lezÂ´ rtat a e a a a e u a Galois jelzË vel, mert teljesÂ¨ lni fog a lezÂ´ rÂ´ s operÂ´ torra a galois elmÂ´ letbË l jÂ´ l ismert 3 tulajdonsÂ´ g. o u aa a e o o a MielË tt erre rÂ´ tÂ´ rÂ¨ nk nÂ´ zzÂ¨ k meg, hogy az elemhalmazokat tartalmazÂ´ mintakÂ¨ rnyezet egyÂ´ rtelmË -e o aeu e u o o e u a zÂ´ rtsÂ´ gra nÂ´ zve. a a e

4. FEJEZET. GYAKORI ELEMHALMAZOK Minta mÂ´ rete e 40000 60000 0.17 0.18 0.38 0.40 0.61 0.63 0.83 0.86 1.30 1.33 1.77 1.81

76

min freq (%) 0.25 0.50 0.75 1.00 1.50 2.00

20000 0.13 0.34 0.55 0.77 1.22 1.67

80000 0.19 0.41 0.65 0.88 1.35 1.84

4.2. tÂ´ blÂ´ zat. A kÂ¨ szÂ¨ b csÂ¨ kkentÂ´ se adott mintamÂ´ retekre rÂ¨ gzÂ´tett Î´ = 0.001 mellett a a u o o e e o Ä±

4.18. lemma. Az elemhalmazokat tartalmazo mintakÂ¨ rnyezet a zÂ´ rtsÂ´ gra nÂ´ zve egyÂ´ rtelmË . o a a e e u Â´ BizonyÂ´tÂ´ s: Indirekt tegyÂ¨ k fel, hogy az I elemhalmaznak lÂ´ tezik kÂ´ t lezÂ´ rtja, azaz lÂ´ tezik I , I Ä±a u e e a e kÂ¨ lÂ¨ nbÂ¨ zË elemhalmazok, amelyekre a minimalitÂ´ s mellett teljesÂ¨ lnek a I âŠ‚ I , I âŠ‚ I , |I | = uo o o a u = |I |, supp(I ) = supp(I ) feltÂ´ telek. Ez azt jelenti, ahogy azon tranzakciÂ´ k, amelyek I-t tartale o mazzÂ´ k, tartalmazzÂ´ k az I \I es az I \I halmazokat is. De ebbË l kÂ¨ vetkezik, hogy ezek a tranzakciÂ´ k a a Â´ o o o I âˆª I is tartalmazzÂ´ k, azaz I âˆª I is lezÂ´ rtja I-nek, Â´gy sem I sem I nem lehet minimÂ´ lis. a a Ä± a A fentiek miatt a gyakori zÂ´ rt elemhalmazokbÂ´ l es azok tÂ´ mogatottsÂ´ gaibÂ´ l egyÂ´ rtelmË en meg a o Â´ a a o e u tudjuk hatÂ´ rozni a gyakori elemhalmazokat es azok tÂ´ mogatottsÂ´ gÂ´ t. A gyakori zÂ´ rt mintÂ´ k tehÂ´ t a a Â´ a a a a a a zÂ´ rt mintÂ´ k egy vesztesÂ´ gmentes tÂ¨ mÂ¨ rÂ´tÂ´ se, erdemes csak ezeket meghatÂ´ rozni es eltÂ´ rolni [128â€“ a a e o oÄ±e Â´ a Â´ a 130, 190].

4.6.1. A zÂ´ rt elemhalmazok fogalma a
A zÂ´ rt minta fogalmÂ´ t mÂ´ r bevezettÂ¨ k az 5.2.1 rÂ´ szben. IsmÂ´ teljÂ¨ k meg ugy, hogy a deï¬nÂ´ciÂ´ a a a u e e u Â´ Ä± o elemhalmazokra vonatkozzon : Az I elemhalmaz zart, amennyiben nincs nÂ´ la bË vebb halmaz, amelya o Â´ nek tÂ´ mogatottsÂ´ ga megegyezik I tÂ´ mogatottsÂ´ gÂ´ val. JelÂ¨ ljÂ¨ k cover-rel azt a fÂ¨ ggvÂ´ nyt, amely egy a a a a a o u u e elemhalmazhoz az azt tartalmazÂ´ tranzakciÂ´ k halmazÂ´ t adja meg. o o a A zÂ´ rt elemhalmazokra adhatunk egy mÂ´ sik deï¬nÂ´ciÂ´ t is. VezessÂ¨ k, be a cover fÂ¨ ggvÂ´ nyt : a a Ä± o u u e 4.19. deï¬nÂ´ciÂ´ . Legyen T = t1 , . . . , tn tranzakciÂ´ k sorozata, amelynek minden eleme az I-nek egy Ä± o o rÂ´ szhalmaza. Deï¬niÂ´ ljuk a cover : 2N â†’ 2I fÂ¨ ggvÂ´ nyt a kÂ¨ vetkezË kÂ´ ppen e a u e o o e cover (T ) = {i âˆˆ I|âˆ€ j âˆˆ T, i âˆˆ cover(t j )} =
tâˆˆT

\

cover(t)

TehÂ´ t cover (T ) megadja azon kÂ¨ zÂ¨ s elemeket, amelyeket minden olyan tranzakcio tartalmaz, amelya oo Â´ nek sorszÂ´ ma T -beli. a A (cover, cover ) fÂ¨ ggvÂ´ nypÂ´ rt az T es I hatvÂ´ nyhalmazai kÂ¨ zÂ¨ tti Galois-kapcsolatnak hÂ´vjuk. Leu e a Â´ a o o Ä± gyen a pÂ´ ldaadatbÂ´ zisunk a kÂ¨ vetkezË : ACD, BCE, ABCE, BE, ABCE . Ekkor : cover({A, C}) = e a o o / / = {1,3,5}, cover(0) = {1,2,3,4,5}), cover ({1,2,3}) = {C}, cover ({1,4}) = 0).

4. FEJEZET. GYAKORI ELEMHALMAZOK Az alÂ´ bbi tulajdonsÂ´ gok igazak tetszË leges t, t1, t2 âŠ† T es I, I1 , I2 âŠ† I halmazokra : a a o Â´ (1) I1 âŠ† I2 â‡’ cover(I1 ) âŠ‡ cover(I2 ) (1 ) T1 âŠ† T2 â‡’ cover (T1 ) âŠ‡ cover (T2 ) (2) T âŠ† cover(I) â‡â‡’ I âŠ† cover (T )

77

4.20. deï¬nÂ´ciÂ´ . A h = cover â—¦ cover (vagy h = cover â—¦ cover ) operÂ´ tort Galois-lezÂ´ rÂ´ s operÂ´ tornak Ä± o a aa a hÂ´vjuk. Ä± BelÂ´ thatÂ´ , hogy tetszË leges halmaznak a lezÂ´ rtja tartalmazza magÂ´ t a halmazt, tovÂ´ bbÂ´ a Galoisa o o a a a a lezÂ´ rÂ´ s operÂ´ tora idempotens es monoton, tehÂ´ t aa a Â´ a (I) I âŠ† h(I) (I ) T âŠ† h (T ) (II) h(h(I)) = h(I) (II ) h (h (T )) = h (T ) (II) I1 âŠ† I2 â‡’ h(I1 ) âŠ† h(I2 ) (III ) T1 âŠ† T2 â‡’ h (T1 ) âŠ† h (T2 ) 4.21. deï¬nÂ´ciÂ´ (zÂ´ rt elemhalmaz). I elemhalmaz zÂ´ rt, amennyiben I = h(I). Ä± o a a TetszË leges elemhalmazt (I) tartalmazÂ´ minimÂ´ lis elemszÂ´ mÂ´ zÂ´ rt elemhalmazt a lezÂ´ rÂ´ s operÂ´ tor o o a a u a aa a alkalmazÂ´ sÂ´ val kaphatunk meg ; ez eppen h(I) lesz. A pÂ´ ldaadatbÂ´ zisban talÂ´ lhatÂ´ zÂ´ rt elemhalmazok aa Â´ e a a o a alÂ´ bbiak : a zÂ´ rt elemhalmazok a / {0}, {C}, {B,E}, {B,C,E}, {A,C}, {A,B,C,E}, {A,C,D}, {A,B,C,D,E} AdÂ´ sok vagyunk mÂ´ g annak bizonyÂ´tÂ´ sÂ´ val, hogy a kÂ´ t deï¬nÂ´ciÂ´ ekvivalens, azaz, ha h(C) = C, o e Ä±a a e Ä± o akkor C-nÂ´ l nincs bË vebb halmaz, amely tÂ´ mogatottsÂ´ ga megegyezne C tÂ´ mogatottsÂ´ gÂ´ val, illetve e o a a a a a fordÂ´tva. A kÂ´ t allÂ´tÂ´ s kÂ¨ zvetlen adÂ´ dik a kÂ¨ vetkezË tÂ´ telbË l. Ä± e Â´ Ä±a o o o o e o 4.22. tÂ´ tel. Minden elem tÂ´ mogatottsÂ´ ga megegyezik lezÂ´ rtjÂ´ nak tÂ´ mogatottsÂ´ gÂ´ val, tehÂ´ t e a a a a a a a a supp(I) = supp(h(I)) BizonyÂ´tÂ´ s: A lezÂ´ rÂ´ s (1) tulajdonsÂ´ ga miatt supp(I) â‰¥ supp(h(I)). Ugyanakkor Ä±a aa a supp(h(I)) = |cover(h(I))| = |cover(cover (cover(I)))| = |h (cover(I))| â‰¤ supp(I) a (IIIâ€™) miatt, amibË l kÂ¨ vetkezik az egyenlË sÂ´ g. o o oe

Az 5.4.2 rÂ´ szben bemutattuk, hogy a gyakori mintÂ´ kbÂ´ l hogyan vÂ´ laszthatjuk ki a zÂ´ rtakat, illetve e a o a a az APRIOR-CLOSE algoritmust, ami mÂ´ r eleve csak a gyakori zÂ´ rt mintÂ´ kat allÂ´tja elË . Az APRIORa a a Â´ Ä± o CLOSE algoritmusnÂ´ l lÂ´ teznek gyorsabb algoritmusok (CHARM [189], CLOSET [132], CLOSET+ a e [176], MAFIA [29]), ezek ismertetÂ´ sÂ´ tË l eltekintÂ¨ nk. e eo u

4. FEJEZET. GYAKORI ELEMHALMAZOK

78

4.7. KÂ´ nyszerek kezelÂ´ se e e
Ebben a rÂ´ szben azt a speciÂ´ lis feladatot nÂ´ zzÂ¨ k meg, hogy mikÂ´ nt lehet csÂ¨ kkenteni a bemee a e u e o netet, ha az anti-monoton kÂ´ nyszerek mellett monoton kÂ´ nyszereket is megadunk. MÂ´ r az altalÂ´ nos e e a Â´ a mintakeresÂ´ snÂ´ l megtÂ´ rgyaltuk, hogy tetszË leges anti-monoton kÂ´ nyszer kÂ¨ nnyË szerrel beÂ´ pÂ´thetË az e e a o e o u e Ä± o APRIORI algoritmusba. Most azt nÂ´ zzÂ¨ k meg, hogy a monoton kÂ´ nyszerek hogyan alkalmazhatÂ´ k a e u e o bemeneti tÂ´ r csÂ¨ kkentÂ´ sÂ´ re. e o ee Adott egy bemeneti sorozat, minimÂ´ lis tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ b es monoton kÂ´ nyszerek C halmaza. a a a u o Â´ e Feladat a bemenet csÂ¨ kkentÂ´ se oly mÂ´ don, hogy bÂ´ rmely teljes algoritmus a csÂ¨ kkentett bemeneten o e o a o is teljes legyen.

4.7.1. ExAnte
Az ExAnte [102] algoritmus kÂ´ tfÂ´ le lÂ´ pÂ´ st ismÂ´ tel egÂ´ szen addig, amÂ´g ez valamilyen vÂ´ ltozÂ´ st e e e e e e Ä± a a jelent. Az elsË lÂ´ pÂ´ s azon tranzakciÂ´ k tÂ¨ rlÂ´ se, amelyek nem adnak igaz ertÂ´ ket minden C -beli o e e o o e Â´ e kÂ´ nyszeren. Az ilyen tranzakciÂ´ k csak olyan mintÂ´ k tÂ´ mogatottsÂ´ gÂ´ t nÂ¨ velik, amelyek ugysem e o a a a a o Â´ elÂ´ gÂ´tik ki a kÂ´ nyszereket (ez kÂ¨ vetkezik a kÂ´ nyszerek monoton tulajdonsÂ´ gÂ´ bÂ´ l). A mÂ´ sodik lÂ´ pÂ´ sben e Ä± e o e a a o a e e a bemenet elemei kÂ¨ zÂ¨ l tÂ¨ rÂ¨ ljÂ¨ k a ritkÂ´ kat, hiszen azok ugysem jÂ´ tszanak szerepet a tÂ´ mogatottsÂ´ g o u oo u a Â´ a a a meghatÂ´ rozÂ´ sÂ´ nÂ´ l. a aa a LÂ´ tnunk kell, hogy az elsË lÂ´ pÂ´ sbeli tÂ¨ rlÂ´ s uj ritka elemekhez vezethet, ami csÂ¨ kkenti bizonyos a o e e o e Â´ o tranzakciÂ´ k mÂ´ retÂ´ t, ami viszont ahhoz vezethet, hogy ezek ujabb kÂ´ nyszereket fognak sÂ´ rteni. Joo e e Â´ e e gos tehÂ´ t, hogy a kÂ´ t mÂ´ dszert felvÂ´ ltva futtassuk addig, amÂ´g van valami vÂ´ ltozÂ´ s. Az algoritmus a a e o a Ä± a a bemenet csÂ¨ kkentÂ´ se mellett elË allÂ´tja azon gyakori elemeket, amelyekre minden kÂ´ nyszer teljesÂ¨ l. o e oÂ´ Ä± e u Gyakori elemhalmaz csak ezekbË l az elemekbË l epÂ¨ lhetnek fel. o o Â´ u NÂ´ zzÂ¨ nk egy pÂ´ ldÂ´ t. Az adatbÂ´ zisban 8 elem es 9 tranzakciÂ´ van. Legyen min supp = 4. Mine u e a a Â´ o den elemnek van egy ara. Az egyetlen kÂ´ nyszer (sum(i.Â´r) > 44) szerint a halmazban talÂ´ lhatÂ´ Â´ e a a o termÂ´ kek arÂ´ nak osszege 44-nÂ´ l nagyobb legyen. A kÂ¨ vetkezË kÂ´ t tÂ´ blÂ´ zat adja meg az adatokat. e Â´a Â¨ e o o e a a termÂ´ k e A B C D E F G H ar Â´ 5 8 14 30 20 15 6 12 TID 1 2 3 4 5 6 7 8 9 tranzakciÂ´ o B, C, D, G A, B, D, E B, C, D, G, H A, E, G C, D, F, G A, B, C, D, E A, B, D, F, G, H B, C, D B, E, F, G ar osszeg Â´ Â¨ 58 63 70 31 65 77 76 52 49

Az elsË vÂ´ gigolvasÂ´ s sorÂ´ n meghatÂ´ rozzuk az elemek tÂ´ mogatottsÂ´ gÂ´ t azon tranzakciÂ´ kban, o e a a a a a a o amelyek kielÂ´ gÂ´tik a kÂ´ nyszert (a 4-es kivÂ´ telÂ´ vel mindegyik). EzutÂ´ n tÂ¨ rÂ¨ ljÂ¨ k a ritka elemeket e Ä± e e e a oo u (A, E, F, H). IsmÂ´ t vÂ´ gigmegyÂ¨ nk az adatbÂ´ zison, de most mÂ´ r ezeket az elemeket nem nÂ´ zzÂ¨ k, e e u a a e u aminek kÂ¨ vetkeztÂ´ ben ujabb tranzakciÂ´ k esnek ki (2,7,9). A kiesett tranzakciÂ´ k miatt csÂ¨ kkeno e Â´ o o o nek a tÂ´ mogatottsÂ´ gok, Â´gy ujabb elem lesz ritka (G). Ezt Â´gy folytatjuk, amÂ´g van vÂ´ ltozÂ´ s. A 4. a a Ä± Â´ Ä± Ä± a a vÂ´ gigolvasÂ´ s utÂ´ n azt kapjuk, hogy csak az 1,3,6,8 tranzakciÂ´ kat es a B, C, D elemeket kell ï¬gyeleme a a o Â´ be venni.

4. FEJEZET. GYAKORI ELEMHALMAZOK

79

Â¨ o 4.8. TÂ¨ bbszÂ¨ rÂ¨ s tÂ´ mogatottsÂ´ gi kuszÂ¨ b o o o a a
Az univerzÂ´ lis tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ bnek vannak elË nyei es hÂ´ trÂ´ nyai. ElË nye, hogy fela a a u o o Â´ a a o hasznÂ´ lhatjuk azt a tÂ´ nyt, hogy gyakori minta minden rÂ´ szmintÂ´ ja gyakori, ami alapjÂ´ n hatÂ´ kony algoa e e a a e ritmusokat adhatunk. HÂ´ trÂ´ nya, hogy a ritkÂ´ n elË fordulÂ´ , de mÂ´ gis fontos mintÂ´ kat csak akkor tudjuk a a a o o e a kinyerni, ha a tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ bÂ¨ t alacsonyra allÂ´tjuk. Ez viszont rengeteg gyakori mintÂ´ hoz fog a a u o o Â´ Ä± a vezetni, ha egyÂ´ ltalÂ´ n le tud futni az algoritmus. a a KÂ¨ lÂ¨ nbÂ¨ zË tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ bÂ¨ k (vagy mÂ´ skÂ´ nt tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ b fÂ¨ ggvÂ´ nyÂ´ nek) meguo o o a a u o o a e a a u o u e e adÂ´ sÂ´ val ez a problÂ´ ma elkerÂ¨ lhetË : a nem lÂ´ nyeges mintÂ´ knak legyen nagy a kÂ¨ szÂ¨ bÂ¨ k, a aa e u o e a u o u lÂ´ nyegesebbeknek legyen alacsony. e Egyedi tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ bÂ¨ k bevezetÂ´ sÂ´ vel azonban felborul eddigi kÂ´ nyelmes vilÂ´ gunk, a a u o o ee e a amit az biztosÂ´tott, hogy nem lehet egy minta gyakori, ha van ritka rÂ´ szmintÂ´ ja. A rÂ´ szmintÂ´ k Ä± e a e a tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ be ugyanis nagyobb lehet, Â´gy hiÂ´ ba nagyobb a tÂ´ mogatottsÂ´ ga, ettË l mÂ´ g lea a u o Ä± a a a o e het ritka. A kÂ¨ vetkezË kben bemutatjuk a legelsË es legegyszerË bb tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ b fÂ¨ ggvÂ´ nyt, o o oÂ´ u a a u o u e majd bemutatjuk az MSApriori algoritmust, amely ezt hatÂ´ konyan kezeli. e

4.8.1. MSApriori algoritmus
KÂ´ zzel megadni a 2I minden elemÂ´ nek tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ bÂ´ t fÂ´ radsÂ´ gos, sË t nagy |I| esetÂ´ n kie e a a u o e a a o e vitelezhetetlen feladat. Az MSApriori algoritmusnÂ´ l csak az egyelemË elemhalmazok tÂ´ mogatottsÂ´ gi a u a a kÂ¨ szÂ¨ bÂ´ t lehet megadni. JelÂ¨ ljÂ¨ k az i elem kÂ¨ szÂ¨ bÂ´ t MIS(i)-vel. Az I elemhalmaz tÂ´ mogatottsÂ´ gi u o e o u u o e a a kÂ¨ szÂ¨ be legyen a legkisebb tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ bbel rendelkezË elemÂ´ nek tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ be u o a a u o o e a a u o (MIS(I) = miniâˆˆI {MIS(i)}). Akkor gyakori az I halmaz, ha tÂ´ mogatottsÂ´ ga nagyobb vagy egyenlË a a o MIS(I)-nÂ´ l. e A deï¬nÂ´ciÂ´ bÂ´ l kÂ¨ vetkezik, hogy tÂ´ nyleg nem mondhatjuk, hogy gyakori minta minden rÂ´ szmintÂ´ ja Ä± o o o e e a gyakori. PÂ´ ldÂ´ ul az ABC elemhalmaz BC rÂ´ szhalmazÂ´ nak nagyobb lehet MIS ertÂ´ ke. Ha a fele a e a Â´ e adat megoldÂ´ sÂ´ ra az APRIORI algoritmust hasznÂ´ ljuk ugy, hogy csak a gyakori elemhalmazok aa a Â´ kivÂ´ lasztÂ´ sÂ´ nak mÂ´ djÂ´ t mÂ´ dosÂ´tjuk (min supp cserÂ´ je MIS(I)-re), akkor nem garantÂ´ lt, hogy jÂ´ mega aa o a o Ä± e a o oldÂ´ st kapunk. Ha pÂ´ ldÂ´ ul a BC ritka, akkor az ABC halmaz nem lenne a jelÂ¨ ltek kÂ¨ zÂ¨ tt annak ellenÂ´ re, a e a o o o e hogy akÂ´ r gyakori is lehet. a SzerencsÂ´ re a problÂ´ ma kÂ¨ nnyen orvosolhatÂ´ . Csak azt kell eszrevennÂ¨ nk, hogy mi okozhatja a e e o o Â´ u hibÂ´ t. Az altalÂ´ nossÂ´ g megsÂ´ rtÂ´ se nÂ´ lkÂ¨ l feltehetjÂ¨ k, hogy az elemek MIS ertÂ´ kÂ¨ k alapjÂ´ n nÂ¨ vekvË a Â´ a a e e e u u Â´ e u a o o sorba van rendezve. A MIS deï¬nÂ´ciÂ´ jÂ´ bÂ´ l kÂ¨ vetkezik, hogy tetszË leges -elemË I={i 1 , . . . , i } halmaz Ä± oa o o o u âˆ’ 1 darab ( âˆ’ 1)-elemË rÂ´ szhalmazÂ´ nak MIS ertÂ´ ke megegyezik I MIS ertÂ´ kÂ´ vel, ami MIS(i 1 ). u e a Â´ e Â´ e e Ezeknek a rÂ´ szhalmazoknak tehÂ´ t gyakorinak kell lenniÂ¨ k, hiszen a tÂ´ mogatottsÂ´ g monotonsÂ´ ga most e a u a a a is fennÂ´ ll. Az egyetlen rÂ´ szhalmaz, amely lehet ritka, az I legelsË elemÂ´ t nem tartalmazÂ´ rÂ´ szhalmaz. a e o e o e Ezt a rÂ´ szhalmazt tehÂ´ t ne vizsgÂ´ ljuk a jelÂ¨ lt elË allÂ´tÂ´ s mÂ´ sodik lÂ´ pÂ´ se sorÂ´ n. KivÂ´ tel ez alÂ´ l azon e a a o oÂ´ Ä± a a e e a e o eset, amikor a mÂ´ sodik elem MIS ertÂ´ ke megegyezik az elsË elem MIS ertÂ´ kÂ´ vel, mert ekkor mÂ´ g a Â´ e o Â´ e e e ennek a rÂ´ szhalmaznak is gyakorinak kell lennie. e Amennyiben > 2, akkor biztos, hogy a generÂ´ torok egyike sem egyezik meg a legkisebb elemet a nem tartalmazÂ´ rÂ´ szhalmazzal ( >2 esetÂ´ ben ugyanis a generÂ´ torok ( âˆ’2)-elemË preï¬xei megegyezo e e a u nek, amelyek biztos, hogy tartalmazzÂ´ k a jelÂ¨ lt elsË elemÂ´ t). Ez pedig garantÂ´ lja, hogy az algoritmus a o o e a teljes, amennyiben az osszes gyakori elempÂ´ rt megtalÂ´ ltuk. NÂ´ zzÂ¨ k meg most az egy- es kÂ´ telemË Â¨ a a e u Â´ e u jelÂ¨ ltek esetÂ´ t. o e Gyakori elemek meghatÂ´ rozÂ´ sÂ´ nÂ´ l a szokÂ´ sos eljÂ´ rÂ´ st kÂ¨ vetjÂ¨ k : minden elem jelÂ¨ lt. ElempÂ´ rok a aa a a aa o u o a esetÂ´ ben azonban nem allÂ´thatjuk, hogy egy pÂ´ r akkor jelÂ¨ lt, ha mindkÂ´ t eleme gyakori. PÂ´ ldÂ´ ul az AB e Â´ Ä± a o e e a

4. FEJEZET. GYAKORI ELEMHALMAZOK

80

pÂ´ r lehet gyakori akkor is, ha az A ritka. Ha ugyanis B-nek MIS ertÂ´ ke kisebb A-nak MIS ertÂ´ kÂ´ nÂ´ l, a Â´ e Â´ e e e akkor az AB-nek a MIS ertÂ´ ke megegyezik B-nek a MIS ertÂ´ kÂ´ vel, Â´gy AB lehet gyakori. SzerencsÂ´ re Â´ e Â´ e e Ä± e szÂ¨ ksÂ´ gtelen az osszes elemet ï¬gyelembe venni. Ha pÂ´ ldÂ´ ul az A elem ritka es az A MIS ertÂ´ ke a legu e Â¨ e a Â´ Â´ e kisebb, akkor a tÂ´ mogatottsÂ´ g monotonsÂ´ gÂ´ bÂ´ l kÂ¨ vetkezik, hogy az A-t tartalmazÂ´ halmazok ritkÂ´ k. a a a a o o o a Ha tehÂ´ t MIS ertÂ´ k szerint nÂ¨ vekvË en vannak rendezve az elemek, akkor a legkisebbË l kiindulva kea Â´ e o o o ressÂ¨ k meg az elsË gyakori elemet. Az osszes utÂ´ na kÂ¨ vetkezË t ï¬gyelembe kell venni a jelÂ¨ ltpÂ´ rok u o Â¨ a o o o a elË allÂ´tÂ´ sÂ´ nÂ´ l akkor is, ha valamelyik ritka. oÂ´ Ä± a a a

5. fejezet Gyakori mintÂ´ k kinyerÂ´ se a e
A fejlett tÂ´ rsadalmakra jellemzË , hogy szÂ´ mos, a mindennapi eletÂ¨ nk sorÂ´ n gyakran hasznÂ´ lt a o a Â´ u a a termÂ´ ket es szolgÂ´ ltatÂ´ st nÂ´ lkÂ¨ lÂ¨ zhetetlennek tartunk. MinÂ´ l sokszÂ´nË bb a felhasznÂ´ lÂ´ i csoport, annÂ´ l e Â´ a a e uo e Ä± u ao a nehezebb egy olyan uzenetet el juttatni rÂ´ szÂ¨ kre, ami mindenki szÂ´ mÂ´ ra egyÂ´ rtelmË , am ha valakiÂ¨ e u a a e u Â´ nek ez sikerÂ¨ l, az nagy haszonnal jÂ´ rhat, hiszen pÂ´ r szÂ´ zalÂ´ kpontos nÂ¨ vekedÂ´ s is szigniï¬kÂ´ ns a nagy u a a a e o e a volumenben ertÂ´ kesÂ´tett termÂ´ keknÂ´ l. A piaci stratÂ´ giÂ´ k kialakÂ´tÂ´ sÂ´ nÂ´ l is elsË sorban a sokasÂ´ gra, ilÂ´ e Ä± e e e a Ä±a a a o a letve a sokasÂ´ g jellemzË ire vagyunk kÂ´vÂ´ ncsiak. Egyedi, kÂ¨ lÂ¨ nc elemek akkor erdekesek, ha pÂ´ ldÂ´ ul a o Ä± a uo Â´ e a csalÂ´ sokat akarunk felderÂ´teni. Fenti eseteken kÂ´vÂ¨ l vizsgÂ´ lhatjuk a gyakori balesetet okozÂ´ helyzea Ä± Ä± u a o teket, a szÂ´ mÂ´tÂ´ gÂ´ pes hÂ´ lÂ´ zatban gyakran elË fordulÂ´ , riasztÂ´ ssal vÂ´ gzË dË esemÂ´ nysorozatokat, vagy a Ä±o e ao o o a e o o e pl. azt, hogy az egyes nyomtatott mÂ´ diumoknak milyen az olvasÂ´ i osszetÂ´ tele, es amennyiben tÂ¨ bb e o Â¨ e Â´ o magazinnak, ujsÂ´ gnak hasonlÂ´ a cÂ´ lcsoportja, erdemes uzenetÂ¨ nket tÂ¨ bb helyen is elhelyezni, hogy Â´ a o e Â´ Â¨ u o hatÂ´ konyabban osztÂ¨ nÂ¨ zzÂ¨ k meglevË es potenciÂ´ lis vÂ´ sÂ´ rlÂ´ inkat. e Â¨ o o u oÂ´ a aa o Oldalakon keresztÂ¨ l lehetne sorolni azon pÂ´ ldÂ´ kat, amikor a gyakran elË fordulÂ´ dolgokâ€ ertÂ´ kes u e a o o Â´ e â€ informÂ´ ciÂ´ t rejtenek magukban. A szakirodalomban a dolgokat mintÂ´ knak nevezzÂ¨ k, es gyakori a o a u Â´ mintÂ´ k kinyerÂ´ sÂ´ rË l beszÂ´ lÂ¨ nk. a eeo eu A minta tÂ´pusa tÂ¨ bbfÂ´ le lehet. VÂ´ sÂ´ rlÂ´ i szokÂ´ sok felderÂ´tÂ´ sÂ´ nÂ´ l gyakori elemhalmazokat keresÂ¨ nk, Ä± o e aa o a Ä±e e e u ahol az elemek a termÂ´ keknek felel meg. UtazÂ´ sokkal kapcsolatos szokÂ´ soknÂ´ l a gyakran igÂ´ nybe e a a a e vett, kÂ¨ ltsÂ´ ges szolgÂ´ ltatÂ´ sok sorrendje is fontos, Â´gy gyakori sorozatokat keresÂ¨ nk. Telekommuo e a a Ä± u nikÂ´ ciÂ´ s hÂ´ lÂ´ zatokban olyan feltÂ´ telek (predikÂ´ tumok) gyakori fennÂ´ llÂ´ sÂ´ t keressÂ¨ k, amelyek gyaka o ao e a a aa u ran eredmÂ´ nyeznek riasztÂ´ st. Ezeket a gyakori bool formulakat megvizsgÂ´ lva kaphatjuk meg pÂ´ ldÂ´ ul e a a e a Â´ a gyakori tÂ´ ves riasztÂ´ sok okait. A bÂ¨ ngÂ´ szÂ´ si szokÂ´ sok alapjÂ´ n fejleszthetjÂ¨ k oldalaink struktÂ´ rÂ´ jÂ´ t, e a o e e a a u uaa linkjeit, Â´gy a lÂ´ togatÂ´ k mÂ´ g gyorsabban es hatÂ´ konyabban talÂ´ ljÂ´ k meg a keresett informÂ´ ciÂ´ kat. A Ä± a o e Â´ e a a a o bÂ¨ ngÂ´ szÂ´ s folyamatÂ´ t cÂ´mkÂ´ zett gyÂ¨ keres fÂ´ kkal jellemezhetjÂ¨ k Gyakori mintÂ´ kat kinyerË algoritmuo e e a Ä± e o a u a o sokat a rÂ´ kkutatÂ´ sban is alkalmaztak. Azt vizsgÂ´ ltÂ´ k, hogy a rÂ´ kkeltË anyagokban vannak-e gyakran a a a a a o elË fordulÂ´ molekula-struktÂ´ rÂ´ k. Ezeket a struktÂ´ rÂ´ kat cÂ´mkÂ´ zett grÂ´ fokkal Â´rjuk le. o o ua ua Ä± e a Ä± A pÂ´ ldÂ´ kbÂ´ l kÂ¨ vetkezik, hogy a minta tÂ´pusa sokfÂ´ le lehet. SejthetjÂ¨ k, hogy mÂ´ s technikÂ´ kat kell e a o o Ä± e u a a majd alkalmazni pl. cÂ´mkÂ´ zett grÂ´ fok keresÂ´ sÂ´ nÂ´ l, mintha csak egyszerË elemhalmazokat keresÂ¨ nk. Ä± e a ee e u u Ebben a rÂ´ szben egy altalÂ´ nos leÂ´rÂ´ st adunk, egy egysÂ´ ges matematikai keretbe helyezzÂ¨ k a gyakoe Â´ a Ä±a e u ri minta kinyerÂ´ sÂ´ nek feladatÂ´ t. Emellett ismertetjÂ¨ k a legfontosabb mÂ´ dszerek altalÂ´ nos â€“ a minta ee a u o Â´ a tÂ´pusÂ´ tÂ´ l fÂ¨ ggetlen â€“ leÂ´rÂ´ sÂ´ t. Ä± ao u Ä±aa

81

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

82

5.1. A gyakori minta deï¬nÂ´ciÂ´ ja Ä± o
E rÂ´ sz megÂ´ rtÂ´ sÂ´ hez feltÂ´ telezzÂ¨ k, hogy az olvasÂ´ tisztÂ´ ban van a 2.1 rÂ´ szben deï¬niÂ´ lt fogalmake e ee e u o a e a kal (rendezÂ´ sek, korlÂ´ t, valÂ´ di korlÂ´ t, maximÂ´ lis korlÂ´ t, predikÂ´ tum,). e a o a a a a 5.1. deï¬nÂ´ciÂ´ . A H halmaz a rendezÂ´ sre nÂ´ zve lokÂ´ lisan vÂ´ ges, ha minden x, y âˆˆ H elemhez, ahol Ä± o e e a e x y,vÂ´ ges szÂ´ mÂ´ olyan z elem lÂ´ tezik, amelyre x z y. e a u e 5.2. deï¬nÂ´ciÂ´ . Az M K = (M, ) pÂ´ rost, ahol M egy alaphalmaz, az M-en ertelmezett rÂ´ szben Ä± o a e Â´ rendezÂ´ s, mintakÂ¨ rnyezetnek nevezzÂ¨ k, amennyiben M-nek pontosan egy minimalis eleme van, M e o u Â´ halmaz a rendezÂ´ sre nÂ´ zve lokÂ´ lisan vÂ´ ges es rangszÂ´ mozott (graded), azaz lÂ´ tezik a | | : M â†’ Z e e a e a e Â´ un. mÂ´ retfÂ¨ ggvÂ´ ny , amire |m| = |m | + 1, ha m-nek maximÂ´ lis valÂ´ di alsÂ´ korlÂ´ tja m . Az M elemeit e u e a o o a Â´ mintÂ´ knak (pattern) nevezzÂ¨ k es M-re, mint mintahalmaz vagy mintatÂ´ r hivatkozunk. a u Â´ e Az m m esetÂ´ n azt mondjuk, hogy m az m rÂ´ szmintÂ´ ja, ha m e e a m, akkor valÂ´ di rÂ´ szmintÂ´ rÂ´ l o e ao beszÂ´ lÂ¨ nk. A -t tartalmazÂ´ si relÂ´ ciÂ´ nak is hÂ´vjuk. Az altalÂ´ nossÂ´ g megsÂ´ rtÂ´ se nÂ´ lkÂ¨ l feltehetjÂ¨ k, eu a a o Ä± Â´ a a e e e u u hogy a minimÂ´ lis mÂ´ retË minta mÂ´ rete 0. Ezt a mintÂ´ t ures mintÂ´ nak hÂ´vjuk. a e u e a Â¨ a Ä± Â´ Ime az egyik legegyszerË bb pÂ´ lda mintakÂ¨ rnyezetre, amelyet vÂ´ sÂ´ rlÂ´ i szokÂ´ sok feltÂ´ rÂ´ sa sorÂ´ n u e o aa o a aa a alkalmaztak elË szÂ¨ r. Legyen I vÂ´ ges halmaz. Gyakori elemhalmazok keresÂ´ sÂ´ nÂ´ l a (2 I , âŠ†) lesz a mino o e ee e takÂ¨ rnyezetet, ahol âŠ† a halmazok tartalmazÂ´ si relÂ´ ciÂ´ jÂ´ t jelÂ¨ li. A mÂ´ retfÂ¨ ggvÂ´ ny egy halmazhoz az o a a oa o e u e elemszÂ´ mÂ´ t rendeli. Az elemhalmazokon tÂ´ l kereshetÂ¨ nk gyakori sorozatokat, epiz odokat (vÂ´ ges hala a u u e Â´ mazon ertelmezett rÂ´ szben rendezÂ´ seket), bool formulakat, cÂ´mkÂ´ zett gyÂ¨ keres fÂ´ kat vagy altalÂ´ nos Â´ e e Ä± e o a Â´ Â´ a grÂ´ fokat. Ezen mintakÂ¨ rnyezetek pontos deï¬nÂ´ciÂ´ jÂ´ t a kÂ¨ vetkezË fejezetekben talÂ´ ljuk. a o Ä± oa o o a 5.3. deï¬nÂ´ciÂ´ . Legyen (H1 , 1 ) (H2 , 2 ) kÂ´ t rÂ´ szben rendezett halmaz. Az f : H1 â†’ H2 fÂ¨ ggvÂ´ ny Ä± o e e u e rendezÂ´ s vÂ´ ltÂ´ vagy mÂ´ s szÂ´ val anti-monoton, amennyiben tetszË leges x, y âˆˆ H1 , x 1 y elemekre e a o a o o f (y) 2 f (x). 5.4. deï¬nÂ´ciÂ´ . A gyakori minta kinyerÂ´ snek feladatÂ´ ban adott egy B bemeneti (vagy feldolgozand o) Ä± o e a Â´ adathalmaz, M K = (M, ) mintakÂ¨ rnyezet, egy suppB : M â†’ N anti-monoton fÂ¨ ggvÂ´ ny es egy o u e Â´ min supp âˆˆ N kÂ¨ szÂ¨ bszÂ´ m. Feladat, hogy megkeressÂ¨ k azon mintÂ´ kat, amelyekre a supp fÂ¨ ggvÂ´ ny u o a u a u e min supp-nÂ´ l nagyobb vagy egyenlË ertÂ´ ket ad : a oÂ´ e GY = {gy : gy âˆˆ M, suppB (gy) â‰¥ min supp}. a A suppB fÂ¨ ggvÂ´ nyt tÂ´ mogatottsÂ´ gi fÂ¨ ggvÂ´ nynek (support function), min supp-ot tamogatottsÂ´ gi u e a a u e Â´ kÂ¨ szÂ¨ bnek, a GY elemeit pedig gyakori mintÂ´ knak hÂ´vjuk. A nem gyakori mintÂ´ kat ritkaknak neu o a Ä± a Â´ vezzÂ¨ k. Az erthetË sÂ´ g kedvÂ´ ert a B tagot gyakran elhagyjuk, tovÂ´ bbÂ´ a supp(m)-re mint a minta u Â´ oe eÂ´ a a tÂ´ mogatottsÂ´ ga hivatkozunk. A tÂ´ mogatottsÂ´ gi fÂ¨ ggvÂ´ ny ertÂ´ ke adja meg, hogy egy minta mennyire a a a a u e Â´ e gyakori a bemenetben. Az elemhalmazok pÂ´ ldÂ´ jÂ´ nÂ´ l maradva a bemenet lehet pÂ´ ldÂ´ ul elemhalmazok sorozata. Ekkor egy e aa a e a H halmaz tÂ´ mogatottsÂ´ gÂ´ t ugy ertelmezhetjÂ¨ k, mint a sorozat azon elemeinek szÂ´ ma, amelyek tara a a Â´ Â´ u a talmazzÂ´ k H-t. PÂ´ ldÂ´ ul a {A, D}, {A, C}, {A, B, C, D}, {B}, {A, D}, {A, B, D}, {D} bemenet esetÂ´ n a e a e supp({A, D}) = 4. Ha min supp-nak 4-et adunk meg, akkor GY = {{A}, {D}, {A, D}}. A tÂ´ mogatottsÂ´ g anti-monotonitÂ´ sÂ´ bÂ´ l kÂ¨ vetkezik az alÂ´ bbi egyszerË tulajdonsÂ´ g. a a aa o o a u a 5.5. tulajdonsÂ´ g. Gyakori minta minden rÂ´ szmintÂ´ ja gyakori. a e a

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

83

A mintÂ´ kat elemhalmazok, sorozatok, grÂ´ fok, stb. formÂ´ jÂ´ ban fogjuk keresni, azaz a mintÂ´ k mina a aa a dig valamilyen alaphalmazon deï¬niÂ´ lt struktÂ´ rÂ´ k lesznek. Ha az alaphalmazon deï¬niÂ´ lunk egy teljes a ua a rendezÂ´ st, akkor az alapjÂ´ n â€“ kÂ¨ nnyebben vagy nehezebben â€“ a mintÂ´ kon is tudunk teljes rendezÂ´ st e a o a e adni. Ezt pÂ´ ldÂ´ ul elemhalmazok esetÂ´ ben a lexikograï¬kus rendezÂ´ s , grÂ´ fok esetÂ´ ben a kanonikus e a e e a e cÂ´mkÂ´ zÂ´ s segÂ´tsÂ´ gÂ´ vel fogjuk megtenni. A mintÂ´ kon ertelmezett teljes rendezÂ´ s egyes algoritmusnÂ´ l Ä± e e Ä± e e a Â´ e a (pl. : APRIORI) a hatÂ´ konysÂ´ g nÂ¨ velÂ´ sÂ´ re hasznÂ´ lhatÂ´ , mÂ´ soknak pedig alapfeltÂ´ tele (pl. : Zaki). Soke a o ee a o a e szor fog felbukkanni a preï¬x fogalma is, amihez szintÂ´ n egy teljes rendezÂ´ sre lesz szÂ¨ ksÂ´ g. e e u e 5.6. deï¬nÂ´ciÂ´ . Legyen Ä± o a H halmazon ertelmezett rÂ´ szben rendezÂ´ s. A e e Â´ lineÂ´ ris kiterjesztÂ´ sÂ´ nek hÂ´vjuk, ha minden x y pÂ´ rra x y teljesÂ¨ l. a ee Ä± a u teljes rendezÂ´ st a e

A lineÂ´ ris kiterjesztÂ´ seknek azon csoportja erdekes szÂ´ munkra, amelyek mÂ´ rettartÂ´ ak. Ez azt jelenti, a e Â´ a e o hogy |x|<|y| esetÂ´ n a x y feltÂ´ telnek is fenn kell allnia. Amikor tehÂ´ t a M K =(M, ) mintakÂ¨ rnyee e Â´ a o zet tagjÂ´ nak egy mÂ´ rettartÂ´ lineÂ´ ris kiterjesztÂ´ sÂ´ t akarjuk megadni, akkor az azonos mÂ´ retË elemek a e o a ee e u kÂ¨ zÂ¨ tt deï¬niÂ´ lunk egy sorrendet. A tovÂ´ bbiakban a mÂ´ rettartÂ´ jelzË t elhagyjuk, es minden lineÂ´ ris o o a a e o o Â´ a kiterjesztÂ´ s alatt mÂ´ rettartÂ´ lineÂ´ ris kiterjesztÂ´ st ertÂ¨ nk. e e o a e Â´ u 5.7. deï¬nÂ´ciÂ´ . Legyen M K =(M, ) mintakÂ¨ rnyezet es Ä± o o a egy lineÂ´ ris kiterjesztÂ´ se. Az m minta a e Â´ -elemË rÂ´ szmintÂ´ i kÂ¨ zÂ¨ l az u e a ou szerinti legelsË t hÂ´vjuk az m minta -elemË preï¬xÂ´ nek. o Ä± u e PÂ´ ldÂ´ ul, ha I = {A, B, C, D, E}, es az azonos mÂ´ retË mintÂ´ kon az abc rendezÂ´ s szerinti lexikograï¬kus e a Â´ e u a e rendezÂ´ st vesszÂ¨ k a teljes rendezÂ´ snek, akkor pÂ´ ldÂ´ ul az {A, C, D, E} minta 2-elemË preï¬xe az {A, C} e u e e a u halmaz.

5.1.1. HatÂ´ konysÂ´ gi kÂ´ rdÂ´ sek e a e e
A bemeneti adat es a mintÂ´ k halmaza altalÂ´ ban nagy. PÂ´ ldÂ´ ul bemeneti sorozatok esetÂ´ ben Â´ a Â´ a e a e 9 nagysÂ´ grendË sorozatok, a mintatÂ´ r pedig altalÂ´ ban 10 5 nagysÂ´ grendË halmazok nem ritkÂ´ k a 10 a a u e Â´ a a u hatvÂ´ nyhalmaza. Ilyen mÂ´ retek mellett a naÂ´v algoritmusok (pÂ´ ldÂ´ ul hatÂ´ rozzuk meg a mintahalmaz a e Ä± e a a minden elemÂ´ nek tÂ´ mogatottsÂ´ gÂ´ t, majd vÂ´ logassuk ki a gyakoriakat) tÂ´ l sok ideig futnÂ´ nak, vagy tÂ´ l e a a a a u a u nagy lenne a memÂ´ riaigÂ´ nyÂ¨ k. HatÂ´ kony, kiï¬nomult algoritmusokra van szÂ¨ ksÂ´ g, amelyek speciÂ´ lis o e u e u e a adatstruktÂ´ rÂ´ kat hasznÂ´ lnak. ua a Egy algoritmus hatÂ´ konysÂ´ gÂ´ t a futÂ´ si idË vel (ami arÂ´ nyos az elemi lÂ´ pÂ´ sek szÂ´ mÂ´ val) es a e a a a o a e e a a Â´ felhasznÂ´ lt memÂ´ riÂ´ val jellemezzÂ¨ k. PÂ´ ldÂ´ ul megmondhatjuk, hogy adott mÂ´ retË bemenet esetÂ´ n a o a u e a e u e atlagosan, vagy legrosszabb esetben mennyi elemi lÂ´ pÂ´ st (Â¨ sszehasonlÂ´tÂ´ s, ertÂ´ kadÂ´ s), illetve Â´ e e o Ä±a Â´ e a memÂ´ riÂ´ t hasznÂ´ l. Sajnos a gyakori mintÂ´ t kinyerË algoritmusok mindegyike legrosszabb esetben o a a a o a teljes mintateret megvizsgÂ´ lja, ugyanis a tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ b fÂ¨ ggvÂ´ nyÂ´ ben a mintatÂ´ r minden a a a u o u e e e eleme gyakori lehet. A gyakori minta-kinyerÂ´ s korszakÂ´ nak elsË 10-15 evÂ´ ben az algoritmusok hatÂ´ konysÂ´ gÂ´ t â€“ e a o Â´ e e a a elmÂ´ leti elemzÂ´ sek hÂ´jÂ´ n â€“ minden esetben teszteredmÂ´ nyekkel igazoltÂ´ k. Szinte minden algoritmuse e Ä±a e a hoz lehet talÂ´ lni olyan bemeneti adatot, amit az algoritmus nagyon hatÂ´ konyan kÂ´ pes feldolgozni. a e e Ennek eredmÂ´ nyekÂ´ nt pÂ´ ldÂ´ ul, csak a gyakori elemhalmazokat kinyerË algoritmusok szÂ´ ma meghae e e a o a ladja a 150-et, es a mai napig nem tudunk olyan algoritmusrÂ´ l, amelyik az osszes tÂ¨ bbit legyË znÂ´ Â´ o Â¨ o o e futÂ´ si idË vagy memÂ´ riafogyasztÂ´ s tekintetÂ´ ben. a o o a e A jÂ¨ vË feladata ennek a kÂ´ osznak a tisztÂ´ zÂ´ sa. Ehhez a legfontosabb lÂ´ pÂ´ s a bemeneti adat kao o a a a e e rakterisztikÂ´ jÂ´ nak formÂ´ lis leÂ´rÂ´ sa lenne. SejtjÂ¨ k, hogy legjobb gyakori mintakinyerË algoritmus nem aa a Ä±a u o

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

84

lÂ´ tezik, de talÂ´ n van esÂ´ lyÂ¨ nk ertelmes megÂ´ llapÂ´tÂ´ sokra, ha a bemenetre vonatkozÂ´ an kÂ¨ lÂ¨ nbÂ¨ zË e a e u Â´ a Ä±a o uo o o feltÂ´ telezÂ´ sekkel elÂ¨ nk (szokÂ´ sos feltÂ´ tel pÂ´ ldÂ´ ul az, hogy a bemenet olyan sorozat, melynek elemei e e Â´u a e e a kis mÂ´ retË halmazok vagy az, hogy csak nagyon kevÂ´ s magas tÂ´ mogatottsÂ´ gÂ´ minta van) es ezekhez e u e a a u Â´ prÂ´ bÂ´ ljuk megtalÂ´ lni az ideÂ´ lis algoritmust. o a a a

5.2. TovÂ´ bbi feladatok a
A gyakori mintakinyerÂ´ s egyik nagy kritikÂ´ ja, hogy sokszor tÂ´ l nagy a kinyert mintÂ´ k szÂ´ ma. Vane a u a a nak olyan feladatok, ahol nem az osszes gyakori mintÂ´ t kÂ´vÂ´ njuk kinyerni, hanem csak egy rÂ´ szÂ¨ ket. Â¨ a Ä± a e u Erre pÂ´ lda az un. top-k mintakinyerÂ´ s, melynek sorÂ´ n a k legnagyobb tÂ´ mogatottsÂ´ gÂ´ mintÂ´ t keressÂ¨ k. e Â´ e a a a u a u Emellett az alÂ´ bbi feladatok lÂ´ teznek. a e

5.2.1. Nem bË vÂ´thetË es zÂ´ rt mintÂ´ k o Ä± oÂ´ a a
5.8. deï¬nÂ´ciÂ´ . Az m gyakori minta B-re nÂ´ zve nem bË vÂ´thetË (maximal), ha nem lÂ´ tezik olyan m Ä± o e o Ä± o e gyakori minta B-ben, amelynek m valÂ´ di rÂ´ szmintÂ´ ja. o e a 5.9. deï¬nÂ´ciÂ´ . Az m minta B-re nÂ´ zve zÂ´ rt, amennyiben nem lÂ´ tezik olyan m minta B-ben, amelynek Ä± o e a e m valÂ´ di rÂ´ szmintÂ´ ja, es m tÂ´ mogatottsÂ´ ga megegyezik m tÂ´ mogatottsÂ´ gÂ´ val (supp(m ) = supp(m)). o e a Â´ a a a a a Az ember azonnal lÂ´ thatja, hogy mi ertelme van annak, hogy csak a nem bË vÂ´thetË mintÂ´ kat a Â´ o Ä± o a keressÂ¨ k meg : egyÂ´ rtelmË en meghatÂ´ rozzÂ´ k a gyakori mintÂ´ kat es szÂ´ muk kevesebb. Sajnos a nem u e u a a a Â´ a bË vÂ´thetË mintÂ´ k alapjÂ´ n csak azt tudjuk megmondani, hogy egy minta gyakori-e, a tÂ´ mogatottsÂ´ got o Ä± o a a a a nem tudjuk megadni (legfeljebb egy alsÂ´ korlÂ´ tot). o a Nem ilyen triviÂ´ lis, hogy mi ertelme van a gyakori zÂ´ rt mintÂ´ knak. Azt lÂ´ tjuk, hogy a zÂ´ rt gyakori a Â´ a a a a mintÂ´ k a gyakori mintÂ´ k rÂ´ szhalmazai, es a zÂ´ rt mintÂ´ k rÂ´ szhalmaza a nem bË vÂ´thetË mintÂ´ k, hiszen a a e Â´ a a e o Ä± o a 5.10. tulajdonsÂ´ g. Minden nem bË vÂ´thetË minta zÂ´ rt. a o Ä± o a MÂ´ gis mi cÂ´ lt szolgÂ´ lnak a gyakori zÂ´ rt mintÂ´ k ? Ennek tisztÂ´ zÂ´ sÂ´ hoz kÂ´ t uj fogalmat kell bevee e a a a a aa e Â´ zetnÂ¨ nk. u 5.11. deï¬nÂ´ciÂ´ . Az m minta az m minta lezÂ´ rtja, ha m m , supp(m)=supp(m ) es nincs m :m Ä± o a Â´ melyre supp(m ) = supp(m ). NyilvÂ´ nvalÂ´ , ha m zÂ´ rt, akkor lezÂ´ rtja megegyezik onmagÂ´ val. a o a a Â¨ a 5.12. deï¬nÂ´ciÂ´ . Az M K =(M, ) mintakÂ¨ rnyezet a zÂ´ rtsÂ´ gra nÂ´ zve egyÂ´ rtelmË , amennyiben minden Ä± o o a a e e u m âˆˆ M minta lezÂ´ rtja egyÂ´ rtelmË . a e u LÂ´ tni fogjuk, hogy pÂ´ ldÂ´ ul az elemhalmazokat tartalmazÂ´ mintakÂ¨ rnyezet zÂ´ rtsÂ´ gra nÂ´ zve a e a o o a a e egyÂ´ rtelmË , mÂ´g a sorozatokat tartalmazÂ´ nem az. A zÂ´ rtsÂ´ gra nÂ´ zve egyÂ´ rtelmË mintakÂ¨ rnyezeteke u Ä± o a a e e u o ben a zÂ´ rt mintÂ´ k jelentË sÂ´ ge abban all, hogy ezek ismeretÂ´ ben tetszË leges mintÂ´ rÂ´ l el tudjuk dÂ¨ nteni, a a oe Â´ e o ao o hogy gyakori-e, es ha igen, meg tudjuk pontosan mondani tÂ´ mogatottsÂ´ gÂ´ t. SzÂ¨ ksÂ´ gtelen tÂ´ rolni az Â´ a a a u e a osszes gyakori mintÂ´ t, hiszen a zÂ´ rt mintÂ´ kbÂ´ l ezek egyÂ´ rtelmË en meghatÂ´ rozhatÂ´ k. Az m minta gyaÂ¨ a a a o e u a o kori, ha rÂ´ sze valamely gyakori zÂ´ rt mintÂ´ nak, es m tÂ´ mogatottsÂ´ ga megegyezik a legkisebb olyan e a a Â´ a a zÂ´ rt minta tÂ´ mogatottsÂ´ gÂ´ val, amelynek rÂ´ sze m (ez ugyanis az m lezÂ´ rtja). a a a a e a m ,

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

85

5.2.2. KÂ´ nyszerek kezelÂ´ se e e
Nem mindig erdekes az osszes gyakori minta. ElË fordulhat, hogy pÂ´ ldÂ´ ul a nagy mÂ´ retË , Â´ Â¨ o e a e u vagy bizonyos mintÂ´ kat tartalmazÂ´ , vagy nem tartalmazÂ´ , stb. gyakori mintÂ´ k nem fontosak. a o o a Â´ a Ä± AltalÂ´ nosÂ´thatjuk a feladatot ugy, hogy a felhasznÂ´ lÂ´ kÂ´ nyszereket, predikÂ´ tumokat ad meg, es azokat Â´ ao e a Â´ a mintÂ´ kat kell meghatÂ´ roznunk, amelyek kielÂ´ gÂ´tik az osszes kÂ´ nyszert. a a e Ä± Â¨ e A feladat egyszerË megoldÂ´ sa lenne, hogy â€“ mint utÂ´ feldolgozÂ´ s â€“ a gyakori mintÂ´ kat egyesÂ´ vel u a o a a e megvizsgÂ´ lva tÂ¨ rÂ¨ lnÂ´ nk azokat, amelyek nem elÂ´ gÂ´tenek minden kÂ´ nyszert. Ez a megoldÂ´ s nem tÂ´ l a oo e e Ä± e a u hatÂ´ kony. Jobb lenne, ha a kÂ´ nyszereket minÂ´ l mÂ´ lyebbreâ€ tudnÂ´ nk helyezni a gyakori mintÂ´ kat e e e e a a â€ kinyerË algoritmusokban. Ez bizonyos kÂ´ nyszereknÂ´ l megtehetË , mÂ´ soknÂ´ l nem. NÂ´ zzÂ¨ k, milyen o e e o a a e u osztÂ´ lyokba sorolhatjuk a kÂ´ nyszereket. a e TulajdonkÂ´ ppen az is egy kÂ´ nyszer, hogy gyakori mintÂ´ kat keresÂ¨ nk. A gyakorisÂ´ gra vonatkozÂ´ e e a u a o predikÂ´ tum igaz, ha a minta gyakori, ellenkezË esetben hamis. Ez a predikÂ´ tum anti-monoton : a o a 5.13. deï¬nÂ´ciÂ´ . Legyen (H, ) egy rÂ´ szben rendezett halmaz. A p : H â†’ {igaz, hamis} predikatum Ä± o e Â´ anti-monoton, amennyiben tetszË leges x âˆˆ H elem esetÂ´ n, ha p(x) = igaz, akkor p(y) is igazat ad o e minden y x elemre. Ha a fenti deï¬nÂ´ciÂ´ ba y x helyett x y Â´runk, akkor a monoton predikÂ´ tumok deï¬nÂ´ciÂ´ jÂ´ t kapjuk. Egy Ä± o Ä± a Ä± oa predikÂ´ tum akkor es csak akkor monoton es anti-monoton egyben, ha a mintatÂ´ r minden elemÂ´ hez a Â´ Â´ e e igaz (vagy hamis) ertÂ´ ket rendel. Az ilyen predikÂ´ tumot trivialis predikÂ´ tumnak hÂ´vjuk. Â´ e a a Ä± Â´ 5.14. deï¬nÂ´ciÂ´ . Legyen (H, ) egy rÂ´ szben rendezett halmaz. A p : H â†’ {igaz, hamis} predikatum Ä± o e Â´ preï¬x anti-monoton, amennyiben megadhato a -nek egy olyan lineÂ´ ris kiterjesztÂ´ se amire, ha a e Â´ p(m) = igaz, akkor p az m minden preï¬xÂ´ n is igaz. e 5.15. deï¬nÂ´ciÂ´ . Legyen (H, ) egy rÂ´ szben rendezett halmaz. A p : H â†’ {igaz, hamis} predikatum Ä± o e Â´ preï¬x monoton, amennyiben megadhato a -nek egy olyan lineÂ´ ris kiterjesztÂ´ se amely, ha p(m)= a e Â´ = igaz, es az m mintÂ´ nak m preï¬xe. akkor p(m ) is igaz. a Â´ Minden anti-monoton (monoton) predikÂ´ tum egyben preï¬x anti-monoton (preï¬x monoton) is. a 5.16. deï¬nÂ´ciÂ´ . A p predikÂ´ tum erË sen atalakÂ´thatÂ´ , amennyiben egyszerre preï¬x anti-monoton es Ä± o a o Â´ Ä± o Â´ preï¬x monoton. Az 5.1 abrÂ´ n lÂ´ thatÂ´ a kÂ´ nyszerek kapcsolata [131]. Â´ a a o e SejthetjÂ¨ k, hogy az anti-monoton predikÂ´ tumok lesznek a legegyszerË bben kezelhetË k. Ilyen antiu a u o monoton predikÂ´ tumok pÂ´ ldÂ´ ul a kÂ¨ vetkezË k : a e a o o â€“ A minta mÂ´ rete ne legyen nagyobb egy adott kÂ¨ szÂ¨ bnÂ´ l. e u o e â€“ A mintÂ´ nak legyen rÂ´ sze egy rÂ¨ gzÂ´tett minta. a e o Ä± VÂ´ sÂ´ rlÂ´ i szokÂ´ sok vizsgÂ´ latÂ´ nÂ´ l â€“ amikor a vÂ´ sÂ´ rlÂ´ i kosarakban gyakran elË fordulÂ´ aa o a a a a aa o o o termÂ´ khalmazokat keressÂ¨ k â€“ monoton kÂ´ nyszer pÂ´ ldÂ´ ul az, hogy a termÂ´ khalmazban lÂ´ vË e u e e a e e o elemek proï¬tjÂ´ nak osszÂ´ rtÂ´ ke (vagy minimuma, maximuma) legyen nagyobb egy adott konstansnÂ´ l. a Â¨ e e a Preï¬x monoton predikÂ´ tum pÂ´ ldÂ´ ul, hogy a termÂ´ khalmazban talÂ´ lhatÂ´ termÂ´ kek arÂ´ nak atlaga a e a e a o e Â´a Â´ nagyobb-e egy rÂ¨ gzÂ´tett konstansnÂ´ l. RendezzÂ¨ k a termÂ´ keket aruk szerint nÂ¨ vekvË sorrendbe. Ezen o Ä± a u e Â´ o o rendezÂ´ s szerinti lexikograï¬kus rendezÂ´ s legyen a teljes rendezÂ´ s. NyilvÂ´ nvalÂ´ , hogy ekkor a preï¬xe e e a o ben talÂ´ lhatÂ´ termÂ´ kek arai nagyobbak, mint a preï¬xben nem szereplË termÂ´ kei arai. Ez a kÂ´ nyszer a o e Â´ o e Â´ e preï¬x monoton, hiszen a preï¬x a legolcsÂ´ bb termÂ´ keket nem tartalmazza, Â´gy atlaga nem lehet kisebb. o e Ä± Â´ Â´ Erdemes atgondolni, hogy ez a predikÂ´ tum rÂ´ adÂ´ sul erË sen atalakÂ´thatÂ´ . Â´ a a a o Â´ Ä± o

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE
triviÃ¡lis

86

antiâˆ’monoton prefix antiâˆ’monoton

monoton prefix monoton

erÃµsen Ã¡talakÃ­thatÃ³

nem Ã¡talakÃ­thatÃ³
5.1. abra. A kÂ´ nyszerek (predikÂ´ tumok) osztÂ´ lyozÂ´ sa Â´ e a a a

Â¨ o 5.2.3. TÂ¨ bbszÂ¨ rÂ¨ s tÂ´ mogatottsÂ´ gi kuszÂ¨ b o o o a a
Vannak olyan alkalmazÂ´ sok, amelyekben a gyakorisÂ´ g egyetlen, univerzÂ´ lis tÂ´ mogatottsÂ´ gi a a a a a kÂ¨ szÂ¨ b alapjÂ´ n tÂ¨ rtÂ´ nË deï¬niÂ´ lÂ´ sa nem megfelelË . Ha pÂ´ ldÂ´ ul vÂ´ sÂ´ rlÂ´ si szokÂ´ sok elemzÂ´ sÂ´ re gonu o a o e o aa o e a aa a a ee dolunk, akkor a nagy ertÂ´ kË termÂ´ kekkel kapcsolatos tudÂ´ s legalÂ´ bb annyira fontos, mint a nagy Â´ e u e a a mennyisÂ´ gben ertÂ´ kesÂ´tett, de kis haszonnal jÂ´ rÂ´ termÂ´ kekkel kapcsolatos informÂ´ ciÂ´ . KÂ´ zenfekvË e Â´ e Ä± ao e a o e o megoldÂ´ s, hogy annyira lecsÂ¨ kkentjÂ¨ k a tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ bÂ¨ t, hogy ezek a ritka elemek is gyaa o u a a u o o koriak legyenek, ami azzal a veszÂ´ llyel jÂ´ r, hogy (ezen fontos elemek mellett) a mintatÂ´ r nagy rÂ´ sze e a e e gyakorivÂ´ vÂ´ lik. TÂ¨ bbszÂ¨ rÂ¨ s tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ bnÂ´ l a mintatÂ´ r minden elemÂ´ hez egyedileg mega a o oo a a u o e e e adhatunk egy tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ bÂ¨ t, azaz lÂ´ tezik egy min supp : M â†’ N fÂ¨ ggvÂ´ ny, es az m akkor a a u o o e u e Â´ gyakori, ha supp(m) â‰¥ min supp(m). TÂ¨ bbszÂ¨ rÂ¨ s tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ b esetÂ´ n nem igaz az 5.5 tulajdonsÂ´ g. HiÂ´ ba nagyobb ugyanis o oo a a u o e a a egy rÂ´ szminta tÂ´ mogatottsÂ´ ga, a rÂ´ szmintÂ´ hoz tartozÂ´ tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ b mÂ´ g nagyobb lehet, es e a a e a o a a u o e Â´ Â´gy a rÂ´ szminta nem feltÂ´ tlenÂ¨ l gyakori. Ä± e e u

5.2.4. Dinamikus gyakori mintakinyerÂ´ s e
Egyre nÂ´ pszerË bb adatbÂ´ nyÂ´ szati feladat a gyakori mintÂ´ k un. dinamikus kinyerÂ´ se. Adott egy e u a a a Â´ e kiindulÂ´ si B bemenet a hozzÂ´ tartozÂ´ gyakori mintÂ´ kkal es tÂ´ mogatottsÂ´ gokkal es egy mÂ´ sik B bea a o a Â´ a a Â´ a Â´ a menet. AltalÂ´ ban a B -t valami aprÂ´ mÂ´ dosÂ´tÂ´ ssal kapjuk B-bË l. Feladat, hogy minÂ´ l hatÂ´ konyabban o o Ä±a o e e talÂ´ ljuk meg a B -ben gyakori mintÂ´ kat, azaz minÂ´ l jobban hasznÂ´ ljuk fel a meglÂ´ vË tudÂ´ st (a B-ben a a e a e o a gyakori mintÂ´ kat). Gondolhatunk itt egy on-line aruhÂ´ zra, ahol kezdetben rendelkezÂ´ sÂ¨ nkre allnak az a Â´ a eu Â´ elmÂ´ lt havi vÂ´ sÂ´ rlÂ´ sokhoz tartozÂ´ gyakori termÂ´ khalmazok, mikÂ¨ zben folyamatosan erkeznek az uj u aa a o e o Â´ Â´ vÂ´ sÂ´ rlÂ´ sok adatai. Hasznos, ha az ujonnan felbukkanÂ´ gyakori mintÂ´ kat minÂ´ l hamarabb felfedezzÂ¨ k, aa a Â´ o a e u anÂ´ lkÂ¨ l, hogy a bË vÂ´tett adatbÂ´ zisban off-line mÂ´ don lefuttatnÂ´ nk egy gyakori mintÂ´ kat kinyerË algoe u o Ä± a o a a o ritmust.

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

87

5.3. Az algoritmusok jellemzË i o
Helyes vagy helyesen mË kÂ¨ dË jelzË vel illetjÂ¨ k azokat az algoritmusokat, amelyek nem hibÂ´ znak, u o o o u a tehÂ´ t csak gyakori mintÂ´ kat nyernek ki es azok tÂ´ mogatottsÂ´ gÂ´ t jÂ´ l hatÂ´ rozzÂ´ k meg. Teljes egy algoa a Â´ a a a o a a ritmus, ha be lehet bizonyÂ´tani, hogy az osszes gyakori mintÂ´ t es tÂ´ mogatottsÂ´ gaikat meghatÂ´ rozza. Ä± Â¨ a Â´ a a a Helyesen mË kÂ¨ dË es teljes algoritmusokrÂ´ l fogunk beszÂ´ lni, de szÂ´ lesz olyan algoritmusokrÂ´ l is, u o o Â´ o e o o amelyekrË l csak azt tudjuk, hogy (bizonyos feltÂ´ telezÂ´ sekkel elve) kicsi annak a valÂ´ szÂ´nË sÂ´ ge, hogy o e e Â´ o Ä± ue nem talÂ´ l meg minden gyakori mintÂ´ t. a a SzÂ´ lessÂ´ gi bejÂ´ rÂ´ st valÂ´ sÂ´tanak meg azok az algoritmusok1, amelyek a legkisebb mintÂ´ kbÂ´ l kie e aa oÄ± a o indulva egyre nagyobb mÂ´ retË gyakori mintÂ´ kat nyernek ki. Egy ilyen algoritmusra igaz, hogy az e u a -elemË gyakori mintÂ´ kat hamarabb talÂ´ lja meg, mint az -nÂ´ l nagyobb elemË mintÂ´ kat. MÂ´ lysÂ´ gi u a a e u a e e bejÂ´ rÂ´ st megvalÂ´ sÂ´tÂ´ algoritmusokra ez nem igaz ; ezek minÂ´ l gyorsabban prÂ´ bÂ´ lnak eljutni a nem aa o Ä±o e o a bË vÂ´thetË mintÂ´ hoz. Ha ez sikerÂ¨ l, akkor egy ujabb, nem bË vÂ´thetË mintÂ´ t vesznek cÂ´ lba. o Ä± o a u Â´ o Ä± o a e A kÂ¨ vetkezË kben ismertetjÂ¨ k a hÂ´ rom legfontosabb gyakori mintÂ´ kat kinyerË mÂ´ dszert az o o u a a o o APRIORI-t, Zaki mÂ´ dszerÂ´ t es a mintanÂ¨ velË mÂ´ dszert. Ennek a hÂ´ rom algoritmusnak a szerepe abo e Â´ o o o a ban all, hogy szinte az osszes tÂ¨ bbi algoritmus ezeknek a tovÂ´ bbfejlesztÂ´ se, vagy ezen algoritmusok Â´ Â¨ o a e keverÂ´ ke. JelentË sÂ´ gÂ¨ ket tovÂ´ bb nÂ¨ veli az a tÂ´ ny, hogy ezek a mÂ´ dszerek megtalÂ´ lhatÂ´ ak akÂ´ rmilyen e oe u a o e o a o a tÂ´pusÂ´ mintÂ´ kat keresÂ¨ nk, legyenek azok elemhalmazok, sorozatok vagy grÂ´ fok. Nem pontos algoÄ± u a u a ritmusokat adunk, hanem csak egy altalÂ´ nos mÂ´ dszerleÂ´rÂ´ st. Egyes lÂ´ pÂ´ seket csak a minta tÂ´pusÂ´ nak Â´ a o Ä±a e e Ä± a ismeretÂ´ ben lehet pontosan megadni. e

5.4. Az APRIORI mÂ´ dszer o
Az eredeti APRIORI algoritmust gyakori elemhalmazok kinyerÂ´ sÂ´ re hasznÂ´ ltÂ´ k, es mint az AIS ee a a Â´ algoritmus [5] tovÂ´ bbfejlesztett vÂ´ ltozata adtÂ´ k kÂ¨ zre. Rakesh Agrawal es Ramakrishnan Srikant [7] a a a o Â´ publikÂ´ ltÂ´ k 1993-ban, de tË lÂ¨ k fÂ¨ ggetlenÂ¨ l, szinte ugyanezt az algoritmust javasolta Heikki Mannila, a a ou u u Hannu Toivonen es A. Inkeri Verkamo [113]-ben. Az 5 szerzË vÂ´ gÂ¨ l egyesÂ´tette a kÂ´ t Â´rÂ´ st [6]. Kis Â´ o e u Ä± e Ä±a mÂ´ dosÂ´tÂ´ ssal az algoritmust gyakori sorozatok kinyerÂ´ sÂ´ re is (APRIORIALL, GSP algoritmusok), o Ä±a ee sË t, alapelvÂ´ t bÂ´ rmely tÂ´pusÂ´ gyakori minta (epizÂ´ d, fa stb.) keresÂ´ sÂ´ nÂ´ l is alkalmazhatjuk. o e a Ä± u o ee e Az algoritmus rendkÂ´vÂ¨ l egyszerË , mÂ´ gis gyors es kicsi a memÂ´ riaigÂ´ nye. TalÂ´ n emiatt a mai Ä± u u e Â´ o e a napig ez az algoritmus a legelterjedtebb es legismertebb gyakori mintakinyerË algoritmus. Â´ o Az APRIORI szÂ´ lessÂ´ gi bejÂ´ rÂ´ st valÂ´ sÂ´t meg. Ez azt jelenti, hogy a legkisebb mintÂ´ bÂ´ l kiindulva e e aa oÄ± a o szintenkÂ´ nt halad elË re a nagyobb mÂ´ retË gyakori mintÂ´ k meghatÂ´ rozÂ´ sÂ´ hoz. A kÂ¨ vetkezË szinten e o e u a a aa o o (iterÂ´ ciÂ´ ban) az eggyel nagyobb mÂ´ retË mintÂ´ kkal foglalkozik. a o e u a Az algoritmusban kÂ¨ zponti szerepet tÂ¨ ltenek be az un. jeloltek. JelÂ¨ ltnek hÂ´vjuk egy adott o o Â´ o Ä± Â¨ iterÂ´ ciÂ´ ban azt a mintÂ´ t, amelynek tÂ´ mogatottsÂ´ gÂ´ t meghatÂ´ rozzuk, azaz, aminek ï¬gyelmÂ¨ nket szena o a a a a a u teljÂ¨ k. Hamis jelÂ¨ lteknek hÂ´vjuk azokat a jelÂ¨ lteket, amelyekrË l ki fog derÂ¨ lni, hogy ritka mintÂ´ k, u o Ä± o o u a elhanyagolt mintÂ´ k pedig azok a gyakori mintÂ´ k, amelyeket nem vÂ´ lasztunk jelÂ¨ ltnek (nem foglala a a o kozunk velÂ¨ k ). NyilvÂ´ nvalÂ´ , hogy csak azokrÂ´ l a mintÂ´ krÂ´ l tudjuk eldÂ¨ nteni, hogy gyakoriak-e, u a o o a o o amelyeknek meghatÂ´ rozzuk a tÂ´ mogatottsÂ´ gÂ´ t, tehÂ´ t amelyek jelÂ¨ ltek valamikor. EzÂ´ rt elvÂ´ rjuk az a a a a a o e a algoritmustÂ´ l, hogy minden gyakori mintÂ´ t felvegyen jelÂ¨ ltnek. A teljessÂ´ g feltÂ´ tele, hogy ne legyen o a o e e elhanyagolt minta, a hatÂ´ konysÂ´ g pedig annÂ´ l jobb, minÂ´ l kevesebb a hamis jelÂ¨ lt. e a a e o A jelÂ¨ ltek deï¬niÂ´ lÂ´ sÂ´ nÂ´ l a 5.5 tulajdonsÂ´ got hasznÂ´ ljuk fel, ami Â´gy szÂ´ lt : Gyakori minta mino aa a a a a Ä± o â€ den rÂ´ szmintÂ´ ja gyakori.â€. Az allÂ´tÂ´ st indirekten nÂ´ zve elmondhatjuk, hogy egy minta biztosan nem e a Â´ Ä±a e
1A

szÂ´ lessÂ´ gi bejÂ´ rÂ´ st megvalÂ´ sÂ´tÂ´ algoritmusokat szintenkÂ´ nt haladÂ´ (levelwise) algoritmusoknak is hÂ´vjÂ´ k. e e aa o Ä±o e o Ä± a

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

88

gyakori, ha van ritka rÂ´ szmintÂ´ ja ! Ennek alapjÂ´ n ne legyen jelÂ¨ lt az a minta, amelynek van ritka e a a o rÂ´ szmintÂ´ ja. Az APRIORI algoritmus ezÂ´ rt epÂ´tkezik lentrË l. Egy adott iterÂ´ ciÂ´ ban pontosan tudjuk, e a e Â´ Ä± o a o hogy a rÂ´ szmintÂ´ k gyakoriak vagy sem ! Az algoritmus onnan kapta a nevÂ´ t, hogy az -elemË jelÂ¨ ltee a e u o ket a bemeneti adat -edik atolvasÂ´ sÂ´ nak megkezdÂ´ se elË tt (a priori) allÂ´tja elË . Â´ aa e o Â´ Ä± o Az algoritmus pszeudokÂ´ dja a kÂ¨ vetkezË abrÂ´ n lÂ´ thatÂ´ . Kezdeti ertÂ´ kek beÂ´ llÂ´tÂ´ sa utÂ´ n belÂ´ pÂ¨ nk o o oÂ´ a a o Â´ e a Ä±a a e u egy ciklusba. A ciklus akkor er vÂ´ get, ha az -elemË jelÂ¨ ltek halmaza ures. A cikluson belÂ¨ l elË szÂ¨ r Â´ e u o Â¨ u o o a tÂ´mogatottsÂ´g meghatÂ´rozÂ´s eljÂ´ rÂ´ st hÂ´vjuk meg, amely a jelÂ¨ ltek tÂ´ mogatottsÂ´ gÂ´ t hatÂ´ rozza a a a a aa Ä± o a a a a meg. Ha ismerjÂ¨ k a jelÂ¨ ltek tÂ´ mogatottsÂ´ gÂ´ t, akkor ki tudjuk vÂ´ lasztani belË lÂ¨ k a gyakoriakat. A u o a a a a ou jelÂ¨lt el}allÂ´tÂ´s fÂ¨ ggvÂ´ ny az -elemË gyakori mintÂ´ kbÂ´ l + 1-elemË jelÂ¨ lteket allÂ´t elË . o oÂ´ Ä± a u e u a o u o Â´ Ä± o B : bemeneti adat, min supp : tÂ´mogatottsÂ´gi kÂ¨szÂ¨b, a a u o Kimenet: GY : gyakori mintÂ´k, a Â´tmeneti vÂ´ltozÂ´k: A a o J : Az -elem} jelÂ¨ltek, u o Bemenet: â† 0; J â† az ures minta; Â¨ while{ |J | = 0 } { tÂ´mogatottsÂ´g_meghatÂ´rozÂ´s( B, J ); a a a a for all j âˆˆ J do if( supp( j) â‰¥ min supp ) then GY â† j; J +1 â† jelÂ¨lt_el}allÂ´tÂ´s( GY ); o oÂ´ Ä± a â† + 1; } 5.2. abra. Az APRIORI mÂ´ dszer Â´ o Az APRIORI elvet adaptÂ´ lÂ´ algoritmusok mind a fenti lÂ´ pÂ´ seket kÂ¨ vetik. TermÂ´ szetesen a ao e e o e kÂ¨ lÂ¨ nbÂ¨ zË tÂ´pusÂ´ mintÂ´ knÂ´ l kÂ¨ lÂ¨ nbÂ¨ zË mÂ´ don kell elvÂ´ gezni a tÂ´ mogatottsÂ´ g-meghatÂ´ rozÂ´ s, gyauo o o Ä± u a a uo o o o e a a a a koriak kivÂ´ logatÂ´ sa, jelÂ¨ ltek elË allÂ´tÂ´ sa lÂ´ pÂ´ seket. a a o oÂ´ Ä± a e e Az algoritmus hatÂ´ konysÂ´ gÂ´ nak egyik alapfeltÂ´ tele, hogy a jelÂ¨ ltek elfÂ´ rjenek a memÂ´ riÂ´ ban. Ele a a e o e o a lenkezË esetben ugyanis rengeteg idË menne el az olyan I/O mË veletekkel, amelynek sorÂ´ n a jelÂ¨ lteo o u a o ket a hÂ´ ttÂ´ r es a memÂ´ ria kÂ¨ zÂ¨ tt ide-oda mÂ´ solgatjuk. A fenti pszeudokÂ´ d az eredeti APRIORI egya e Â´ o o o a o szerË sÂ´tett vÂ´ ltozatÂ´ t Â´rja le. ValÂ´ jÂ´ ban ugyanis addig allÂ´tjuk elË az -elemË jelÂ¨ lteket, amÂ´g azok uÄ± a a Ä± oa Â´ Ä± o u o Ä± elfÂ´ rnek a memÂ´ riÂ´ ban. Ha elfogy a memÂ´ ria, akkor nÂ¨ velÂ´ se nÂ´ lkÂ¨ l folytatjuk az algoritmust, majd e o a o o e e u a kÂ¨ vetkezË iterÂ´ ciÂ´ ban ott folytatjuk a jelÂ¨ ltek elË allÂ´tÂ´ sÂ´ t, ahol abbahagytuk. o o a o o oÂ´ Ä± a a

5.4.1. JelÂ¨ ltek elË allÂ´tÂ´ sa o oÂ´ Ä± a
Az -elemË jelÂ¨ ltek elË allÂ´tÂ´ sÂ´ nak egyszerË mÂ´ dja az, hogy vesszÂ¨ k az osszes -elemË mintÂ´ t, es u o oÂ´ Ä± a a u o u Â¨ u a Â´ azokat vÂ´ lasztjuk jelÂ¨ ltnek, amelyekre teljesÂ¨ l, hogy minden rÂ´ szmintÂ´ juk gyakori. SzÂ¨ ksÂ´ gtelen az a o u e a u e osszes rÂ´ szmintÂ´ t ellenË rizni, ugyanis a tÂ´ mogatottsÂ´ g anti-monotonitÂ´ sÂ´ bÂ´ l kÂ¨ vetkezik az, hogy ha Â¨ e a o a a aa o o az osszes ( âˆ’ 1)-elemË rÂ´ szminta gyakori, akkor az osszes valÂ´ di rÂ´ szminta is gyakori. Â¨ u e Â¨ o e

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

89

Ez a mÂ´ dszer azonban nem tÂ´ l hatÂ´ kony, vagy ugy is megfogalmazhatnÂ´ nk, hogy tÂ´ l sok felesleges o u e Â´ a u munkÂ´ t vÂ´ gez, tÂ´ l sok olyan mintÂ´ t vizsgÂ´ l meg, amelyek biztosan nem gyakoriak. HÂ´vjuk potenci alis a e u a a Ä± Â´ jelÂ¨ lteknek azon mintÂ´ kat, amelyeket elË allÂ´tunk, majd ellenË rizzÂ¨ k, hogy rÂ´ szmintÂ´ ik gyakoriak-e. o a oÂ´ Ä± o u e a Ha egy potenciÂ´ lis minta atesik a teszten, akkor jelÂ¨ ltÂ´ vÂ´ lik. a Â´ o e a Tudjuk, hogy ha egy minta jelÂ¨ lt lesz, akkor minden ( âˆ’ 1)-elemË rÂ´ szmintÂ´ ja gyakori, tehÂ´ t o u e a a cÂ´ lszerË az ( âˆ’ 1)-elemË gyakori mintÂ´ kbÂ´ l kiindulni. Egy egyszerË megoldÂ´ s lenne, ha sorra e u u a o u a vennÂ´ nk az ( âˆ’ 1)-elemË gyakori mintÂ´ k minimÂ´ lis valÂ´ di felsË korlÂ´ tait, mint potenciÂ´ lis jelÂ¨ ltee u a a o o a a o ket. MÂ´ g jobb megoldÂ´ s, ha a ( âˆ’ 1)-elemË gyakori mintapÂ´ roknak vesszÂ¨ k a minimÂ´ lis valÂ´ di felsË e a u a u a o o korlÂ´ tait. Ekkor ugyanis csak olyan potenciÂ´ lis jelÂ¨ ltet allÂ´tunk elË , amelynek van kÂ´ t ( âˆ’ 1)-elemË a a o Â´ Ä± o e u gyakori rÂ´ szmintÂ´ ja. A minimÂ´ lis valÂ´ di felsË korlÂ´ tot egy illesztÂ´ si mË velettel fogjuk elË allÂ´tani. A e a a o o a e u oÂ´ Ä± kÂ´ t gyakori mintÂ´ t a potenciÂ´ lis jelÂ¨ lt generÂ´ torainak hÂ´vjuk. Az illesztÂ´ si mË veletet a âŠ—-el fogunk e a a o a Ä± e u jelÂ¨ lni. Akkor illesztÂ¨ nk kÂ´ t mintÂ´ t, ha van ( âˆ’2)-elemË kÂ¨ zÂ¨ s rÂ´ szmintÂ´ juk. Ezt a rÂ´ szmintÂ´ t magnak o u e a u o o e a e a (core) fogjuk hÂ´vni. Ä± Ha az elË allÂ´tÂ´ s mÂ´ dja olyan, hogy nem allÂ´thatjuk elË ugyanazt a potenciÂ´ lis jelÂ¨ ltet kÂ´ t oÂ´ Ä± a o Â´ Ä± o a o e kÂ¨ lÂ¨ nbÂ¨ zË mÂ´ don, akkor ezt jelÂ¨ lt-elË allÂ´tÂ´ st ismÂ´ tlÂ´ s nÂ´ lkÂ¨ linek nevezzÂ¨ k. NÂ´ zzÂ¨ nk egy pÂ´ ldÂ´ t. Leuo o o o o oÂ´ Ä± a e e e u u e u e a gyenek a mintatÂ´ r elemei elemhalmazok. Akkor allÂ´tsuk elË kÂ´ t ( âˆ’1)-elemË gyakori elemhalmaznak e Â´ Ä± o e u a minimÂ´ lis valÂ´ di korlÂ´ tjÂ´ t, ha metszetÂ¨ k ( âˆ’ 2)-elemË . A minimÂ´ lis valÂ´ di korlÂ´ tok halmaza csak a o a a u u a o a egy elemet fog tartalmazni, a kÂ´ t halmaz uniÂ´ jÂ´ t. Ez a jelÂ¨ lt-elË allÂ´tÂ´ s nem ismÂ´ tlÂ´ s nÂ´ lkÂ¨ li, ugyane oa o oÂ´ Ä± a e e e u is pÂ´ ldÂ´ ul az ({A, B}, {A, C}) pÂ´ rnak ugyanaz a legkisebb felsË korlÂ´ tja, mint az ({A, B}, {B, C}) e a a o a pÂ´ rnak. a Az ismÂ´ tlÂ´ s nÂ´ lkÂ¨ li jelÂ¨ lt-elË allÂ´tÂ´ st mindig a minta elemein ertelmezett teljes rendezÂ´ s foge e e u o oÂ´ Ä± a Â´ e ja garantÂ´ lni, ami a âŠ† rendezÂ´ s egy lineÂ´ ris kiterjesztÂ´ se lesz. A teljes rendezÂ´ snek megfelelË en a e a e e o vÂ´ gigmegyÂ¨ nk az ( âˆ’ 1)-elemË gyakori mintÂ´ kon es megnÂ´ zzÂ¨ k, hogy mely sorban utÂ´ na kÂ¨ vetkezË e u u a Â´ e u a o o ( âˆ’ 1)-elemË gyakori mintÂ´ val illeszthetË , illetve az illesztÂ´ skÂ´ nt kapott potenciÂ´ lis jelÂ¨ lt minden u a o e e a o ( âˆ’1)-elemË rÂ´ szmintÂ´ ja gyakori-e. Sok esetben a ismÂ´ tlÂ´ s nÂ´ lkÂ¨ lisÂ´ gnek elÂ´ gsÂ´ ges feltÂ´ tele az lesz, u e a e e e u e e e e hogy a kÂ´ t gyakori minta ( âˆ’ 2)-elemË preï¬xeik megegyezzenek. A minta tÂ´pusÂ´ nak ismeretÂ´ ben a e u Ä± a e teljessÂ´ get (minden minimÂ´ lis valÂ´ di felsË korlÂ´ tbeli elemet elË allÂ´tunk) es az ismÂ´ tlÂ´ s nÂ´ lkÂ¨ lisÂ´ get e a o o a oÂ´ Ä± Â´ e e e u e kÂ¨ nnyË lesz bizonyÂ´tani. o u Ä± Bemenet: Kimenet: Â´tmeneti vÂ´ltozÂ´k: A a o GY âˆ’1 : ( âˆ’ 1)-elem} gyakori mintÂ´k u a

J : Az -elem} jelÂ¨ltek, u o Ë† : potenciÂ´lis jelÂ¨ltek halmaza J a o

for all gy âˆˆ GY âˆ’1 do for all gy âˆˆ GY âˆ’1 , gy gy do if( gy es gy illeszthet}) Â´ o { JË† = minimÂ´lis_valÂ´di_fels}_korlÂ´t(gy, gy ); a o o a Ë† for all j âˆˆ JË† Ë† if( minden_rÂ´szhalmaz_gyakori( j, GY âˆ’1 ) ) e Ë† J â† j; } 5.3. abra. JelÂ¨ ltek elË allÂ´tÂ´ sa Â´ o oÂ´ Ä± a

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

90

5.4.2. ZÂ´ rt mintÂ´ k kinyerÂ´ se, az APRIORI-CLOSE algoritmus a a e
A zÂ´ rt mintÂ´ k jelentË sÂ´ gÂ´ t az 5.2.1 rÂ´ szben mÂ´ r tÂ´ rgyaltuk. Itt most kÂ´ t feladat megoldÂ´ sÂ´ val a a oe e e a a e aa foglalkozunk. MegnÂ´ zzÂ¨ k, hogy az osszes gyakori mintÂ´ bÂ´ l hogyan tudjuk elË allÂ´tani a zÂ´ rtakat, ile u Â¨ a o oÂ´ Ä± a letve bemutatjuk az APRIORI-CLOSE [128â€“130] algoritmust, amely mÂ´ r eleve csak a zÂ´ rt mintÂ´ kat a a a hatÂ´ rozza meg. MindkÂ´ t mÂ´ dszerhez az alÂ´ bbi eszrevÂ´ telt hasznÂ´ ljuk fel : a e o a Â´ e a Â´ 5.17. eszrevÂ´ tel. Ha az m minta nem zÂ´ rt, akkor van olyan m-et tartalmazÂ´ eggyel nagyobb mÂ´ retË e a o e u minta, amelynek tÂ´ mogatottsÂ´ ga megegyezik m tÂ´ mogatottsÂ´ gÂ´ val. a a a a a TegyÂ¨ k fel, hogy a legnagyobb mÂ´ retË gyakori minta mÂ´ rete k. A GYk elemei zÂ´ rtak. Egy egyszerË u e u e a u algoritmus menete a kÂ¨ vetkezË : o o NÂ´ zzÂ¨ k sorban GYkâˆ’1 , GYkâˆ’2 , . . . , GY0 elemeit. Ha m âˆˆ GY -hez talÂ´ lunk olyan m âˆˆ GY +1 elee u a met, amelynek tÂ´ mogatottsÂ´ ga megegyezik m tÂ´ mogatottsÂ´ gÂ´ val, akkor m nem zÂ´ rt. Ha nincs ilyen a a a a a a tulajdonsÂ´ gÂ´ m , akkor m zÂ´ rt. a u a Az APRIORI-CLOSE menete teljes mÂ´ rtÂ´ kben megegyezik az APRIORI algoritmus menetÂ´ vel. e e e Az egyetlen kÂ¨ lÂ¨ nbsÂ´ g, hogy az -elemË gyakori mintÂ´ k meghatÂ´ rozÂ´ sa utÂ´ n tÂ¨ rli az ( âˆ’ 1)-elemË uo e u a a a a o u nem zÂ´ rtakat. MiutÂ´ n eldÂ¨ ntÂ¨ tte, hogy az -elemË m minta gyakori, megvizsgÂ´ lja az osszes ( âˆ’ 1)a a o o u a Â¨ elemË rÂ´ szmintÂ´ jÂ´ t m-nek. Amennyiben van olyan rÂ´ szhalmaz, aminek tÂ´ mogatottsÂ´ ga egyenlË m u e aa e a a o tÂ´ mogatottsÂ´ gÂ´ val, akkor ez a rÂ´ szminta nem zÂ´ rt, ellenkezË esetben zÂ´ rt. a a a e a o a

Â´ 5.5. Sorozat tÂ´pusu bemenet Ä±
A legÂ´ ltalÂ´ nosabb eset leÂ´rÂ´ sÂ´ nÂ´ l nem tettÂ¨ nk semmi megkÂ¨ tÂ´ st a bemenet tÂ´pusÂ´ ra es a a a Ä±aa a u oe Ä± a Â´ tÂ´ mogatottsÂ´ gi fÂ¨ ggvÂ´ nyre vonatkozÂ´ an. Az esetek tÂ¨ bbsÂ´ ge azonban egy speciÂ´ lis csalÂ´ dba tartozik. a a u e o o e a a Ennek a problÂ´ macsalÂ´ dnak a jellemzË je, hogy a bemenet egy vÂ´ ges sorozat, es a tÂ´ mogatottsÂ´ got e a o e Â´ a a azon elemek szÂ´ ma adja, amelyek valamilyen mÂ´ don illeszkednek a mintÂ´ ra 2 . Az illeszkedÂ´ st egy a o a e illeszkedÂ´ si predikÂ´ tummal adhjuk meg, melynek ertelmezÂ´ si tartomÂ´ nya a mintatÂ´ r. e a Â´ e a e bemenet : S = s1 , s2 , . . . , sn A tÂ´ mogatottsÂ´ g deï¬nÂ´ciÂ´ ja megkÂ¨ veteli, hogy ha egy minta illeszkedik egy sorozatelemre, akkor a a Ä± o o minden rÂ´ szmintÂ´ ja is illeszkedjen. A legtÂ¨ bb esetben a sorozat elemei megegyeznek a mintatÂ´ r elee a o e meivel es az m minta akkor illeszkedik egy sorozatelemre, ha annak m a rÂ´ szmintÂ´ ja. Â´ e a A szakirodalomban igen elterjedt a sorozatok helyett a halmazokkal leÂ´rt bemenet, ahol minden Ä± egyes elem egyedi azonosÂ´tÂ´ val van ellÂ´ tva. A jegyzetben a sorozatos leÂ´rÂ´ st fogjuk hasznÂ´ lni, akinek Ä±o a Ä±a a ez szokatlan, az tekintse azonosÂ´tÂ´ knak a sorozat elemeinek sorszÂ´ mÂ´ t. Ä±o a a Az m minta gyakorisÂ´ gÂ´ t (jelÂ¨ lÂ´ sben : f reqS (m), ami a frequency szÂ´ ra utal) az m tÂ´ mogatottsÂ´ ga a a oe o a a supp es az S hosszÂ´ nak hÂ´ nyadosÂ´ val deï¬niÂ´ ljuk. A gyakorisÂ´ gi kÂ¨ szÂ¨ bÂ¨ t ( min|S| ) kÂ¨ vetkezetesen Â´ a a a a a u o o o min f req-el jelÂ¨ ljÂ¨ k. Az ertelmesen megvÂ´ lasztott gyakorisÂ´ gi kÂ¨ szÂ¨ b mindig 0 es 1 kÂ¨ zÂ¨ tt van. Az o u Â´ a a u o Â´ o o esetek tÂ¨ bbsÂ´ gÂ´ ben tÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ b helyett gyakorisÂ´ gi kÂ¨ szÂ¨ bÂ¨ t adnak meg. o e e a a u o a u o o Sorozat tÂ´pusÂ´ bemenet esetÂ´ n merÂ¨ l fel azon elvÂ´ rÂ´ s az algoritmusokkal szemben, hogy ne leÄ± u e u aa gyen erzÂ´ keny a bemenet homogenitasÂ´ ra. IntuitÂ´ve akkor homogÂ´ n egy bemenet, ha nincsenek olyan Â´ e Ä± e Â´ a
csak a matematikai deï¬nÂ´ciÂ´ kat tekintjÂ¨ k, akkor tÂ¨ rekedhettÂ¨ nk volna a legegyszerË bb leÂ´rÂ´ sra es hasznÂ´ lhattunk Ä± o u o u u Ä±a Â´ a volna sorozatok helyett multihalmazokat. A valÂ´ sÂ´ gban azonban a bemenet tÂ´ nyleg sorozatok formÂ´ jÂ´ ban adott, Â´gy nem oa e aa Ä± tehetjÂ¨ k fel, hogy az azonos bemeneti elemek ossze vannak vonva. u Â¨
2 Ha

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

91

rÂ´ szei, amelyben valamely minta gyakorisÂ´ ga nagyon eltÂ´ r a teljes bemenet alapjÂ´ n szÂ´ mÂ´tott gyae a e a a Ä± korisÂ´ gÂ´ tÂ´ l. Sok alkalmazÂ´ sban ez a feltÂ´ tel nem all fenn, Â´gy azokat az algoritmusokat kedveljÂ¨ k, a ao a e Â´ Ä± u amelyek hatÂ´ konysÂ´ ga fÂ¨ ggetlen a bemenet homogenitÂ´ sÂ´ tÂ´ l. KÂ¨ nnyË atgondolni, hogy az APRIORI e a u a ao o uÂ´ algoritmus rendelkezik ezzel a tulajdonsÂ´ ggal. a

5.5.1. APRIORI
Amennyiben a tÂ´ mogatottsÂ´ got illeszkedÂ´ si predikÂ´ tum alapjÂ´ n deï¬niÂ´ ljuk, akkor az APRIORI a a e a a a algoritmus a bemeneti elemeken egyesÂ´ vel vÂ´ gigmegy es nÂ¨ veli azon jelÂ¨ ltek szÂ´ mlÂ´ lÂ´ jÂ´ t, amee e Â´ o o a aoa lyek illeszkednek az eppen aktuÂ´ lis bemeneti elemre. Azonos bemeneti elemeknÂ´ l ez a mË velet Â´ a e u ugyanazt fogja csinÂ´ lni ezÂ´ rt cÂ´ lszerË az azonos bemeneti elemeket osszegyË jteni es csak egyszer a e e u Â¨ u Â´ meghÂ´vni az eljÂ´ rÂ´ st. A bemenet azonban tÂ´ l nagy lehet, ezÂ´ rt ezt gyorsÂ´tÂ´ si lÂ´ pÂ´ st csak akkor szokÂ´ s Ä± aa u e Ä±a e e a elvÂ´ gezni, amikor mÂ´ r rendelkezÂ´ sÂ¨ nkre allnak az egyelemË gyakori mintÂ´ k. Ezek alapjÂ´ n tovÂ´ bbi e a eu Â´ u a a a szË rÂ´ seket lehet vÂ´ gezni. PÂ´ ldÂ´ ul elemhalmaz/elemsorozat tÂ´pusÂ´ bemeneti elemeknÂ´ l tÂ¨ rÂ¨ ljÂ¨ k a halue e e a Ä± u e oo u mazbÂ´ l/sorozatbÂ´ l a ritka elemeket. Ez duplÂ´ n hasznos, hiszen csÂ¨ kkentjÂ¨ k a memÂ´ riafogyasztÂ´ st es o o a o u o a Â´ mivel az azonos szË rt elemek szÂ´ ma nagyobb lehet, mint az azonos elemek szÂ´ ma a tÂ´ mogatottsÂ´ gok u a a a a meghatÂ´ rozÂ´ sa mÂ´ g kevesebb idË be fog telni. a a e o Vannak olyan mintÂ´ k, amelyeknÂ´ l a illeszkedÂ´ s eldÂ¨ ntÂ´ se drÂ´ ga mË velet. PÂ´ ldÂ´ ul grÂ´ f tÂ´pusÂ´ a e e o e a u e a a Ä± u mintÂ´ knÂ´ l az illeszkedÂ´ s meghatÂ´ rozÂ´ sÂ´ hoz egy rÂ´ szgrÂ´ f izomorï¬a feladatot kell eldÂ¨ nteni, ami bia a e a aa e a o zonyÂ´tottan NP-teljes. Ilyen mintÂ´ knÂ´ l hasznos, ha minden jelÂ¨ ltnÂ´ l rendelkezÂ´ sÂ¨ nkre allnak azon beÄ± a a o e eu Â´ meneti elemek sorszÂ´ mai, amelyekre illeszkednek a generÂ´ torok (nevezzÂ¨ k ezt a halmazt illeszkedÂ´ si a a u e halmaznak). Az illeszkedÂ´ si predikÂ´ tum anti-monoton tulajdonsÂ´ gÂ´ bÂ´ l kÂ¨ vetkezik, hogy a jelÂ¨ lt csak e a a a o o o azon bemeneti elemekre illeszkedhet, amelyekre generÂ´ toraik is illeszkednek. A tÂ´ mogatottsÂ´ g mega a a hatÂ´ rozÂ´ sa sorÂ´ n a jelÂ¨ ltek illeszkedÂ´ si halmazÂ´ t is meg kell hatÂ´ roznunk hiszen a jelÂ¨ ltek lesznek a a a o e a a o a generÂ´ torok a kÂ¨ vetkezË iterÂ´ ciÂ´ ban. TermÂ´ szetesen a generÂ´ torok illeszkedÂ´ si listÂ´ it tÂ¨ rÂ¨ lhetjÂ¨ k a o o a o e a e a oo u miutÂ´ n meghatÂ´ roztuk a jelÂ¨ ltek illeszkedÂ´ si listÂ´ it. a a o e a DIC A DIC (Dynamic Itemset Counting) algoritmus [26] az APRIORI tovÂ´ bbfejlesztÂ´ se. Gyakori a e elemhalmazok kinyerÂ´ sÂ´ re javasoltÂ´ k, de minden olyan gyakori mintÂ´ kat keresË feladatban alkalmazee a a o hatÂ´ , amelyben a bemenet sorozat tÂ´pusÂ´ , es a tÂ´ mogatottsÂ´ got illeszkedÂ´ si predikÂ´ tum alapjÂ´ n deï¬o Ä± u Â´ a a e a a niÂ´ ljuk. Az algoritmus nem tisztÂ´ n szÂ´ lessÂ´ gi bejÂ´ rÂ´ st valÂ´ sÂ´t meg ; a kÂ¨ lÂ¨ nbÂ¨ zË elemszÂ´ mÂ´ mintÂ´ k a a e e aa oÄ± uo o o a u a egyÂ¨ tt vannak jelen a jelÂ¨ ltek kÂ¨ zÂ¨ tt. Ha k a legnagyobb gyakori minta mÂ´ rete, akkor vÂ´ rhatÂ´ an (k+ u o o o e a o +)-nÂ´ l kevesebbszer, de legrosszabb esetben (k + 1)-szer kell vÂ´ gigolvasni a bemenetet. e e A DIC algoritmusban â€“ szemben az APRIORI-val â€“ nem vÂ´ lik szÂ´ t az egyes iterÂ´ ciÂ´ kban a jelÂ¨ ltek a e a o o elË allÂ´tÂ´ sa, a tÂ´ mogatottsÂ´ gok meghatÂ´ rozÂ´ sa es a ritka mintÂ´ k tÂ¨ rlÂ´ se. MikÂ¨ zben vesszÂ¨ k a bemeneti oÂ´ Ä± a a a a a Â´ a o e o u elemeket es hatÂ´ rozzuk meg a jelÂ¨ ltek tÂ´ mogatottsÂ´ gÂ´ t, uj jelÂ¨ lteket vehetÂ¨ nk fel es tÂ¨ rÂ¨ lhetÂ¨ nk (azaz Â´ a o a a a Â´ o u Â´ oo u dinamikus elemszÂ´ mlÂ´ lÂ´ st alkalmazunk, ahogyan erre az algoritmus neve is utal). Akkor veszÂ¨ nk fel a aa u egy mintÂ´ t a jelÂ¨ ltek kÂ¨ zÂ´ , ha minden valÂ´ di rÂ´ szmintÂ´ jÂ´ rÂ´ l kiderÂ¨ lt, hogy gyakori. AkÂ´ rhol veszÂ¨ nk a o o e o e aao u a u fel egy jelÂ¨ ltet, egy iterÂ´ ciÂ´ val kÂ´ sË bb ugyanott, ahol felvettÂ¨ k, tÂ¨ rÂ¨ lnÂ¨ nk kell a jelÂ¨ ltek kÂ¨ zÂ¨ l, hio a o eo u oo u o o u szen a pontos tÂ´ mogatottsÂ´ g meghatÂ´ rozÂ´ sÂ´ hoz a teljes bemenetet at kell nÂ´ znÂ¨ nk. Ha a tÂ¨ rÂ¨ lt jelÂ¨ lt a a a aa Â´ e u oo o gyakori, akkor termÂ´ szetesen a mintÂ´ t felvesszÂ¨ k a gyakori mintÂ´ k halmazÂ´ ba. Minden jelÂ¨ l esetÂ´ n e a u a a o e tÂ´ rolnunk kell, hogy hÂ´ nyadik bemeneti elemnÂ´ l lett jelÂ¨ lt. A kiindulÂ´ si allapotban minden egyelemË a a e o a Â´ u minta jelÂ¨ lt es akkor er vÂ´ get az algoritmus, amikor nincs egyetlen jelÂ¨ lt sem. o Â´ Â´ e o

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

92

Elemhalmazok pÂ´ ldÂ´ jÂ´ t nÂ´ zve, ha az A es B elemek olyan sokszor fordulnak elË , hogy e aa e Â´ o tÂ´ mogatottsÂ´ guk, mÂ´ r a bemenet egyharmadÂ´ nak atolvasÂ´ sa utÂ´ n elÂ´ ri min supp-ot, akkor az {A, B} a a a a Â´ a a e kÂ´ t elemË halmaz mÂ´ r ekkor jelÂ¨ lt lesz, es elË fordulÂ´ sait el kell kezdeni osszeszÂ´ molni. A bemenet e u a o Â´ o a Â¨ a vÂ´ gigolvasÂ´ sa utÂ´ n ismÂ´ t az elsË bemeneti elemre lÂ´ pÂ¨ nk es az egyelemË jelÂ¨ ltek tÂ¨ rlÂ´ se utÂ´ n folytate a a e o e u Â´ u o o e a juk a jelÂ¨ ltek tÂ´ mogatottsÂ´ gÂ´ nak meghatÂ´ rozÂ´ sÂ´ t. Az A, B jelÂ¨ ltet a bemenet egyharmadÂ´ nÂ´ l tÂ¨ rÂ¨ ljÂ¨ k o a a a a aa o a a oo u a jelÂ¨ ltek kÂ¨ zÂ¨ l. Ha nincs mÂ´ s jelÂ¨ lt, akkor az algoritmus vÂ´ get er. LÂ´ thatÂ´ , hogy ekkor a DIC algoo o u a o e Â´ a o ritmus 1+1/3-szor olvassa vÂ´ gig a bemenetet, amit az APRIORI kÂ´ tszer tesz meg. e e Az algoritmus hÂ´ trÂ´ nya, hogy minden bemeneti elemnÂ´ l meg kell vizsgÂ´ lni, hogy vannak-e a a e a tÂ¨ rlendË jelÂ¨ ltek. Ez kÂ¨ ltsÂ´ ges mË velet ezÂ´ rt cÂ´ lszerË allomÂ´ sokatâ€ lÂ´ trehozni. PÂ´ ldÂ´ ul minden o o o o e u e e u Â´ a e e a â€ ezredik bemeneti elem lehet egy allomÂ´ s. Csak az allomÂ´ soknÂ´ l nÂ´ zzÂ¨ k meg, hogy egy jelÂ¨ lt Â´ a Â´ a a e u o tÂ´ mogatottsÂ´ ga elÂ´ rte-e min supp-ot, Â´gy csak allomÂ´ snÂ´ l veszÂ¨ nk fel, illetve tÂ¨ rlÂ¨ nk jelÂ¨ lteket. a a e Ä± Â´ a a u o u o A DIC algoritmus, szemben az APRIORI-val, erzÂ´ keny az adatok homogenitÂ´ sÂ´ ra. Amennyiben Â´ e aa egy minta a felszÂ´ llÂ´ helyÂ´ tË l nagyon tÂ´ vol koncentrÂ´ lva gyakori, akkor az osszes, ot rÂ´ szmintakÂ´ nt a o eo a a Â¨ Ë e e tartalmazÂ´ minta is csak sokÂ´ ra lesz jelÂ¨ lt. Ekkor a DIC hatÂ´ konysÂ´ ga rosszabb APRIORI algorito a o e a musÂ´ nÂ´ l, hiszen ugyanannyiszor jÂ´ rja vÂ´ gig a bemenetet, mint az APRIORI, de ekÂ¨ zben olyan munkÂ´ t e a a e o a is vÂ´ gez, amit az APRIORI nem (minden allomÂ´ snÂ´ l ellenË rzi, hogy mely jelÂ¨ lteket kell tÂ¨ rÂ¨ lni). e Â´ a a o o oo Â¨ OsszessÂ´ gÂ´ ben elmondhatjuk, hogy a DIC csak abban az esetben lesz gyorsabb az APRIORI-nÂ´ l, e e a ha a bemenet olyan nagy, hogy a futÂ´ si idË ben nagy szerepet jÂ´ tszik a bemenet beolvasÂ´ sa. A mai a o a a memÂ´ riakapacitÂ´ sok mellett ez ritkÂ´ n all fenn. o a a Â´ A kÂ¨ vetkezË kben olyan algoritmusokat ismertetÂ¨ nk, amelyek sorozat tÂ´pusÂ´ bemenet es illeszo o u Ä± u Â´ kedÂ´ s alapÂ´ tÂ´ mogatottsÂ´ g esetÂ´ n tudjÂ´ k meghatÂ´ rozni a gyakori mintÂ´ kat. e u a a e a a a

5.5.2. Zaki mÂ´ dszere o
Zaki mÂ´ dszere [191] szintÂ´ n jelÂ¨ lteket hasznÂ´ l a keresÂ´ si tÂ´ r bejÂ´ rÂ´ sÂ´ hoz, de a bejÂ´ rÂ´ s tÂ´pusa o e o a e e aaa aa Ä± â€“ szemben az APRIORI-val â€“ mÂ´ lysÂ´ gi. A M K = (M, ) mintakÂ¨ rnyezet esetÂ´ n csak ake e o e kor hasznÂ´ lhatÂ´ , ha tudjuk deï¬niÂ´ lni a -nek egy lineÂ´ ris kiterjesztÂ´ sÂ´ t, ugyanis az algoritmus a o a a ee epÂ´tË elemei a preï¬xek. Â´ Ä±o A preï¬x alapjÂ´ n deï¬niÂ´ lhatunk egy ekvivalencia relÂ´ ciÂ´ t. Adott esetÂ´ n kÂ´ t minta ekvivalens, ha a a a o e e -elemË preï¬xÂ¨ k megegyezik. A P preï¬xË mintÂ´ k halmazÂ´ t [P]-vel jelÂ¨ ljÂ¨ k. A preï¬xek segÂ´tsÂ´ gÂ´ vel u u u a a o u Ä± e e a mintÂ´ k halmazÂ´ t diszjunkt rÂ´ szekre osztjuk, azaz a feladatot kisebb rÂ´ szfeladatokra vezetjÂ¨ k vissza. a a e e u NÂ´ zzÂ¨ k pÂ´ ldÂ´ ul az elemhalmazok esetÂ´ t. Legyen I = {A, B, C, D} es M = (2 I , âŠ†), akkor I e u e a e Â´ I , ha |I | < |I | vagy, ha |I | = |I | es I lexikograï¬kusan megelË zi I -t. PÂ´ ldÂ´ ul {D} {A, C} es Â´ o e a Â´ {A, B, D} {B, C, D}. Amennyiben = 1, akkor pÂ´ ldÂ´ ul a {A, B}, {A, C}, {A, D} egy ekvivalencia e a osztÂ´ lyba tartozik, aminek pÂ´ ldÂ´ ul a {B,C} nem eleme. a e a A preï¬x mellett Zaki mÂ´ dszerÂ´ nek kÂ¨ zponti fogalma az illeszkedÂ´ si lista. Egy mintÂ´ hoz tartozÂ´ o e o e a o illeszkedÂ´ si lista tÂ´ rolja a minta illeszkedÂ´ seit. Az illeszkedÂ´ si lista kÂ´ t fontos tulajdonsÂ´ ggal bÂ´r : e a e e e a Ä± I. Az illeszkedÂ´ si listÂ´ bÂ´ l kÂ¨ nnyen megkaphatÂ´ a tÂ´ mogatottsÂ´ g. e a o o o a a II. Egy jelÂ¨ lt illeszkedÂ´ si listÂ´ ja megkaphatÂ´ a generÂ´ torainak illeszkedÂ´ si listÂ´ ibÂ´ l. o e a o a e a o PÂ´ ldÂ´ ul elemhalmaz tÂ´pusÂ´ mintÂ´ k esetÂ´ ben (ha az illeszkedÂ´ st a tartalmazÂ´ si relÂ´ ciÂ´ alapjÂ´ n e a Ä± u a e e a a o a deï¬niÂ´ ljuk) egy elemhalmaz illeszkedÂ´ si listÂ´ ja egy olyan lista lesz, amely a bemeneti soa e a rozat azon elemeinek sorszÂ´ mÂ´ t tÂ´ rolja, amelyeknek rÂ´ sze az adott elemhalmaz. PÂ´ ldÂ´ ul a a a e e a {A, D}, {A, C}, {A, B, C, D}, {B}, {A, D}, {A, B, D}, {D} bemenet esetÂ´ n az {A, C} illeszkedÂ´ si e e listÂ´ ja : {1,2} . a

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE Zaki algoritmusÂ´ nak pszeudokÂ´ dja az alÂ´ bbi. a o a Bemenet: B : min supp : Kimenet: GY : Â´tmeneti vÂ´ltozÂ´k: A a o J : ILL(J) : bemeneti adat, tÂ´mogatottsÂ´gi kÂ¨szÂ¨b, a a u o gyakori mintÂ´k, a jelÂ¨ltek, o jelÂ¨ltek illeszkedÂ´si listÂ´ja, o e a

93

J â† 1-elem} mintÂ´k; u a ILL(J) â† ILL_felÂ´pÂ´tÂ´s( B, J ); e Ä± e for all j âˆˆ J do if( |ILL( j)| â‰¥ min supp ) then GY1 â† j; zaki_segÂ´d( GY, ILL(GY ), min supp ); e

/ // GY = [0]+

5.4. abra. Zaki mÂ´ dszere Â´ o ElË szÂ¨ r felÂ´ pÂ´tjÂ¨ k az egyelemË mintÂ´ k illeszkedÂ´ si listÂ´ it. Ezek alapjÂ´ n meghatÂ´ rozzuk a gyakori o o e Ä± u u a e a a a mintÂ´ kat. A kÂ´ sË bbiekben nem hasznÂ´ ljuk a bemenetet csak az illeszkedÂ´ si listÂ´ kat, ezekbË l ugyanis a eo a e a o a tÂ´ mogatottsÂ´ gok egyÂ´ rtelmË en meghatÂ´ rozhatÂ´ k. Az algoritmus lÂ´ nyege a zaki segÂ´d rekurziÂ´ s a a e u a o e e o eljÂ´ rÂ´ s, amelynek pszeudokÂ´ dja az 5.5 abrÂ´ n lÂ´ thatÂ´ . aa o Â´ a a o A Zaki fÂ´ le jelÂ¨ lt elË allÂ´tÂ´ snak kÂ´ t feladata van. TermÂ´ szetesen az egyik a jelÂ¨ ltek elË allÂ´tÂ´ sa, e o oÂ´ Ä± a e e o oÂ´ Ä± a de emellett az illeszkedÂ´ si listÂ´ kat is elË alltja. A jelÂ¨ lt-elË allÂ´tÂ´ s megegyezik az APRIORI jelÂ¨ lt e a oÂ´ o oÂ´ Ä± a o elË allÂ´tÂ´ sÂ´ nak elsË lÂ´ pÂ´ sÂ´ vel (potenciÂ´ lis jelÂ¨ ltek elË allÂ´tÂ´ sa). A mÂ´ sodik lÂ´ pÂ´ st nem is tudnÂ´ nk oÂ´ Ä± a a o e ee a o oÂ´ Ä± a a e e a elvÂ´ gezni, ugyanis nem all rendelkezÂ´ sÂ¨ nkre az osszes rÂ´ szminta, Â´gy nem is tudjuk ellenË rizni, hogy e Â´ eu Â¨ e Ä± o az osszes rÂ´ szminta gyakori-e. Â¨ e NÂ´ zzÂ¨ nk erre egy gyors pÂ´ ldÂ´ t. Amennyiben a mintÂ´ kat elemhalmazok formÂ´ jÂ´ ban keressÂ¨ k, e u e a a aa u akkor az APRIORI es Zaki mÂ´ dszere is elË szÂ¨ r meghatÂ´ rozza a gyakori elemeket. Legyenek ezek Â´ o o o a az A, C, D, G, M elemek. Az APRIORI ezek utÂ´ n elË allÂ´tana 5 darab jelÂ¨ ltet, majd meghatÂ´ roznÂ´ a oÂ´ Ä± o a a 2 tÂ´ mogatottsÂ´ gaikat. Zaki ehelyett csak az A preï¬xË kÂ´ telemË halmazok tÂ´ mogatottsÂ´ gÂ´ t vizsgÂ´ lja. Ha a a u e u a a a a ezek kÂ¨ zÂ¨ l gyakori pÂ´ ldÂ´ ul az {A, C}, {A, G}, akkor a kÂ¨ vetkezË kben az {A,C,G}-t nÂ´ zi, es mivel o u e a o o e Â´ tovÂ´ bbi jelÂ¨ ltet nem tud elË allÂ´tani, ugrik a C preï¬xË elemhalmazok vizsgÂ´ latÂ´ ra, es Â´gy tovÂ´ bb. a o oÂ´ Ä± u a a Â´ Ä± a LÂ´ tnunk kell, hogy Zaki mÂ´ dszere csak tÂ¨ bb jelÂ¨ ltet allÂ´that elË , mint az APRIORI. A mÂ´ lysÂ´ gi a o o o Â´ Ä± o e e bejÂ´ rÂ´ s miatt ugyanis egy jelÂ¨ lt elË allÂ´tÂ´ sÂ´ nÂ´ l nem all rendelkezÂ´ sÂ¨ nkre az osszes rÂ´ szminta. Az elË zË aa o oÂ´ Ä± a a a Â´ eu Â¨ e o o pÂ´ lda esetÂ´ ben pÂ´ ldÂ´ ul az {A,C,G} tÂ´ mogatottsÂ´ gÂ´ t hamarabb vizsgÂ´ lja, mint a {C,G} halmazÂ´ t, e e e a a a a a e holott ez utÂ´ bbi akÂ´ r ritka is lehet. Ebben a tekintetben tehÂ´ t Zaki mÂ´ dszere rosszabb az APRIORIo a a o nÂ´ l, ugyanis tÂ¨ bb hamis jelÂ¨ ltet allÂ´t elË . a o o Â´ Ä± o Zaki mÂ´ dszerÂ´ nek igazi ereje a jelÂ¨ ltek tÂ´ mogatottsÂ´ gÂ´ nak meghatÂ´ rozÂ´ sÂ´ ban van. A mintÂ´ k ilo e o a a a a aa a leszkedÂ´ si listÂ´ inak elË allÂ´tÂ´ sa egy rendkÂ´vÂ¨ l egyszerË es nagyon gyors mË velet lesz. Emellett ahogy e a oÂ´ Ä± a Ä± u uÂ´ u haladunk egyre mÂ´ lyebbre a mÂ´ lysÂ´ gi bejÂ´ rÂ´ s sorÂ´ n, ugy csÂ¨ kken az illeszkedÂ´ si listÂ´ k hossza, es e e e aa a Â´ o e a Â´ ezzel a tÂ´ mogatottsÂ´ g meghatÂ´ rozÂ´ sÂ´ nak ideje is. a a a aa A bemenet szË rÂ´ sÂ´ nek otletÂ´ t az APRIORI algoritmusnÂ´ l is elsÂ¨ thetjÂ¨ k, de nem ilyen mÂ´ rtÂ´ kben. uee Â¨ e a u u e e Ha ismerjÂ¨ k a gyakori egyelemË mintÂ´ kat, akkor tÂ¨ rÂ¨ lhetjÂ¨ k azon sorozatelemeket, amelyek nem u u a oo u

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE [P]+ : P prefix}, P-nÂ´l eggyel nagyobb gyakori mintÂ´k u e a + ) : [P]+ -beli mintÂ´k illeszkedÂ´si lisÂ´tja, ILL([P] a e a min supp : tÂ´mogatottsÂ´gi kÂ¨szÂ¨b, a a u o Kimenet: GY : P prefix} osszes gyakori minta, u Â¨ Â´tmeneti vÂ´ltozÂ´k: A a o J : jelÂ¨ltek, o ILL(J) : jelÂ¨ltek illeszkedÂ´si listÂ´ja, o e a Bemenet: for all m âˆˆ [P]+ do { for all m âˆˆ [P]+ , m m do { J, ILL(J) â† minimÂ´lis_valÂ´di_fels}_korlÂ´t( m, m , ILL(m, m ) ); a o o a for all j âˆˆ J do if( |ILL( j)| â‰¥ min supp ) then GY â† j; } zaki_segÂ´d( GY , ILL(GY ), min supp ); e GY â† GY âˆª GY ; } 5.5. abra. zaki segÂ´ d eljÂ´ rÂ´ s Â´ e aa

94

illeszkednek egyetlen gyakori egyelemË mintÂ´ ra sem. SË t ezt a gondolatot altalÂ´ nosÂ´thatjuk is : az u a o Â´ a Ä± -edik lÂ´ pÂ´ sben tÂ¨ rÂ¨ lhetjÂ¨ k a bemeneti sorozat azon elemeit, amelyek nem illeszkednek egyetlen ( âˆ’ e e oo u âˆ’ 1)-elemË mintÂ´ ra sem. Ez a fajta bemeneti tÂ´ r szË kÂ´tÂ´ s azonban nem lesz olyan hatÂ´ kony, mint u a e u Ä±e e amilyen a Zaki mÂ´ dszerÂ´ ben. Ott ugyanis egyszerre csak 1 preï¬xet vizsgÂ´ lunk, az APRIORI-nÂ´ l o e a a azonban altalÂ´ ban sok olyan minta van, aminek csak az ures minta a kÂ¨ zÂ¨ s rÂ´ szmintÂ´ ja. Â´ a Â¨ o o e a Â¨ OsszessÂ´ gÂ´ ben tehÂ´ t az APRIORI kevesebb jelÂ¨ ltet generÂ´ l, mint Zaki mÂ´ dszere, de a jelÂ¨ ltek e e a o a o o Â´ a tÂ´ mogatottsÂ´ gÂ´ nak meghatÂ´ rozÂ´ sa tÂ¨ bb idË t vesz igÂ´ nybe. AltalÂ´ nossÂ´ gban nem lehet megmondani, a a a a a o o e a hogy melyik a jobb mÂ´ dszer. Egyes adatbÂ´ zisok esetÂ´ n az APRIORI, mÂ´ soknÂ´ l a Zaki mÂ´ dszer. SË t o a e a a o o kÂ¨ nnyen lehet olyan pÂ´ ldÂ´ t mutatni, amikor az egyik algoritmus nagysÂ´ grendileg tÂ¨ bb idË tÂ¨ lt a feladat o e a a o o o megoldÂ´ sÂ´ val, mint a mÂ´ sik. aa a Zaki mÂ´ dszerÂ´ nÂ´ l kÂ¨ nnyË kezelni a anti-monoton es a preï¬x anti-monoton kÂ´ nyszereket. A nem o e e o u Â´ e gyakori mintÂ´ k tÂ¨ rlÂ´ sekor tÂ¨ rÂ¨ ljÂ¨ k azokat a mintÂ´ kat is, amelyek nem elÂ´ gÂ´tenek ki minden antia o e oo u a e Ä± monoton kÂ´ nyszert. A preï¬x anti-monoton kÂ´ nyszereket a jelÂ¨ ltek elË allÂ´tÂ´ sa utÂ´ n kell ï¬gyelembe e e o oÂ´ Ä± a a vennÂ¨ nk : tÂ¨ rÂ¨ lhetjÂ¨ k azokat a generÂ´ torokat, amelyekre nem teljesÂ¨ l az anti-monoton kÂ´ nyszer. A u oo u a u e zaki segÂ´d eljÂ´ rÂ´ sbÂ´ l kÂ¨ vetkezik, hogy ilyen m mintÂ´ t legfeljebb olyan jelÂ¨ lt elË allÂ´tÂ´ sÂ´ nÂ´ l fogunk e aa o o a o oÂ´ Ä± a a a felhasznÂ´ lni, aminek m a preï¬xe. TermÂ´ szetesen itt is bajban vagyunk, ha tÂ¨ bb preï¬x anti-monoton a e o kÂ´ nyszer van adva, hiszen ezek -nek kÂ¨ lÂ¨ nbÂ¨ zË lineÂ´ ris kiterjesztÂ´ seit hasznÂ´ lhatjÂ´ k. e uo o o a e a a

5.5.3. MintanÂ¨ velË algoritmusok o o
A mintanÂ¨ velË (pattern growth) algoritmus olyan mintakeresÂ´ s esetÂ´ n alkalmazhatÂ´ , amikor a o o e e o bemenet mintÂ´ k sorozatakÂ´ nt van megadva, es az illeszkedÂ´ st a tartalmazÂ´ s alapjÂ´ n deï¬niÂ´ ljuk, a e Â´ e a a a

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

95

ertelmezhetË a preï¬x, es a mintÂ´ k egyÂ´ rtelmË en nÂ¨ velhetË k. PÂ´ ldÂ´ ul a nÂ¨ velÂ´ s mË velet halmazok Â´ o Â´ a e u o o e a o e u esetÂ´ n az uniÂ´ , sorozatok esetÂ´ ben a konkatenÂ´ ciÂ´ kÂ´ pzÂ´ sÂ´ nek felel meg (Â´ s ebbË l lÂ´ tszik, hogy a e o e a o e ee e o a nÂ¨ velÂ´ s mË velete nem feltÂ´ tlenÂ¨ l kommutatÂ´v). o e u e u Ä± 5.18. deï¬nÂ´ciÂ´ . Az M K = (M, ) mintakÂ¨ rnyezet mintÂ´ i egyÂ´ rtelmË en nÂ¨ velhetË k, ha lÂ´ tezik egy Ä± o o a e u o o e olyan + nÂ¨ velË â€ mË velet, amellyel az M fÂ´ lcsoportot alkot. o o u e â€ A nÂ¨ velÂ´ s inverze a csÂ¨ kkentÂ´ s, jelÂ¨ lÂ´ se : -. Az mâˆ’m mË velet eredmÂ´ nye az az m minta, amivel m -t o e o e oe u e nÂ¨ velve m-et kapjuk. o A mintanÂ¨ velË mÂ´ dszerek csak egyelemË jelÂ¨ lteket hasznÂ´ lnak, es emellett a bemeneten vÂ´ geznek o o o u o a Â´ e olyan mË veleteket, amelyek eredmÂ´ nyekÂ´ nt megkapjuk a gyakori mintÂ´ kat. A kÂ´ t mË velet a sz urÂ´ s es u e e a e u Ë e Â´ a vetÂ´tÂ´ s, amelyek az eredeti S bemenetbË l egy kisebbâ€ S bemenetet allÂ´tanak elË . A szË rÂ´ s a gyakori Ä±e o Â´ Ä± o ue â€ egyelemË mintÂ´ kat hasznÂ´ lja es olyan S bemenetet allÂ´t elË amelyben a gyakori mintÂ´ k megegyeznek u a a Â´ Â´ Ä± o a az S-beli gyakori mintÂ´ kkal. Az S bemenet m mintÂ´ ra vetÂ´tÂ´ se (jelÂ¨ lÂ´ sben S|m) pedig olyan S bemea a Ä±e oe netet allÂ´t elË , amelyre igaz, hogy ha m-et az S -beli gyakori mintÂ´ kkal nÂ¨ veljÂ¨ k, akkor megkapjuk az Â´ Ä± o a o u S-beli, m-et tartalmazÂ´ gyakori mintÂ´ kat. A m-et tartalmazÂ´ gyakori mintÂ´ k meghatÂ´ rozÂ´ sÂ´ hoz csak o a o a a aa azokra a bemeneti elemekre van szÂ¨ ksÂ´ g, amelyekre illeszkedik m, ezÂ´ rt a vetÂ´tÂ´ s elsË lÂ´ pÂ´ se mindig u e e Ä±e o e e ezen elemek meghatÂ´ rozÂ´ sa lesz. a a Ha pÂ´ ldÂ´ ul a bemenet elemei elemhalmazok es akkor illeszkedik egy elemhalmaz a bee a Â´ menet egy elemÂ´ re, ha annak rÂ´ sze, akkor szË rÂ´ s mË velet az lesz, hogy a bemeneti elee e ue u mekbË l tÂ¨ rÂ¨ ljÂ¨ k a ritka elemeket. NyilvÂ´ nvalÂ´ , hogy ritka elem nem jÂ´ tszik szerepet a gyao oo u a o a kori elemek meghatÂ´ rozÂ´ sÂ´ ban. A bemenet X halmazra vetÂ´tÂ´ sÂ´ t megkapjuk, ha tÂ¨ rÂ¨ ljÂ¨ k azon a aa Ä±e e oo u bemeneti elemeket, amelyeknek nem rÂ´ sze X , majd a kapott elemekbË l tÂ¨ rÂ¨ ljÂ¨ k X -et. Lee o oo u gyen S = {A, C, F}, {B, G}, {A, C, D}, {A, C}, {B, C}, {C, D, E}, {A, B, C} amelynek szË rÂ´ se 2-es ue Ëœ = {A, C}, {B}, {A, C, D}, {A, C}, {B, C}, {C, D}, {A, B, C} sotÂ´ mogatottsÂ´ gi kÂ¨ szÂ¨ b esetÂ´ n az S a a u o e rozat es S|{A, C} = {D}, {B} . Â´ Ëœ A mintanÂ¨ velË mÂ´ dszer rendkÂ´vÂ¨ l egyszerË , tulajdonkÂ´ ppen a feladatot rekurzÂ´van kisebb o o o Ä± u u e Ä± rÂ´ szfeladat megoldÂ´ sÂ´ ra vezeti vissza. A rekurziÂ´ s eljÂ´ rÂ´ st a bemenet szË rÂ´ sÂ´ vel es kÂ¨ lÂ¨ nbÂ¨ zË e aa o aa uee Â´ uo o o mintÂ´ kra vett vetÂ´tÂ´ seivel hÂ´vja meg, mikÂ¨ zben a mintateret is csÂ¨ kkenti. JelÂ¨ ljÂ¨ k M \ m-el azt a mina Ä±e Ä± o o o u Â¯ tateret, amit ugy kapunk M-bË l, hogy tÂ¨ rÂ¨ ljÂ¨ k azon mintÂ´ kat, amelynek m rÂ´ szmintÂ´ ja (m). Ha az m Â´ o oo u a e a Â¯ minta tÂ´ mogatottsÂ´ ga S-ben suppS (m) es az m âˆˆ M \ m tÂ´ mogatottsÂ´ ga S|m-ben suppS|m (m ), akkor a a Â´ Â¯ a a m + m tÂ´ mogatottsÂ´ ga is suppS|m (m ). A mÂ´ dszer pszeudokÂ´ dja az 5.6 abrÂ´ n lÂ´ thatÂ´ . a a o o Â´ a a o A mÂ´ dszer elË nye abban rejlik, hogy szË rÂ´ st, vetÂ´tÂ´ st es az egyelemË jelÂ¨ ltek tÂ´ mogatottsÂ´ gÂ´ t o o ue Ä±e Â´ u o a a a hatÂ´ konyan tudjuk megvalÂ´ sÂ´tani. A hatÂ´ konysÂ´ g nÂ¨ velÂ´ se erdekÂ´ ben a vetÂ´tett tranzakciÂ´ k azonos e oÄ± e a o e Â´ e Ä± o elemeit csak egyszer tÂ´ roljuk, altalÂ´ ban egy fa-szerË struktÂ´ rÂ´ ban. a Â´ a u ua Az anti-monoton kÂ´ nyszerek kezelÂ´ se a mintanÂ¨ velË algoritmusok esetÂ´ ben is egyszerË . Ne folye e o o e u tassuk a rekurziÂ´ t, ha a minta nem elÂ´ gÂ´t ki minden anti-monoton kÂ´ nyszert. o e Ä± e Az egyes mintatÂ´pusok esetÂ´ ben ugy fogjuk megadni a nÂ¨ velÂ´ s mË veletet, hogy tetszË leges minta Ä± e Â´ o e u o csÂ¨ kkentÂ´ se a minta preï¬xÂ´ t fogja adni. Ez azt eredmÂ´ nyezi, hogy tÂ¨ rÂ¨ lhetjÂ¨ k azt a mintÂ´ t, amelyik o e e e oo u a nem elÂ´ gÂ´ti ki a preï¬x anti-monoton kÂ´ nyszert, es leÂ´ llhatunk a rekurziÂ´ val. HasonlÂ´ an az APRIORI e Ä± e Â´ a o o es a Zaki mÂ´ dszerÂ´ hez itt sincs mÂ´ d tÂ¨ bb preï¬x anti-monoton kÂ´ nyszer hatÂ´ kony kezelÂ´ sÂ´ re. Az Â´ o e o o e e ee algoritmus menetÂ´ t ugyanis egyÂ´ rtelmË en megadja a nÂ¨ velÂ´ s mË velet, amit a preï¬x anti-monoton e e u o e u kÂ´ nyszerben felhasznÂ´ lt teljes rendezÂ´ s alapjÂ´ n deï¬niÂ´ lunk. e a e a a

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE B : min supp : M : Kimenet: GY : Â´tmeneti vÂ´ltozÂ´k: A a o J1 : Bemenet:

96

bemeneti adat, tÂ´mogatottsÂ´gi kÂ¨szÂ¨b, a a u o mintatÂ´r, e gyakori mintÂ´k, a egyelem} jelÂ¨ltek, u o

J1 â† 1-elem} mintÂ´k; u a tÂ´mogatottsÂ´g_meghatÂ´rozÂ´s( B, J1 ); a a a a GY1 â† gyakoriak_kivÂ´logatÂ´sa( J1 , min supp ); a a Ëœ â† sz}rÂ´s(B); B u e forall gy âˆˆ GY 1 { Ëœ Â¯ GY â† MintanÂ¨vel} mÂ´dszer(B|gy, min supp, M \ gy); o o o forall gy âˆˆ GY GY â† gy + gy ; } 5.6. abra. MintanÂ¨ velË mÂ´ dszer Â´ o o o

5.5.4. KÂ´ tlÂ´ pcsË s technikÂ´ k e e o a
A szÂ´ lessÂ´ gi bejÂ´ rÂ´ st megvalÂ´ sÂ´tÂ´ algoritmusok az adatbÂ´ zist legalÂ´ bb annyiszor olvassÂ´ k vÂ´ gig, e e aa o Ä±o a a a e amekkora a legnagyobb gyakori minta mÂ´ rete. ElË fordulhatnak olyan alkalmazÂ´ sok, amelyeknÂ´ l az e o a e adatbÂ´ zis elÂ´ rÂ´ se drÂ´ ga mË velet. Ilyenre lehet pÂ´ lda, amikor az adatbÂ´ zis egy elosztott hÂ´ lÂ´ zatban a ee a u e a ao talÂ´ lhatÂ´ , vagy lassÂ´ elÂ´ rÂ´ sË hÂ´ ttÂ´ rtÂ´ rolÂ´ n. a o u eeu a e a o A kÂ´ tlÂ´ pcsË s algoritmusok [146, 171] a teljes adatbÂ´ zist legfeljebb kÂ´ tszer olvassÂ´ k vÂ´ gig. I/O e e o a e a e tekintetÂ´ ben tehÂ´ t legyË zik pÂ´ ldÂ´ ul az APRIORI algoritmust, azonban olyan futÂ´ si kÂ¨ rnyezetben, ahol e a o e a a o a futÂ´ si idË t nem szinte kizÂ´ rÂ´ lag az I/O mË veletek hatÂ´ rozzÂ´ k meg (ha a bemenet elfÂ´ r a memÂ´ riÂ´ ban a o ao u a a e o a akkor ez a helyzet all fenn), az APRIORI algoritmus gyorsabban ad eredmÂ´ nyt. Â´ e Naiv mintavÂ´ telezË algoritmus e o Olvassuk be a teljes bemenet egy rÂ´ szÂ´ t a memÂ´ riÂ´ ba (a rÂ´ sz nagysÂ´ gÂ´ ra nÂ´ zve lÂ´ sd 75.oldal). Erre e e o a e a a e a a u o a kis rÂ´ szre futtassuk le az APRIORI algoritmust az eredeti min f req gyakorisÂ´ gi kÂ¨ szÂ¨ bbel. A kis e rÂ´ szben megtalÂ´ lt gyakori mintÂ´ k lesznek a jelÂ¨ ltek a mÂ´ sodik fÂ´ zisban, amelynek sorÂ´ n a jelÂ¨ ltek e a a o a a a o tÂ´ mogatottsÂ´ gÂ´ t a teljes adatbÂ´ zisban meghatÂ´ rozzuk. EzÂ´ ltal ki tudjuk szË rni azokat a mintÂ´ kat, a a a a a a u a amelyek ritkÂ´ k, de a kis rÂ´ szben gyakoriak. ElË fordulhat azonban a fordÂ´tott helyzet, azaz a kis a e o Ä± adatbÂ´ zisban egy minta ritka, viszont globÂ´ lisan gyakori, tehÂ´ t nem kerÂ¨ l a jelÂ¨ ltek kÂ¨ zÂ´ , es Â´gy a a a u o o e Â´ Ä± nem is talÂ´ lhatjuk azt gyakorinak. JavÂ´thatunk a helyzeten, ha csÂ¨ kkentjÂ¨ k a kis rÂ´ szben a gyakoa Ä± o u e risÂ´ gi kÂ¨ szÂ¨ bÂ¨ t, amivel nÂ¨ veljÂ¨ k a jelÂ¨ ltek szÂ´ mÂ´ t, de csÂ¨ kkentjÂ¨ k annak veszÂ´ lyÂ´ t, hogy egy gyakori a u o o o u o a a o u e e mintÂ´ t ritkÂ´ nak talÂ´ lunk. a a a Ennek az egyszerË algoritmusnak kÂ´ t hÂ´ trÂ´ nya van. EgyrÂ´ szt nem ad arra garanciÂ´ t, hogy minden u e a a e a gyakori mintÂ´ t megtalÂ´ lunk (azaz nem teljes), mÂ´ srÂ´ szt a gyakorisÂ´ gi korlÂ´ t csÂ¨ kkentÂ´ se miatt a hamis a a a e a a o e jelÂ¨ ltek szÂ´ ma tÂ´ lzottan nagy lehet. A fenti kÂ´ t problÂ´ mÂ´ t kÂ¨ szÂ¨ bÂ¨ li ki a partÂ´ciÂ´ s, illetve a Toivoneno a u e e a u o o Ä± o

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

97

fÂ´ le algoritmus. e Mivel a kÂ´ tlÂ´ pcsË s algoritmusok egy kis rÂ´ sz kivÂ´ lasztÂ´ sÂ´ n alapulnak, Â´gy nagyon erzÂ´ kenyek az e e o e a aa Ä± Â´ e adatbÂ´ zis homogenitÂ´ sÂ´ ra. Gondoljunk itt a szezonÂ´ lis elemekre, amelyek lokÂ´ lisan gyakoriak, de a aa a a globÂ´ lisan ritkÂ´ k. PÂ´ ldÂ´ ul a kesztyË k eladÂ´ sa tÂ´ l elejÂ´ n nagy, de mÂ´ gis a kesztyË onmagÂ´ ban ritka a a e a u a e e e u Â¨ a elem. Amennyiben a kis rÂ´ sz kivÂ´ lasztÂ´ sa a bemenet egy vÂ´ letlen pontjÂ´ rÂ´ l tÂ¨ rtÂ´ nË szekvenciÂ´ lis e a a e ao o e o a olvasÂ´ st jelentene, akkor az nagy esÂ´ llyel sok hamis es hiÂ´ nyzÂ´ jelÂ¨ ltet eredmÂ´ nyezne. a e Â´ a o o e PartÂ´ciÂ´ s algoritmus Ä± o A partÂ´ciÂ´ s algoritmus [146] kÂ´ tszer olvassa vÂ´ gig a teljes adatbÂ´ zist. PÂ´ ronkÂ´ nt diszjunkt rÂ´ szekre Ä± o e e a a e e osztja a bemenetet (S = S1 , S2 . . . , Sr ), majd az egyes rÂ´ szekre meghÂ´vja az APRIORI algoritmust, e Ä± ami megadja az egyes rÂ´ szekben gyakori mintÂ´ kat (hÂ´vjuk oket lokÂ´ lisan gyakori mintÂ´ knak). A e a Ä± Ë a a mÂ´ sodik vÂ´ gigolvasÂ´ snÂ´ l egy minta akkor lesz jelÂ¨ lt, ha valamelyik rÂ´ szben gyakori volt. KÂ¨ nnyen a e a a o e o lÂ´ thatÂ´ , hogy az algoritmus teljes, hiszen egy gyakori mintÂ´ nak legalÂ´ bb egy rÂ´ szben gyakorinak kell a o a a e lennie, es ezt az APRIORI ki fogja szË rni (mivel az APRIORI is teljes). Â´ u KÂ´ rdÂ´ s, hogy hÂ´ ny rÂ´ szre osszuk a teljes adatbÂ´ zist. NyilvÂ´ nvalÂ´ , hogy minÂ´ l nagyobb az egyes e e a e a a o e rÂ´ szhalmazok mÂ´ rete, annÂ´ l jobb kÂ´ pet ad a teljes adatbÂ´ zisrÂ´ l, tehÂ´ t annÂ´ l kevesebb lesz a hamis e e a e a o a a jelÂ¨ lt. A rÂ´ szek nagy mÂ´ rete azonban azt eredmÂ´ nyezi, hogy azok nem fÂ´ rnek el a memÂ´ riÂ´ ban, es o e e e e o a Â´ Â´gy az APRIORI algoritmus sok idË t tÂ¨ lt el partÂ´ciÂ´ rÂ´ szek ideiglenes hÂ´ ttÂ´ rbe mÂ´ solÂ´ sÂ´ val es visszaolÄ± o o Ä± oe a e a aa Â´ vasÂ´ sÂ´ val. HabÂ´ r globÂ´ lisan csak kÂ´ tszer olvassuk vÂ´ gig a teljes adatbÂ´ zist, azonban az egyes partÂ´ciÂ´ k aa a a e e a Ä± o I/O igÂ´ nyÂ´ nek osszege legalÂ´ bb akkora, mintha a teljes adatbÂ´ zisra futtatnÂ´ nk le az APRIORI algorite e Â¨ a a a must. VÂ´ geredmÂ´ nyben a mÂ´ sodik vÂ´ gigolvasÂ´ s miatt a partÂ´ciÂ´ s algoritmus I/O igÂ´ nye nagyobb lesz, e e a e a Ä± o e mint az APRORI algoritmusÂ´ . e Ha az egyes rÂ´ szek elfÂ´ rnek a memÂ´ riÂ´ ban, akkor nem lÂ´ p fel a fenti problÂ´ ma, hisz az APRIORI e e o a e e algoritmus nem fog I/O mË veletet igÂ´ nyelni (feltÂ´ ve, ha a jelÂ¨ ltek a szÂ´ mlÂ´ lÂ´ ikkal egyÂ¨ tt is elfÂ´ rnek u e e o a ao u e mÂ´ g a memÂ´ riÂ´ ban). TÂ´ l kis mÂ´ ret vÂ´ lasztÂ´ sa azonban azt eredmÂ´ nyezheti, hogy a partÂ´ciÂ´ nem ad hË e o a u e a a e Ä± o u kÂ´ pet a teljes adatbÂ´ zisrÂ´ l, Â´gy a lokÂ´ lis gyakori mintÂ´ k mÂ´ sok (is !) lesznek, mint a globÂ´ lis gyakori e a o Ä± a a a a mintÂ´ k, ami tÂ´ l sok hamis jelÂ¨ ltet eredmÂ´ nyezhet. a u o e A helyes partÂ´ciÂ´ mÂ´ ret tehÂ´ t a rendelkezÂ´ sÂ¨ nkre allÂ´ memÂ´ riÂ´ tÂ´ l fÂ¨ gg. Legyen minÂ´ l nagyobb, de Ä± o e a eu Â´ o o ao u e ugy, hogy a jelÂ¨ ltek szÂ´ mlÂ´ lÂ´ ikkal egyÂ¨ tt is elfÂ´ rjenek a memÂ´ riÂ´ ban. TermÂ´ szetesen a jelÂ¨ ltek szÂ´ ma Â´ o a ao u e o a e o a a gyakori mintÂ´ k mÂ´ retÂ´ tË l fÂ¨ gg, amirË l a partÂ´ciÂ´ mÂ´ ret meghatÂ´ rozÂ´ sakor mÂ´ g nincs pontos kÂ´ pÂ¨ nk. a e eo u o Ä± o e a a e e u A partÂ´ciÂ´ s algoritmus szintÂ´ n erzÂ´ keny a bemenet homogenitÂ´ sÂ´ ra. Ezt az erzÂ´ kenysÂ´ get Ä± o e Â´ e aa Â´ e e csÂ¨ kkenthetjÂ¨ k, ha mÂ´ dosÂ´tjuk egy kicsit az algoritmust. Ha egy m minta gyakori az S i rÂ´ szben, ako u o Ä± e kor a rÂ´ kÂ¨ vetkezË Si+1 , Si+2 , . . . Si+ rÂ´ szekben is hatÂ´ rozzuk meg a tÂ´ mogatottsÂ´ gÂ´ t egÂ´ szen addig, a o o e a a a a e amÂ´g f reqâˆªi+ S j (m) â‰¥ min f req. Ha ezalatt eljutunk az utolsÂ´ rÂ´ szig, akkor vegyÂ¨ k fel m-et a mÂ´ sodik Ä± o e u a j=i vÂ´ gigolvasÂ´ s jelÂ¨ ltjei kÂ¨ zÂ´ . EllenkezË esetben felejtsÂ¨ k el, hogy m gyakori volt ezen rÂ´ szekben. Ha e a o o e o u e egy mintÂ´ t az osszes rÂ´ szben vizsgÂ´ ltunk, akkor ezt szintÂ´ n szÂ¨ ksÂ´ gtelen felvenni jelÂ¨ ltnek a mÂ´ sodik a Â¨ e a e u e o a vÂ´ gigolvasÂ´ snÂ´ l, hiszen tÂ´ mogatottsÂ´ ga megegyezik az egyes rÂ´ sztÂ´ mogatottsÂ´ gok osszegÂ´ vel. e a a a a e a a Â¨ e A partÂ´ciÂ´ s algoritmus tovÂ´ bbi elË nye, hogy remekÂ¨ l pÂ´ rhuzamosÂ´thatÂ´ . SajÂ´ t memÂ´ riÂ´ val rendelÄ± o a o u a Ä± o a o a kezË feldolgozÂ´ egysÂ´ gek vÂ´ gezhetik az egyes rÂ´ szek gyakori mintakeresÂ´ sÂ´ t, es ezÂ´ ltal mind az elsË , o o e e e ee Â´ a o mind a mÂ´ sodik fÂ´ zis tÂ¨ redÂ´ k idË alatt elvÂ´ gezhetË . a a o e o e o Toivonen algoritmusa Az naÂ´v mintavÂ´ telezË algoritmus nagy hÂ´ trÂ´ nya, hogy mÂ´ g csÂ¨ kkentett min f req mellett sem Ä± e o a a e o lehetÂ¨ nk biztosak abban, hogy nem vesztettÂ¨ nk el gyakori mintÂ´ t. Toivonen algoritmusa [171] az u u a

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

98

adatbÂ´ zist egyszer olvassa vÂ´ gig, es ha jelenti, hogy minden mintÂ´ t megtalÂ´ l, akkor bizonyÂ´thatÂ´ , hogy a e Â´ a a Ä± o ez igaz. Az algoritmus nem mÂ´ s, mint a naÂ´v mintavÂ´ telezË algoritmus tovÂ´ bbfejlesztett vÂ´ ltozata. Az a Ä± e o a a egyszerË algoritmusnÂ´ l azonban tÂ¨ bb informÂ´ ciÂ´ t ad, ugyanis jelenti, ha biztos abban, hogy minden u a o a o gyakori mintÂ´ t elË allÂ´tott, es azt is jelenti, amikor lehetsÂ´ ges, hogy van hiÂ´ nyzÂ´ jelÂ¨ lt (olyan gyaa oÂ´ Ä± Â´ e a o o kori minta, ami nem jelÂ¨ lt, es Â´gy nem talÂ´ lhatjuk azt gyakorinak). A lehetsÂ´ ges hiÂ´ nyzÂ´ jelÂ¨ ltekrË l o Â´ Ä± a e a o o o informÂ´ ciÂ´ t is kÂ¨ zÂ¨ l. a o o o AlapÂ¨ tlete az, hogy ne csak a kis rÂ´ szben talÂ´ lhatÂ´ gyakori mintÂ´ k elË fordulÂ´ sÂ´ t szÂ´ moljuk ossze o e a o a o aa a Â¨ a teljes adatbÂ´ zisban, hanem azok minimÂ´ lis valÂ´ di felsË korlÂ´ tait is. Mit jelent az, hogy az m mina a o o a ta tetszË leges M âŠ† M mintahalmaz minimÂ´ lis valÂ´ di felsË korlÂ´ tai kÂ¨ zÂ´ tartozik (jelÂ¨ lÂ´ sben m âˆˆ o a o o a o e oe âˆˆ MV FK(M)) ? ElË szÂ¨ r is a valÂ´ di felsË korlÂ´ t formÂ´ lisan : m o o o o a a m minden m âˆˆ M. A minimalitÂ´ s a pedig azt jelenti, hogy nem lÂ´ tezik olyan m minta, amely M-nek valÂ´ di felsË korlÂ´ tja es m e o o a Â´ m. A gyakori mintÂ´ k minimÂ´ lis valÂ´ di felsË korlÂ´ tjai azok a ritka mintÂ´ k, amelyek minden rÂ´ szmintÂ´ ja a a o o a a e a gyakori. PÂ´ ldÂ´ ul elemhalmaz tÂ´pusÂ´ minta esetÂ´ n, ha M = 2{A,B,C,D,E,F} es M = e a Ä± u e Â´ = {{A}, {B}, {C}, {F}, {A, B}, {A, C}, {A, F}, {C, F}, {A, C, F}}, akkor MV FK(M) = = {{B, C}, {B, F}, {D}, {E}}. Toivonen algoritmusÂ´ ban a teljes adatbÂ´ zisbÂ´ l egy kis rÂ´ szt veszÂ¨ nk. Ebben meghatÂ´ rozzuk a a o e u a a gyakori mintÂ´ k halmazÂ´ t es ennek minimÂ´ lis valÂ´ di felsË korlÂ´ tjÂ´ t. A teljes adatbÂ´ zisban ezek a a Â´ a o o a a a tÂ´ mogatottsÂ´ gÂ´ t vizsgÂ´ ljuk, es gyË jtjÂ¨ k ki a globÂ´ lisan gyakoriakat. A kÂ¨ vetkezË egyszerË tÂ´ tel ad a a a a Â´ u u a o o u e informÂ´ ciÂ´ t arrÂ´ l, hogy ez az algoritmus mikor teljes, azaz mikor lehetÂ¨ nk biztosak abban, hogy mina o o u den gyakori mintÂ´ t meghatÂ´ roztunk. a a 5.19. tÂ´ tel. Legyen S az S bemeneti sorozat egy rÂ´ sze. JelÂ¨ ljÂ¨ k GY -vel az S-ben, GY -vel az S e e o u âˆ— -al azokat az S-ben gyakori mintÂ´ kat, amelyek benne vannak GY âˆª ben gyakori mintÂ´ kat es GY a a Â´ âˆ— = GY âˆ© (GY âˆª MV FK(GY ))). Amennyiben âˆª MV FK(GY )-ben (GY GY âˆ— âˆª MV FK(GY âˆ— ) âŠ† GY âˆª MV FK(GY ) teljesÂ¨ l, akkor S-ben a gyakori mintÂ´ k halmaza pontosan a GY âˆ— , tehÂ´ t GY âˆ— â‰¡ GY . u a a BizonyÂ´tÂ´ s: Indirekt tegyÂ¨ k fel, hogy lÂ´ tezik m âˆˆ GY , de m âˆˆ GY âˆ— , es a feltÂ´ tel teljesÂ¨ l. A GY âˆ— Ä±a u e Â´ e u deï¬nÂ´ciÂ´ ja miatt ekkor m âˆˆ GY âˆª MV FK(GY ). VizsgÂ´ ljuk azt a legkisebb mÂ´ retË m Ä± o a e u m-t, amire m âˆˆ GY es m âˆˆ GY âˆ— (ilyen m -nek kell lennie, ha mÂ´ s nem, ez maga az m minta). Az m minimaÂ´ a litÂ´ sÂ´ bÂ´ l kÂ¨ vetkezik, hogy minden valÂ´ di rÂ´ szmintÂ´ ja eleme GY âˆªMV FK(GY )-nek es gyakori. EbbË l aa o o o e a Â´ o kÂ¨ vetkezik, hogy m minden rÂ´ szmintÂ´ ja eleme GY âˆ— -nak, amibË l kapjuk, hogy m âˆˆ MV FK(GY âˆ— ). Ez o e a o ellentmondÂ´ st jelent, hiszen a feltÂ´ telnek teljesÂ¨ lnie kell, azonban van olyan elem (m ), amely eleme a e u a bal oldalnak, de nem eleme a jobb oldalnak.

TetszË leges GY halmaz esetÂ´ n az MV FK(GY ) âˆª GY -t kÂ¨ nnyË elË allÂ´tani. SË t, amennyiben a gyao e o u oÂ´ Ä± o kori mintÂ´ kat APRIORI algoritmussal hatÂ´ rozzuk meg, akkor MV FK(GY ) elemei pontosan a ritka a a jelÂ¨ ltek lesznek (hiszen a jelÂ¨ lt minden rÂ´ sze gyakori). o o e NÂ´ zzÂ¨ nk egy pÂ´ ldÂ´ t Toivonen algoritmusÂ´ ra. Legyen a mintatÂ´ r a {A,B,C,D} hatvÂ´ nyhalmaza. A e u e a a e a kis rÂ´ szben az {A},{B},{C} elemhalmazok gyakoriak. Ekkor a minimÂ´ lis valÂ´ di felsË korlÂ´ t elemei e a o o a az {A,B},{A,C},{B,C},{D} halmazok. TehÂ´ t ennek a 7 elemhalmaznak fogjuk a tÂ´ mogatottsÂ´ gÂ´ t a a a a meghatÂ´ rozni a teljes adatbÂ´ zisban. Ha pÂ´ ldÂ´ ul az {A},{B},{C} {A,B} halmazokat talÂ´ ljuk gyakoria a e a a nak a teljes adatbÂ´ zisban, akkor a tÂ´ telbeli tartalmazÂ´ si relÂ´ ciÂ´ fennÂ´ ll, hiszen az {A},{B},{C},{A,B} a e a a o a

Â´ Â´ 5. FEJEZET. GYAKORI MINTAK KINYERESE

99

halmaz minimÂ´ lis valÂ´ di felsË korlÂ´ tai kÂ¨ zÂ¨ l mind szerepel a 7 jelÂ¨ lt kÂ¨ zÂ¨ tt. Nem mondhatÂ´ a o o a o u o o o o ez, ha {D}-rË l derÂ¨ l ki, hogy gyakori. Ekkor Toivonen algoritmusa jelenti, hogy elË fordulhat, o u o hogy nem biztos, hogy minden gyakori elemhalmazt megtalÂ´ lt. Az esetleg kimaradtak csak ( !) az a {A,D},{B,D},{C,D} halmazok lehetnek.

Tagadhatatlan, hogy a zÂ´ rt mintÂ´ kon alapulÂ´ memÂ´ riacsÂ¨ kkentÂ´ s egy szÂ´ p elmÂ´ leti eredmÂ´ ny. Ne a a o o o e e e e foglaljunk helyet a memÂ´ riÂ´ ban a gyakori, nem zÂ´ rt mintÂ´ knak, hiszen a zÂ´ rt, gyakori mintÂ´ kbÂ´ l az o a a a a a o osszes gyakori minta meghatÂ´ rozhatÂ´ . Â¨ a o Ez a technika ritkÂ´ n alkalmazhatÂ´ azon esetekben, amikor a bemenet sorozat formÂ´ jÂ´ ban adott, a a o aa Â´ mint azt mÂ´ r emlÂ´tettÂ¨ k, a tÂ´ mogatottsÂ´ got pedig egy illeszkedÂ´ si predikÂ´ tum alapjÂ´ n deï¬niÂ´ ljuk. Es, a a e a a a a Ä± u legtÂ¨ bbszÂ¨ r ez all fenn. o o Â´ Ennek oka, hogy gyakori mintÂ´ kat altalÂ´ ban nagy, zajokkal terhelt adatbÂ´ zisokban keresnek. Ilyen a Â´ a a adatbÂ´ zisban szinte az osszes elemhalmaz zÂ´ rt, Â´gy a mÂ´ dszerrel nem nyerÂ¨ nk semmit. Gondoljuk a Â¨ a Ä± o u meg, hogy ha egy adatbÂ´ zist ugy terhelÂ¨ nk zajjal, hogy vÂ´ letlenszerË en beszÂ´ runk egy-egy uj elemet, a Â´ u e u u Â´ akkor folyamatosan nÂ¨ vekszik az esÂ´ lye annak, hogy egy minta zÂ´ rt lesz. A nemzÂ´ rtsÂ´ g tehÂ´ t egy o e a a a a sÂ´ rÂ¨ lÂ´ kenyâ€ tulajdonsÂ´ g. TetszË leges nem zÂ´ rt m mintÂ´ t zÂ´ rttÂ´ tehetÂ¨ nk egyetlen olyan tranzakciÂ´ eue a o a a a a u o â€ hozzÂ´ adÂ´ sÂ´ val, amely illeszkedik m-re, de nem illeszkedik egyetlen olyan mintÂ´ ra sem, amelynek m a aa a valÂ´ di rÂ´ szmintÂ´ ja. o e a

5.5.5. A zÂ´ rt mintÂ´ k tÂ¨ rÂ´ kenysÂ´ geâ€ a a o e e â€

5.5.6. Dinamikus gyakori mintabÂ´ nyÂ´ szat a a
Nagy adatbÂ´ zisok esetÂ´ n a gyakori mintÂ´ k kinyerÂ´ se mÂ´ g a leggyorsabb algoritmusokat fela e a e e hasznÂ´ lva is lassÂ´ mË velet. Az adatbÂ´ zisok tÂ¨ bbsÂ´ gÂ´ ben a tÂ´ rolt adatok nem allandÂ´ ak, hanem a u u a o e e a Â´ o vÂ´ ltoznak : uj elemeket veszÂ¨ nk fel, egyeseket mÂ´ dosÂ´tunk, vagy tÂ¨ rlÂ¨ nk. Ha azt szeretnÂ´ nk, hogy a Â´ u o Ä± o u e a kinyert gyakori mintÂ´ k konzisztensek legyenek az adatbÂ´ zisban tÂ´ rolt adatokkal, akkor bizonyos a a a idË kÂ¨ zÂ¨ nkÂ´ nt a gyakori mintÂ´ k adatbÂ´ zisÂ´ t is frissÂ´teni kell. o o o e a a a Ä± A konzisztenciÂ´ t elÂ´ rhetjÂ¨ k ugy, hogy lefuttatjuk valamelyik ismert (APRIORI, Zaki stb.) algorita e u Â´ must minden mÂ´ dosÂ´tÂ´ s utÂ´ n. Ennek az a hÂ´ trÂ´ nya, hogy lassÂ´ , hiszen semmilyen eddig kinyert tudÂ´ st o Ä±a a a a u a nem hasznÂ´ l fel. SzÂ¨ ksÂ´ g van tehÂ´ t olyan algoritmusok kifejlesztÂ´ sÂ´ re [13, 35, 36, 124, 145, 166], ami a u e a ee felhasznÂ´ lja az adatbÂ´ zis elË zË allapotÂ´ ra vonatkozÂ´ informÂ´ ciÂ´ kat es Â´gy gyorsabban ad eredmÂ´ nyt, a a o oÂ´ a o a o Â´ Ä± e mint egy nullÂ´ rÂ´ l indulÂ´ , hagyomÂ´ nyos algoritmus. ao o a Itt most azt az esetet nÂ´ zzÂ¨ k, amikor csak bË vÂ´thetjÂ¨ k a bemenetet, de a leÂ´rt mÂ´ dszerek kÂ¨ nnyen e u o Ä± u Ä± o o altalÂ´ nosÂ´thatÂ´ k arra az esetre, amikor tÂ¨ rÂ¨ lhetÂ¨ nk is a bemenetbË l. Adott tehÂ´ t S bemeneti soroÂ´ a Ä± o oo u o a zat, amelyben ismerjÂ¨ k a gyakori mintÂ´ kat (GY S ) es azok tÂ´ mogatottsÂ´ gÂ´ t. Ezen kÂ´vÂ¨ l adott az uj u a Â´ a a a Ä± u Â´ S,S ) es azok bemeneti elemek sorozata S . A feladat a S, S -ben talÂ´ lhatÂ´ gyakori mintÂ´ k (GY a o a Â´ tÂ´ mogatottsÂ´ gÂ´ nak meghatÂ´ rozÂ´ sa. a a a a a FUP algoritmus A FUP (Fast Update) [35] a legegyszerË bb szabÂ´ ly- karbantartÂ´ algoritmus. TulajdonkÂ´ ppen nem u a o e mÂ´ s, mint az APRIORI algoritmus mÂ´ dosÂ´tÂ´ sa. a o Ä±a KÂ´ tfÂ´ le jelÂ¨ ltet kÂ¨ lÂ¨ nbÂ¨ ztetÂ¨ nk meg : az elsË csoportba azok a mintÂ´ k tartoznak, melyek az e e o uo o u o a eredeti adatbÂ´ zisban gyakoriak voltak, a mÂ´ sodikba azok, amelyek nem. NyilvÂ´ nvalÂ´ , hogy az uj a a a o Â´

