Morphing Images/Movie Production

421

24
Morphing Confocal Images and Digital Movie Production
Eric Hazen 1. Introduction Visualizing change over time is essential to understanding biological events such as embryogenesis and development. More and more specimens can be visualized in the living state due to improvements in confocal microscopy, and the development of novel probes such as the green fluorescent protein. However, it is still necessary to dissect and fix many tissues before staining with antibody probes, and viewing them with the confocal microscope. In this case, still images from different samples at different stages in development can be imaged. If enough of these images are collected, an animation could be created, simulating the actual process, although this would require a very large number of images, and this is not usually a practical option because of the number of animals required. Instead, images are collected from a few representative points along the developmental timeline and these static images, when arranged in order are used to build up a visual narrative of the actual process. Computer technology provides an alternative method for simulating change over time: a process called morphing, which was originally developed for the movie and advertising industries to create visual effects. Morphing is essentially a controlled fade of one image into another (1–3). The computer is given two images, a starting image and an ending image, and it calculates all of the intermediary images necessary to produce the desired effect. The appearance of motion is achieved by specifying motion paths from shapes in the first image to shapes in the second image. While the starting image fades into the ending image, the shapes appear to be stretched into one another. Because images from only a few selected time points are used, a morph can only be an approximation or hypothesis of the true motion. Because of these assumptions,
From: Methods in Molecular Biology, vol. 122: Confocal Microscopy Methods and Protocols Edited by: S. Paddock Humana Press Inc., Totowa, NJ

421

422

Hazen

morphing should be used as an instructional tool rather than a method for data analysis or quantification. Using confocal images, morphing allows a digital movie file to be created that simulates motion or change over time from one still image to another still image; the computer models the intermediary stages of development (4). This digital movie file can then be played directly from a computer, it can be recorded to videotape, put on a CD-ROM, viewed from the World Wide Web, or compiled into a longer digital movie sequence for presentation purposes in class or at meetings. Very few images need to be collected because the computer creates all of the intermediary frames. Moreover, the process is relatively quick and easy and does not require expensive equipment, although some familiarity with computer image processing and graphic and animation formats is necessary. The tools that are required for morphing are available for the Macintosh, PC, and SGI environments as well as most other computer platforms. However, for the purposes of this article, morphing using an Apple Macintosh will be described. These computers are inexpensive, easy to use, and common in research environments. The techniques described here work on any platform, although some details may differ depending on the software selected. For information on software available for other computer platforms, see Subheading 2.2.3. Movie clips relating to to this chapter can be found on the author’s website, http://www.academicis.org/is/multimedia 2. Materials 2.1. Hardware

2.1.1. The Computer Because morphing is a fairly graphic and processor intensive application, a relatively high-end system is preferred. A Power Macintosh is strongly suggested. Its superior processor power enables it to calculate the objects’ motion paths in a process called “rendering” much more quickly. The system used to create most of the morphs shown in this chapter was a Powermac 8500/120 with 80 MB of RAM, a 2 GB hard drive, 4 MB of VRAM and a 17-inch monitor capable of displaying 24-bit color at 1152 × 870 resolution. A 230 MB magneto-optical drive was used for temporary data backup and final data files were written to CD-ROM for archiving and distribution. 2.1.2. Random Access Memory (RAM) RAM requirements depend on the size of the images and the complexity of the shapes defined in the morph. 32 MB of RAM is needed, but 64 MB of RAM or more is recommended. Virtual memory can be used to compensate for inadequate RAM, but it will slow down the machine considerably.

Morphing Images/Movie Production 2.1.3. Hard Drive

423

The size of digital movie files is dependent upon their intended use. For example, files destined to be printed to videotape are very large, while those intended for viewing on the World Wide Web are small. Enough hard drive space must be available to store several copies of the movie, because several versions may need to be created. More detail on hardware requirements are covered in Notes 4.1–4.5.

2.1.4. Display Monitor
A large monitor that is capable of high resolutions is strongly recommended. Shapes must be drawn precisely and it is extremely advantageous to be able to zoom in on the image while still viewing a large portion of the image. At least 4MB of VRAM is recommended in the display card in order to display 24-bit color on the monitor at high resolution.

2.1.5. Archiving Data
Data files must be backed up for safety, and eventually, they must be removed to make room for the next project. There are many options for archiving data. Writable CD-ROM drives have become much more affordable. The media is inexpensive and durable and CD-ROM drives ship as standard equipment on most computers. Magneto-optical and removable magnetic media such as Sy-Quest and Iomega drives work well, although because of its low cost of media, portability and data stability, the CD-ROM is often the preferred method of image archiving. The hardware requirements described so far are sufficient to create morph movie files for the web. But playing directly from the computer for presentation purposes or recording to video may require additional hardware. Most Macs ship with multiple video out ports. Some have an additional VGA monitor port, whereas others have RCA or S-video out ports. With the right adaptor, these video out ports can be used to drive a standard video monitor or a video projector.

2.1.6. Digital Video Hardware
For recording digital movies to videotape, a digital video card is necessary. The AV Macs ship with a digital video card installed. Fairly good quality video can be produced with a standard AV mac. But for professional quality video, a third-party video card that specializes in video output is required, such as a TARGA or Radius card. Digital movie files destined for videotape have high resolutions (at least 640 × 480 pixels) and fast frame rates (approx 30 frames/s). The computer must be able to transport a large amount of digital video data in

424

Hazen

a short amount of time. These movie files are too large to be loaded into RAM; consequently, they must be spooled off of the hard drive. The standard Mac SCSI bus is incapable of transferring data fast enough to produce professional quality video. If professional quality output is desired, a SCSI accelerator card and an AV hard drive or hard drive array are also necessary. However, if professional quality is not absolutely necessary, a standard AV mac will do. Newer AV Powermacs such as the 8500 and 8600 are particularly good choices. They ship with better quality video circuitry than previous AV macs, their internal SCSI buses are twice as fast (10 MB/s) as the standard mac SCSI bus (5 MB/s), and if demands exceed their stock capabilities, they can be very easily upgraded. Some examples of video cards include, for the Macintosh
VideoVision, Radius Inc., Sunnyvale, CA TARGA 2000, Truevision Inc., Santa Clara, CA miroVIDEO, Miro Computer Products AG, Braunschweig, Germany

and for Windows
TARGA 2000, Truevision Inc., Santa Clara, CA DPS Spark, Digital Processing Systems, Markham, Ontario, Canada miroVIDEO, Miro Computer Products AG, Braunschweig, Germany Rainbow Runner Studio, Matrox, Dorval, Quebec, Canada

2.2. Software
There are several stages in the process of creating a digital movie file, of which morphing is only one. The first stage is image processing. Raw images that have been collected on a microscope or other image collecting device are resized, reformatted, and cleaned up to prepare them for morphing. For image editing functions such as resizing; rotating; cleaning up the background, and adjusting brightness, contrast, and color balance, Adobe Photoshop is the industry standard. However, until version 4, Photoshop did not support batch processing—the automation of image processing functions. There are several applications that specialize in batch processing. Debabelizer, from Equilibrium Software, a commercial utility that is available for Macintosh and Windows, is a powerful utility that contains a host of image processing and conversions functions. Although it does not contain as many features as Debabelizer, the shareware utility Graphic Converter will perform batch conversions between virtually every graphic format ever used and will also perform many simple functions such as color table conversion, resizing, and sharpening as batch processes (5). There are several morphing packages available for each of the major computer platforms. However, for the purposes of this chapter, we will be discussing Avid’s Elastic Reality. Elastic Reality is professional caliber software that

Morphing Images/Movie Production

425

is capable of producing high-quality effects and it is available for most major computer platforms. See Subheading 2.2.3. for a list of additional morphing software packages. The morph file created by the morphing software will be in form of a digital movie file. The most common format is QuickTime. The QuickTime digital video format is available on several platforms including Mac, Windows, and UNIX and it has been approved as an ISO standard. The movie file can be played back as it is, it can be modified by adding text or graphics, and it can be combined with other movie files to create a larger movie file. For the movie file to be played back, movie player software is needed. Apple’s QuickTime MoviePlayer application works well. There is a shareware QuickTime player called Peter’s Player that handles very large movie files slightly better than MoviePlayer does. For combining multiple files and adding titles, effects and sound, video editing software is required. Adobe Premiere is the industry standard. Avid’s Videoshop is not as powerful, but less expensive, and provides all the basic functions necessary for compiling digital movies.

2.2.1. Software Companies
Adobe Photoshop, Adobe Systems, San Jose, CA Adobe Premier, Adobe Systems, San Jose, CA Debabelizer, Equilibrium Software, Sausalito, CA Elastic Reality, Avid Technology, Inc., Tewksbury, MA Director, Macromedia, Inc., San Francisco, CA Media Cleaner Pro, Terran Interactive, Inc., San Jose, CA Norton Utilities, Symantec Corporation, Cupertino, CA

2.2.2. Alternative Video Editing Software
Macintosh
Media Cleaner Pro, Terran Interactive, Inc., San Jose, CA Videoshop, Strata, Inc., St. George, UT

Windows
MGI VideoWave, MGI Software Corp., Richmond Hill, Ontario L4B 1H8, Canada

2.2.3. Alternative Morphing Software
Macintosh
Gryphon Morph, Gryphon Software Corporation, http://www.gryphonsw.com/ Kai’s Power Goo, Metatools, Inc., http://www.metatools.com/goo/goo.html MovieFlo’, MetaFlo’, The Valis Group, http://www.valisgroup.com/

426
Windows

Hazen

Gryphon Morph, Gryphon Software Corporation, http://www.gryphonsw.com/ Kai’s Power Goo, Metatools, Inc., http://www.metatools.com/goo/goo.html MovieFlo’, MetaFlo’, The Valis Group, http://www.valisgroup.com/ WinImages, Black Belt Systems, http://www.intermarket.net/blackbelt/ sw_wi_dl.html Plastic Morph, Algobit Software (Shareware), http://www.algobit.com/morph/ morph.html

3. Methods 3.1. Step 1: Planning the Morph Project Based on Available Hardware Resources and End-Product Goals Before any raw images are modified, it is essential to plan out the project and decide on frame size (the size of each image in the animation measured in pixels, also called resolution) and frame rate [the rate at which images flash on the screen, measured in frames /s (fps)]. Although images and animations can be scaled down in resolution and in frame rate, it is not advisable to scale up. Image data is lost in scaling down and motion data is lost in decreasing frame rate (frames are dropped). These lost data are irrecoverable. It is better to make a movie which is large in frame size and frame rate and scale down later than to make it too small. You can’t regain resolution once it is lost. Being aware of the requirements for the project from the beginning can save a significant amount of time. Image resolution and frame rate values are dependent upon the projected use of the morph and the hardware resources available. It is beyond the scope of this chapter to discuss possibilities in depth. Only general guidelines can be given. See Notes 1–5.

3.2. Step 2: Preprocessing the Images in Photoshop
For a brief discussion of image formats see Note 6, and for more information on image processing, refer to these sources:
The MIT 15.566 Digital Imaging Resource Homepage: http://web.mit.edu/ beblack/www/digim.htm The Kodak Digital Learning Center: http://www.kodak.com/daiHome/DLC/ Digital Image Center of the University of Virginia Library: http:// www.lib.virginia.edu/dic/info/webinfo.html

3.2.1. Rotating the Images
The first process applied to images to prepare them for morphing is often rotating. For the morph to appear realistic, the two images must be oriented properly in relation to one another. There are a few ways to rotate an image. If

Morphing Images/Movie Production

427

possible, it is best to either flip or rotate by 90° units. Both functions simply remap each pixel to a different location on the image; there is no loss of data in this operation. Finer degrees of rotation involve recalculating each pixel in the image which results in data loss. Photoshop has excellent algorithms for calculating rotations, but nonetheless, for optimal image quality the number of fine rotations should be kept to a minimum, preferably one. Photoshop versions 3 and above offer an excellent way to easily perform image rotation and accurately using layers. Select one of the images and copy it. Then go to the other image and, in the layers palette, choose “New Layer.” Copy the first image into the new layer. The opacity of the second layer can be adjusted using the opacity slider, allowing both images to be visible at the same time. The images can then be independently rotated and compared to one another immediately. When the images are in register, the second layer is copied and pasted into a new window and saved as a new image.

3.2.2. Resizing the Images
After rotating, the images may need to be resized. Subjectively, the morph will lack realism if the images are not the proper size relative to each other. From a technical standpoint, the resolution of the two images being morphed must be equal in order for the morph software to process them. If they are not, the software will usually resize them for you to make their resolutions equivalent (and distort the images in the process). Because it is preferable to have control over resizing, it is recommended to do it first before importing them into the morph software. The resolution of the final movie must be decided upon here so that the images can be sized to match that resolution. There are two ways to resize images. The borders can be changed leaving the center of the image unchanged, or the image can be scaled. The first method involves removing pixels from around the edges if the image is being made smaller, or adding pixels around the edges if the image is being made larger. The image data in the center remain unchanged. It is accomplished by either selecting a section from the image and “cropping” it, or, to make the image bigger, the entire image is selected, copied, and pasted into another image of the desired resolution and background color. The second method involves recalculating all the pixels in the image and recreating a new image of a different resolution. This operation results in a modification of image data across the entire image. It is accomplished by selecting “Image Size” from the “Image” menu and specifying a new size for the image. The reason care is taken to explain these two different resizing methods separately is because care should be taken in using them. In most cases, the first involves the least amount of image data loss and should be used whenever possible. The second method should be used sparingly because every time the

428

Hazen

image is scaled more data will be lost and eventually, the image will be unusable. It is best to scale an image only once. If an image is scaled improperly, it is best to undo the scale and redo it to avoid scaling more than once. It is better to maintain the image’s original aspect ratio when scaling it. Photoshop has excellent algorithms for recalculating an image at a different aspect ratio, but the image will look best if its aspect ratio remains unchanged.

3.2.3. Cleaning Up the Image
The next step in preparing the images is often referred to as “cleaning up.” In this step, the background of the images are made identical, anything contained in the images that is unwanted is removed, and anything that is desired is added. There are two reasons for cleaning up the background of images. Because morphing is used as an instructional tool and not a data analysis method, anything that is not directly involved with the morph should be removed because it will move and stretch, distracting attention from the focus of the morph. Second, the movie file will compress more efficiently if the background is a solid color. There are many ways of cleaning up the background. One simple and effective method is to use the paintbrush tool to paint over unwanted features in the images. Once the images are rotated, resized, and cleaned up, the finishing touches can be put on them. The brightness, contrast, sharpness, and color are adjusted if necessary (6).

3.3. Step 3: Setting up the Morph Project
Avid’s Elastic Reality runs on most common hardware platforms and produces excellent results, but regardless of the software used, the principles are the same. See Subheading 2.2.3. for information about other available morphing software. An example of a morph used during a transition in a video on evolution demonstrates the key concepts in creating any morph. The morph took about 6 h to create. Rendering time on a Powermac 8500 was only about a minute.

3.3.1. Preprocessing the Images
First, the images were brought into Photoshop and resized so that the organism in each image were approximately the same length. Image B was cleaned up and cropped so that each image had the same size background. They were then copied and pasted into a 640 × 480 pixel black background in order to create images of the desired resolution while keeping the aspect ratio of the original image. If the images were simply scaled to 640 × 480 pixels, they would appear distorted. Image A was originally blue, but it was changed to brown by adjusting color levels in Photoshop to make a visually smoother transition.

Morphing Images/Movie Production 3.3.2. Importing Images Into Elastic Reality

429

The next step was to import the images into Elastic Reality and begin defining shapes (Figs. 1 and 2). Elastic Reality uses Beziere curves to specify shapes. The resolution of the correspondence lines can be manipulated to increase the accuracy of the shape mapping. In order to define the shapes accurately and avoid overlap (Elastic Reality does not allow overlapping shapes), the image must be magnified many times and the resolution of the correspondence lines must be very high. When the shapes in Image A move to become the Image B shapes, they take everything in their vicinity with them, almost as if the entire image is made of rubber and it is being stretched and squished. In most cases this is a desired effect because it makes the transition appear more natural, but sometimes it is unwanted. This effect can be prevented by specifying shapes to act as boundaries. It is often impossible to set up all the shapes perfectly before rendering the morph although this does not usually present problems. Rendering times for a typical morph on a Powermac are only a few minutes. The morph can be rendered and viewed and shapes and correspondence lines can be added and adjusted until the desired look is achieved (Figs. 1 and 2).

3.3.3. Rendering the Morph
When all the shapes have been defined and joined and the correspondence lines have been adjusted, a movie file can be created. The process is called rendering. It involves calculating the movement from Image A to Image B and creating all the images that make up the movie. Parameters such as frame rate, total number of frames, image size and compression format must be specified. Rendering usually takes a few minutes after which the movie file can be played back. Figures 1D and 2D show montages of rendered morphs.

3.3.4. Post-Processing the Movie Files
Post-processing is often as important and time-consuming as preprocessing. It is not absolutely necessary—the morph movie will play on its own, but in order to give it a professional, polished look or to prepare it for a special application, it must be processed further. Post-processing can involve many steps including adding titles and transitions to the movie file, incorporating it into a larger movie, recompressing it at a smaller resolution, and/or outputting it to videotape, CD-ROM or onto the web. Titles screens and credit screens can be added to a movie file without expensive software. One crude method for adding a title screen at the beginning or credits at the end of the movie file is as follows: Render the morph as a series of numbered PICT files (or some other file format, but PICT works best on

430

430 Hazen

Fig. 1. Morphing between two confocal images. Drosophila second instar wing imaginal disc (A) morphed into a third instar wing imaginal disc (B). The motion paths from A to B are drawn in (C), and the resulting morphed sequence in (D). The sequence demonstrates the growth of the wing disk and the expression of the apterous gene (images courtesy of Jim Williams and Steve Paddock).

Morphing Images/Movie Production

431

431

432

432 Hazen

Fig. 2. Morphing between a confocal image and an image from a flat bed scanner. A butterfly fifth instar hind wing imaginal disc (A) is morphed into the adult hind wing of the butterfly Bicyclus sp. (B) with the motion paths shown in (C), and the resulting morphed sequence in (D). The morph demonstrates the development of the wing and the relationship between distal-less expression in the developing wing and the position of the eyespots on the mature wing. (Images courtesy of Julie Gates.)

Morphing Images/Movie Production

433

Macintoshes). It is important not to start the sequence at 1 if you want to add a title in the beginning because the title screen will occupy the first several images. The number of copies of the title screen that will be needed is determined by multiplying the number of frames per second of the movie by how many seconds the title is to appear. For example, if the movie is 10 fps and the title is to be visible for 3 s, then 30 copies of the title screen are needed. The images will all be named something like “Morph0001.PICT” with the number corresponding to their sequence in the morph. Next, create a title screen in any drawing or painting program such as Photoshop, making sure that it is the same resolution and color depth as the movie. Name the files the same as the movie files with the same number of digits. If they are intended to go before the morph, make the numbers smaller, if they are intended to go after the morph, make the numbers larger. Make as many copies of the image as necessary. Finally, use a software utility to compile all of the numbered images into a movie making sure to correctly specify the frame rate (or frame duration), compression algorithm and anything else the utility requires. On the Macintosh, examples of such utilities are Apple’s “QuickTime Converter” (Freeware) and “Movie Conversion” (Shareware). Adobe Premiere can also compile PICT files into a movie, but it is easier with one of the movie converter programs. The previous technique for adding a title and/or credit screen to a movie is given for two reasons: to illustrate the basic process involved in editing digital movie files, and to show that it can be done without expensive software. There are software products available, however, that make digital movie editing faster and easier. An excellent example is Adobe Premiere, and its more sophisticated cousin Adobe After Effects, which are available for the Macintosh and the Windows platforms, and have become the industry standard in digital movie compilation (Fig. 3). There are other software products available that vary in terms of cost and number of features. Refer to Subheading 2.2.2. for a short list of alternative software products available for Windows and Macintosh.

3.3.5. Creating the Movie File
After the movie has been finalized, and all of the various title screens, credits screens, and everything else that will be included in the movie is ready, the final movie file can be rendered. Characteristics of the movie such as frame rate, compression type, color depth, and frame size have been discussed in the section on planning the morph project based on available hardware resources and end-product goals. These characteristics can either be preserved here or modified to use the movie for another purpose. For example, suppose a movie file has been created that is intended to be recorded onto videotape. The morph was created at 640 × 480 resolution and 30 frames/s. The final movie should be compiled at these same settings using a compressor that yields high

434

434 Hazen

Fig. 3. Compiling a movie of Drosophila gastrulation using Adobe Premiere. It is a simple example of a morph movie with a fade to black at the beginning and at the end. The movie project consists of four files: a plain black image (called “Black 768 × 512,” shown twice because it is used twice in the movie), the first image of the movie (called “first frame”), the last image of the movie (called “last frame”), and the morph movie itself (called SNA1.morph). The files that make up the movie (referred to by Premiere as “clips”) are shown in the “Project” window. The “Construction Window” is a sort of storyboard or timeline that shows how the movie goes together. Clips can be placed into the Construction Window in any order desired. Transitions can be placed between clips to make them interact with each other in interesting ways. This example uses a Cross Dissolve to create a simple fade. Clips can also be modified in many other interesting ways. Transparency can be manipulated to combine multiple clips, filters can be applied, motion can be specified, frame rate and aspect ratio can be adjusted, and many other operations can be performed. For the ambitious artist, Premiere contains an abundance of powerful features, but for compiling a series of clips and adding some simple transitions, other, less expensive programs are more than adequate. (Images courtesy of Scott Weatherbee.)

Morphing Images/Movie Production

435

image quality such as JPEG or Animation. But if, perhaps, the movie is also intended to be included on a web site, the movie can be recompiled at a lower resolution and a lower frame rate using a compressor that produces a small file size such as Cinepak. If the original morph file is created at a high resolution and frame rate, there will be room to experiment with different settings to find out what will work best for the intended purpose. Also see Notes 6–9. 4. Notes
1. As far as digital video is concerned, bigger is better. Data rates should be as high as available hardware permits. A higher data rate generally translates into better quality video. The size of a movie file is determined by five factors: image resolution, frame rate, color depth, length of the movie (or total number of frames), and compression. Typical resolutions are 640 × 480 pixels for NTSC video (recommended for videotape), 720 × 486 for NTSC 601 and 512 × 768 for PAL. Frame rates are typically 30 fps for NTSC and 25 fps for PAL. To calculate the size of a segment of video, multiply the number of pixels in a frame by the number of bits per pixel by the number of frames per second by the length of the segment in seconds. For example, a segment of NTSC video at 640 × 480 pixels in 24-bit color at 30 fps would take up 27 MB of hard drive space per second of video. Not only would this require gigabytes upon gigabytes of hard drive space for a few minutes of video, but it would also require the computer to be capable of streaming 27 MB of data from the hard drive to the video card every second. Very few computers are capable of these things. Therefore, shortcuts must be taken. One of the most useful shortcuts is compression. Compression involves crunching down the image data to make the file smaller. Unfortunately, there is a trade-off for decreased file size and that is image quality. Some compression formats (or codecs) require more processor power to compress and/or decompress than others. JPEG is a very popular codec because of its excellent combination of image quality and compression ratio; however, it requires an unusually large amount of processor power to compress and decompress it. Usually, a special video board is required that handles the decompression, freeing the computer’s CPU to perform other tasks. High-end video boards usually have one proprietary compression format that they are very good at decompressing and playing (often it is a form of JPEG). The best quality video is obtained with these specialized boards. QuickTime version 3.0 offers better compression algorithms that allow higher quality video at higher compression rates. This may change the current preference for JPEG and allow much better quality video to be played on computers without expensive, high end video boards. Compression is not the only short cut that can be used to decrease file size. Any of the five previously mentioned factors that determine movie file size can be adjusted. The only advice that can be given here is to try different settings and see what looks the best and will play smoothly on your system.

436

Hazen
It is beyond the scope of this text to discuss all data rate issues adequately enough to determine whether or not any given system is capable of performing a given video application. The actual data rate that is achieved on a system is dependent on many factors. However, the two most important components that determine data rate on a machine are the I/O bus (on Macs it is usually SCSI, on PC’s it is usually IDE) and the video card. The I/O bus is what the hard drive is connected to. The hard drive (or hard drives) is extremely important when doing digital video. Because data rate is defined in terms of megabytes per second, obviously, movie files with high data rates will be very large. A large amount of hard drive space is absolutely necessary. It is difficult to do any serious work with a hard drive any smaller than 2 GB. If the system has only one hard drive, it may be best to partition the drive with a large space that will be devoted to digital video work. This allows for isolation and containment of data so that drive errors can be fixed and the drive can be defragmented without disturbing the other files on the drive. The speed (or data transfer rate) of the I/O bus and hard drive combination is equally important. The faster the drive is, the better. Unless there is enough RAM to load the entire movie file into memory (which is rarely the case), the movie will have to be spooled off of the hard drive. The best solution is a fast/wide SCSI bus and an array of fast/wide hard drives. With this setup, data throughputs of around 15 MB/s can be achieved. But it is no longer necessary to combine multiple hard drives into an array to obtain adequate data throughput. Hard drives keep getting faster and faster. Some single drives can achieve sustained data throughput of 10 MB/s or more. If 10 MB/s or less is enough, a single drive is adequate and much cheaper. If the additional speed of a SCSI accelerator card is desired, it is recommended to buy a “bus mastering” card. A bus mastering card is capable of exchanging data directly with the video card, bypassing the computer’s CPU. To record digital video to tape, a special video card that is able to convert the computer’s video signal to an NTSC or PAL signal and send it out to a video input device is needed. AV Macintoshes (including the Powermac 8500) come standard with video in and out capabilities. VHS-quality (non-broadcast) video can be achieved with a standard AV mac. If the quality achievable by the standard AV Powermac is not enough, a video card that provides hardware acceleration is necessary. Essentially, the video card contains a processor that does all the calculations necessary to compress and decompress the video data, thus freeing the computer’s CPU to attend to other tasks. The best quality video is achieved with these cards. Refer to Subheading 2.1.6. for a list of video cards available for each of the major computer platforms. To put all of this information into perspective, here are some examples of digital video systems that the author has experience in working with: Macintosh Digital Video Workstation 1: Type: Apple Power Macintosh 8500 Processor: PowerPC 604, 120 MHz RAM: 80 MB

Morphing Images/Movie Production

437

VRAM: 4 MB I/O buses: Apple fast internal 10 MB/s, Apple external 5 MB/s Hard drives: 2 GB Internal SCSI HD Other drives: 4X Internal CD-ROM, 230 MB External Magneto Optical Video card: Apple Built-In Monitors: AppleVision 17 inch, Panasonic TV monitor The Powermac 8500 has good quality video in and out circuitry and a fast (10 MB/s peak) internal SCSI bus. The PowerPC 604 processor is excellent for rendering morphs. The system has enough RAM to render large models and work with very large images. The Magneto Optical drive makes backing up data easy. The 4 MB of VRAM allows two monitors to be connected. The main weaknesses of this system is the video card, the lack of hard drive space, and the speed of the I/O bus. The Apple display card does not provide hardware acceleration for movie playing. The best quality video is achieved with cards that do provide hardware acceleration. There is not enough hard drive space to store all of the data files necessary to create a movie of a few minutes in length. Files had to be copied to Magneto-Optical and deleted from the hard drive often to free up space. The internal SCSI bus is faster than a standard SCSI bus, but it is not fast enough for professional quality digital video. Macintosh Digital Video Workstation 2: Type: Apple Power Macintosh 8100 Processor: PowerPC 601, 110 MHz RAM: 64 MB VRAM: 2 MB/4 MB* I/O buses: Apple 5 MB/s, ATTO Silicon Express fast/wide 20 MB/s Hard drives: 2GB Internal SCSI, 4.3GB Quantum Atlas External Fast/ Wide SCSI Other drives: 2X Internal CD-ROM, External Iomega Zip Drive Video card: Apple Built-In, TARGA 2000 Pro NuBus Monitors: Apple Multi-Scan 17 inch, Sony TV monitor
*The Apple Built-in graphics card had 2 MB of VRAM installed and the TARGA card had 4 MB of VRAM.

The PowerPC 601 processor, although not as powerful as the 604, is good for rendering morphs. The amount of RAM is adequate for manipulating large graphics files and rendering large morphs, although more RAM would be helpful. The main strengths of this system is the TARGA 2000 Pro video card and the ATTO Silicon Express SCSI accelerator card. The TARGA board provides hardware acceleration for digitizing and playback. The ATTO SCSI accelerator is a Bus Mastering card which means that it will transfer data directly to and from the TARGA card, bypassing the computer’s CPU. The hard drive connected to the ATTO SCSI accelerator card is a Quantum Atlas 4.3 GB AV hard drive. This system can sustain video data throughput of 10 MB/s. If an array of multiple AV hard drives was connected, 15 MB/s data rates could be achieved. But a rate of 10 MB/s allows very large video files to be played smoothly resulting in high quality video.

438

Hazen

2. Generally, the same issues involved in recording to videotape also apply to presenting a movie directly from the computer. In both cases the goal is to get the best looking movie to play on a given machine as possible. The only difference is, rather than outputting to a video recording device, the signal is outputted to a video display source such as a large monitor or an overhead projector. 3. If the movie file is destined for CD-ROM, data rate is the main concern. Generally, CD-ROM’s have a slower transfer rate than hard drives do. A 2x CD-ROM drive, no longer the standard but still in common use, will transfer data at a maximum rate of 300 KB/s (kps). A 4× CD-ROM will transfer data at 600 kps, a 6× at 900 kps, and so on. By comparison, most SCSI hard drives will transfer data at a rate of at least 1000 kps or 1 MB/s. Movies played directly from a CD-ROM are usually small in frame size (240 × 180 or 320 × 240), slow in frame rate (10 or 12 fps) and compressed in a format that will result in extremely small data rates even at the expense of image quality. An excellent compressor for this purpose is QuickTime’s Cinepak compression. Using JPEG compression set to very high compression (very low quality) also works well, but may not play back as smoothly. Another good way to get data rates down is to convert the images to 8bit color or greyscale, if possible. This will result in a file that is approximately one third the size of the 24-bit color version of the file. 4. Issues involved in preparing a movie for use on the web are similar to those of CD-ROM. Files should be as small as possible. No one will want to wait for 3 h while a 10 MB movie file downloads. The main difference between the web and CD-ROM is that for CD-ROM, data rate is more important than total file size, whereas for the web the main concern is total file size and not data rate. There is no established maximum size that files on the web should be. It depends on many factors such as speed of the browsers’ connection and how interested in downloading the movie they will be. Movie files on the web usually range from a couple hundred kilobytes to several megabytes. The best thing to do is create the movie file larger (and better quality) than necessary and scale down to the desired file size, recompiling the movie with either a smaller image size or higher compression. QuickTime version 3.0 offers streaming video and better compression algorithms that allow higher quality video at higher compression rates. This will be especially useful for serving animation files on the web. 5. If a third party, or non-Apple, digital video card is used, it is recommended to read the instructions that came with it very carefully. They should contain detailed instructions on how to configure the system, what hardware works with it and what doesn’t, and how to connect the digital video card to the the computer, the hard drive array (if present) and all the external video devices. Special digital video cards often require strange little tweaks that have to be done to the system in order to obtain optimal performance. The best quality will be achieved only if these strange little tweaks are performed. Usually, video cards come with special programs for playing movie files. These special programs are optimized for their corresponding video card and will not work well (if at all) with other cards. When recording the movie to videotape, it is best to use the special optimized movie

Morphing Images/Movie Production

439

player. Each program works slightly different. Read the instructions that came with the video card to find out exactly how to use the special movie player software. AV Macintoshes, unfortunately, do not ship with detailed instructions on how to obtain the best quality video. Here are some suggestions: The manual that came with the computer should explain how to connect the computer to the VCR. There are several types of video cable. All AV macs have composite video ports and some have S-Video. S-Video produces a better quality signal because the luminance (greyscale information) and chrominance (color information) are carried on separate wires. If the computer and the VCR both support S-video, it is best to use it. Connect the video-out on the computer to the video-in on the VCR. There are several tweaks that can be made to a system in order to maximize the level of quality it is capable of producing. Defragmenting the hard drive that contains the movie file increases the rate at which it can be read by eliminating the need to search all over the drive to find each part of the file. There are several defragmenting utilities available. One example is Norton SpeedDisk contained in Symantec’s Norton Utilities package. Another performance enhancing trick is to minimize the number of active system extensions. Usually, only the QuickTime extension is necessary. All other extensions take up valuable RAM and processor time without contributing to the output of the video. Deactivate all unnecessary extensions in the Extensions Manager and reboot the computer. Make sure there are no applications running other than the movie player application that is playing the movie. Turn off all networking. Give the movie player application as much RAM as possible. This allows the movie player to buffer movie data which results in smoother playback. Set the monitor’s resolution to 640 × 480 if recording in NTSC and 512 × 768 if recording in PAL. If Apple’s MoviePlayer is being used, choose “Present Movie” to play the movie. This option hides the Macintosh desktop and allows a delay to be set in the beginning and end of the movie. A shareware movie player called PetersPlayer also provides a presentation option and has slightly better memory buffering algorithms which allow it to play large movie files slightly smoother. The final step is to put a tape in the VCR, play the movie and press the record button. 6. There are two basic types of image formats: lossless and lossy. Lossless formats retain all image data, so they can be opened and resaved an infinite number of times without image degradation. Examples are TIFF, GIF (if it is an 8-bit image), uncompressed PICT, and Photoshop’s proprietary format. The TIFF format provides a form of compression called LZW, but it is a lossless compression format. GIF is a lossless format that provides compression, but it is limited to 8-bit images. Twenty-four-bit color images usually should not be converted to GIF or a large amount of data will be lost. Lossy formats throw out image data in order to achieve smaller file sizes. Examples are JPEG and compressed PICT (which uses a form of JPEG compression). It is tempting to use these formats to save images because the files are much smaller, but each time the image is modified and resaved, more image data is lost. Eventually, there will be so many compression artifacts that the image will be unusable. It is a good idea to keep a master

440

Hazen

copy of any images that will be used for multiple applications in a lossless format. The number of times an image is saved in a lossy format should be kept to a minimum, preferable one. 7. Presenting a movie directly from the computer is similar to recording to videotape. The difference is instead of connecting the computer to a VCR, the movie is simply played on the computer’s monitor. A larger monitor, a TV or a video projector can be connected in addition to the standard monitor using the video out ports. The same issues regarding defragmentation, minimal extensions, and RAM buffering apply here. 8. Putting a digital movie file onto a CD-ROM is simply a matter of writing it to a CD-ROM using a special CD-ROM writing drive. Issues involving the playback of a movie from a CD-ROM are covered in the previous section on planning the morph project based on available hardware resources and end-product goals. The movie can be rendered in the morphing program at the desired resolution and frame rate, or it can be rendered at a high resolution and frame rate and then imported into a video editing program such as Premiere and recompiled at a lower resolution and frame rate. There are special CD-ROM authoring software packages designed to aid in creating fancy, interactive, multimedia CD-ROM’s with pictures, sound, movies, and a snappy, custom user interface. Examples of CDROM authoring software packages are Macromedia’s Director, and Terran Interactive’s Media Cleaner Pro. 9. Access to a web server is necessary before any files can be put on the web. There are many ways to gain access to a web server, the details of which will not be discussed here. The most important issues involved in putting movies on the web are file size and file format. As mentioned previously, files should be as small as possible. The movie file can be rendered in the morphing program at a low resolution and frame rate, or it can be rendered at a high resolution and frame rate and then imported into a video editing program such as Premiere and recompiled at a lower resolution and frame rate. The issue of file formats is complicated. The web is platform-neutral. There are people browsing the web using every type of computer, every version of operating system and running every version of every software product available. It is essential to think in terms of compatibility and standards. If a movie is put onto the web in SGIs proprietary movie format, only people using SGIs will be able to view the movie. This may or may not be a problem. Usually it is. The most common movie formats found on the web are Apple’s QuickTime format, MPEG, and Microsoft’s AVI. Virtually anyone with an Apple computer, anyone with a recent version of Netscape Navigator or Microsoft Internet Explorer, most people running Microsoft Windows, and anyone with an SGI who isn’t running ancient operating system software will be able to view QuickTime movie files. MPEG is a platform-neutral format. Anyone with an MPEG player application will be able to view an MPEG movie. The AVI format is especially popular with Windows users. If Windows users are the targeted audience, AVI may be the best choice. There are several applications designed to convert movie files from one format to another. The shareware util-

Morphing Images/Movie Production

441

ity, Sparkle, is an MPEG player for the Macintosh and is also able to convert QuickTime movie files to MPEG. VfW Utilities are a set of utilities that allow QuickTime movies to be converted to AVI format and vice versa. For more information on creating animations for the web, refer to Lance Ladic’s “Making Animations for the Web” at http://www.cs.ubc.ca/spider/ladic/animate.html.

References
1. Beier, T. and Neely, S. (1997) Feature-based image metamorphosis. URL: http:// www.hammerhead.com/thad/morph.html 2. Palma, D. J. (1996) The Palma Morphing Paper URL: http://www.norcosoft.com/ ncs/palma.html 3. Goh Han Tiong, A. (1997) Technology review paper–Morphing http:// www.fit.qut.edu.au/Student/ITB235/papers/Moving/n2039389/morphing.html 4. Paddock, S. W., DeVries, P. J., Buth, E., and Carroll, S. B. (1994) Morphing: a new graphics tool for animating confocal images. BioTechniques 16, 448–452. 5. Russ J. (1994) Image Processing Handbook, 2nd ed., CRC Press, Boca Raton, FL. 6. Paddock, S. W., Hazen, E. J., and DeVries, P. J. (1997) Methods and applications of three colour confocal imaging. BioTechniques 22, 120–126.

